(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __defProps = Object.defineProperties;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __spreadValues = (a, b) => {
    for (var prop in b || (b = {}))
      if (__hasOwnProp.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b)) {
        if (__propIsEnum.call(b, prop))
          __defNormalProp(a, prop, b[prop]);
      }
    return a;
  };
  var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
  var __objRest = (source, exclude) => {
    var target = {};
    for (var prop in source)
      if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
        target[prop] = source[prop];
    if (source != null && __getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(source)) {
        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
          target[prop] = source[prop];
      }
    return target;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));

  // vendor/topbar.js
  var require_topbar = __commonJS({
    "vendor/topbar.js"(exports, module) {
      (function(window2, document2) {
        "use strict";
        (function() {
          var lastTime = 0;
          var vendors = ["ms", "moz", "webkit", "o"];
          for (var x = 0; x < vendors.length && !window2.requestAnimationFrame; ++x) {
            window2.requestAnimationFrame = window2[vendors[x] + "RequestAnimationFrame"];
            window2.cancelAnimationFrame = window2[vendors[x] + "CancelAnimationFrame"] || window2[vendors[x] + "CancelRequestAnimationFrame"];
          }
          if (!window2.requestAnimationFrame)
            window2.requestAnimationFrame = function(callback, element) {
              var currTime = (/* @__PURE__ */ new Date()).getTime();
              var timeToCall = Math.max(0, 16 - (currTime - lastTime));
              var id = window2.setTimeout(function() {
                callback(currTime + timeToCall);
              }, timeToCall);
              lastTime = currTime + timeToCall;
              return id;
            };
          if (!window2.cancelAnimationFrame)
            window2.cancelAnimationFrame = function(id) {
              clearTimeout(id);
            };
        })();
        var canvas, currentProgress, showing, progressTimerId = null, fadeTimerId = null, delayTimerId = null, addEvent = function(elem, type, handler) {
          if (elem.addEventListener)
            elem.addEventListener(type, handler, false);
          else if (elem.attachEvent)
            elem.attachEvent("on" + type, handler);
          else
            elem["on" + type] = handler;
        }, options = {
          autoRun: true,
          barThickness: 3,
          barColors: {
            0: "rgba(26,  188, 156, .9)",
            ".25": "rgba(52,  152, 219, .9)",
            ".50": "rgba(241, 196, 15,  .9)",
            ".75": "rgba(230, 126, 34,  .9)",
            "1.0": "rgba(211, 84,  0,   .9)"
          },
          shadowBlur: 10,
          shadowColor: "rgba(0,   0,   0,   .6)",
          className: null
        }, repaint = function() {
          canvas.width = window2.innerWidth;
          canvas.height = options.barThickness * 5;
          var ctx = canvas.getContext("2d");
          ctx.shadowBlur = options.shadowBlur;
          ctx.shadowColor = options.shadowColor;
          var lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
          for (var stop in options.barColors)
            lineGradient.addColorStop(stop, options.barColors[stop]);
          ctx.lineWidth = options.barThickness;
          ctx.beginPath();
          ctx.moveTo(0, options.barThickness / 2);
          ctx.lineTo(
            Math.ceil(currentProgress * canvas.width),
            options.barThickness / 2
          );
          ctx.strokeStyle = lineGradient;
          ctx.stroke();
        }, createCanvas = function() {
          canvas = document2.createElement("canvas");
          var style = canvas.style;
          style.position = "fixed";
          style.top = style.left = style.right = style.margin = style.padding = 0;
          style.zIndex = 100001;
          style.display = "none";
          if (options.className)
            canvas.classList.add(options.className);
          document2.body.appendChild(canvas);
          addEvent(window2, "resize", repaint);
        }, topbar2 = {
          config: function(opts) {
            for (var key in opts)
              if (options.hasOwnProperty(key))
                options[key] = opts[key];
          },
          show: function(delay) {
            if (showing)
              return;
            if (delay) {
              if (delayTimerId)
                return;
              delayTimerId = setTimeout(() => topbar2.show(), delay);
            } else {
              showing = true;
              if (fadeTimerId !== null)
                window2.cancelAnimationFrame(fadeTimerId);
              if (!canvas)
                createCanvas();
              canvas.style.opacity = 1;
              canvas.style.display = "block";
              topbar2.progress(0);
              if (options.autoRun) {
                (function loop() {
                  progressTimerId = window2.requestAnimationFrame(loop);
                  topbar2.progress(
                    "+" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2)
                  );
                })();
              }
            }
          },
          progress: function(to) {
            if (typeof to === "undefined")
              return currentProgress;
            if (typeof to === "string") {
              to = (to.indexOf("+") >= 0 || to.indexOf("-") >= 0 ? currentProgress : 0) + parseFloat(to);
            }
            currentProgress = to > 1 ? 1 : to;
            repaint();
            return currentProgress;
          },
          hide: function() {
            clearTimeout(delayTimerId);
            delayTimerId = null;
            if (!showing)
              return;
            showing = false;
            if (progressTimerId != null) {
              window2.cancelAnimationFrame(progressTimerId);
              progressTimerId = null;
            }
            (function loop() {
              if (topbar2.progress("+.1") >= 1) {
                canvas.style.opacity -= 0.05;
                if (canvas.style.opacity <= 0.05) {
                  canvas.style.display = "none";
                  fadeTimerId = null;
                  return;
                }
              }
              fadeTimerId = window2.requestAnimationFrame(loop);
            })();
          }
        };
        if (typeof module === "object" && typeof module.exports === "object") {
          module.exports = topbar2;
        } else if (typeof define === "function" && define.amd) {
          define(function() {
            return topbar2;
          });
        } else {
          this.topbar = topbar2;
        }
      }).call(exports, window, document);
    }
  });

  // ../deps/phoenix_html/priv/static/phoenix_html.js
  (function() {
    var PolyfillEvent = eventConstructor();
    function eventConstructor() {
      if (typeof window.CustomEvent === "function")
        return window.CustomEvent;
      function CustomEvent2(event, params) {
        params = params || { bubbles: false, cancelable: false, detail: void 0 };
        var evt = document.createEvent("CustomEvent");
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
      }
      CustomEvent2.prototype = window.Event.prototype;
      return CustomEvent2;
    }
    function buildHiddenInput(name, value) {
      var input = document.createElement("input");
      input.type = "hidden";
      input.name = name;
      input.value = value;
      return input;
    }
    function handleClick(element, targetModifierKey) {
      var to = element.getAttribute("data-to"), method = buildHiddenInput("_method", element.getAttribute("data-method")), csrf = buildHiddenInput("_csrf_token", element.getAttribute("data-csrf")), form = document.createElement("form"), submit = document.createElement("input"), target = element.getAttribute("target");
      form.method = element.getAttribute("data-method") === "get" ? "get" : "post";
      form.action = to;
      form.style.display = "none";
      if (target)
        form.target = target;
      else if (targetModifierKey)
        form.target = "_blank";
      form.appendChild(csrf);
      form.appendChild(method);
      document.body.appendChild(form);
      submit.type = "submit";
      form.appendChild(submit);
      submit.click();
    }
    window.addEventListener("click", function(e) {
      var element = e.target;
      if (e.defaultPrevented)
        return;
      while (element && element.getAttribute) {
        var phoenixLinkEvent = new PolyfillEvent("phoenix.link.click", {
          "bubbles": true,
          "cancelable": true
        });
        if (!element.dispatchEvent(phoenixLinkEvent)) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return false;
        }
        if (element.getAttribute("data-method") && element.getAttribute("data-to")) {
          handleClick(element, e.metaKey || e.shiftKey);
          e.preventDefault();
          return false;
        } else {
          element = element.parentNode;
        }
      }
    }, false);
    window.addEventListener("phoenix.link.click", function(e) {
      var message = e.target.getAttribute("data-confirm");
      if (message && !window.confirm(message)) {
        e.preventDefault();
      }
    }, false);
  })();

  // ../deps/phoenix/priv/static/phoenix.mjs
  var closure = (value) => {
    if (typeof value === "function") {
      return value;
    } else {
      let closure22 = function() {
        return value;
      };
      return closure22;
    }
  };
  var globalSelf = typeof self !== "undefined" ? self : null;
  var phxWindow = typeof window !== "undefined" ? window : null;
  var global = globalSelf || phxWindow || global;
  var DEFAULT_VSN = "2.0.0";
  var SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };
  var DEFAULT_TIMEOUT = 1e4;
  var WS_CLOSE_NORMAL = 1e3;
  var CHANNEL_STATES = {
    closed: "closed",
    errored: "errored",
    joined: "joined",
    joining: "joining",
    leaving: "leaving"
  };
  var CHANNEL_EVENTS = {
    close: "phx_close",
    error: "phx_error",
    join: "phx_join",
    reply: "phx_reply",
    leave: "phx_leave"
  };
  var TRANSPORTS = {
    longpoll: "longpoll",
    websocket: "websocket"
  };
  var XHR_STATES = {
    complete: 4
  };
  var Push = class {
    constructor(channel, event, payload, timeout) {
      this.channel = channel;
      this.event = event;
      this.payload = payload || function() {
        return {};
      };
      this.receivedResp = null;
      this.timeout = timeout;
      this.timeoutTimer = null;
      this.recHooks = [];
      this.sent = false;
    }
    /**
     *
     * @param {number} timeout
     */
    resend(timeout) {
      this.timeout = timeout;
      this.reset();
      this.send();
    }
    /**
     *
     */
    send() {
      if (this.hasReceived("timeout")) {
        return;
      }
      this.startTimeout();
      this.sent = true;
      this.channel.socket.push({
        topic: this.channel.topic,
        event: this.event,
        payload: this.payload(),
        ref: this.ref,
        join_ref: this.channel.joinRef()
      });
    }
    /**
     *
     * @param {*} status
     * @param {*} callback
     */
    receive(status, callback) {
      if (this.hasReceived(status)) {
        callback(this.receivedResp.response);
      }
      this.recHooks.push({ status, callback });
      return this;
    }
    /**
     * @private
     */
    reset() {
      this.cancelRefEvent();
      this.ref = null;
      this.refEvent = null;
      this.receivedResp = null;
      this.sent = false;
    }
    /**
     * @private
     */
    matchReceive({ status, response, _ref }) {
      this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));
    }
    /**
     * @private
     */
    cancelRefEvent() {
      if (!this.refEvent) {
        return;
      }
      this.channel.off(this.refEvent);
    }
    /**
     * @private
     */
    cancelTimeout() {
      clearTimeout(this.timeoutTimer);
      this.timeoutTimer = null;
    }
    /**
     * @private
     */
    startTimeout() {
      if (this.timeoutTimer) {
        this.cancelTimeout();
      }
      this.ref = this.channel.socket.makeRef();
      this.refEvent = this.channel.replyEventName(this.ref);
      this.channel.on(this.refEvent, (payload) => {
        this.cancelRefEvent();
        this.cancelTimeout();
        this.receivedResp = payload;
        this.matchReceive(payload);
      });
      this.timeoutTimer = setTimeout(() => {
        this.trigger("timeout", {});
      }, this.timeout);
    }
    /**
     * @private
     */
    hasReceived(status) {
      return this.receivedResp && this.receivedResp.status === status;
    }
    /**
     * @private
     */
    trigger(status, response) {
      this.channel.trigger(this.refEvent, { status, response });
    }
  };
  var Timer = class {
    constructor(callback, timerCalc) {
      this.callback = callback;
      this.timerCalc = timerCalc;
      this.timer = null;
      this.tries = 0;
    }
    reset() {
      this.tries = 0;
      clearTimeout(this.timer);
    }
    /**
     * Cancels any previous scheduleTimeout and schedules callback
     */
    scheduleTimeout() {
      clearTimeout(this.timer);
      this.timer = setTimeout(() => {
        this.tries = this.tries + 1;
        this.callback();
      }, this.timerCalc(this.tries + 1));
    }
  };
  var Channel = class {
    constructor(topic, params, socket) {
      this.state = CHANNEL_STATES.closed;
      this.topic = topic;
      this.params = closure(params || {});
      this.socket = socket;
      this.bindings = [];
      this.bindingRef = 0;
      this.timeout = this.socket.timeout;
      this.joinedOnce = false;
      this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);
      this.pushBuffer = [];
      this.stateChangeRefs = [];
      this.rejoinTimer = new Timer(() => {
        if (this.socket.isConnected()) {
          this.rejoin();
        }
      }, this.socket.rejoinAfterMs);
      this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));
      this.stateChangeRefs.push(
        this.socket.onOpen(() => {
          this.rejoinTimer.reset();
          if (this.isErrored()) {
            this.rejoin();
          }
        })
      );
      this.joinPush.receive("ok", () => {
        this.state = CHANNEL_STATES.joined;
        this.rejoinTimer.reset();
        this.pushBuffer.forEach((pushEvent) => pushEvent.send());
        this.pushBuffer = [];
      });
      this.joinPush.receive("error", () => {
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.onClose(() => {
        this.rejoinTimer.reset();
        if (this.socket.hasLogger())
          this.socket.log("channel", `close ${this.topic} ${this.joinRef()}`);
        this.state = CHANNEL_STATES.closed;
        this.socket.remove(this);
      });
      this.onError((reason) => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `error ${this.topic}`, reason);
        if (this.isJoining()) {
          this.joinPush.reset();
        }
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.joinPush.receive("timeout", () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);
        let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);
        leavePush.send();
        this.state = CHANNEL_STATES.errored;
        this.joinPush.reset();
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.on(CHANNEL_EVENTS.reply, (payload, ref) => {
        this.trigger(this.replyEventName(ref), payload);
      });
    }
    /**
     * Join the channel
     * @param {integer} timeout
     * @returns {Push}
     */
    join(timeout = this.timeout) {
      if (this.joinedOnce) {
        throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");
      } else {
        this.timeout = timeout;
        this.joinedOnce = true;
        this.rejoin();
        return this.joinPush;
      }
    }
    /**
     * Hook into channel close
     * @param {Function} callback
     */
    onClose(callback) {
      this.on(CHANNEL_EVENTS.close, callback);
    }
    /**
     * Hook into channel errors
     * @param {Function} callback
     */
    onError(callback) {
      return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));
    }
    /**
     * Subscribes on channel events
     *
     * Subscription returns a ref counter, which can be used later to
     * unsubscribe the exact event listener
     *
     * @example
     * const ref1 = channel.on("event", do_stuff)
     * const ref2 = channel.on("event", do_other_stuff)
     * channel.off("event", ref1)
     * // Since unsubscription, do_stuff won't fire,
     * // while do_other_stuff will keep firing on the "event"
     *
     * @param {string} event
     * @param {Function} callback
     * @returns {integer} ref
     */
    on(event, callback) {
      let ref = this.bindingRef++;
      this.bindings.push({ event, ref, callback });
      return ref;
    }
    /**
     * Unsubscribes off of channel events
     *
     * Use the ref returned from a channel.on() to unsubscribe one
     * handler, or pass nothing for the ref to unsubscribe all
     * handlers for the given event.
     *
     * @example
     * // Unsubscribe the do_stuff handler
     * const ref1 = channel.on("event", do_stuff)
     * channel.off("event", ref1)
     *
     * // Unsubscribe all handlers from event
     * channel.off("event")
     *
     * @param {string} event
     * @param {integer} ref
     */
    off(event, ref) {
      this.bindings = this.bindings.filter((bind) => {
        return !(bind.event === event && (typeof ref === "undefined" || ref === bind.ref));
      });
    }
    /**
     * @private
     */
    canPush() {
      return this.socket.isConnected() && this.isJoined();
    }
    /**
     * Sends a message `event` to phoenix with the payload `payload`.
     * Phoenix receives this in the `handle_in(event, payload, socket)`
     * function. if phoenix replies or it times out (default 10000ms),
     * then optionally the reply can be received.
     *
     * @example
     * channel.push("event")
     *   .receive("ok", payload => console.log("phoenix replied:", payload))
     *   .receive("error", err => console.log("phoenix errored", err))
     *   .receive("timeout", () => console.log("timed out pushing"))
     * @param {string} event
     * @param {Object} payload
     * @param {number} [timeout]
     * @returns {Push}
     */
    push(event, payload, timeout = this.timeout) {
      payload = payload || {};
      if (!this.joinedOnce) {
        throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);
      }
      let pushEvent = new Push(this, event, function() {
        return payload;
      }, timeout);
      if (this.canPush()) {
        pushEvent.send();
      } else {
        pushEvent.startTimeout();
        this.pushBuffer.push(pushEvent);
      }
      return pushEvent;
    }
    /** Leaves the channel
     *
     * Unsubscribes from server events, and
     * instructs channel to terminate on server
     *
     * Triggers onClose() hooks
     *
     * To receive leave acknowledgements, use the `receive`
     * hook to bind to the server ack, ie:
     *
     * @example
     * channel.leave().receive("ok", () => alert("left!") )
     *
     * @param {integer} timeout
     * @returns {Push}
     */
    leave(timeout = this.timeout) {
      this.rejoinTimer.reset();
      this.joinPush.cancelTimeout();
      this.state = CHANNEL_STATES.leaving;
      let onClose = () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `leave ${this.topic}`);
        this.trigger(CHANNEL_EVENTS.close, "leave");
      };
      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);
      leavePush.receive("ok", () => onClose()).receive("timeout", () => onClose());
      leavePush.send();
      if (!this.canPush()) {
        leavePush.trigger("ok", {});
      }
      return leavePush;
    }
    /**
     * Overridable message hook
     *
     * Receives all events for specialized message handling
     * before dispatching to the channel callbacks.
     *
     * Must return the payload, modified or unmodified
     * @param {string} event
     * @param {Object} payload
     * @param {integer} ref
     * @returns {Object}
     */
    onMessage(_event, payload, _ref) {
      return payload;
    }
    /**
     * @private
     */
    isMember(topic, event, payload, joinRef) {
      if (this.topic !== topic) {
        return false;
      }
      if (joinRef && joinRef !== this.joinRef()) {
        if (this.socket.hasLogger())
          this.socket.log("channel", "dropping outdated message", { topic, event, payload, joinRef });
        return false;
      } else {
        return true;
      }
    }
    /**
     * @private
     */
    joinRef() {
      return this.joinPush.ref;
    }
    /**
     * @private
     */
    rejoin(timeout = this.timeout) {
      if (this.isLeaving()) {
        return;
      }
      this.socket.leaveOpenTopic(this.topic);
      this.state = CHANNEL_STATES.joining;
      this.joinPush.resend(timeout);
    }
    /**
     * @private
     */
    trigger(event, payload, ref, joinRef) {
      let handledPayload = this.onMessage(event, payload, ref, joinRef);
      if (payload && !handledPayload) {
        throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");
      }
      let eventBindings = this.bindings.filter((bind) => bind.event === event);
      for (let i = 0; i < eventBindings.length; i++) {
        let bind = eventBindings[i];
        bind.callback(handledPayload, ref, joinRef || this.joinRef());
      }
    }
    /**
     * @private
     */
    replyEventName(ref) {
      return `chan_reply_${ref}`;
    }
    /**
     * @private
     */
    isClosed() {
      return this.state === CHANNEL_STATES.closed;
    }
    /**
     * @private
     */
    isErrored() {
      return this.state === CHANNEL_STATES.errored;
    }
    /**
     * @private
     */
    isJoined() {
      return this.state === CHANNEL_STATES.joined;
    }
    /**
     * @private
     */
    isJoining() {
      return this.state === CHANNEL_STATES.joining;
    }
    /**
     * @private
     */
    isLeaving() {
      return this.state === CHANNEL_STATES.leaving;
    }
  };
  var Ajax = class {
    static request(method, endPoint, accept, body, timeout, ontimeout, callback) {
      if (global.XDomainRequest) {
        let req = new global.XDomainRequest();
        return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);
      } else {
        let req = new global.XMLHttpRequest();
        return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);
      }
    }
    static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {
      req.timeout = timeout;
      req.open(method, endPoint);
      req.onload = () => {
        let response = this.parseJSON(req.responseText);
        callback && callback(response);
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.onprogress = () => {
      };
      req.send(body);
      return req;
    }
    static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {
      req.open(method, endPoint, true);
      req.timeout = timeout;
      req.setRequestHeader("Content-Type", accept);
      req.onerror = () => callback && callback(null);
      req.onreadystatechange = () => {
        if (req.readyState === XHR_STATES.complete && callback) {
          let response = this.parseJSON(req.responseText);
          callback(response);
        }
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.send(body);
      return req;
    }
    static parseJSON(resp) {
      if (!resp || resp === "") {
        return null;
      }
      try {
        return JSON.parse(resp);
      } catch (e) {
        console && console.log("failed to parse JSON response", resp);
        return null;
      }
    }
    static serialize(obj, parentKey) {
      let queryStr = [];
      for (var key in obj) {
        if (!Object.prototype.hasOwnProperty.call(obj, key)) {
          continue;
        }
        let paramKey = parentKey ? `${parentKey}[${key}]` : key;
        let paramVal = obj[key];
        if (typeof paramVal === "object") {
          queryStr.push(this.serialize(paramVal, paramKey));
        } else {
          queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));
        }
      }
      return queryStr.join("&");
    }
    static appendParams(url, params) {
      if (Object.keys(params).length === 0) {
        return url;
      }
      let prefix = url.match(/\?/) ? "&" : "?";
      return `${url}${prefix}${this.serialize(params)}`;
    }
  };
  var arrayBufferToBase64 = (buffer) => {
    let binary = "";
    let bytes = new Uint8Array(buffer);
    let len = bytes.byteLength;
    for (let i = 0; i < len; i++) {
      binary += String.fromCharCode(bytes[i]);
    }
    return btoa(binary);
  };
  var LongPoll = class {
    constructor(endPoint) {
      this.endPoint = null;
      this.token = null;
      this.skipHeartbeat = true;
      this.reqs = /* @__PURE__ */ new Set();
      this.awaitingBatchAck = false;
      this.currentBatch = null;
      this.currentBatchTimer = null;
      this.batchBuffer = [];
      this.onopen = function() {
      };
      this.onerror = function() {
      };
      this.onmessage = function() {
      };
      this.onclose = function() {
      };
      this.pollEndpoint = this.normalizeEndpoint(endPoint);
      this.readyState = SOCKET_STATES.connecting;
      setTimeout(() => this.poll(), 0);
    }
    normalizeEndpoint(endPoint) {
      return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);
    }
    endpointURL() {
      return Ajax.appendParams(this.pollEndpoint, { token: this.token });
    }
    closeAndRetry(code, reason, wasClean) {
      this.close(code, reason, wasClean);
      this.readyState = SOCKET_STATES.connecting;
    }
    ontimeout() {
      this.onerror("timeout");
      this.closeAndRetry(1005, "timeout", false);
    }
    isActive() {
      return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;
    }
    poll() {
      this.ajax("GET", "application/json", null, () => this.ontimeout(), (resp) => {
        if (resp) {
          var { status, token, messages } = resp;
          this.token = token;
        } else {
          status = 0;
        }
        switch (status) {
          case 200:
            messages.forEach((msg) => {
              setTimeout(() => this.onmessage({ data: msg }), 0);
            });
            this.poll();
            break;
          case 204:
            this.poll();
            break;
          case 410:
            this.readyState = SOCKET_STATES.open;
            this.onopen({});
            this.poll();
            break;
          case 403:
            this.onerror(403);
            this.close(1008, "forbidden", false);
            break;
          case 0:
          case 500:
            this.onerror(500);
            this.closeAndRetry(1011, "internal server error", 500);
            break;
          default:
            throw new Error(`unhandled poll status ${status}`);
        }
      });
    }
    // we collect all pushes within the current event loop by
    // setTimeout 0, which optimizes back-to-back procedural
    // pushes against an empty buffer
    send(body) {
      if (typeof body !== "string") {
        body = arrayBufferToBase64(body);
      }
      if (this.currentBatch) {
        this.currentBatch.push(body);
      } else if (this.awaitingBatchAck) {
        this.batchBuffer.push(body);
      } else {
        this.currentBatch = [body];
        this.currentBatchTimer = setTimeout(() => {
          this.batchSend(this.currentBatch);
          this.currentBatch = null;
        }, 0);
      }
    }
    batchSend(messages) {
      this.awaitingBatchAck = true;
      this.ajax("POST", "application/x-ndjson", messages.join("\n"), () => this.onerror("timeout"), (resp) => {
        this.awaitingBatchAck = false;
        if (!resp || resp.status !== 200) {
          this.onerror(resp && resp.status);
          this.closeAndRetry(1011, "internal server error", false);
        } else if (this.batchBuffer.length > 0) {
          this.batchSend(this.batchBuffer);
          this.batchBuffer = [];
        }
      });
    }
    close(code, reason, wasClean) {
      for (let req of this.reqs) {
        req.abort();
      }
      this.readyState = SOCKET_STATES.closed;
      let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });
      this.batchBuffer = [];
      clearTimeout(this.currentBatchTimer);
      this.currentBatchTimer = null;
      if (typeof CloseEvent !== "undefined") {
        this.onclose(new CloseEvent("close", opts));
      } else {
        this.onclose(opts);
      }
    }
    ajax(method, contentType, body, onCallerTimeout, callback) {
      let req;
      let ontimeout = () => {
        this.reqs.delete(req);
        onCallerTimeout();
      };
      req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {
        this.reqs.delete(req);
        if (this.isActive()) {
          callback(resp);
        }
      });
      this.reqs.add(req);
    }
  };
  var serializer_default = {
    HEADER_LENGTH: 1,
    META_LENGTH: 4,
    KINDS: { push: 0, reply: 1, broadcast: 2 },
    encode(msg, callback) {
      if (msg.payload.constructor === ArrayBuffer) {
        return callback(this.binaryEncode(msg));
      } else {
        let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];
        return callback(JSON.stringify(payload));
      }
    },
    decode(rawPayload, callback) {
      if (rawPayload.constructor === ArrayBuffer) {
        return callback(this.binaryDecode(rawPayload));
      } else {
        let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);
        return callback({ join_ref, ref, topic, event, payload });
      }
    },
    // private
    binaryEncode(message) {
      let { join_ref, ref, event, topic, payload } = message;
      let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;
      let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);
      let view = new DataView(header);
      let offset2 = 0;
      view.setUint8(offset2++, this.KINDS.push);
      view.setUint8(offset2++, join_ref.length);
      view.setUint8(offset2++, ref.length);
      view.setUint8(offset2++, topic.length);
      view.setUint8(offset2++, event.length);
      Array.from(join_ref, (char) => view.setUint8(offset2++, char.charCodeAt(0)));
      Array.from(ref, (char) => view.setUint8(offset2++, char.charCodeAt(0)));
      Array.from(topic, (char) => view.setUint8(offset2++, char.charCodeAt(0)));
      Array.from(event, (char) => view.setUint8(offset2++, char.charCodeAt(0)));
      var combined = new Uint8Array(header.byteLength + payload.byteLength);
      combined.set(new Uint8Array(header), 0);
      combined.set(new Uint8Array(payload), header.byteLength);
      return combined.buffer;
    },
    binaryDecode(buffer) {
      let view = new DataView(buffer);
      let kind = view.getUint8(0);
      let decoder = new TextDecoder();
      switch (kind) {
        case this.KINDS.push:
          return this.decodePush(buffer, view, decoder);
        case this.KINDS.reply:
          return this.decodeReply(buffer, view, decoder);
        case this.KINDS.broadcast:
          return this.decodeBroadcast(buffer, view, decoder);
      }
    },
    decodePush(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let topicSize = view.getUint8(2);
      let eventSize = view.getUint8(3);
      let offset2 = this.HEADER_LENGTH + this.META_LENGTH - 1;
      let joinRef = decoder.decode(buffer.slice(offset2, offset2 + joinRefSize));
      offset2 = offset2 + joinRefSize;
      let topic = decoder.decode(buffer.slice(offset2, offset2 + topicSize));
      offset2 = offset2 + topicSize;
      let event = decoder.decode(buffer.slice(offset2, offset2 + eventSize));
      offset2 = offset2 + eventSize;
      let data = buffer.slice(offset2, buffer.byteLength);
      return { join_ref: joinRef, ref: null, topic, event, payload: data };
    },
    decodeReply(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let refSize = view.getUint8(2);
      let topicSize = view.getUint8(3);
      let eventSize = view.getUint8(4);
      let offset2 = this.HEADER_LENGTH + this.META_LENGTH;
      let joinRef = decoder.decode(buffer.slice(offset2, offset2 + joinRefSize));
      offset2 = offset2 + joinRefSize;
      let ref = decoder.decode(buffer.slice(offset2, offset2 + refSize));
      offset2 = offset2 + refSize;
      let topic = decoder.decode(buffer.slice(offset2, offset2 + topicSize));
      offset2 = offset2 + topicSize;
      let event = decoder.decode(buffer.slice(offset2, offset2 + eventSize));
      offset2 = offset2 + eventSize;
      let data = buffer.slice(offset2, buffer.byteLength);
      let payload = { status: event, response: data };
      return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };
    },
    decodeBroadcast(buffer, view, decoder) {
      let topicSize = view.getUint8(1);
      let eventSize = view.getUint8(2);
      let offset2 = this.HEADER_LENGTH + 2;
      let topic = decoder.decode(buffer.slice(offset2, offset2 + topicSize));
      offset2 = offset2 + topicSize;
      let event = decoder.decode(buffer.slice(offset2, offset2 + eventSize));
      offset2 = offset2 + eventSize;
      let data = buffer.slice(offset2, buffer.byteLength);
      return { join_ref: null, ref: null, topic, event, payload: data };
    }
  };
  var Socket = class {
    constructor(endPoint, opts = {}) {
      this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };
      this.channels = [];
      this.sendBuffer = [];
      this.ref = 0;
      this.timeout = opts.timeout || DEFAULT_TIMEOUT;
      this.transport = opts.transport || global.WebSocket || LongPoll;
      this.primaryPassedHealthCheck = false;
      this.longPollFallbackMs = opts.longPollFallbackMs;
      this.fallbackTimer = null;
      this.sessionStore = opts.sessionStorage || global.sessionStorage;
      this.establishedConnections = 0;
      this.defaultEncoder = serializer_default.encode.bind(serializer_default);
      this.defaultDecoder = serializer_default.decode.bind(serializer_default);
      this.closeWasClean = false;
      this.binaryType = opts.binaryType || "arraybuffer";
      this.connectClock = 1;
      if (this.transport !== LongPoll) {
        this.encode = opts.encode || this.defaultEncoder;
        this.decode = opts.decode || this.defaultDecoder;
      } else {
        this.encode = this.defaultEncoder;
        this.decode = this.defaultDecoder;
      }
      let awaitingConnectionOnPageShow = null;
      if (phxWindow && phxWindow.addEventListener) {
        phxWindow.addEventListener("pagehide", (_e) => {
          if (this.conn) {
            this.disconnect();
            awaitingConnectionOnPageShow = this.connectClock;
          }
        });
        phxWindow.addEventListener("pageshow", (_e) => {
          if (awaitingConnectionOnPageShow === this.connectClock) {
            awaitingConnectionOnPageShow = null;
            this.connect();
          }
        });
      }
      this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;
      this.rejoinAfterMs = (tries) => {
        if (opts.rejoinAfterMs) {
          return opts.rejoinAfterMs(tries);
        } else {
          return [1e3, 2e3, 5e3][tries - 1] || 1e4;
        }
      };
      this.reconnectAfterMs = (tries) => {
        if (opts.reconnectAfterMs) {
          return opts.reconnectAfterMs(tries);
        } else {
          return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;
        }
      };
      this.logger = opts.logger || null;
      if (!this.logger && opts.debug) {
        this.logger = (kind, msg, data) => {
          console.log(`${kind}: ${msg}`, data);
        };
      }
      this.longpollerTimeout = opts.longpollerTimeout || 2e4;
      this.params = closure(opts.params || {});
      this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;
      this.vsn = opts.vsn || DEFAULT_VSN;
      this.heartbeatTimeoutTimer = null;
      this.heartbeatTimer = null;
      this.pendingHeartbeatRef = null;
      this.reconnectTimer = new Timer(() => {
        this.teardown(() => this.connect());
      }, this.reconnectAfterMs);
    }
    /**
     * Returns the LongPoll transport reference
     */
    getLongPollTransport() {
      return LongPoll;
    }
    /**
     * Disconnects and replaces the active transport
     *
     * @param {Function} newTransport - The new transport class to instantiate
     *
     */
    replaceTransport(newTransport) {
      this.connectClock++;
      this.closeWasClean = true;
      clearTimeout(this.fallbackTimer);
      this.reconnectTimer.reset();
      if (this.conn) {
        this.conn.close();
        this.conn = null;
      }
      this.transport = newTransport;
    }
    /**
     * Returns the socket protocol
     *
     * @returns {string}
     */
    protocol() {
      return location.protocol.match(/^https/) ? "wss" : "ws";
    }
    /**
     * The fully qualified socket url
     *
     * @returns {string}
     */
    endPointURL() {
      let uri = Ajax.appendParams(
        Ajax.appendParams(this.endPoint, this.params()),
        { vsn: this.vsn }
      );
      if (uri.charAt(0) !== "/") {
        return uri;
      }
      if (uri.charAt(1) === "/") {
        return `${this.protocol()}:${uri}`;
      }
      return `${this.protocol()}://${location.host}${uri}`;
    }
    /**
     * Disconnects the socket
     *
     * See https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes for valid status codes.
     *
     * @param {Function} callback - Optional callback which is called after socket is disconnected.
     * @param {integer} code - A status code for disconnection (Optional).
     * @param {string} reason - A textual description of the reason to disconnect. (Optional)
     */
    disconnect(callback, code, reason) {
      this.connectClock++;
      this.closeWasClean = true;
      clearTimeout(this.fallbackTimer);
      this.reconnectTimer.reset();
      this.teardown(callback, code, reason);
    }
    /**
     *
     * @param {Object} params - The params to send when connecting, for example `{user_id: userToken}`
     *
     * Passing params to connect is deprecated; pass them in the Socket constructor instead:
     * `new Socket("/socket", {params: {user_id: userToken}})`.
     */
    connect(params) {
      if (params) {
        console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");
        this.params = closure(params);
      }
      if (this.conn) {
        return;
      }
      if (this.longPollFallbackMs && this.transport !== LongPoll) {
        this.connectWithFallback(LongPoll, this.longPollFallbackMs);
      } else {
        this.transportConnect();
      }
    }
    /**
     * Logs the message. Override `this.logger` for specialized logging. noops by default
     * @param {string} kind
     * @param {string} msg
     * @param {Object} data
     */
    log(kind, msg, data) {
      this.logger && this.logger(kind, msg, data);
    }
    /**
     * Returns true if a logger has been set on this socket.
     */
    hasLogger() {
      return this.logger !== null;
    }
    /**
     * Registers callbacks for connection open events
     *
     * @example socket.onOpen(function(){ console.info("the socket was opened") })
     *
     * @param {Function} callback
     */
    onOpen(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.open.push([ref, callback]);
      return ref;
    }
    /**
     * Registers callbacks for connection close events
     * @param {Function} callback
     */
    onClose(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.close.push([ref, callback]);
      return ref;
    }
    /**
     * Registers callbacks for connection error events
     *
     * @example socket.onError(function(error){ alert("An error occurred") })
     *
     * @param {Function} callback
     */
    onError(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.error.push([ref, callback]);
      return ref;
    }
    /**
     * Registers callbacks for connection message events
     * @param {Function} callback
     */
    onMessage(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.message.push([ref, callback]);
      return ref;
    }
    /**
     * Pings the server and invokes the callback with the RTT in milliseconds
     * @param {Function} callback
     *
     * Returns true if the ping was pushed or false if unable to be pushed.
     */
    ping(callback) {
      if (!this.isConnected()) {
        return false;
      }
      let ref = this.makeRef();
      let startTime = Date.now();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref });
      let onMsgRef = this.onMessage((msg) => {
        if (msg.ref === ref) {
          this.off([onMsgRef]);
          callback(Date.now() - startTime);
        }
      });
      return true;
    }
    /**
     * @private
     */
    transportConnect() {
      this.connectClock++;
      this.closeWasClean = false;
      this.conn = new this.transport(this.endPointURL());
      this.conn.binaryType = this.binaryType;
      this.conn.timeout = this.longpollerTimeout;
      this.conn.onopen = () => this.onConnOpen();
      this.conn.onerror = (error) => this.onConnError(error);
      this.conn.onmessage = (event) => this.onConnMessage(event);
      this.conn.onclose = (event) => this.onConnClose(event);
    }
    getSession(key) {
      return this.sessionStore && this.sessionStore.getItem(key);
    }
    storeSession(key, val) {
      this.sessionStore && this.sessionStore.setItem(key, val);
    }
    connectWithFallback(fallbackTransport, fallbackThreshold = 2500) {
      clearTimeout(this.fallbackTimer);
      let established = false;
      let primaryTransport = true;
      let openRef, errorRef;
      let fallback = (reason) => {
        this.log("transport", `falling back to ${fallbackTransport.name}...`, reason);
        this.off([openRef, errorRef]);
        primaryTransport = false;
        this.replaceTransport(fallbackTransport);
        this.transportConnect();
      };
      if (this.getSession(`phx:fallback:${fallbackTransport.name}`)) {
        return fallback("memorized");
      }
      this.fallbackTimer = setTimeout(fallback, fallbackThreshold);
      errorRef = this.onError((reason) => {
        this.log("transport", "error", reason);
        if (primaryTransport && !established) {
          clearTimeout(this.fallbackTimer);
          fallback(reason);
        }
      });
      this.onOpen(() => {
        established = true;
        if (!primaryTransport) {
          if (!this.primaryPassedHealthCheck) {
            this.storeSession(`phx:fallback:${fallbackTransport.name}`, "true");
          }
          return this.log("transport", `established ${fallbackTransport.name} fallback`);
        }
        clearTimeout(this.fallbackTimer);
        this.fallbackTimer = setTimeout(fallback, fallbackThreshold);
        this.ping((rtt) => {
          this.log("transport", "connected to primary after", rtt);
          this.primaryPassedHealthCheck = true;
          clearTimeout(this.fallbackTimer);
        });
      });
      this.transportConnect();
    }
    clearHeartbeats() {
      clearTimeout(this.heartbeatTimer);
      clearTimeout(this.heartbeatTimeoutTimer);
    }
    onConnOpen() {
      if (this.hasLogger())
        this.log("transport", `${this.transport.name} connected to ${this.endPointURL()}`);
      this.closeWasClean = false;
      this.establishedConnections++;
      this.flushSendBuffer();
      this.reconnectTimer.reset();
      this.resetHeartbeat();
      this.stateChangeCallbacks.open.forEach(([, callback]) => callback());
    }
    /**
     * @private
     */
    heartbeatTimeout() {
      if (this.pendingHeartbeatRef) {
        this.pendingHeartbeatRef = null;
        if (this.hasLogger()) {
          this.log("transport", "heartbeat timeout. Attempting to re-establish connection");
        }
        this.triggerChanError();
        this.closeWasClean = false;
        this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, "heartbeat timeout");
      }
    }
    resetHeartbeat() {
      if (this.conn && this.conn.skipHeartbeat) {
        return;
      }
      this.pendingHeartbeatRef = null;
      this.clearHeartbeats();
      this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
    }
    teardown(callback, code, reason) {
      if (!this.conn) {
        return callback && callback();
      }
      this.waitForBufferDone(() => {
        if (this.conn) {
          if (code) {
            this.conn.close(code, reason || "");
          } else {
            this.conn.close();
          }
        }
        this.waitForSocketClosed(() => {
          if (this.conn) {
            this.conn.onopen = function() {
            };
            this.conn.onerror = function() {
            };
            this.conn.onmessage = function() {
            };
            this.conn.onclose = function() {
            };
            this.conn = null;
          }
          callback && callback();
        });
      });
    }
    waitForBufferDone(callback, tries = 1) {
      if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForBufferDone(callback, tries + 1);
      }, 150 * tries);
    }
    waitForSocketClosed(callback, tries = 1) {
      if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForSocketClosed(callback, tries + 1);
      }, 150 * tries);
    }
    onConnClose(event) {
      let closeCode = event && event.code;
      if (this.hasLogger())
        this.log("transport", "close", event);
      this.triggerChanError();
      this.clearHeartbeats();
      if (!this.closeWasClean && closeCode !== 1e3) {
        this.reconnectTimer.scheduleTimeout();
      }
      this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));
    }
    /**
     * @private
     */
    onConnError(error) {
      if (this.hasLogger())
        this.log("transport", error);
      let transportBefore = this.transport;
      let establishedBefore = this.establishedConnections;
      this.stateChangeCallbacks.error.forEach(([, callback]) => {
        callback(error, transportBefore, establishedBefore);
      });
      if (transportBefore === this.transport || establishedBefore > 0) {
        this.triggerChanError();
      }
    }
    /**
     * @private
     */
    triggerChanError() {
      this.channels.forEach((channel) => {
        if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {
          channel.trigger(CHANNEL_EVENTS.error);
        }
      });
    }
    /**
     * @returns {string}
     */
    connectionState() {
      switch (this.conn && this.conn.readyState) {
        case SOCKET_STATES.connecting:
          return "connecting";
        case SOCKET_STATES.open:
          return "open";
        case SOCKET_STATES.closing:
          return "closing";
        default:
          return "closed";
      }
    }
    /**
     * @returns {boolean}
     */
    isConnected() {
      return this.connectionState() === "open";
    }
    /**
     * @private
     *
     * @param {Channel}
     */
    remove(channel) {
      this.off(channel.stateChangeRefs);
      this.channels = this.channels.filter((c) => c !== channel);
    }
    /**
     * Removes `onOpen`, `onClose`, `onError,` and `onMessage` registrations.
     *
     * @param {refs} - list of refs returned by calls to
     *                 `onOpen`, `onClose`, `onError,` and `onMessage`
     */
    off(refs) {
      for (let key in this.stateChangeCallbacks) {
        this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {
          return refs.indexOf(ref) === -1;
        });
      }
    }
    /**
     * Initiates a new channel for the given topic
     *
     * @param {string} topic
     * @param {Object} chanParams - Parameters for the channel
     * @returns {Channel}
     */
    channel(topic, chanParams = {}) {
      let chan = new Channel(topic, chanParams, this);
      this.channels.push(chan);
      return chan;
    }
    /**
     * @param {Object} data
     */
    push(data) {
      if (this.hasLogger()) {
        let { topic, event, payload, ref, join_ref } = data;
        this.log("push", `${topic} ${event} (${join_ref}, ${ref})`, payload);
      }
      if (this.isConnected()) {
        this.encode(data, (result) => this.conn.send(result));
      } else {
        this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));
      }
    }
    /**
     * Return the next message ref, accounting for overflows
     * @returns {string}
     */
    makeRef() {
      let newRef = this.ref + 1;
      if (newRef === this.ref) {
        this.ref = 0;
      } else {
        this.ref = newRef;
      }
      return this.ref.toString();
    }
    sendHeartbeat() {
      if (this.pendingHeartbeatRef && !this.isConnected()) {
        return;
      }
      this.pendingHeartbeatRef = this.makeRef();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef });
      this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);
    }
    flushSendBuffer() {
      if (this.isConnected() && this.sendBuffer.length > 0) {
        this.sendBuffer.forEach((callback) => callback());
        this.sendBuffer = [];
      }
    }
    onConnMessage(rawMessage) {
      this.decode(rawMessage.data, (msg) => {
        let { topic, event, payload, ref, join_ref } = msg;
        if (ref && ref === this.pendingHeartbeatRef) {
          this.clearHeartbeats();
          this.pendingHeartbeatRef = null;
          this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
        }
        if (this.hasLogger())
          this.log("receive", `${payload.status || ""} ${topic} ${event} ${ref && "(" + ref + ")" || ""}`, payload);
        for (let i = 0; i < this.channels.length; i++) {
          const channel = this.channels[i];
          if (!channel.isMember(topic, event, payload, join_ref)) {
            continue;
          }
          channel.trigger(event, payload, ref, join_ref);
        }
        for (let i = 0; i < this.stateChangeCallbacks.message.length; i++) {
          let [, callback] = this.stateChangeCallbacks.message[i];
          callback(msg);
        }
      });
    }
    leaveOpenTopic(topic) {
      let dupChannel = this.channels.find((c) => c.topic === topic && (c.isJoined() || c.isJoining()));
      if (dupChannel) {
        if (this.hasLogger())
          this.log("transport", `leaving duplicate topic "${topic}"`);
        dupChannel.leave();
      }
    }
  };

  // ../deps/phoenix_live_view/priv/static/phoenix_live_view.esm.js
  var CONSECUTIVE_RELOADS = "consecutive-reloads";
  var MAX_RELOADS = 10;
  var RELOAD_JITTER_MIN = 5e3;
  var RELOAD_JITTER_MAX = 1e4;
  var FAILSAFE_JITTER = 3e4;
  var PHX_EVENT_CLASSES = [
    "phx-click-loading",
    "phx-change-loading",
    "phx-submit-loading",
    "phx-keydown-loading",
    "phx-keyup-loading",
    "phx-blur-loading",
    "phx-focus-loading",
    "phx-hook-loading"
  ];
  var PHX_COMPONENT = "data-phx-component";
  var PHX_LIVE_LINK = "data-phx-link";
  var PHX_TRACK_STATIC = "track-static";
  var PHX_LINK_STATE = "data-phx-link-state";
  var PHX_REF = "data-phx-ref";
  var PHX_REF_SRC = "data-phx-ref-src";
  var PHX_TRACK_UPLOADS = "track-uploads";
  var PHX_UPLOAD_REF = "data-phx-upload-ref";
  var PHX_PREFLIGHTED_REFS = "data-phx-preflighted-refs";
  var PHX_DONE_REFS = "data-phx-done-refs";
  var PHX_DROP_TARGET = "drop-target";
  var PHX_ACTIVE_ENTRY_REFS = "data-phx-active-refs";
  var PHX_LIVE_FILE_UPDATED = "phx:live-file:updated";
  var PHX_SKIP = "data-phx-skip";
  var PHX_MAGIC_ID = "data-phx-id";
  var PHX_PRUNE = "data-phx-prune";
  var PHX_PAGE_LOADING = "page-loading";
  var PHX_CONNECTED_CLASS = "phx-connected";
  var PHX_LOADING_CLASS = "phx-loading";
  var PHX_NO_FEEDBACK_CLASS = "phx-no-feedback";
  var PHX_ERROR_CLASS = "phx-error";
  var PHX_CLIENT_ERROR_CLASS = "phx-client-error";
  var PHX_SERVER_ERROR_CLASS = "phx-server-error";
  var PHX_PARENT_ID = "data-phx-parent-id";
  var PHX_MAIN = "data-phx-main";
  var PHX_ROOT_ID = "data-phx-root-id";
  var PHX_VIEWPORT_TOP = "viewport-top";
  var PHX_VIEWPORT_BOTTOM = "viewport-bottom";
  var PHX_TRIGGER_ACTION = "trigger-action";
  var PHX_FEEDBACK_FOR = "feedback-for";
  var PHX_FEEDBACK_GROUP = "feedback-group";
  var PHX_HAS_FOCUSED = "phx-has-focused";
  var FOCUSABLE_INPUTS = ["text", "textarea", "number", "email", "password", "search", "tel", "url", "date", "time", "datetime-local", "color", "range"];
  var CHECKABLE_INPUTS = ["checkbox", "radio"];
  var PHX_HAS_SUBMITTED = "phx-has-submitted";
  var PHX_SESSION = "data-phx-session";
  var PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`;
  var PHX_STICKY = "data-phx-sticky";
  var PHX_STATIC = "data-phx-static";
  var PHX_READONLY = "data-phx-readonly";
  var PHX_DISABLED = "data-phx-disabled";
  var PHX_DISABLE_WITH = "disable-with";
  var PHX_DISABLE_WITH_RESTORE = "data-phx-disable-with-restore";
  var PHX_HOOK = "hook";
  var PHX_DEBOUNCE = "debounce";
  var PHX_THROTTLE = "throttle";
  var PHX_UPDATE = "update";
  var PHX_STREAM = "stream";
  var PHX_STREAM_REF = "data-phx-stream";
  var PHX_KEY = "key";
  var PHX_PRIVATE = "phxPrivate";
  var PHX_AUTO_RECOVER = "auto-recover";
  var PHX_LV_DEBUG = "phx:live-socket:debug";
  var PHX_LV_PROFILE = "phx:live-socket:profiling";
  var PHX_LV_LATENCY_SIM = "phx:live-socket:latency-sim";
  var PHX_PROGRESS = "progress";
  var PHX_MOUNTED = "mounted";
  var LOADER_TIMEOUT = 1;
  var BEFORE_UNLOAD_LOADER_TIMEOUT = 200;
  var BINDING_PREFIX = "phx-";
  var PUSH_TIMEOUT = 3e4;
  var DEBOUNCE_TRIGGER = "debounce-trigger";
  var THROTTLED = "throttled";
  var DEBOUNCE_PREV_KEY = "debounce-prev-key";
  var DEFAULTS = {
    debounce: 300,
    throttle: 300
  };
  var DYNAMICS = "d";
  var STATIC = "s";
  var ROOT = "r";
  var COMPONENTS = "c";
  var EVENTS = "e";
  var REPLY = "r";
  var TITLE = "t";
  var TEMPLATES = "p";
  var STREAM = "stream";
  var EntryUploader = class {
    constructor(entry, chunkSize, liveSocket2) {
      this.liveSocket = liveSocket2;
      this.entry = entry;
      this.offset = 0;
      this.chunkSize = chunkSize;
      this.chunkTimer = null;
      this.errored = false;
      this.uploadChannel = liveSocket2.channel(`lvu:${entry.ref}`, { token: entry.metadata() });
    }
    error(reason) {
      if (this.errored) {
        return;
      }
      this.uploadChannel.leave();
      this.errored = true;
      clearTimeout(this.chunkTimer);
      this.entry.error(reason);
    }
    upload() {
      this.uploadChannel.onError((reason) => this.error(reason));
      this.uploadChannel.join().receive("ok", (_data) => this.readNextChunk()).receive("error", (reason) => this.error(reason));
    }
    isDone() {
      return this.offset >= this.entry.file.size;
    }
    readNextChunk() {
      let reader = new window.FileReader();
      let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset);
      reader.onload = (e) => {
        if (e.target.error === null) {
          this.offset += e.target.result.byteLength;
          this.pushChunk(e.target.result);
        } else {
          return logError("Read error: " + e.target.error);
        }
      };
      reader.readAsArrayBuffer(blob);
    }
    pushChunk(chunk) {
      if (!this.uploadChannel.isJoined()) {
        return;
      }
      this.uploadChannel.push("chunk", chunk).receive("ok", () => {
        this.entry.progress(this.offset / this.entry.file.size * 100);
        if (!this.isDone()) {
          this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0);
        }
      }).receive("error", ({ reason }) => this.error(reason));
    }
  };
  var logError = (msg, obj) => console.error && console.error(msg, obj);
  var isCid = (cid) => {
    let type = typeof cid;
    return type === "number" || type === "string" && /^(0|[1-9]\d*)$/.test(cid);
  };
  function detectDuplicateIds() {
    let ids = /* @__PURE__ */ new Set();
    let elems = document.querySelectorAll("*[id]");
    for (let i = 0, len = elems.length; i < len; i++) {
      if (ids.has(elems[i].id)) {
        console.error(`Multiple IDs detected: ${elems[i].id}. Ensure unique element ids.`);
      } else {
        ids.add(elems[i].id);
      }
    }
  }
  var debug = (view, kind, msg, obj) => {
    if (view.liveSocket.isDebugEnabled()) {
      console.log(`${view.id} ${kind}: ${msg} - `, obj);
    }
  };
  var closure2 = (val) => typeof val === "function" ? val : function() {
    return val;
  };
  var clone = (obj) => {
    return JSON.parse(JSON.stringify(obj));
  };
  var closestPhxBinding = (el, binding, borderEl) => {
    do {
      if (el.matches(`[${binding}]`) && !el.disabled) {
        return el;
      }
      el = el.parentElement || el.parentNode;
    } while (el !== null && el.nodeType === 1 && !(borderEl && borderEl.isSameNode(el) || el.matches(PHX_VIEW_SELECTOR)));
    return null;
  };
  var isObject = (obj) => {
    return obj !== null && typeof obj === "object" && !(obj instanceof Array);
  };
  var isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2);
  var isEmpty = (obj) => {
    for (let x in obj) {
      return false;
    }
    return true;
  };
  var maybe = (el, callback) => el && callback(el);
  var channelUploader = function(entries, onError, resp, liveSocket2) {
    entries.forEach((entry) => {
      let entryUploader = new EntryUploader(entry, resp.config.chunk_size, liveSocket2);
      entryUploader.upload();
    });
  };
  var Browser = {
    canPushState() {
      return typeof history.pushState !== "undefined";
    },
    dropLocal(localStorage2, namespace, subkey) {
      return localStorage2.removeItem(this.localKey(namespace, subkey));
    },
    updateLocal(localStorage2, namespace, subkey, initial, func) {
      let current = this.getLocal(localStorage2, namespace, subkey);
      let key = this.localKey(namespace, subkey);
      let newVal = current === null ? initial : func(current);
      localStorage2.setItem(key, JSON.stringify(newVal));
      return newVal;
    },
    getLocal(localStorage2, namespace, subkey) {
      return JSON.parse(localStorage2.getItem(this.localKey(namespace, subkey)));
    },
    updateCurrentState(callback) {
      if (!this.canPushState()) {
        return;
      }
      history.replaceState(callback(history.state || {}), "", window.location.href);
    },
    pushState(kind, meta, to) {
      if (this.canPushState()) {
        if (to !== window.location.href) {
          if (meta.type == "redirect" && meta.scroll) {
            let currentState = history.state || {};
            currentState.scroll = meta.scroll;
            history.replaceState(currentState, "", window.location.href);
          }
          delete meta.scroll;
          history[kind + "State"](meta, "", to || null);
          let hashEl = this.getHashTargetEl(window.location.hash);
          if (hashEl) {
            hashEl.scrollIntoView();
          } else if (meta.type === "redirect") {
            window.scroll(0, 0);
          }
        }
      } else {
        this.redirect(to);
      }
    },
    setCookie(name, value) {
      document.cookie = `${name}=${value}`;
    },
    getCookie(name) {
      return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${name}s*=s*([^;]*).*$)|^.*$`), "$1");
    },
    redirect(toURL, flash) {
      if (flash) {
        Browser.setCookie("__phoenix_flash__", flash + "; max-age=60000; path=/");
      }
      window.location = toURL;
    },
    localKey(namespace, subkey) {
      return `${namespace}-${subkey}`;
    },
    getHashTargetEl(maybeHash) {
      let hash3 = maybeHash.toString().substring(1);
      if (hash3 === "") {
        return;
      }
      return document.getElementById(hash3) || document.querySelector(`a[name="${hash3}"]`);
    }
  };
  var browser_default = Browser;
  var ARIA = {
    focusMain() {
      let target = document.querySelector("main h1, main, h1");
      if (target) {
        let origTabIndex = target.tabIndex;
        target.tabIndex = -1;
        target.focus();
        target.tabIndex = origTabIndex;
      }
    },
    anyOf(instance, classes) {
      return classes.find((name) => instance instanceof name);
    },
    isFocusable(el, interactiveOnly) {
      return el instanceof HTMLAnchorElement && el.rel !== "ignore" || el instanceof HTMLAreaElement && el.href !== void 0 || !el.disabled && this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]) || el instanceof HTMLIFrameElement || (el.tabIndex > 0 || !interactiveOnly && el.getAttribute("tabindex") !== null && el.getAttribute("aria-hidden") !== "true");
    },
    attemptFocus(el, interactiveOnly) {
      if (this.isFocusable(el, interactiveOnly)) {
        try {
          el.focus();
        } catch (e) {
        }
      }
      return !!document.activeElement && document.activeElement.isSameNode(el);
    },
    focusFirstInteractive(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusFirst(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusFirst(child)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusLast(el) {
      let child = el.lastElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusLast(child)) {
          return true;
        }
        child = child.previousElementSibling;
      }
    }
  };
  var aria_default = ARIA;
  var focusStack = null;
  var default_transition_time = 200;
  var JS = {
    exec(eventType, phxEvent, view, sourceEl, defaults) {
      let [defaultKind, defaultArgs] = defaults || [null, { callback: defaults && defaults.callback }];
      let commands = phxEvent.charAt(0) === "[" ? JSON.parse(phxEvent) : [[defaultKind, defaultArgs]];
      commands.forEach(([kind, args]) => {
        if (kind === defaultKind && defaultArgs.data) {
          args.data = Object.assign(args.data || {}, defaultArgs.data);
          args.callback = args.callback || defaultArgs.callback;
        }
        this.filterToEls(sourceEl, args).forEach((el) => {
          this[`exec_${kind}`](eventType, phxEvent, view, sourceEl, el, args);
        });
      });
    },
    isVisible(el) {
      return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0);
    },
    isInViewport(el) {
      const rect = el.getBoundingClientRect();
      const windowHeight = window.innerHeight || document.documentElement.clientHeight;
      const windowWidth = window.innerWidth || document.documentElement.clientWidth;
      return rect.right > 0 && rect.bottom > 0 && rect.left < windowWidth && rect.top < windowHeight;
    },
    exec_exec(eventType, phxEvent, view, sourceEl, el, { attr, to }) {
      let nodes = to ? dom_default.all(document, to) : [sourceEl];
      nodes.forEach((node) => {
        let encodedJS = node.getAttribute(attr);
        if (!encodedJS) {
          throw new Error(`expected ${attr} to contain JS command on "${to}"`);
        }
        view.liveSocket.execJS(node, encodedJS, eventType);
      });
    },
    exec_dispatch(eventType, phxEvent, view, sourceEl, el, { to, event, detail, bubbles }) {
      detail = detail || {};
      detail.dispatcher = sourceEl;
      dom_default.dispatchEvent(el, event, { detail, bubbles });
    },
    exec_push(eventType, phxEvent, view, sourceEl, el, args) {
      let { event, data, target, page_loading, loading, value, dispatcher, callback } = args;
      let pushOpts = { loading, value, target, page_loading: !!page_loading };
      let targetSrc = eventType === "change" && dispatcher ? dispatcher : sourceEl;
      let phxTarget = target || targetSrc.getAttribute(view.binding("target")) || targetSrc;
      view.withinTargets(phxTarget, (targetView, targetCtx) => {
        if (!targetView.isConnected()) {
          return;
        }
        if (eventType === "change") {
          let { newCid, _target } = args;
          _target = _target || (dom_default.isFormInput(sourceEl) ? sourceEl.name : void 0);
          if (_target) {
            pushOpts._target = _target;
          }
          targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback);
        } else if (eventType === "submit") {
          let { submitter } = args;
          targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts, callback);
        } else {
          targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts, callback);
        }
      });
    },
    exec_navigate(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.historyRedirect(href, replace ? "replace" : "push");
    },
    exec_patch(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.pushHistoryPatch(href, replace ? "replace" : "push", sourceEl);
    },
    exec_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.attemptFocus(el));
    },
    exec_focus_first(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.focusFirstInteractive(el) || aria_default.focusFirst(el));
    },
    exec_push_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => focusStack = el || sourceEl);
    },
    exec_pop_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => {
        if (focusStack) {
          focusStack.focus();
        }
        focusStack = null;
      });
    },
    exec_add_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, names, [], transition, time, view);
    },
    exec_remove_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, [], names, transition, time, view);
    },
    exec_toggle_class(eventType, phxEvent, view, sourceEl, el, { to, names, transition, time }) {
      this.toggleClasses(el, names, transition, view);
    },
    exec_toggle_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val1, val2] }) {
      if (el.hasAttribute(attr)) {
        if (val2 !== void 0) {
          if (el.getAttribute(attr) === val1) {
            this.setOrRemoveAttrs(el, [[attr, val2]], []);
          } else {
            this.setOrRemoveAttrs(el, [[attr, val1]], []);
          }
        } else {
          this.setOrRemoveAttrs(el, [], [attr]);
        }
      } else {
        this.setOrRemoveAttrs(el, [[attr, val1]], []);
      }
    },
    exec_transition(eventType, phxEvent, view, sourceEl, el, { time, transition }) {
      this.addOrRemoveClasses(el, [], [], transition, time, view);
    },
    exec_toggle(eventType, phxEvent, view, sourceEl, el, { display, ins, outs, time }) {
      this.toggle(eventType, view, el, display, ins, outs, time);
    },
    exec_show(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.show(eventType, view, el, display, transition, time);
    },
    exec_hide(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.hide(eventType, view, el, display, transition, time);
    },
    exec_set_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val] }) {
      this.setOrRemoveAttrs(el, [[attr, val]], []);
    },
    exec_remove_attr(eventType, phxEvent, view, sourceEl, el, { attr }) {
      this.setOrRemoveAttrs(el, [], [attr]);
    },
    show(eventType, view, el, display, transition, time) {
      if (!this.isVisible(el)) {
        this.toggle(eventType, view, el, display, transition, null, time);
      }
    },
    hide(eventType, view, el, display, transition, time) {
      if (this.isVisible(el)) {
        this.toggle(eventType, view, el, display, null, transition, time);
      }
    },
    toggle(eventType, view, el, display, ins, outs, time) {
      time = time || default_transition_time;
      let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []];
      let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []];
      if (inClasses.length > 0 || outClasses.length > 0) {
        if (this.isVisible(el)) {
          let onStart = () => {
            this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses));
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, outClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:hide-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          if (eventType === "remove") {
            return;
          }
          let onStart = () => {
            this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, inClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:show-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses));
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      } else {
        if (this.isVisible(el)) {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:hide-start"));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:show-start"));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      }
    },
    toggleClasses(el, classes, transition, time, view) {
      window.requestAnimationFrame(() => {
        let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
        let newAdds = classes.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
        let newRemoves = classes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
        this.addOrRemoveClasses(el, newAdds, newRemoves, transition, time, view);
      });
    },
    addOrRemoveClasses(el, adds, removes, transition, time, view) {
      time = time || default_transition_time;
      let [transitionRun, transitionStart, transitionEnd] = transition || [[], [], []];
      if (transitionRun.length > 0) {
        let onStart = () => {
          this.addOrRemoveClasses(el, transitionStart, [].concat(transitionRun).concat(transitionEnd));
          window.requestAnimationFrame(() => {
            this.addOrRemoveClasses(el, transitionRun, []);
            window.requestAnimationFrame(() => this.addOrRemoveClasses(el, transitionEnd, transitionStart));
          });
        };
        let onDone = () => this.addOrRemoveClasses(el, adds.concat(transitionEnd), removes.concat(transitionRun).concat(transitionStart));
        return view.transition(time, onStart, onDone);
      }
      window.requestAnimationFrame(() => {
        let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
        let keepAdds = adds.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
        let keepRemoves = removes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
        let newAdds = prevAdds.filter((name) => removes.indexOf(name) < 0).concat(keepAdds);
        let newRemoves = prevRemoves.filter((name) => adds.indexOf(name) < 0).concat(keepRemoves);
        dom_default.putSticky(el, "classes", (currentEl) => {
          currentEl.classList.remove(...newRemoves);
          currentEl.classList.add(...newAdds);
          return [newAdds, newRemoves];
        });
      });
    },
    setOrRemoveAttrs(el, sets, removes) {
      let [prevSets, prevRemoves] = dom_default.getSticky(el, "attrs", [[], []]);
      let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes);
      let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets);
      let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes);
      dom_default.putSticky(el, "attrs", (currentEl) => {
        newRemoves.forEach((attr) => currentEl.removeAttribute(attr));
        newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val));
        return [newSets, newRemoves];
      });
    },
    hasAllClasses(el, classes) {
      return classes.every((name) => el.classList.contains(name));
    },
    isToggledOut(el, outClasses) {
      return !this.isVisible(el) || this.hasAllClasses(el, outClasses);
    },
    filterToEls(sourceEl, { to }) {
      return to ? dom_default.all(document, to) : [sourceEl];
    },
    defaultDisplay(el) {
      return { tr: "table-row", td: "table-cell" }[el.tagName.toLowerCase()] || "block";
    }
  };
  var js_default = JS;
  var DOM = {
    byId(id) {
      return document.getElementById(id) || logError(`no id found for ${id}`);
    },
    removeClass(el, className) {
      el.classList.remove(className);
      if (el.classList.length === 0) {
        el.removeAttribute("class");
      }
    },
    all(node, query, callback) {
      if (!node) {
        return [];
      }
      let array = Array.from(node.querySelectorAll(query));
      return callback ? array.forEach(callback) : array;
    },
    childNodeLength(html2) {
      let template = document.createElement("template");
      template.innerHTML = html2;
      return template.content.childElementCount;
    },
    isUploadInput(el) {
      return el.type === "file" && el.getAttribute(PHX_UPLOAD_REF) !== null;
    },
    isAutoUpload(inputEl) {
      return inputEl.hasAttribute("data-phx-auto-upload");
    },
    findUploadInputs(node) {
      const formId = node.id;
      const inputsOutsideForm = this.all(document, `input[type="file"][${PHX_UPLOAD_REF}][form="${formId}"]`);
      return this.all(node, `input[type="file"][${PHX_UPLOAD_REF}]`).concat(inputsOutsideForm);
    },
    findComponentNodeList(node, cid) {
      return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node);
    },
    isPhxDestroyed(node) {
      return node.id && DOM.private(node, "destroyed") ? true : false;
    },
    wantsNewTab(e) {
      let wantsNewTab = e.ctrlKey || e.shiftKey || e.metaKey || e.button && e.button === 1;
      let isDownload = e.target instanceof HTMLAnchorElement && e.target.hasAttribute("download");
      let isTargetBlank = e.target.hasAttribute("target") && e.target.getAttribute("target").toLowerCase() === "_blank";
      return wantsNewTab || isTargetBlank || isDownload;
    },
    isUnloadableFormSubmit(e) {
      let isDialogSubmit = e.target && e.target.getAttribute("method") === "dialog" || e.submitter && e.submitter.getAttribute("formmethod") === "dialog";
      if (isDialogSubmit) {
        return false;
      } else {
        return !e.defaultPrevented && !this.wantsNewTab(e);
      }
    },
    isNewPageClick(e, currentLocation) {
      let href = e.target instanceof HTMLAnchorElement ? e.target.getAttribute("href") : null;
      let url;
      if (e.defaultPrevented || href === null || this.wantsNewTab(e)) {
        return false;
      }
      if (href.startsWith("mailto:") || href.startsWith("tel:")) {
        return false;
      }
      if (e.target.isContentEditable) {
        return false;
      }
      try {
        url = new URL(href);
      } catch (e2) {
        try {
          url = new URL(href, currentLocation);
        } catch (e3) {
          return true;
        }
      }
      if (url.host === currentLocation.host && url.protocol === currentLocation.protocol) {
        if (url.pathname === currentLocation.pathname && url.search === currentLocation.search) {
          return url.hash === "" && !url.href.endsWith("#");
        }
      }
      return url.protocol.startsWith("http");
    },
    markPhxChildDestroyed(el) {
      if (this.isPhxChild(el)) {
        el.setAttribute(PHX_SESSION, "");
      }
      this.putPrivate(el, "destroyed", true);
    },
    findPhxChildrenInFragment(html2, parentId) {
      let template = document.createElement("template");
      template.innerHTML = html2;
      return this.findPhxChildren(template.content, parentId);
    },
    isIgnored(el, phxUpdate) {
      return (el.getAttribute(phxUpdate) || el.getAttribute("data-phx-update")) === "ignore";
    },
    isPhxUpdate(el, phxUpdate, updateTypes) {
      return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0;
    },
    findPhxSticky(el) {
      return this.all(el, `[${PHX_STICKY}]`);
    },
    findPhxChildren(el, parentId) {
      return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}="${parentId}"]`);
    },
    findExistingParentCIDs(node, cids) {
      let parentCids = /* @__PURE__ */ new Set();
      let childrenCids = /* @__PURE__ */ new Set();
      cids.forEach((cid) => {
        this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node).forEach((parent) => {
          parentCids.add(cid);
          this.all(parent, `[${PHX_COMPONENT}]`).map((el) => parseInt(el.getAttribute(PHX_COMPONENT))).forEach((childCID) => childrenCids.add(childCID));
        });
      });
      childrenCids.forEach((childCid) => parentCids.delete(childCid));
      return parentCids;
    },
    filterWithinSameLiveView(nodes, parent) {
      if (parent.querySelector(PHX_VIEW_SELECTOR)) {
        return nodes.filter((el) => this.withinSameLiveView(el, parent));
      } else {
        return nodes;
      }
    },
    withinSameLiveView(node, parent) {
      while (node = node.parentNode) {
        if (node.isSameNode(parent)) {
          return true;
        }
        if (node.getAttribute(PHX_SESSION) !== null) {
          return false;
        }
      }
    },
    private(el, key) {
      return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];
    },
    deletePrivate(el, key) {
      el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];
    },
    putPrivate(el, key, value) {
      if (!el[PHX_PRIVATE]) {
        el[PHX_PRIVATE] = {};
      }
      el[PHX_PRIVATE][key] = value;
    },
    updatePrivate(el, key, defaultVal, updateFunc) {
      let existing = this.private(el, key);
      if (existing === void 0) {
        this.putPrivate(el, key, updateFunc(defaultVal));
      } else {
        this.putPrivate(el, key, updateFunc(existing));
      }
    },
    copyPrivates(target, source) {
      if (source[PHX_PRIVATE]) {
        target[PHX_PRIVATE] = source[PHX_PRIVATE];
      }
    },
    putTitle(str) {
      let titleEl = document.querySelector("title");
      if (titleEl) {
        let { prefix, suffix } = titleEl.dataset;
        document.title = `${prefix || ""}${str}${suffix || ""}`;
      } else {
        document.title = str;
      }
    },
    debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback) {
      let debounce3 = el.getAttribute(phxDebounce);
      let throttle = el.getAttribute(phxThrottle);
      if (debounce3 === "") {
        debounce3 = defaultDebounce;
      }
      if (throttle === "") {
        throttle = defaultThrottle;
      }
      let value = debounce3 || throttle;
      switch (value) {
        case null:
          return callback();
        case "blur":
          if (this.once(el, "debounce-blur")) {
            el.addEventListener("blur", () => callback());
          }
          return;
        default:
          let timeout = parseInt(value);
          let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback();
          let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger);
          if (isNaN(timeout)) {
            return logError(`invalid throttle/debounce value: ${value}`);
          }
          if (throttle) {
            let newKeyDown = false;
            if (event.type === "keydown") {
              let prevKey = this.private(el, DEBOUNCE_PREV_KEY);
              this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);
              newKeyDown = prevKey !== event.key;
            }
            if (!newKeyDown && this.private(el, THROTTLED)) {
              return false;
            } else {
              callback();
              const t = setTimeout(() => {
                if (asyncFilter()) {
                  this.triggerCycle(el, DEBOUNCE_TRIGGER);
                }
              }, timeout);
              this.putPrivate(el, THROTTLED, t);
            }
          } else {
            setTimeout(() => {
              if (asyncFilter()) {
                this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle);
              }
            }, timeout);
          }
          let form = el.form;
          if (form && this.once(form, "bind-debounce")) {
            form.addEventListener("submit", () => {
              Array.from(new FormData(form).entries(), ([name]) => {
                let input = form.querySelector(`[name="${name}"]`);
                this.incCycle(input, DEBOUNCE_TRIGGER);
                this.deletePrivate(input, THROTTLED);
              });
            });
          }
          if (this.once(el, "bind-debounce")) {
            el.addEventListener("blur", () => {
              clearTimeout(this.private(el, THROTTLED));
              this.triggerCycle(el, DEBOUNCE_TRIGGER);
            });
          }
      }
    },
    triggerCycle(el, key, currentCycle) {
      let [cycle, trigger] = this.private(el, key);
      if (!currentCycle) {
        currentCycle = cycle;
      }
      if (currentCycle === cycle) {
        this.incCycle(el, key);
        trigger();
      }
    },
    once(el, key) {
      if (this.private(el, key) === true) {
        return false;
      }
      this.putPrivate(el, key, true);
      return true;
    },
    incCycle(el, key, trigger = function() {
    }) {
      let [currentCycle] = this.private(el, key) || [0, trigger];
      currentCycle++;
      this.putPrivate(el, key, [currentCycle, trigger]);
      return currentCycle;
    },
    maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom) {
      if (el.hasAttribute && (el.hasAttribute(phxViewportTop) || el.hasAttribute(phxViewportBottom))) {
        el.setAttribute("data-phx-hook", "Phoenix.InfiniteScroll");
      }
    },
    isFeedbackContainer(el, phxFeedbackFor) {
      return el.hasAttribute && el.hasAttribute(phxFeedbackFor);
    },
    maybeHideFeedback(container, feedbackContainers, phxFeedbackFor, phxFeedbackGroup) {
      const feedbackResults = {};
      feedbackContainers.forEach((el) => {
        if (!container.contains(el))
          return;
        const feedback = el.getAttribute(phxFeedbackFor);
        if (!feedback) {
          js_default.addOrRemoveClasses(el, [], [PHX_NO_FEEDBACK_CLASS]);
          return;
        }
        if (feedbackResults[feedback] === true) {
          this.hideFeedback(el);
          return;
        }
        feedbackResults[feedback] = this.shouldHideFeedback(container, feedback, phxFeedbackGroup);
        if (feedbackResults[feedback] === true) {
          this.hideFeedback(el);
        }
      });
    },
    hideFeedback(container) {
      js_default.addOrRemoveClasses(container, [PHX_NO_FEEDBACK_CLASS], []);
    },
    shouldHideFeedback(container, nameOrGroup, phxFeedbackGroup) {
      const query = `[name="${nameOrGroup}"],
                   [name="${nameOrGroup}[]"],
                   [${phxFeedbackGroup}="${nameOrGroup}"]`;
      let focused = false;
      DOM.all(container, query, (input) => {
        if (this.private(input, PHX_HAS_FOCUSED) || this.private(input, PHX_HAS_SUBMITTED)) {
          focused = true;
        }
      });
      return !focused;
    },
    feedbackSelector(input, phxFeedbackFor, phxFeedbackGroup) {
      let query = `[${phxFeedbackFor}="${input.name}"],
                 [${phxFeedbackFor}="${input.name.replace(/\[\]$/, "")}"]`;
      if (input.getAttribute(phxFeedbackGroup)) {
        query += `,[${phxFeedbackFor}="${input.getAttribute(phxFeedbackGroup)}"]`;
      }
      return query;
    },
    resetForm(form, phxFeedbackFor, phxFeedbackGroup) {
      Array.from(form.elements).forEach((input) => {
        let query = this.feedbackSelector(input, phxFeedbackFor, phxFeedbackGroup);
        this.deletePrivate(input, PHX_HAS_FOCUSED);
        this.deletePrivate(input, PHX_HAS_SUBMITTED);
        this.all(document, query, (feedbackEl) => {
          js_default.addOrRemoveClasses(feedbackEl, [PHX_NO_FEEDBACK_CLASS], []);
        });
      });
    },
    showError(inputEl, phxFeedbackFor, phxFeedbackGroup) {
      if (inputEl.name) {
        let query = this.feedbackSelector(inputEl, phxFeedbackFor, phxFeedbackGroup);
        this.all(document, query, (el) => {
          js_default.addOrRemoveClasses(el, [], [PHX_NO_FEEDBACK_CLASS]);
        });
      }
    },
    isPhxChild(node) {
      return node.getAttribute && node.getAttribute(PHX_PARENT_ID);
    },
    isPhxSticky(node) {
      return node.getAttribute && node.getAttribute(PHX_STICKY) !== null;
    },
    isChildOfAny(el, parents) {
      return !!parents.find((parent) => parent.contains(el));
    },
    firstPhxChild(el) {
      return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0];
    },
    dispatchEvent(target, name, opts = {}) {
      let defaultBubble = true;
      let isUploadTarget = target.nodeName === "INPUT" && target.type === "file";
      if (isUploadTarget && name === "click") {
        defaultBubble = false;
      }
      let bubbles = opts.bubbles === void 0 ? defaultBubble : !!opts.bubbles;
      let eventOpts = { bubbles, cancelable: true, detail: opts.detail || {} };
      let event = name === "click" ? new MouseEvent("click", eventOpts) : new CustomEvent(name, eventOpts);
      target.dispatchEvent(event);
    },
    cloneNode(node, html2) {
      if (typeof html2 === "undefined") {
        return node.cloneNode(true);
      } else {
        let cloned = node.cloneNode(false);
        cloned.innerHTML = html2;
        return cloned;
      }
    },
    mergeAttrs(target, source, opts = {}) {
      let exclude = new Set(opts.exclude || []);
      let isIgnored = opts.isIgnored;
      let sourceAttrs = source.attributes;
      for (let i = sourceAttrs.length - 1; i >= 0; i--) {
        let name = sourceAttrs[i].name;
        if (!exclude.has(name)) {
          const sourceValue = source.getAttribute(name);
          if (target.getAttribute(name) !== sourceValue && (!isIgnored || isIgnored && name.startsWith("data-"))) {
            target.setAttribute(name, sourceValue);
          }
        } else {
          if (name === "value" && target.value === source.value) {
            target.setAttribute("value", source.getAttribute(name));
          }
        }
      }
      let targetAttrs = target.attributes;
      for (let i = targetAttrs.length - 1; i >= 0; i--) {
        let name = targetAttrs[i].name;
        if (isIgnored) {
          if (name.startsWith("data-") && !source.hasAttribute(name) && ![PHX_REF, PHX_REF_SRC].includes(name)) {
            target.removeAttribute(name);
          }
        } else {
          if (!source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        }
      }
    },
    mergeFocusedInput(target, source) {
      if (!(target instanceof HTMLSelectElement)) {
        DOM.mergeAttrs(target, source, { exclude: ["value"] });
      }
      if (source.readOnly) {
        target.setAttribute("readonly", true);
      } else {
        target.removeAttribute("readonly");
      }
    },
    hasSelectionRange(el) {
      return el.setSelectionRange && (el.type === "text" || el.type === "textarea");
    },
    restoreFocus(focused, selectionStart, selectionEnd) {
      if (focused instanceof HTMLSelectElement) {
        focused.focus();
      }
      if (!DOM.isTextualInput(focused)) {
        return;
      }
      let wasFocused = focused.matches(":focus");
      if (focused.readOnly) {
        focused.blur();
      }
      if (!wasFocused) {
        focused.focus();
      }
      if (this.hasSelectionRange(focused)) {
        focused.setSelectionRange(selectionStart, selectionEnd);
      }
    },
    isFormInput(el) {
      return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== "button";
    },
    syncAttrsToProps(el) {
      if (el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0) {
        el.checked = el.getAttribute("checked") !== null;
      }
    },
    isTextualInput(el) {
      return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;
    },
    isNowTriggerFormExternal(el, phxTriggerExternal) {
      return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;
    },
    syncPendingRef(fromEl, toEl, disableWith) {
      let ref = fromEl.getAttribute(PHX_REF);
      if (ref === null) {
        return true;
      }
      let refSrc = fromEl.getAttribute(PHX_REF_SRC);
      if (DOM.isFormInput(fromEl) || fromEl.getAttribute(disableWith) !== null) {
        if (DOM.isUploadInput(fromEl)) {
          DOM.mergeAttrs(fromEl, toEl, { isIgnored: true });
        }
        DOM.putPrivate(fromEl, PHX_REF, toEl);
        return false;
      } else {
        PHX_EVENT_CLASSES.forEach((className) => {
          fromEl.classList.contains(className) && toEl.classList.add(className);
        });
        toEl.setAttribute(PHX_REF, ref);
        toEl.setAttribute(PHX_REF_SRC, refSrc);
        return true;
      }
    },
    cleanChildNodes(container, phxUpdate) {
      if (DOM.isPhxUpdate(container, phxUpdate, ["append", "prepend"])) {
        let toRemove = [];
        container.childNodes.forEach((childNode) => {
          if (!childNode.id) {
            let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === "";
            if (!isEmptyTextNode) {
              logError(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(childNode.outerHTML || childNode.nodeValue).trim()}"

`);
            }
            toRemove.push(childNode);
          }
        });
        toRemove.forEach((childNode) => childNode.remove());
      }
    },
    replaceRootContainer(container, tagName, attrs) {
      let retainedAttrs = /* @__PURE__ */ new Set(["id", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID]);
      if (container.tagName.toLowerCase() === tagName.toLowerCase()) {
        Array.from(container.attributes).filter((attr) => !retainedAttrs.has(attr.name.toLowerCase())).forEach((attr) => container.removeAttribute(attr.name));
        Object.keys(attrs).filter((name) => !retainedAttrs.has(name.toLowerCase())).forEach((attr) => container.setAttribute(attr, attrs[attr]));
        return container;
      } else {
        let newContainer = document.createElement(tagName);
        Object.keys(attrs).forEach((attr) => newContainer.setAttribute(attr, attrs[attr]));
        retainedAttrs.forEach((attr) => newContainer.setAttribute(attr, container.getAttribute(attr)));
        newContainer.innerHTML = container.innerHTML;
        container.replaceWith(newContainer);
        return newContainer;
      }
    },
    getSticky(el, name, defaultVal) {
      let op = (DOM.private(el, "sticky") || []).find(([existingName]) => name === existingName);
      if (op) {
        let [_name, _op, stashedResult] = op;
        return stashedResult;
      } else {
        return typeof defaultVal === "function" ? defaultVal() : defaultVal;
      }
    },
    deleteSticky(el, name) {
      this.updatePrivate(el, "sticky", [], (ops) => {
        return ops.filter(([existingName, _]) => existingName !== name);
      });
    },
    putSticky(el, name, op) {
      let stashedResult = op(el);
      this.updatePrivate(el, "sticky", [], (ops) => {
        let existingIndex = ops.findIndex(([existingName]) => name === existingName);
        if (existingIndex >= 0) {
          ops[existingIndex] = [name, op, stashedResult];
        } else {
          ops.push([name, op, stashedResult]);
        }
        return ops;
      });
    },
    applyStickyOperations(el) {
      let ops = DOM.private(el, "sticky");
      if (!ops) {
        return;
      }
      ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op));
    }
  };
  var dom_default = DOM;
  var UploadEntry = class {
    static isActive(fileEl, file) {
      let isNew = file._phxRef === void 0;
      let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return file.size > 0 && (isNew || isActive);
    }
    static isPreflighted(fileEl, file) {
      let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(",");
      let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return isPreflighted && this.isActive(fileEl, file);
    }
    static isPreflightInProgress(file) {
      return file._preflightInProgress === true;
    }
    static markPreflightInProgress(file) {
      file._preflightInProgress = true;
    }
    constructor(fileEl, file, view, autoUpload) {
      this.ref = LiveUploader.genFileRef(file);
      this.fileEl = fileEl;
      this.file = file;
      this.view = view;
      this.meta = null;
      this._isCancelled = false;
      this._isDone = false;
      this._progress = 0;
      this._lastProgressSent = -1;
      this._onDone = function() {
      };
      this._onElUpdated = this.onElUpdated.bind(this);
      this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      this.autoUpload = autoUpload;
    }
    metadata() {
      return this.meta;
    }
    progress(progress) {
      this._progress = Math.floor(progress);
      if (this._progress > this._lastProgressSent) {
        if (this._progress >= 100) {
          this._progress = 100;
          this._lastProgressSent = 100;
          this._isDone = true;
          this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {
            LiveUploader.untrackFile(this.fileEl, this.file);
            this._onDone();
          });
        } else {
          this._lastProgressSent = this._progress;
          this.view.pushFileProgress(this.fileEl, this.ref, this._progress);
        }
      }
    }
    isCancelled() {
      return this._isCancelled;
    }
    cancel() {
      this.file._preflightInProgress = false;
      this._isCancelled = true;
      this._isDone = true;
      this._onDone();
    }
    isDone() {
      return this._isDone;
    }
    error(reason = "failed") {
      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      this.view.pushFileProgress(this.fileEl, this.ref, { error: reason });
      if (!this.isAutoUpload()) {
        LiveUploader.clearFiles(this.fileEl);
      }
    }
    isAutoUpload() {
      return this.autoUpload;
    }
    onDone(callback) {
      this._onDone = () => {
        this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
        callback();
      };
    }
    onElUpdated() {
      let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      if (activeRefs.indexOf(this.ref) === -1) {
        LiveUploader.untrackFile(this.fileEl, this.file);
        this.cancel();
      }
    }
    toPreflightPayload() {
      return {
        last_modified: this.file.lastModified,
        name: this.file.name,
        relative_path: this.file.webkitRelativePath,
        size: this.file.size,
        type: this.file.type,
        ref: this.ref,
        meta: typeof this.file.meta === "function" ? this.file.meta() : void 0
      };
    }
    uploader(uploaders) {
      if (this.meta.uploader) {
        let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`);
        return { name: this.meta.uploader, callback };
      } else {
        return { name: "channel", callback: channelUploader };
      }
    }
    zipPostFlight(resp) {
      this.meta = resp.entries[this.ref];
      if (!this.meta) {
        logError(`no preflight upload response returned with ref ${this.ref}`, { input: this.fileEl, response: resp });
      }
    }
  };
  var liveUploaderFileRef = 0;
  var LiveUploader = class {
    static genFileRef(file) {
      let ref = file._phxRef;
      if (ref !== void 0) {
        return ref;
      } else {
        file._phxRef = (liveUploaderFileRef++).toString();
        return file._phxRef;
      }
    }
    static getEntryDataURL(inputEl, ref, callback) {
      let file = this.activeFiles(inputEl).find((file2) => this.genFileRef(file2) === ref);
      callback(URL.createObjectURL(file));
    }
    static hasUploadsInProgress(formEl) {
      let active = 0;
      dom_default.findUploadInputs(formEl).forEach((input) => {
        if (input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)) {
          active++;
        }
      });
      return active > 0;
    }
    static serializeUploads(inputEl) {
      let files = this.activeFiles(inputEl);
      let fileData = {};
      files.forEach((file) => {
        let entry = { path: inputEl.name };
        let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF);
        fileData[uploadRef] = fileData[uploadRef] || [];
        entry.ref = this.genFileRef(file);
        entry.last_modified = file.lastModified;
        entry.name = file.name || entry.ref;
        entry.relative_path = file.webkitRelativePath;
        entry.type = file.type;
        entry.size = file.size;
        if (typeof file.meta === "function") {
          entry.meta = file.meta();
        }
        fileData[uploadRef].push(entry);
      });
      return fileData;
    }
    static clearFiles(inputEl) {
      inputEl.value = null;
      inputEl.removeAttribute(PHX_UPLOAD_REF);
      dom_default.putPrivate(inputEl, "files", []);
    }
    static untrackFile(inputEl, file) {
      dom_default.putPrivate(inputEl, "files", dom_default.private(inputEl, "files").filter((f) => !Object.is(f, file)));
    }
    static trackFiles(inputEl, files, dataTransfer) {
      if (inputEl.getAttribute("multiple") !== null) {
        let newFiles = files.filter((file) => !this.activeFiles(inputEl).find((f) => Object.is(f, file)));
        dom_default.updatePrivate(inputEl, "files", [], (existing) => existing.concat(newFiles));
        inputEl.value = null;
      } else {
        if (dataTransfer && dataTransfer.files.length > 0) {
          inputEl.files = dataTransfer.files;
        }
        dom_default.putPrivate(inputEl, "files", files);
      }
    }
    static activeFileInputs(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((el) => el.files && this.activeFiles(el).length > 0);
    }
    static activeFiles(input) {
      return (dom_default.private(input, "files") || []).filter((f) => UploadEntry.isActive(input, f));
    }
    static inputsAwaitingPreflight(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((input) => this.filesAwaitingPreflight(input).length > 0);
    }
    static filesAwaitingPreflight(input) {
      return this.activeFiles(input).filter((f) => !UploadEntry.isPreflighted(input, f) && !UploadEntry.isPreflightInProgress(f));
    }
    static markPreflightInProgress(entries) {
      entries.forEach((entry) => UploadEntry.markPreflightInProgress(entry.file));
    }
    constructor(inputEl, view, onComplete) {
      this.autoUpload = dom_default.isAutoUpload(inputEl);
      this.view = view;
      this.onComplete = onComplete;
      this._entries = Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || []).map((file) => new UploadEntry(inputEl, file, view, this.autoUpload));
      LiveUploader.markPreflightInProgress(this._entries);
      this.numEntriesInProgress = this._entries.length;
    }
    isAutoUpload() {
      return this.autoUpload;
    }
    entries() {
      return this._entries;
    }
    initAdapterUpload(resp, onError, liveSocket2) {
      this._entries = this._entries.map((entry) => {
        if (entry.isCancelled()) {
          this.numEntriesInProgress--;
          if (this.numEntriesInProgress === 0) {
            this.onComplete();
          }
        } else {
          entry.zipPostFlight(resp);
          entry.onDone(() => {
            this.numEntriesInProgress--;
            if (this.numEntriesInProgress === 0) {
              this.onComplete();
            }
          });
        }
        return entry;
      });
      let groupedEntries = this._entries.reduce((acc, entry) => {
        if (!entry.meta) {
          return acc;
        }
        let { name, callback } = entry.uploader(liveSocket2.uploaders);
        acc[name] = acc[name] || { callback, entries: [] };
        acc[name].entries.push(entry);
        return acc;
      }, {});
      for (let name in groupedEntries) {
        let { callback, entries } = groupedEntries[name];
        callback(entries, onError, resp, liveSocket2);
      }
    }
  };
  var Hooks = {
    LiveFileUpload: {
      activeRefs() {
        return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS);
      },
      preflightedRefs() {
        return this.el.getAttribute(PHX_PREFLIGHTED_REFS);
      },
      mounted() {
        this.preflightedWas = this.preflightedRefs();
      },
      updated() {
        let newPreflights = this.preflightedRefs();
        if (this.preflightedWas !== newPreflights) {
          this.preflightedWas = newPreflights;
          if (newPreflights === "") {
            this.__view.cancelSubmit(this.el.form);
          }
        }
        if (this.activeRefs() === "") {
          this.el.value = null;
        }
        this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED));
      }
    },
    LiveImgPreview: {
      mounted() {
        this.ref = this.el.getAttribute("data-phx-entry-ref");
        this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF));
        LiveUploader.getEntryDataURL(this.inputEl, this.ref, (url) => {
          this.url = url;
          this.el.src = url;
        });
      },
      destroyed() {
        URL.revokeObjectURL(this.url);
      }
    },
    FocusWrap: {
      mounted() {
        this.focusStart = this.el.firstElementChild;
        this.focusEnd = this.el.lastElementChild;
        this.focusStart.addEventListener("focus", () => aria_default.focusLast(this.el));
        this.focusEnd.addEventListener("focus", () => aria_default.focusFirst(this.el));
        this.el.addEventListener("phx:show-end", () => this.el.focus());
        if (window.getComputedStyle(this.el).display !== "none") {
          aria_default.focusFirst(this.el);
        }
      }
    }
  };
  var findScrollContainer = (el) => {
    if (["scroll", "auto"].indexOf(getComputedStyle(el).overflowY) >= 0)
      return el;
    if (document.documentElement === el)
      return null;
    return findScrollContainer(el.parentElement);
  };
  var scrollTop = (scrollContainer) => {
    if (scrollContainer) {
      return scrollContainer.scrollTop;
    } else {
      return document.documentElement.scrollTop || document.body.scrollTop;
    }
  };
  var bottom = (scrollContainer) => {
    if (scrollContainer) {
      return scrollContainer.getBoundingClientRect().bottom;
    } else {
      return window.innerHeight || document.documentElement.clientHeight;
    }
  };
  var top = (scrollContainer) => {
    if (scrollContainer) {
      return scrollContainer.getBoundingClientRect().top;
    } else {
      return 0;
    }
  };
  var isAtViewportTop = (el, scrollContainer) => {
    let rect = el.getBoundingClientRect();
    return rect.top >= top(scrollContainer) && rect.left >= 0 && rect.top <= bottom(scrollContainer);
  };
  var isAtViewportBottom = (el, scrollContainer) => {
    let rect = el.getBoundingClientRect();
    return rect.right >= top(scrollContainer) && rect.left >= 0 && rect.bottom <= bottom(scrollContainer);
  };
  var isWithinViewport = (el, scrollContainer) => {
    let rect = el.getBoundingClientRect();
    return rect.top >= top(scrollContainer) && rect.left >= 0 && rect.top <= bottom(scrollContainer);
  };
  Hooks.InfiniteScroll = {
    mounted() {
      this.scrollContainer = findScrollContainer(this.el);
      let scrollBefore = scrollTop(this.scrollContainer);
      let topOverran = false;
      let throttleInterval = 500;
      let pendingOp = null;
      let onTopOverrun = this.throttle(throttleInterval, (topEvent, firstChild) => {
        pendingOp = () => true;
        this.liveSocket.execJSHookPush(this.el, topEvent, { id: firstChild.id, _overran: true }, () => {
          pendingOp = null;
        });
      });
      let onFirstChildAtTop = this.throttle(throttleInterval, (topEvent, firstChild) => {
        pendingOp = () => firstChild.scrollIntoView({ block: "start" });
        this.liveSocket.execJSHookPush(this.el, topEvent, { id: firstChild.id }, () => {
          pendingOp = null;
          window.requestAnimationFrame(() => {
            if (!isWithinViewport(firstChild, this.scrollContainer)) {
              firstChild.scrollIntoView({ block: "start" });
            }
          });
        });
      });
      let onLastChildAtBottom = this.throttle(throttleInterval, (bottomEvent, lastChild) => {
        pendingOp = () => lastChild.scrollIntoView({ block: "end" });
        this.liveSocket.execJSHookPush(this.el, bottomEvent, { id: lastChild.id }, () => {
          pendingOp = null;
          window.requestAnimationFrame(() => {
            if (!isWithinViewport(lastChild, this.scrollContainer)) {
              lastChild.scrollIntoView({ block: "end" });
            }
          });
        });
      });
      this.onScroll = (_e) => {
        let scrollNow = scrollTop(this.scrollContainer);
        if (pendingOp) {
          scrollBefore = scrollNow;
          return pendingOp();
        }
        let rect = this.el.getBoundingClientRect();
        let topEvent = this.el.getAttribute(this.liveSocket.binding("viewport-top"));
        let bottomEvent = this.el.getAttribute(this.liveSocket.binding("viewport-bottom"));
        let lastChild = this.el.lastElementChild;
        let firstChild = this.el.firstElementChild;
        let isScrollingUp = scrollNow < scrollBefore;
        let isScrollingDown = scrollNow > scrollBefore;
        if (isScrollingUp && topEvent && !topOverran && rect.top >= 0) {
          topOverran = true;
          onTopOverrun(topEvent, firstChild);
        } else if (isScrollingDown && topOverran && rect.top <= 0) {
          topOverran = false;
        }
        if (topEvent && isScrollingUp && isAtViewportTop(firstChild, this.scrollContainer)) {
          onFirstChildAtTop(topEvent, firstChild);
        } else if (bottomEvent && isScrollingDown && isAtViewportBottom(lastChild, this.scrollContainer)) {
          onLastChildAtBottom(bottomEvent, lastChild);
        }
        scrollBefore = scrollNow;
      };
      if (this.scrollContainer) {
        this.scrollContainer.addEventListener("scroll", this.onScroll);
      } else {
        window.addEventListener("scroll", this.onScroll);
      }
    },
    destroyed() {
      if (this.scrollContainer) {
        this.scrollContainer.removeEventListener("scroll", this.onScroll);
      } else {
        window.removeEventListener("scroll", this.onScroll);
      }
    },
    throttle(interval, callback) {
      let lastCallAt = 0;
      let timer;
      return (...args) => {
        let now = Date.now();
        let remainingTime = interval - (now - lastCallAt);
        if (remainingTime <= 0 || remainingTime > interval) {
          if (timer) {
            clearTimeout(timer);
            timer = null;
          }
          lastCallAt = now;
          callback(...args);
        } else if (!timer) {
          timer = setTimeout(() => {
            lastCallAt = Date.now();
            timer = null;
            callback(...args);
          }, remainingTime);
        }
      };
    }
  };
  var hooks_default = Hooks;
  var DOMPostMorphRestorer = class {
    constructor(containerBefore, containerAfter, updateType) {
      let idsBefore = /* @__PURE__ */ new Set();
      let idsAfter = new Set([...containerAfter.children].map((child) => child.id));
      let elementsToModify = [];
      Array.from(containerBefore.children).forEach((child) => {
        if (child.id) {
          idsBefore.add(child.id);
          if (idsAfter.has(child.id)) {
            let previousElementId = child.previousElementSibling && child.previousElementSibling.id;
            elementsToModify.push({ elementId: child.id, previousElementId });
          }
        }
      });
      this.containerId = containerAfter.id;
      this.updateType = updateType;
      this.elementsToModify = elementsToModify;
      this.elementIdsToAdd = [...idsAfter].filter((id) => !idsBefore.has(id));
    }
    perform() {
      let container = dom_default.byId(this.containerId);
      this.elementsToModify.forEach((elementToModify) => {
        if (elementToModify.previousElementId) {
          maybe(document.getElementById(elementToModify.previousElementId), (previousElem) => {
            maybe(document.getElementById(elementToModify.elementId), (elem) => {
              let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id;
              if (!isInRightPlace) {
                previousElem.insertAdjacentElement("afterend", elem);
              }
            });
          });
        } else {
          maybe(document.getElementById(elementToModify.elementId), (elem) => {
            let isInRightPlace = elem.previousElementSibling == null;
            if (!isInRightPlace) {
              container.insertAdjacentElement("afterbegin", elem);
            }
          });
        }
      });
      if (this.updateType == "prepend") {
        this.elementIdsToAdd.reverse().forEach((elemId) => {
          maybe(document.getElementById(elemId), (elem) => container.insertAdjacentElement("afterbegin", elem));
        });
      }
    }
  };
  var DOCUMENT_FRAGMENT_NODE = 11;
  function morphAttrs(fromNode, toNode) {
    var toNodeAttrs = toNode.attributes;
    var attr;
    var attrName;
    var attrNamespaceURI;
    var attrValue;
    var fromValue;
    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {
      return;
    }
    for (var i = toNodeAttrs.length - 1; i >= 0; i--) {
      attr = toNodeAttrs[i];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      attrValue = attr.value;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);
        if (fromValue !== attrValue) {
          if (attr.prefix === "xmlns") {
            attrName = attr.name;
          }
          fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);
        }
      } else {
        fromValue = fromNode.getAttribute(attrName);
        if (fromValue !== attrValue) {
          fromNode.setAttribute(attrName, attrValue);
        }
      }
    }
    var fromNodeAttrs = fromNode.attributes;
    for (var d = fromNodeAttrs.length - 1; d >= 0; d--) {
      attr = fromNodeAttrs[d];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {
          fromNode.removeAttributeNS(attrNamespaceURI, attrName);
        }
      } else {
        if (!toNode.hasAttribute(attrName)) {
          fromNode.removeAttribute(attrName);
        }
      }
    }
  }
  var range;
  var NS_XHTML = "http://www.w3.org/1999/xhtml";
  var doc = typeof document === "undefined" ? void 0 : document;
  var HAS_TEMPLATE_SUPPORT = !!doc && "content" in doc.createElement("template");
  var HAS_RANGE_SUPPORT = !!doc && doc.createRange && "createContextualFragment" in doc.createRange();
  function createFragmentFromTemplate(str) {
    var template = doc.createElement("template");
    template.innerHTML = str;
    return template.content.childNodes[0];
  }
  function createFragmentFromRange(str) {
    if (!range) {
      range = doc.createRange();
      range.selectNode(doc.body);
    }
    var fragment = range.createContextualFragment(str);
    return fragment.childNodes[0];
  }
  function createFragmentFromWrap(str) {
    var fragment = doc.createElement("body");
    fragment.innerHTML = str;
    return fragment.childNodes[0];
  }
  function toElement(str) {
    str = str.trim();
    if (HAS_TEMPLATE_SUPPORT) {
      return createFragmentFromTemplate(str);
    } else if (HAS_RANGE_SUPPORT) {
      return createFragmentFromRange(str);
    }
    return createFragmentFromWrap(str);
  }
  function compareNodeNames(fromEl, toEl) {
    var fromNodeName = fromEl.nodeName;
    var toNodeName = toEl.nodeName;
    var fromCodeStart, toCodeStart;
    if (fromNodeName === toNodeName) {
      return true;
    }
    fromCodeStart = fromNodeName.charCodeAt(0);
    toCodeStart = toNodeName.charCodeAt(0);
    if (fromCodeStart <= 90 && toCodeStart >= 97) {
      return fromNodeName === toNodeName.toUpperCase();
    } else if (toCodeStart <= 90 && fromCodeStart >= 97) {
      return toNodeName === fromNodeName.toUpperCase();
    } else {
      return false;
    }
  }
  function createElementNS(name, namespaceURI) {
    return !namespaceURI || namespaceURI === NS_XHTML ? doc.createElement(name) : doc.createElementNS(namespaceURI, name);
  }
  function moveChildren(fromEl, toEl) {
    var curChild = fromEl.firstChild;
    while (curChild) {
      var nextChild = curChild.nextSibling;
      toEl.appendChild(curChild);
      curChild = nextChild;
    }
    return toEl;
  }
  function syncBooleanAttrProp(fromEl, toEl, name) {
    if (fromEl[name] !== toEl[name]) {
      fromEl[name] = toEl[name];
      if (fromEl[name]) {
        fromEl.setAttribute(name, "");
      } else {
        fromEl.removeAttribute(name);
      }
    }
  }
  var specialElHandlers = {
    OPTION: function(fromEl, toEl) {
      var parentNode = fromEl.parentNode;
      if (parentNode) {
        var parentName = parentNode.nodeName.toUpperCase();
        if (parentName === "OPTGROUP") {
          parentNode = parentNode.parentNode;
          parentName = parentNode && parentNode.nodeName.toUpperCase();
        }
        if (parentName === "SELECT" && !parentNode.hasAttribute("multiple")) {
          if (fromEl.hasAttribute("selected") && !toEl.selected) {
            fromEl.setAttribute("selected", "selected");
            fromEl.removeAttribute("selected");
          }
          parentNode.selectedIndex = -1;
        }
      }
      syncBooleanAttrProp(fromEl, toEl, "selected");
    },
    INPUT: function(fromEl, toEl) {
      syncBooleanAttrProp(fromEl, toEl, "checked");
      syncBooleanAttrProp(fromEl, toEl, "disabled");
      if (fromEl.value !== toEl.value) {
        fromEl.value = toEl.value;
      }
      if (!toEl.hasAttribute("value")) {
        fromEl.removeAttribute("value");
      }
    },
    TEXTAREA: function(fromEl, toEl) {
      var newValue = toEl.value;
      if (fromEl.value !== newValue) {
        fromEl.value = newValue;
      }
      var firstChild = fromEl.firstChild;
      if (firstChild) {
        var oldValue = firstChild.nodeValue;
        if (oldValue == newValue || !newValue && oldValue == fromEl.placeholder) {
          return;
        }
        firstChild.nodeValue = newValue;
      }
    },
    SELECT: function(fromEl, toEl) {
      if (!toEl.hasAttribute("multiple")) {
        var selectedIndex = -1;
        var i = 0;
        var curChild = fromEl.firstChild;
        var optgroup;
        var nodeName;
        while (curChild) {
          nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();
          if (nodeName === "OPTGROUP") {
            optgroup = curChild;
            curChild = optgroup.firstChild;
          } else {
            if (nodeName === "OPTION") {
              if (curChild.hasAttribute("selected")) {
                selectedIndex = i;
                break;
              }
              i++;
            }
            curChild = curChild.nextSibling;
            if (!curChild && optgroup) {
              curChild = optgroup.nextSibling;
              optgroup = null;
            }
          }
        }
        fromEl.selectedIndex = selectedIndex;
      }
    }
  };
  var ELEMENT_NODE = 1;
  var DOCUMENT_FRAGMENT_NODE$1 = 11;
  var TEXT_NODE = 3;
  var COMMENT_NODE = 8;
  function noop() {
  }
  function defaultGetNodeKey(node) {
    if (node) {
      return node.getAttribute && node.getAttribute("id") || node.id;
    }
  }
  function morphdomFactory(morphAttrs2) {
    return function morphdom2(fromNode, toNode, options) {
      if (!options) {
        options = {};
      }
      if (typeof toNode === "string") {
        if (fromNode.nodeName === "#document" || fromNode.nodeName === "HTML" || fromNode.nodeName === "BODY") {
          var toNodeHtml = toNode;
          toNode = doc.createElement("html");
          toNode.innerHTML = toNodeHtml;
        } else {
          toNode = toElement(toNode);
        }
      } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
        toNode = toNode.firstElementChild;
      }
      var getNodeKey = options.getNodeKey || defaultGetNodeKey;
      var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;
      var onNodeAdded = options.onNodeAdded || noop;
      var onBeforeElUpdated = options.onBeforeElUpdated || noop;
      var onElUpdated = options.onElUpdated || noop;
      var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;
      var onNodeDiscarded = options.onNodeDiscarded || noop;
      var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;
      var skipFromChildren = options.skipFromChildren || noop;
      var addChild = options.addChild || function(parent, child) {
        return parent.appendChild(child);
      };
      var childrenOnly = options.childrenOnly === true;
      var fromNodesLookup = /* @__PURE__ */ Object.create(null);
      var keyedRemovalList = [];
      function addKeyedRemoval(key) {
        keyedRemovalList.push(key);
      }
      function walkDiscardedChildNodes(node, skipKeyedNodes) {
        if (node.nodeType === ELEMENT_NODE) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = void 0;
            if (skipKeyedNodes && (key = getNodeKey(curChild))) {
              addKeyedRemoval(key);
            } else {
              onNodeDiscarded(curChild);
              if (curChild.firstChild) {
                walkDiscardedChildNodes(curChild, skipKeyedNodes);
              }
            }
            curChild = curChild.nextSibling;
          }
        }
      }
      function removeNode(node, parentNode, skipKeyedNodes) {
        if (onBeforeNodeDiscarded(node) === false) {
          return;
        }
        if (parentNode) {
          parentNode.removeChild(node);
        }
        onNodeDiscarded(node);
        walkDiscardedChildNodes(node, skipKeyedNodes);
      }
      function indexTree(node) {
        if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = getNodeKey(curChild);
            if (key) {
              fromNodesLookup[key] = curChild;
            }
            indexTree(curChild);
            curChild = curChild.nextSibling;
          }
        }
      }
      indexTree(fromNode);
      function handleNodeAdded(el) {
        onNodeAdded(el);
        var curChild = el.firstChild;
        while (curChild) {
          var nextSibling = curChild.nextSibling;
          var key = getNodeKey(curChild);
          if (key) {
            var unmatchedFromEl = fromNodesLookup[key];
            if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {
              curChild.parentNode.replaceChild(unmatchedFromEl, curChild);
              morphEl(unmatchedFromEl, curChild);
            } else {
              handleNodeAdded(curChild);
            }
          } else {
            handleNodeAdded(curChild);
          }
          curChild = nextSibling;
        }
      }
      function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {
        while (curFromNodeChild) {
          var fromNextSibling = curFromNodeChild.nextSibling;
          if (curFromNodeKey = getNodeKey(curFromNodeChild)) {
            addKeyedRemoval(curFromNodeKey);
          } else {
            removeNode(curFromNodeChild, fromEl, true);
          }
          curFromNodeChild = fromNextSibling;
        }
      }
      function morphEl(fromEl, toEl, childrenOnly2) {
        var toElKey = getNodeKey(toEl);
        if (toElKey) {
          delete fromNodesLookup[toElKey];
        }
        if (!childrenOnly2) {
          if (onBeforeElUpdated(fromEl, toEl) === false) {
            return;
          }
          morphAttrs2(fromEl, toEl);
          onElUpdated(fromEl);
          if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {
            return;
          }
        }
        if (fromEl.nodeName !== "TEXTAREA") {
          morphChildren(fromEl, toEl);
        } else {
          specialElHandlers.TEXTAREA(fromEl, toEl);
        }
      }
      function morphChildren(fromEl, toEl) {
        var skipFrom = skipFromChildren(fromEl, toEl);
        var curToNodeChild = toEl.firstChild;
        var curFromNodeChild = fromEl.firstChild;
        var curToNodeKey;
        var curFromNodeKey;
        var fromNextSibling;
        var toNextSibling;
        var matchingFromEl;
        outer:
          while (curToNodeChild) {
            toNextSibling = curToNodeChild.nextSibling;
            curToNodeKey = getNodeKey(curToNodeChild);
            while (!skipFrom && curFromNodeChild) {
              fromNextSibling = curFromNodeChild.nextSibling;
              if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              curFromNodeKey = getNodeKey(curFromNodeChild);
              var curFromNodeType = curFromNodeChild.nodeType;
              var isCompatible = void 0;
              if (curFromNodeType === curToNodeChild.nodeType) {
                if (curFromNodeType === ELEMENT_NODE) {
                  if (curToNodeKey) {
                    if (curToNodeKey !== curFromNodeKey) {
                      if (matchingFromEl = fromNodesLookup[curToNodeKey]) {
                        if (fromNextSibling === matchingFromEl) {
                          isCompatible = false;
                        } else {
                          fromEl.insertBefore(matchingFromEl, curFromNodeChild);
                          if (curFromNodeKey) {
                            addKeyedRemoval(curFromNodeKey);
                          } else {
                            removeNode(curFromNodeChild, fromEl, true);
                          }
                          curFromNodeChild = matchingFromEl;
                          curFromNodeKey = getNodeKey(curFromNodeChild);
                        }
                      } else {
                        isCompatible = false;
                      }
                    }
                  } else if (curFromNodeKey) {
                    isCompatible = false;
                  }
                  isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);
                  if (isCompatible) {
                    morphEl(curFromNodeChild, curToNodeChild);
                  }
                } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {
                  isCompatible = true;
                  if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {
                    curFromNodeChild.nodeValue = curToNodeChild.nodeValue;
                  }
                }
              }
              if (isCompatible) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              if (curFromNodeKey) {
                addKeyedRemoval(curFromNodeKey);
              } else {
                removeNode(curFromNodeChild, fromEl, true);
              }
              curFromNodeChild = fromNextSibling;
            }
            if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {
              if (!skipFrom) {
                addChild(fromEl, matchingFromEl);
              }
              morphEl(matchingFromEl, curToNodeChild);
            } else {
              var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);
              if (onBeforeNodeAddedResult !== false) {
                if (onBeforeNodeAddedResult) {
                  curToNodeChild = onBeforeNodeAddedResult;
                }
                if (curToNodeChild.actualize) {
                  curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);
                }
                addChild(fromEl, curToNodeChild);
                handleNodeAdded(curToNodeChild);
              }
            }
            curToNodeChild = toNextSibling;
            curFromNodeChild = fromNextSibling;
          }
        cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);
        var specialElHandler = specialElHandlers[fromEl.nodeName];
        if (specialElHandler) {
          specialElHandler(fromEl, toEl);
        }
      }
      var morphedNode = fromNode;
      var morphedNodeType = morphedNode.nodeType;
      var toNodeType = toNode.nodeType;
      if (!childrenOnly) {
        if (morphedNodeType === ELEMENT_NODE) {
          if (toNodeType === ELEMENT_NODE) {
            if (!compareNodeNames(fromNode, toNode)) {
              onNodeDiscarded(fromNode);
              morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));
            }
          } else {
            morphedNode = toNode;
          }
        } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) {
          if (toNodeType === morphedNodeType) {
            if (morphedNode.nodeValue !== toNode.nodeValue) {
              morphedNode.nodeValue = toNode.nodeValue;
            }
            return morphedNode;
          } else {
            morphedNode = toNode;
          }
        }
      }
      if (morphedNode === toNode) {
        onNodeDiscarded(fromNode);
      } else {
        if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {
          return;
        }
        morphEl(morphedNode, toNode, childrenOnly);
        if (keyedRemovalList) {
          for (var i = 0, len = keyedRemovalList.length; i < len; i++) {
            var elToRemove = fromNodesLookup[keyedRemovalList[i]];
            if (elToRemove) {
              removeNode(elToRemove, elToRemove.parentNode, false);
            }
          }
        }
      }
      if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {
        if (morphedNode.actualize) {
          morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);
        }
        fromNode.parentNode.replaceChild(morphedNode, fromNode);
      }
      return morphedNode;
    };
  }
  var morphdom = morphdomFactory(morphAttrs);
  var morphdom_esm_default = morphdom;
  var DOMPatch = class {
    static patchEl(fromEl, toEl, activeElement) {
      morphdom_esm_default(fromEl, toEl, {
        childrenOnly: false,
        onBeforeElUpdated: (fromEl2, toEl2) => {
          if (activeElement && activeElement.isSameNode(fromEl2) && dom_default.isFormInput(fromEl2)) {
            dom_default.mergeFocusedInput(fromEl2, toEl2);
            return false;
          }
        }
      });
    }
    constructor(view, container, id, html2, streams, targetCID) {
      this.view = view;
      this.liveSocket = view.liveSocket;
      this.container = container;
      this.id = id;
      this.rootID = view.root.id;
      this.html = html2;
      this.streams = streams;
      this.streamInserts = {};
      this.streamComponentRestore = {};
      this.targetCID = targetCID;
      this.cidPatch = isCid(this.targetCID);
      this.pendingRemoves = [];
      this.phxRemove = this.liveSocket.binding("remove");
      this.callbacks = {
        beforeadded: [],
        beforeupdated: [],
        beforephxChildAdded: [],
        afteradded: [],
        afterupdated: [],
        afterdiscarded: [],
        afterphxChildAdded: [],
        aftertransitionsDiscarded: []
      };
    }
    before(kind, callback) {
      this.callbacks[`before${kind}`].push(callback);
    }
    after(kind, callback) {
      this.callbacks[`after${kind}`].push(callback);
    }
    trackBefore(kind, ...args) {
      this.callbacks[`before${kind}`].forEach((callback) => callback(...args));
    }
    trackAfter(kind, ...args) {
      this.callbacks[`after${kind}`].forEach((callback) => callback(...args));
    }
    markPrunableContentForRemoval() {
      let phxUpdate = this.liveSocket.binding(PHX_UPDATE);
      dom_default.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, (el) => {
        el.setAttribute(PHX_PRUNE, "");
      });
    }
    perform(isJoinPatch) {
      let { view, liveSocket: liveSocket2, container, html: html2 } = this;
      let targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html2) : container;
      if (this.isCIDPatch() && !targetContainer) {
        return;
      }
      let focused = liveSocket2.getActiveElement();
      let { selectionStart, selectionEnd } = focused && dom_default.hasSelectionRange(focused) ? focused : {};
      let phxUpdate = liveSocket2.binding(PHX_UPDATE);
      let phxFeedbackFor = liveSocket2.binding(PHX_FEEDBACK_FOR);
      let phxFeedbackGroup = liveSocket2.binding(PHX_FEEDBACK_GROUP);
      let disableWith = liveSocket2.binding(PHX_DISABLE_WITH);
      let phxViewportTop = liveSocket2.binding(PHX_VIEWPORT_TOP);
      let phxViewportBottom = liveSocket2.binding(PHX_VIEWPORT_BOTTOM);
      let phxTriggerExternal = liveSocket2.binding(PHX_TRIGGER_ACTION);
      let added = [];
      let feedbackContainers = [];
      let updates = [];
      let appendPrependUpdates = [];
      let externalFormTriggered = null;
      function morph(targetContainer2, source) {
        morphdom_esm_default(targetContainer2, source, {
          childrenOnly: targetContainer2.getAttribute(PHX_COMPONENT) === null,
          getNodeKey: (node) => {
            if (dom_default.isPhxDestroyed(node)) {
              return null;
            }
            if (isJoinPatch) {
              return node.id;
            }
            return node.id || node.getAttribute && node.getAttribute(PHX_MAGIC_ID);
          },
          skipFromChildren: (from) => {
            return from.getAttribute(phxUpdate) === PHX_STREAM;
          },
          addChild: (parent, child) => {
            let { ref, streamAt } = this.getStreamInsert(child);
            if (ref === void 0) {
              return parent.appendChild(child);
            }
            this.setStreamRef(child, ref);
            if (streamAt === 0) {
              parent.insertAdjacentElement("afterbegin", child);
            } else if (streamAt === -1) {
              parent.appendChild(child);
            } else if (streamAt > 0) {
              let sibling = Array.from(parent.children)[streamAt];
              parent.insertBefore(child, sibling);
            }
          },
          onBeforeNodeAdded: (el) => {
            dom_default.maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom);
            this.trackBefore("added", el);
            let morphedEl = el;
            if (!isJoinPatch && this.streamComponentRestore[el.id]) {
              morphedEl = this.streamComponentRestore[el.id];
              delete this.streamComponentRestore[el.id];
              morph.bind(this)(morphedEl, el);
            }
            return morphedEl;
          },
          onNodeAdded: (el) => {
            if (el.getAttribute) {
              this.maybeReOrderStream(el, true);
            }
            if (dom_default.isFeedbackContainer(el, phxFeedbackFor))
              feedbackContainers.push(el);
            if (el instanceof HTMLImageElement && el.srcset) {
              el.srcset = el.srcset;
            } else if (el instanceof HTMLVideoElement && el.autoplay) {
              el.play();
            }
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            if (dom_default.isPhxChild(el) && view.ownsElement(el) || dom_default.isPhxSticky(el) && view.ownsElement(el.parentNode)) {
              this.trackAfter("phxChildAdded", el);
            }
            added.push(el);
          },
          onNodeDiscarded: (el) => this.onNodeDiscarded(el),
          onBeforeNodeDiscarded: (el) => {
            if (el.getAttribute && el.getAttribute(PHX_PRUNE) !== null) {
              return true;
            }
            if (el.parentElement !== null && el.id && dom_default.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, "append", "prepend"])) {
              return false;
            }
            if (this.maybePendingRemove(el)) {
              return false;
            }
            if (this.skipCIDSibling(el)) {
              return false;
            }
            return true;
          },
          onElUpdated: (el) => {
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            updates.push(el);
            this.maybeReOrderStream(el, false);
          },
          onBeforeElUpdated: (fromEl, toEl) => {
            dom_default.maybeAddPrivateHooks(toEl, phxViewportTop, phxViewportBottom);
            if (dom_default.isFeedbackContainer(fromEl, phxFeedbackFor) || dom_default.isFeedbackContainer(toEl, phxFeedbackFor)) {
              feedbackContainers.push(fromEl);
              feedbackContainers.push(toEl);
            }
            dom_default.cleanChildNodes(toEl, phxUpdate);
            if (this.skipCIDSibling(toEl)) {
              this.maybeReOrderStream(fromEl);
              return false;
            }
            if (dom_default.isPhxSticky(fromEl)) {
              return false;
            }
            if (dom_default.isIgnored(fromEl, phxUpdate) || fromEl.form && fromEl.form.isSameNode(externalFormTriggered)) {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeAttrs(fromEl, toEl, { isIgnored: true });
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (fromEl.type === "number" && (fromEl.validity && fromEl.validity.badInput)) {
              return false;
            }
            if (!dom_default.syncPendingRef(fromEl, toEl, disableWith)) {
              if (dom_default.isUploadInput(fromEl)) {
                this.trackBefore("updated", fromEl, toEl);
                updates.push(fromEl);
              }
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (dom_default.isPhxChild(toEl)) {
              let prevSession = fromEl.getAttribute(PHX_SESSION);
              dom_default.mergeAttrs(fromEl, toEl, { exclude: [PHX_STATIC] });
              if (prevSession !== "") {
                fromEl.setAttribute(PHX_SESSION, prevSession);
              }
              fromEl.setAttribute(PHX_ROOT_ID, this.rootID);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            dom_default.copyPrivates(toEl, fromEl);
            let isFocusedFormEl = focused && fromEl.isSameNode(focused) && dom_default.isFormInput(fromEl);
            let focusedSelectChanged = isFocusedFormEl && this.isChangedSelect(fromEl, toEl);
            if (isFocusedFormEl && fromEl.type !== "hidden" && !focusedSelectChanged) {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeFocusedInput(fromEl, toEl);
              dom_default.syncAttrsToProps(fromEl);
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            } else {
              if (focusedSelectChanged) {
                fromEl.blur();
              }
              if (dom_default.isPhxUpdate(toEl, phxUpdate, ["append", "prepend"])) {
                appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)));
              }
              dom_default.syncAttrsToProps(toEl);
              dom_default.applyStickyOperations(toEl);
              this.trackBefore("updated", fromEl, toEl);
              return true;
            }
          }
        });
      }
      this.trackBefore("added", container);
      this.trackBefore("updated", container, container);
      liveSocket2.time("morphdom", () => {
        this.streams.forEach(([ref, inserts, deleteIds, reset]) => {
          inserts.forEach(([key, streamAt, limit]) => {
            this.streamInserts[key] = { ref, streamAt, limit, reset };
          });
          if (reset !== void 0) {
            dom_default.all(container, `[${PHX_STREAM_REF}="${ref}"]`, (child) => {
              this.removeStreamChildElement(child);
            });
          }
          deleteIds.forEach((id) => {
            let child = container.querySelector(`[id="${id}"]`);
            if (child) {
              this.removeStreamChildElement(child);
            }
          });
        });
        if (isJoinPatch) {
          dom_default.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, (el) => {
            this.liveSocket.owner(el, (view2) => {
              if (view2 === this.view) {
                Array.from(el.children).forEach((child) => {
                  this.removeStreamChildElement(child);
                });
              }
            });
          });
        }
        morph.bind(this)(targetContainer, html2);
      });
      if (liveSocket2.isDebugEnabled()) {
        detectDuplicateIds();
      }
      if (appendPrependUpdates.length > 0) {
        liveSocket2.time("post-morph append/prepend restoration", () => {
          appendPrependUpdates.forEach((update) => update.perform());
        });
      }
      dom_default.maybeHideFeedback(targetContainer, feedbackContainers, phxFeedbackFor, phxFeedbackGroup);
      liveSocket2.silenceEvents(() => dom_default.restoreFocus(focused, selectionStart, selectionEnd));
      dom_default.dispatchEvent(document, "phx:update");
      added.forEach((el) => this.trackAfter("added", el));
      updates.forEach((el) => this.trackAfter("updated", el));
      this.transitionPendingRemoves();
      if (externalFormTriggered) {
        liveSocket2.unload();
        Object.getPrototypeOf(externalFormTriggered).submit.call(externalFormTriggered);
      }
      return true;
    }
    onNodeDiscarded(el) {
      if (dom_default.isPhxChild(el) || dom_default.isPhxSticky(el)) {
        this.liveSocket.destroyViewByEl(el);
      }
      this.trackAfter("discarded", el);
    }
    maybePendingRemove(node) {
      if (node.getAttribute && node.getAttribute(this.phxRemove) !== null) {
        this.pendingRemoves.push(node);
        return true;
      } else {
        return false;
      }
    }
    removeStreamChildElement(child) {
      if (this.streamInserts[child.id]) {
        this.streamComponentRestore[child.id] = child;
        child.remove();
      } else {
        if (!this.maybePendingRemove(child)) {
          child.remove();
          this.onNodeDiscarded(child);
        }
      }
    }
    getStreamInsert(el) {
      let insert = el.id ? this.streamInserts[el.id] : {};
      return insert || {};
    }
    setStreamRef(el, ref) {
      dom_default.putSticky(el, PHX_STREAM_REF, (el2) => el2.setAttribute(PHX_STREAM_REF, ref));
    }
    maybeReOrderStream(el, isNew) {
      let { ref, streamAt, reset } = this.getStreamInsert(el);
      if (streamAt === void 0) {
        return;
      }
      this.setStreamRef(el, ref);
      if (!reset && !isNew) {
        return;
      }
      if (!el.parentElement) {
        return;
      }
      if (streamAt === 0) {
        el.parentElement.insertBefore(el, el.parentElement.firstElementChild);
      } else if (streamAt > 0) {
        let children = Array.from(el.parentElement.children);
        let oldIndex = children.indexOf(el);
        if (streamAt >= children.length - 1) {
          el.parentElement.appendChild(el);
        } else {
          let sibling = children[streamAt];
          if (oldIndex > streamAt) {
            el.parentElement.insertBefore(el, sibling);
          } else {
            el.parentElement.insertBefore(el, sibling.nextElementSibling);
          }
        }
      }
      this.maybeLimitStream(el);
    }
    maybeLimitStream(el) {
      let { limit } = this.getStreamInsert(el);
      let children = limit !== null && Array.from(el.parentElement.children);
      if (limit && limit < 0 && children.length > limit * -1) {
        children.slice(0, children.length + limit).forEach((child) => this.removeStreamChildElement(child));
      } else if (limit && limit >= 0 && children.length > limit) {
        children.slice(limit).forEach((child) => this.removeStreamChildElement(child));
      }
    }
    transitionPendingRemoves() {
      let { pendingRemoves, liveSocket: liveSocket2 } = this;
      if (pendingRemoves.length > 0) {
        liveSocket2.transitionRemoves(pendingRemoves);
        liveSocket2.requestDOMUpdate(() => {
          pendingRemoves.forEach((el) => {
            let child = dom_default.firstPhxChild(el);
            if (child) {
              liveSocket2.destroyViewByEl(child);
            }
            el.remove();
          });
          this.trackAfter("transitionsDiscarded", pendingRemoves);
        });
      }
    }
    isChangedSelect(fromEl, toEl) {
      if (!(fromEl instanceof HTMLSelectElement) || fromEl.multiple) {
        return false;
      }
      if (fromEl.options.length !== toEl.options.length) {
        return true;
      }
      let fromSelected = fromEl.selectedOptions[0];
      let toSelected = toEl.selectedOptions[0];
      if (fromSelected && fromSelected.hasAttribute("selected")) {
        toSelected.setAttribute("selected", fromSelected.getAttribute("selected"));
      }
      return !fromEl.isEqualNode(toEl);
    }
    isCIDPatch() {
      return this.cidPatch;
    }
    skipCIDSibling(el) {
      return el.nodeType === Node.ELEMENT_NODE && el.hasAttribute(PHX_SKIP);
    }
    targetCIDContainer(html2) {
      if (!this.isCIDPatch()) {
        return;
      }
      let [first, ...rest] = dom_default.findComponentNodeList(this.container, this.targetCID);
      if (rest.length === 0 && dom_default.childNodeLength(html2) === 1) {
        return first;
      } else {
        return first && first.parentNode;
      }
    }
    indexOf(parent, child) {
      return Array.from(parent.children).indexOf(child);
    }
  };
  var VOID_TAGS = /* @__PURE__ */ new Set([
    "area",
    "base",
    "br",
    "col",
    "command",
    "embed",
    "hr",
    "img",
    "input",
    "keygen",
    "link",
    "meta",
    "param",
    "source",
    "track",
    "wbr"
  ]);
  var quoteChars = /* @__PURE__ */ new Set(["'", '"']);
  var modifyRoot = (html2, attrs, clearInnerHTML) => {
    let i = 0;
    let insideComment = false;
    let beforeTag, afterTag, tag, tagNameEndsAt, id, newHTML;
    let lookahead = html2.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);
    if (lookahead === null) {
      throw new Error(`malformed html ${html2}`);
    }
    i = lookahead[0].length;
    beforeTag = lookahead[1];
    tag = lookahead[2];
    tagNameEndsAt = i;
    for (i; i < html2.length; i++) {
      if (html2.charAt(i) === ">") {
        break;
      }
      if (html2.charAt(i) === "=") {
        let isId = html2.slice(i - 3, i) === " id";
        i++;
        let char = html2.charAt(i);
        if (quoteChars.has(char)) {
          let attrStartsAt = i;
          i++;
          for (i; i < html2.length; i++) {
            if (html2.charAt(i) === char) {
              break;
            }
          }
          if (isId) {
            id = html2.slice(attrStartsAt + 1, i);
            break;
          }
        }
      }
    }
    let closeAt = html2.length - 1;
    insideComment = false;
    while (closeAt >= beforeTag.length + tag.length) {
      let char = html2.charAt(closeAt);
      if (insideComment) {
        if (char === "-" && html2.slice(closeAt - 3, closeAt) === "<!-") {
          insideComment = false;
          closeAt -= 4;
        } else {
          closeAt -= 1;
        }
      } else if (char === ">" && html2.slice(closeAt - 2, closeAt) === "--") {
        insideComment = true;
        closeAt -= 3;
      } else if (char === ">") {
        break;
      } else {
        closeAt -= 1;
      }
    }
    afterTag = html2.slice(closeAt + 1, html2.length);
    let attrsStr = Object.keys(attrs).map((attr) => attrs[attr] === true ? attr : `${attr}="${attrs[attr]}"`).join(" ");
    if (clearInnerHTML) {
      let idAttrStr = id ? ` id="${id}"` : "";
      if (VOID_TAGS.has(tag)) {
        newHTML = `<${tag}${idAttrStr}${attrsStr === "" ? "" : " "}${attrsStr}/>`;
      } else {
        newHTML = `<${tag}${idAttrStr}${attrsStr === "" ? "" : " "}${attrsStr}></${tag}>`;
      }
    } else {
      let rest = html2.slice(tagNameEndsAt, closeAt + 1);
      newHTML = `<${tag}${attrsStr === "" ? "" : " "}${attrsStr}${rest}`;
    }
    return [newHTML, beforeTag, afterTag];
  };
  var Rendered = class {
    static extract(diff) {
      let { [REPLY]: reply, [EVENTS]: events, [TITLE]: title } = diff;
      delete diff[REPLY];
      delete diff[EVENTS];
      delete diff[TITLE];
      return { diff, title, reply: reply || null, events: events || [] };
    }
    constructor(viewId, rendered) {
      this.viewId = viewId;
      this.rendered = {};
      this.magicId = 0;
      this.mergeDiff(rendered);
    }
    parentViewId() {
      return this.viewId;
    }
    toString(onlyCids) {
      let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids, true, {});
      return [str, streams];
    }
    recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids, changeTracking, rootAttrs) {
      onlyCids = onlyCids ? new Set(onlyCids) : null;
      let output = { buffer: "", components, onlyCids, streams: /* @__PURE__ */ new Set() };
      this.toOutputBuffer(rendered, null, output, changeTracking, rootAttrs);
      return [output.buffer, output.streams];
    }
    componentCIDs(diff) {
      return Object.keys(diff[COMPONENTS] || {}).map((i) => parseInt(i));
    }
    isComponentOnlyDiff(diff) {
      if (!diff[COMPONENTS]) {
        return false;
      }
      return Object.keys(diff).length === 1;
    }
    getComponent(diff, cid) {
      return diff[COMPONENTS][cid];
    }
    resetRender(cid) {
      if (this.rendered[COMPONENTS][cid]) {
        this.rendered[COMPONENTS][cid].reset = true;
      }
    }
    mergeDiff(diff) {
      let newc = diff[COMPONENTS];
      let cache = {};
      delete diff[COMPONENTS];
      this.rendered = this.mutableMerge(this.rendered, diff);
      this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};
      if (newc) {
        let oldc = this.rendered[COMPONENTS];
        for (let cid in newc) {
          newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache);
        }
        for (let cid in newc) {
          oldc[cid] = newc[cid];
        }
        diff[COMPONENTS] = newc;
      }
    }
    cachedFindComponent(cid, cdiff, oldc, newc, cache) {
      if (cache[cid]) {
        return cache[cid];
      } else {
        let ndiff, stat, scid = cdiff[STATIC];
        if (isCid(scid)) {
          let tdiff;
          if (scid > 0) {
            tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache);
          } else {
            tdiff = oldc[-scid];
          }
          stat = tdiff[STATIC];
          ndiff = this.cloneMerge(tdiff, cdiff, true);
          ndiff[STATIC] = stat;
        } else {
          ndiff = cdiff[STATIC] !== void 0 || oldc[cid] === void 0 ? cdiff : this.cloneMerge(oldc[cid], cdiff, false);
        }
        cache[cid] = ndiff;
        return ndiff;
      }
    }
    mutableMerge(target, source) {
      if (source[STATIC] !== void 0) {
        return source;
      } else {
        this.doMutableMerge(target, source);
        return target;
      }
    }
    doMutableMerge(target, source) {
      for (let key in source) {
        let val = source[key];
        let targetVal = target[key];
        let isObjVal = isObject(val);
        if (isObjVal && val[STATIC] === void 0 && isObject(targetVal)) {
          this.doMutableMerge(targetVal, val);
        } else {
          target[key] = val;
        }
      }
      if (target[ROOT]) {
        target.newRender = true;
      }
    }
    cloneMerge(target, source, pruneMagicId) {
      let merged = __spreadValues(__spreadValues({}, target), source);
      for (let key in merged) {
        let val = source[key];
        let targetVal = target[key];
        if (isObject(val) && val[STATIC] === void 0 && isObject(targetVal)) {
          merged[key] = this.cloneMerge(targetVal, val, pruneMagicId);
        } else if (val === void 0 && isObject(targetVal)) {
          merged[key] = this.cloneMerge(targetVal, {}, pruneMagicId);
        }
      }
      if (pruneMagicId) {
        delete merged.magicId;
        delete merged.newRender;
      } else if (target[ROOT]) {
        merged.newRender = true;
      }
      return merged;
    }
    componentToString(cid) {
      let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid, null);
      let [strippedHTML, _before, _after] = modifyRoot(str, {});
      return [strippedHTML, streams];
    }
    pruneCIDs(cids) {
      cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);
    }
    get() {
      return this.rendered;
    }
    isNewFingerprint(diff = {}) {
      return !!diff[STATIC];
    }
    templateStatic(part, templates) {
      if (typeof part === "number") {
        return templates[part];
      } else {
        return part;
      }
    }
    nextMagicID() {
      this.magicId++;
      return `m${this.magicId}-${this.parentViewId()}`;
    }
    toOutputBuffer(rendered, templates, output, changeTracking, rootAttrs = {}) {
      if (rendered[DYNAMICS]) {
        return this.comprehensionToBuffer(rendered, templates, output);
      }
      let { [STATIC]: statics } = rendered;
      statics = this.templateStatic(statics, templates);
      let isRoot = rendered[ROOT];
      let prevBuffer = output.buffer;
      if (isRoot) {
        output.buffer = "";
      }
      if (changeTracking && isRoot && !rendered.magicId) {
        rendered.newRender = true;
        rendered.magicId = this.nextMagicID();
      }
      output.buffer += statics[0];
      for (let i = 1; i < statics.length; i++) {
        this.dynamicToBuffer(rendered[i - 1], templates, output, changeTracking);
        output.buffer += statics[i];
      }
      if (isRoot) {
        let skip = false;
        let attrs;
        if (changeTracking || rendered.magicId) {
          skip = changeTracking && !rendered.newRender;
          attrs = __spreadValues({ [PHX_MAGIC_ID]: rendered.magicId }, rootAttrs);
        } else {
          attrs = rootAttrs;
        }
        if (skip) {
          attrs[PHX_SKIP] = true;
        }
        let [newRoot, commentBefore, commentAfter] = modifyRoot(output.buffer, attrs, skip);
        rendered.newRender = false;
        output.buffer = prevBuffer + commentBefore + newRoot + commentAfter;
      }
    }
    comprehensionToBuffer(rendered, templates, output) {
      let { [DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream } = rendered;
      let [_ref, _inserts, deleteIds, reset] = stream || [null, {}, [], null];
      statics = this.templateStatic(statics, templates);
      let compTemplates = templates || rendered[TEMPLATES];
      for (let d = 0; d < dynamics.length; d++) {
        let dynamic = dynamics[d];
        output.buffer += statics[0];
        for (let i = 1; i < statics.length; i++) {
          let changeTracking = false;
          this.dynamicToBuffer(dynamic[i - 1], compTemplates, output, changeTracking);
          output.buffer += statics[i];
        }
      }
      if (stream !== void 0 && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0 || reset)) {
        delete rendered[STREAM];
        rendered[DYNAMICS] = [];
        output.streams.add(stream);
      }
    }
    dynamicToBuffer(rendered, templates, output, changeTracking) {
      if (typeof rendered === "number") {
        let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids);
        output.buffer += str;
        output.streams = /* @__PURE__ */ new Set([...output.streams, ...streams]);
      } else if (isObject(rendered)) {
        this.toOutputBuffer(rendered, templates, output, changeTracking, {});
      } else {
        output.buffer += rendered;
      }
    }
    recursiveCIDToString(components, cid, onlyCids) {
      let component = components[cid] || logError(`no component for CID ${cid}`, components);
      let attrs = { [PHX_COMPONENT]: cid };
      let skip = onlyCids && !onlyCids.has(cid);
      component.newRender = !skip;
      component.magicId = `c${cid}-${this.parentViewId()}`;
      let changeTracking = !component.reset;
      let [html2, streams] = this.recursiveToString(component, components, onlyCids, changeTracking, attrs);
      delete component.reset;
      return [html2, streams];
    }
  };
  var viewHookID = 1;
  var ViewHook = class {
    static makeID() {
      return viewHookID++;
    }
    static elementID(el) {
      return el.phxHookId;
    }
    constructor(view, el, callbacks) {
      this.__view = view;
      this.liveSocket = view.liveSocket;
      this.__callbacks = callbacks;
      this.__listeners = /* @__PURE__ */ new Set();
      this.__isDisconnected = false;
      this.el = el;
      this.el.phxHookId = this.constructor.makeID();
      for (let key in this.__callbacks) {
        this[key] = this.__callbacks[key];
      }
    }
    __mounted() {
      this.mounted && this.mounted();
    }
    __updated() {
      this.updated && this.updated();
    }
    __beforeUpdate() {
      this.beforeUpdate && this.beforeUpdate();
    }
    __destroyed() {
      this.destroyed && this.destroyed();
    }
    __reconnected() {
      if (this.__isDisconnected) {
        this.__isDisconnected = false;
        this.reconnected && this.reconnected();
      }
    }
    __disconnected() {
      this.__isDisconnected = true;
      this.disconnected && this.disconnected();
    }
    pushEvent(event, payload = {}, onReply = function() {
    }) {
      return this.__view.pushHookEvent(this.el, null, event, payload, onReply);
    }
    pushEventTo(phxTarget, event, payload = {}, onReply = function() {
    }) {
      return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
        return view.pushHookEvent(this.el, targetCtx, event, payload, onReply);
      });
    }
    handleEvent(event, callback) {
      let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail);
      window.addEventListener(`phx:${event}`, callbackRef);
      this.__listeners.add(callbackRef);
      return callbackRef;
    }
    removeHandleEvent(callbackRef) {
      let event = callbackRef(null, true);
      window.removeEventListener(`phx:${event}`, callbackRef);
      this.__listeners.delete(callbackRef);
    }
    upload(name, files) {
      return this.__view.dispatchUploads(null, name, files);
    }
    uploadTo(phxTarget, name, files) {
      return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
        view.dispatchUploads(targetCtx, name, files);
      });
    }
    __cleanup__() {
      this.__listeners.forEach((callbackRef) => this.removeHandleEvent(callbackRef));
    }
  };
  var serializeForm = (form, metadata, onlyNames = []) => {
    const _a = metadata, { submitter } = _a, meta = __objRest(_a, ["submitter"]);
    let injectedElement;
    if (submitter && submitter.name) {
      const input = document.createElement("input");
      input.type = "hidden";
      const formId = submitter.getAttribute("form");
      if (formId) {
        input.setAttribute("form", formId);
      }
      input.name = submitter.name;
      input.value = submitter.value;
      submitter.parentElement.insertBefore(input, submitter);
      injectedElement = input;
    }
    const formData = new FormData(form);
    const toRemove = [];
    formData.forEach((val, key, _index) => {
      if (val instanceof File) {
        toRemove.push(key);
      }
    });
    toRemove.forEach((key) => formData.delete(key));
    const params = new URLSearchParams();
    for (let [key, val] of formData.entries()) {
      if (onlyNames.length === 0 || onlyNames.indexOf(key) >= 0) {
        params.append(key, val);
      }
    }
    if (submitter && injectedElement) {
      submitter.parentElement.removeChild(injectedElement);
    }
    for (let metaKey in meta) {
      params.append(metaKey, meta[metaKey]);
    }
    return params.toString();
  };
  var View = class {
    constructor(el, liveSocket2, parentView, flash, liveReferer) {
      this.isDead = false;
      this.liveSocket = liveSocket2;
      this.flash = flash;
      this.parent = parentView;
      this.root = parentView ? parentView.root : this;
      this.el = el;
      this.id = this.el.id;
      this.ref = 0;
      this.childJoins = 0;
      this.loaderTimer = null;
      this.pendingDiffs = [];
      this.pendingForms = /* @__PURE__ */ new Set();
      this.redirect = false;
      this.href = null;
      this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;
      this.joinPending = true;
      this.destroyed = false;
      this.joinCallback = function(onDone) {
        onDone && onDone();
      };
      this.stopCallback = function() {
      };
      this.pendingJoinOps = this.parent ? null : [];
      this.viewHooks = {};
      this.formSubmits = [];
      this.children = this.parent ? null : {};
      this.root.children[this.id] = {};
      this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {
        let url = this.href && this.expandURL(this.href);
        return {
          redirect: this.redirect ? url : void 0,
          url: this.redirect ? void 0 : url || void 0,
          params: this.connectParams(liveReferer),
          session: this.getSession(),
          static: this.getStatic(),
          flash: this.flash
        };
      });
    }
    setHref(href) {
      this.href = href;
    }
    setRedirect(href) {
      this.redirect = true;
      this.href = href;
    }
    isMain() {
      return this.el.hasAttribute(PHX_MAIN);
    }
    connectParams(liveReferer) {
      let params = this.liveSocket.params(this.el);
      let manifest = dom_default.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`).map((node) => node.src || node.href).filter((url) => typeof url === "string");
      if (manifest.length > 0) {
        params["_track_static"] = manifest;
      }
      params["_mounts"] = this.joinCount;
      params["_live_referer"] = liveReferer;
      return params;
    }
    isConnected() {
      return this.channel.canPush();
    }
    getSession() {
      return this.el.getAttribute(PHX_SESSION);
    }
    getStatic() {
      let val = this.el.getAttribute(PHX_STATIC);
      return val === "" ? null : val;
    }
    destroy(callback = function() {
    }) {
      this.destroyAllChildren();
      this.destroyed = true;
      delete this.root.children[this.id];
      if (this.parent) {
        delete this.root.children[this.parent.id][this.id];
      }
      clearTimeout(this.loaderTimer);
      let onFinished = () => {
        callback();
        for (let id in this.viewHooks) {
          this.destroyHook(this.viewHooks[id]);
        }
      };
      dom_default.markPhxChildDestroyed(this.el);
      this.log("destroyed", () => ["the child has been removed from the parent"]);
      this.channel.leave().receive("ok", onFinished).receive("error", onFinished).receive("timeout", onFinished);
    }
    setContainerClasses(...classes) {
      this.el.classList.remove(PHX_CONNECTED_CLASS, PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS, PHX_SERVER_ERROR_CLASS);
      this.el.classList.add(...classes);
    }
    showLoader(timeout) {
      clearTimeout(this.loaderTimer);
      if (timeout) {
        this.loaderTimer = setTimeout(() => this.showLoader(), timeout);
      } else {
        for (let id in this.viewHooks) {
          this.viewHooks[id].__disconnected();
        }
        this.setContainerClasses(PHX_LOADING_CLASS);
      }
    }
    execAll(binding) {
      dom_default.all(this.el, `[${binding}]`, (el) => this.liveSocket.execJS(el, el.getAttribute(binding)));
    }
    hideLoader() {
      clearTimeout(this.loaderTimer);
      this.setContainerClasses(PHX_CONNECTED_CLASS);
      this.execAll(this.binding("connected"));
    }
    triggerReconnected() {
      for (let id in this.viewHooks) {
        this.viewHooks[id].__reconnected();
      }
    }
    log(kind, msgCallback) {
      this.liveSocket.log(this, kind, msgCallback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.liveSocket.transition(time, onStart, onDone);
    }
    withinTargets(phxTarget, callback) {
      if (phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement) {
        return this.liveSocket.owner(phxTarget, (view) => callback(view, phxTarget));
      }
      if (isCid(phxTarget)) {
        let targets = dom_default.findComponentNodeList(this.el, phxTarget);
        if (targets.length === 0) {
          logError(`no component found matching phx-target of ${phxTarget}`);
        } else {
          callback(this, parseInt(phxTarget));
        }
      } else {
        let targets = Array.from(document.querySelectorAll(phxTarget));
        if (targets.length === 0) {
          logError(`nothing found matching the phx-target selector "${phxTarget}"`);
        }
        targets.forEach((target) => this.liveSocket.owner(target, (view) => callback(view, target)));
      }
    }
    applyDiff(type, rawDiff, callback) {
      this.log(type, () => ["", clone(rawDiff)]);
      let { diff, reply, events, title } = Rendered.extract(rawDiff);
      callback({ diff, reply, events });
      if (title) {
        window.requestAnimationFrame(() => dom_default.putTitle(title));
      }
    }
    onJoin(resp) {
      let { rendered, container } = resp;
      if (container) {
        let [tag, attrs] = container;
        this.el = dom_default.replaceRootContainer(this.el, tag, attrs);
      }
      this.childJoins = 0;
      this.joinPending = true;
      this.flash = null;
      browser_default.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS);
      this.applyDiff("mount", rendered, ({ diff, events }) => {
        this.rendered = new Rendered(this.id, diff);
        let [html2, streams] = this.renderContainer(null, "join");
        this.dropPendingRefs();
        let forms = this.formsForRecovery(html2).filter(([form, newForm, newCid]) => {
          return !this.pendingForms.has(form.id);
        });
        this.joinCount++;
        if (forms.length > 0) {
          forms.forEach(([form, newForm, newCid], i) => {
            this.pendingForms.add(form.id);
            this.pushFormRecovery(form, newCid, (resp2) => {
              this.pendingForms.delete(form.id);
              if (i === forms.length - 1) {
                this.onJoinComplete(resp2, html2, streams, events);
              }
            });
          });
        } else {
          this.onJoinComplete(resp, html2, streams, events);
        }
      });
    }
    dropPendingRefs() {
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}]`, (el) => {
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
      });
    }
    onJoinComplete({ live_patch }, html2, streams, events) {
      this.pendingForms.clear();
      if (this.joinCount > 1 || this.parent && !this.parent.isJoinPending()) {
        return this.applyJoinPatch(live_patch, html2, streams, events);
      }
      let newChildren = dom_default.findPhxChildrenInFragment(html2, this.id).filter((toEl) => {
        let fromEl = toEl.id && this.el.querySelector(`[id="${toEl.id}"]`);
        let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC);
        if (phxStatic) {
          toEl.setAttribute(PHX_STATIC, phxStatic);
        }
        if (fromEl) {
          fromEl.setAttribute(PHX_ROOT_ID, this.root.id);
        }
        return this.joinChild(toEl);
      });
      if (newChildren.length === 0) {
        if (this.parent) {
          this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html2, streams, events)]);
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
          this.applyJoinPatch(live_patch, html2, streams, events);
        }
      } else {
        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html2, streams, events)]);
      }
    }
    attachTrueDocEl() {
      this.el = dom_default.byId(this.id);
      this.el.setAttribute(PHX_ROOT_ID, this.root.id);
    }
    execNewMounted() {
      let phxViewportTop = this.binding(PHX_VIEWPORT_TOP);
      let phxViewportBottom = this.binding(PHX_VIEWPORT_BOTTOM);
      dom_default.all(this.el, `[${phxViewportTop}], [${phxViewportBottom}]`, (hookEl) => {
        dom_default.maybeAddPrivateHooks(hookEl, phxViewportTop, phxViewportBottom);
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, (hookEl) => {
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_MOUNTED)}]`, (el) => this.maybeMounted(el));
    }
    applyJoinPatch(live_patch, html2, streams, events) {
      this.attachTrueDocEl();
      let patch = new DOMPatch(this, this.el, this.id, html2, streams, null);
      patch.markPrunableContentForRemoval();
      this.performPatch(patch, false, true);
      this.joinNewChildren();
      this.execNewMounted();
      this.joinPending = false;
      this.liveSocket.dispatchEvents(events);
      this.applyPendingUpdates();
      if (live_patch) {
        let { kind, to } = live_patch;
        this.liveSocket.historyPatch(to, kind);
      }
      this.hideLoader();
      if (this.joinCount > 1) {
        this.triggerReconnected();
      }
      this.stopCallback();
    }
    triggerBeforeUpdateHook(fromEl, toEl) {
      this.liveSocket.triggerDOM("onBeforeElUpdated", [fromEl, toEl]);
      let hook = this.getHook(fromEl);
      let isIgnored = hook && dom_default.isIgnored(fromEl, this.binding(PHX_UPDATE));
      if (hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))) {
        hook.__beforeUpdate();
        return hook;
      }
    }
    maybeMounted(el) {
      let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED));
      let hasBeenInvoked = phxMounted && dom_default.private(el, "mounted");
      if (phxMounted && !hasBeenInvoked) {
        this.liveSocket.execJS(el, phxMounted);
        dom_default.putPrivate(el, "mounted", true);
      }
    }
    maybeAddNewHook(el, force) {
      let newHook = this.addHook(el);
      if (newHook) {
        newHook.__mounted();
      }
    }
    performPatch(patch, pruneCids, isJoinPatch = false) {
      let removedEls = [];
      let phxChildrenAdded = false;
      let updatedHookIds = /* @__PURE__ */ new Set();
      patch.after("added", (el) => {
        this.liveSocket.triggerDOM("onNodeAdded", [el]);
        let phxViewportTop = this.binding(PHX_VIEWPORT_TOP);
        let phxViewportBottom = this.binding(PHX_VIEWPORT_BOTTOM);
        dom_default.maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom);
        this.maybeAddNewHook(el);
        if (el.getAttribute) {
          this.maybeMounted(el);
        }
      });
      patch.after("phxChildAdded", (el) => {
        if (dom_default.isPhxSticky(el)) {
          this.liveSocket.joinRootViews();
        } else {
          phxChildrenAdded = true;
        }
      });
      patch.before("updated", (fromEl, toEl) => {
        let hook = this.triggerBeforeUpdateHook(fromEl, toEl);
        if (hook) {
          updatedHookIds.add(fromEl.id);
        }
      });
      patch.after("updated", (el) => {
        if (updatedHookIds.has(el.id)) {
          this.getHook(el).__updated();
        }
      });
      patch.after("discarded", (el) => {
        if (el.nodeType === Node.ELEMENT_NODE) {
          removedEls.push(el);
        }
      });
      patch.after("transitionsDiscarded", (els) => this.afterElementsRemoved(els, pruneCids));
      patch.perform(isJoinPatch);
      this.afterElementsRemoved(removedEls, pruneCids);
      return phxChildrenAdded;
    }
    afterElementsRemoved(elements, pruneCids) {
      let destroyedCIDs = [];
      elements.forEach((parent) => {
        let components = dom_default.all(parent, `[${PHX_COMPONENT}]`);
        let hooks = dom_default.all(parent, `[${this.binding(PHX_HOOK)}]`);
        components.concat(parent).forEach((el) => {
          let cid = this.componentID(el);
          if (isCid(cid) && destroyedCIDs.indexOf(cid) === -1) {
            destroyedCIDs.push(cid);
          }
        });
        hooks.concat(parent).forEach((hookEl) => {
          let hook = this.getHook(hookEl);
          hook && this.destroyHook(hook);
        });
      });
      if (pruneCids) {
        this.maybePushComponentsDestroyed(destroyedCIDs);
      }
    }
    joinNewChildren() {
      dom_default.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));
    }
    getChildById(id) {
      return this.root.children[this.id][id];
    }
    getDescendentByEl(el) {
      if (el.id === this.id) {
        return this;
      } else {
        return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];
      }
    }
    destroyDescendent(id) {
      for (let parentId in this.root.children) {
        for (let childId in this.root.children[parentId]) {
          if (childId === id) {
            return this.root.children[parentId][childId].destroy();
          }
        }
      }
    }
    joinChild(el) {
      let child = this.getChildById(el.id);
      if (!child) {
        let view = new View(el, this.liveSocket, this);
        this.root.children[this.id][view.id] = view;
        view.join();
        this.childJoins++;
        return true;
      }
    }
    isJoinPending() {
      return this.joinPending;
    }
    ackJoin(_child) {
      this.childJoins--;
      if (this.childJoins === 0) {
        if (this.parent) {
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
        }
      }
    }
    onAllChildJoinsComplete() {
      this.joinCallback(() => {
        this.pendingJoinOps.forEach(([view, op]) => {
          if (!view.isDestroyed()) {
            op();
          }
        });
        this.pendingJoinOps = [];
      });
    }
    update(diff, events) {
      if (this.isJoinPending() || this.liveSocket.hasPendingLink() && this.root.isMain()) {
        return this.pendingDiffs.push({ diff, events });
      }
      this.rendered.mergeDiff(diff);
      let phxChildrenAdded = false;
      if (this.rendered.isComponentOnlyDiff(diff)) {
        this.liveSocket.time("component patch complete", () => {
          let parentCids = dom_default.findExistingParentCIDs(this.el, this.rendered.componentCIDs(diff));
          parentCids.forEach((parentCID) => {
            if (this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)) {
              phxChildrenAdded = true;
            }
          });
        });
      } else if (!isEmpty(diff)) {
        this.liveSocket.time("full patch complete", () => {
          let [html2, streams] = this.renderContainer(diff, "update");
          let patch = new DOMPatch(this, this.el, this.id, html2, streams, null);
          phxChildrenAdded = this.performPatch(patch, true);
        });
      }
      this.liveSocket.dispatchEvents(events);
      if (phxChildrenAdded) {
        this.joinNewChildren();
      }
    }
    renderContainer(diff, kind) {
      return this.liveSocket.time(`toString diff (${kind})`, () => {
        let tag = this.el.tagName;
        let cids = diff ? this.rendered.componentCIDs(diff) : null;
        let [html2, streams] = this.rendered.toString(cids);
        return [`<${tag}>${html2}</${tag}>`, streams];
      });
    }
    componentPatch(diff, cid) {
      if (isEmpty(diff))
        return false;
      let [html2, streams] = this.rendered.componentToString(cid);
      let patch = new DOMPatch(this, this.el, this.id, html2, streams, cid);
      let childrenAdded = this.performPatch(patch, true);
      return childrenAdded;
    }
    getHook(el) {
      return this.viewHooks[ViewHook.elementID(el)];
    }
    addHook(el) {
      if (ViewHook.elementID(el) || !el.getAttribute) {
        return;
      }
      let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK));
      if (hookName && !this.ownsElement(el)) {
        return;
      }
      let callbacks = this.liveSocket.getHookCallbacks(hookName);
      if (callbacks) {
        if (!el.id) {
          logError(`no DOM ID for hook "${hookName}". Hooks require a unique ID on each element.`, el);
        }
        let hook = new ViewHook(this, el, callbacks);
        this.viewHooks[ViewHook.elementID(hook.el)] = hook;
        return hook;
      } else if (hookName !== null) {
        logError(`unknown hook found for "${hookName}"`, el);
      }
    }
    destroyHook(hook) {
      hook.__destroyed();
      hook.__cleanup__();
      delete this.viewHooks[ViewHook.elementID(hook.el)];
    }
    applyPendingUpdates() {
      this.pendingDiffs.forEach(({ diff, events }) => this.update(diff, events));
      this.pendingDiffs = [];
      this.eachChild((child) => child.applyPendingUpdates());
    }
    eachChild(callback) {
      let children = this.root.children[this.id] || {};
      for (let id in children) {
        callback(this.getChildById(id));
      }
    }
    onChannel(event, cb) {
      this.liveSocket.onChannel(this.channel, event, (resp) => {
        if (this.isJoinPending()) {
          this.root.pendingJoinOps.push([this, () => cb(resp)]);
        } else {
          this.liveSocket.requestDOMUpdate(() => cb(resp));
        }
      });
    }
    bindChannel() {
      this.liveSocket.onChannel(this.channel, "diff", (rawDiff) => {
        this.liveSocket.requestDOMUpdate(() => {
          this.applyDiff("update", rawDiff, ({ diff, events }) => this.update(diff, events));
        });
      });
      this.onChannel("redirect", ({ to, flash }) => this.onRedirect({ to, flash }));
      this.onChannel("live_patch", (redir) => this.onLivePatch(redir));
      this.onChannel("live_redirect", (redir) => this.onLiveRedirect(redir));
      this.channel.onError((reason) => this.onError(reason));
      this.channel.onClose((reason) => this.onClose(reason));
    }
    destroyAllChildren() {
      this.eachChild((child) => child.destroy());
    }
    onLiveRedirect(redir) {
      let { to, kind, flash } = redir;
      let url = this.expandURL(to);
      this.liveSocket.historyRedirect(url, kind, flash);
    }
    onLivePatch(redir) {
      let { to, kind } = redir;
      this.href = this.expandURL(to);
      this.liveSocket.historyPatch(to, kind);
    }
    expandURL(to) {
      return to.startsWith("/") ? `${window.location.protocol}//${window.location.host}${to}` : to;
    }
    onRedirect({ to, flash }) {
      this.liveSocket.redirect(to, flash);
    }
    isDestroyed() {
      return this.destroyed;
    }
    joinDead() {
      this.isDead = true;
    }
    join(callback) {
      this.showLoader(this.liveSocket.loaderTimeout);
      this.bindChannel();
      if (this.isMain()) {
        this.stopCallback = this.liveSocket.withPageLoading({ to: this.href, kind: "initial" });
      }
      this.joinCallback = (onDone) => {
        onDone = onDone || function() {
        };
        callback ? callback(this.joinCount, onDone) : onDone();
      };
      this.liveSocket.wrapPush(this, { timeout: false }, () => {
        return this.channel.join().receive("ok", (data) => {
          if (!this.isDestroyed()) {
            this.liveSocket.requestDOMUpdate(() => this.onJoin(data));
          }
        }).receive("error", (resp) => !this.isDestroyed() && this.onJoinError(resp)).receive("timeout", () => !this.isDestroyed() && this.onJoinError({ reason: "timeout" }));
      });
    }
    onJoinError(resp) {
      if (resp.reason === "reload") {
        this.log("error", () => [`failed mount with ${resp.status}. Falling back to page request`, resp]);
        if (this.isMain()) {
          this.onRedirect({ to: this.href });
        }
        return;
      } else if (resp.reason === "unauthorized" || resp.reason === "stale") {
        this.log("error", () => ["unauthorized live_redirect. Falling back to page request", resp]);
        if (this.isMain()) {
          this.onRedirect({ to: this.href });
        }
        return;
      }
      if (resp.redirect || resp.live_redirect) {
        this.joinPending = false;
        this.channel.leave();
      }
      if (resp.redirect) {
        return this.onRedirect(resp.redirect);
      }
      if (resp.live_redirect) {
        return this.onLiveRedirect(resp.live_redirect);
      }
      this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS]);
      this.log("error", () => ["unable to join", resp]);
      if (this.liveSocket.isConnected()) {
        this.liveSocket.reloadWithJitter(this);
      }
    }
    onClose(reason) {
      if (this.isDestroyed()) {
        return;
      }
      if (this.liveSocket.hasPendingLink() && reason !== "leave") {
        return this.liveSocket.reloadWithJitter(this);
      }
      this.destroyAllChildren();
      this.liveSocket.dropActiveElement(this);
      if (document.activeElement) {
        document.activeElement.blur();
      }
      if (this.liveSocket.isUnloaded()) {
        this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);
      }
    }
    onError(reason) {
      this.onClose(reason);
      if (this.liveSocket.isConnected()) {
        this.log("error", () => ["view crashed", reason]);
      }
      if (!this.liveSocket.isUnloaded()) {
        if (this.liveSocket.isConnected()) {
          this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS]);
        } else {
          this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS]);
        }
      }
    }
    displayError(classes) {
      if (this.isMain()) {
        dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: { to: this.href, kind: "error" } });
      }
      this.showLoader();
      this.setContainerClasses(...classes);
      this.execAll(this.binding("disconnected"));
    }
    pushWithReply(refGenerator, event, payload, onReply = function() {
    }) {
      if (!this.isConnected()) {
        return;
      }
      let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}];
      let onLoadingDone = function() {
      };
      if (opts.page_loading || el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {
        onLoadingDone = this.liveSocket.withPageLoading({ kind: "element", target: el });
      }
      if (typeof payload.cid !== "number") {
        delete payload.cid;
      }
      return this.liveSocket.wrapPush(this, { timeout: true }, () => {
        return this.channel.push(event, payload, PUSH_TIMEOUT).receive("ok", (resp) => {
          let finish = (hookReply) => {
            if (resp.redirect) {
              this.onRedirect(resp.redirect);
            }
            if (resp.live_patch) {
              this.onLivePatch(resp.live_patch);
            }
            if (resp.live_redirect) {
              this.onLiveRedirect(resp.live_redirect);
            }
            onLoadingDone();
            onReply(resp, hookReply);
          };
          if (resp.diff) {
            this.liveSocket.requestDOMUpdate(() => {
              this.applyDiff("update", resp.diff, ({ diff, reply, events }) => {
                if (ref !== null) {
                  this.undoRefs(ref);
                }
                this.update(diff, events);
                finish(reply);
              });
            });
          } else {
            if (ref !== null) {
              this.undoRefs(ref);
            }
            finish(null);
          }
        });
      });
    }
    undoRefs(ref) {
      if (!this.isConnected()) {
        return;
      }
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}="${ref}"]`, (el) => {
        let disabledVal = el.getAttribute(PHX_DISABLED);
        let readOnlyVal = el.getAttribute(PHX_READONLY);
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
        if (readOnlyVal !== null) {
          el.readOnly = readOnlyVal === "true" ? true : false;
          el.removeAttribute(PHX_READONLY);
        }
        if (disabledVal !== null) {
          el.disabled = disabledVal === "true" ? true : false;
          el.removeAttribute(PHX_DISABLED);
        }
        PHX_EVENT_CLASSES.forEach((className) => dom_default.removeClass(el, className));
        let disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);
        if (disableRestore !== null) {
          el.innerText = disableRestore;
          el.removeAttribute(PHX_DISABLE_WITH_RESTORE);
        }
        let toEl = dom_default.private(el, PHX_REF);
        if (toEl) {
          let hook = this.triggerBeforeUpdateHook(el, toEl);
          DOMPatch.patchEl(el, toEl, this.liveSocket.getActiveElement());
          if (hook) {
            hook.__updated();
          }
          dom_default.deletePrivate(el, PHX_REF);
        }
      });
    }
    putRef(elements, event, opts = {}) {
      let newRef = this.ref++;
      let disableWith = this.binding(PHX_DISABLE_WITH);
      if (opts.loading) {
        elements = elements.concat(dom_default.all(document, opts.loading));
      }
      elements.forEach((el) => {
        el.classList.add(`phx-${event}-loading`);
        el.setAttribute(PHX_REF, newRef);
        el.setAttribute(PHX_REF_SRC, this.el.id);
        let disableText = el.getAttribute(disableWith);
        if (disableText !== null) {
          if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {
            el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);
          }
          if (disableText !== "") {
            el.innerText = disableText;
          }
          el.setAttribute(PHX_DISABLED, el.getAttribute(PHX_DISABLED) || el.disabled);
          el.setAttribute("disabled", "");
        }
      });
      return [newRef, elements, opts];
    }
    componentID(el) {
      let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);
      return cid ? parseInt(cid) : null;
    }
    targetComponentID(target, targetCtx, opts = {}) {
      if (isCid(targetCtx)) {
        return targetCtx;
      }
      let cidOrSelector = opts.target || target.getAttribute(this.binding("target"));
      if (isCid(cidOrSelector)) {
        return parseInt(cidOrSelector);
      } else if (targetCtx && (cidOrSelector !== null || opts.target)) {
        return this.closestComponentID(targetCtx);
      } else {
        return null;
      }
    }
    closestComponentID(targetCtx) {
      if (isCid(targetCtx)) {
        return targetCtx;
      } else if (targetCtx) {
        return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), (el) => this.ownsElement(el) && this.componentID(el));
      } else {
        return null;
      }
    }
    pushHookEvent(el, targetCtx, event, payload, onReply) {
      if (!this.isConnected()) {
        this.log("hook", () => ["unable to push hook event. LiveView not connected", event, payload]);
        return false;
      }
      let [ref, els, opts] = this.putRef([el], "hook");
      this.pushWithReply(() => [ref, els, opts], "event", {
        type: "hook",
        event,
        value: payload,
        cid: this.closestComponentID(targetCtx)
      }, (resp, reply) => onReply(reply, ref));
      return ref;
    }
    extractMeta(el, meta, value) {
      let prefix = this.binding("value-");
      for (let i = 0; i < el.attributes.length; i++) {
        if (!meta) {
          meta = {};
        }
        let name = el.attributes[i].name;
        if (name.startsWith(prefix)) {
          meta[name.replace(prefix, "")] = el.getAttribute(name);
        }
      }
      if (el.value !== void 0 && !(el instanceof HTMLFormElement)) {
        if (!meta) {
          meta = {};
        }
        meta.value = el.value;
        if (el.tagName === "INPUT" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked) {
          delete meta.value;
        }
      }
      if (value) {
        if (!meta) {
          meta = {};
        }
        for (let key in value) {
          meta[key] = value[key];
        }
      }
      return meta;
    }
    pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}, onReply) {
      this.pushWithReply(() => this.putRef([el], type, opts), "event", {
        type,
        event: phxEvent,
        value: this.extractMeta(el, meta, opts.value),
        cid: this.targetComponentID(el, targetCtx, opts)
      }, (resp, reply) => onReply && onReply(reply));
    }
    pushFileProgress(fileEl, entryRef, progress, onReply = function() {
    }) {
      this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {
        view.pushWithReply(null, "progress", {
          event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),
          ref: fileEl.getAttribute(PHX_UPLOAD_REF),
          entry_ref: entryRef,
          progress,
          cid: view.targetComponentID(fileEl.form, targetCtx)
        }, onReply);
      });
    }
    pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback) {
      let uploads;
      let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx, opts);
      let refGenerator = () => this.putRef([inputEl, inputEl.form], "change", opts);
      let formData;
      let meta = this.extractMeta(inputEl.form);
      if (inputEl instanceof HTMLButtonElement) {
        meta.submitter = inputEl;
      }
      if (inputEl.getAttribute(this.binding("change"))) {
        formData = serializeForm(inputEl.form, __spreadValues({ _target: opts._target }, meta), [inputEl.name]);
      } else {
        formData = serializeForm(inputEl.form, __spreadValues({ _target: opts._target }, meta));
      }
      if (dom_default.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0) {
        LiveUploader.trackFiles(inputEl, Array.from(inputEl.files));
      }
      uploads = LiveUploader.serializeUploads(inputEl);
      let event = {
        type: "form",
        event: phxEvent,
        value: formData,
        uploads,
        cid
      };
      this.pushWithReply(refGenerator, "event", event, (resp) => {
        dom_default.showError(inputEl, this.liveSocket.binding(PHX_FEEDBACK_FOR), this.liveSocket.binding(PHX_FEEDBACK_GROUP));
        if (dom_default.isUploadInput(inputEl) && dom_default.isAutoUpload(inputEl)) {
          if (LiveUploader.filesAwaitingPreflight(inputEl).length > 0) {
            let [ref, _els] = refGenerator();
            this.uploadFiles(inputEl.form, targetCtx, ref, cid, (_uploads) => {
              callback && callback(resp);
              this.triggerAwaitingSubmit(inputEl.form);
              this.undoRefs(ref);
            });
          }
        } else {
          callback && callback(resp);
        }
      });
    }
    triggerAwaitingSubmit(formEl) {
      let awaitingSubmit = this.getScheduledSubmit(formEl);
      if (awaitingSubmit) {
        let [_el, _ref, _opts, callback] = awaitingSubmit;
        this.cancelSubmit(formEl);
        callback();
      }
    }
    getScheduledSubmit(formEl) {
      return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl));
    }
    scheduleSubmit(formEl, ref, opts, callback) {
      if (this.getScheduledSubmit(formEl)) {
        return true;
      }
      this.formSubmits.push([formEl, ref, opts, callback]);
    }
    cancelSubmit(formEl) {
      this.formSubmits = this.formSubmits.filter(([el, ref, _callback]) => {
        if (el.isSameNode(formEl)) {
          this.undoRefs(ref);
          return false;
        } else {
          return true;
        }
      });
    }
    disableForm(formEl, opts = {}) {
      let filterIgnored = (el) => {
        let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);
        return !(userIgnored || closestPhxBinding(el, "data-phx-update=ignore", el.form));
      };
      let filterDisables = (el) => {
        return el.hasAttribute(this.binding(PHX_DISABLE_WITH));
      };
      let filterButton = (el) => el.tagName == "BUTTON";
      let filterInput = (el) => ["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName);
      let formElements = Array.from(formEl.elements);
      let disables = formElements.filter(filterDisables);
      let buttons = formElements.filter(filterButton).filter(filterIgnored);
      let inputs = formElements.filter(filterInput).filter(filterIgnored);
      buttons.forEach((button) => {
        button.setAttribute(PHX_DISABLED, button.disabled);
        button.disabled = true;
      });
      inputs.forEach((input) => {
        input.setAttribute(PHX_READONLY, input.readOnly);
        input.readOnly = true;
        if (input.files) {
          input.setAttribute(PHX_DISABLED, input.disabled);
          input.disabled = true;
        }
      });
      formEl.setAttribute(this.binding(PHX_PAGE_LOADING), "");
      return this.putRef([formEl].concat(disables).concat(buttons).concat(inputs), "submit", opts);
    }
    pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply) {
      let refGenerator = () => this.disableForm(formEl, opts);
      let cid = this.targetComponentID(formEl, targetCtx);
      if (LiveUploader.hasUploadsInProgress(formEl)) {
        let [ref, _els] = refGenerator();
        let push = () => this.pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply);
        return this.scheduleSubmit(formEl, ref, opts, push);
      } else if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
        let [ref, els] = refGenerator();
        let proxyRefGen = () => [ref, els, opts];
        this.uploadFiles(formEl, targetCtx, ref, cid, (uploads) => {
          if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
            return this.undoRefs(ref);
          }
          let meta = this.extractMeta(formEl);
          let formData = serializeForm(formEl, __spreadValues({ submitter }, meta));
          this.pushWithReply(proxyRefGen, "event", {
            type: "form",
            event: phxEvent,
            value: formData,
            cid
          }, onReply);
        });
      } else if (!(formEl.hasAttribute(PHX_REF) && formEl.classList.contains("phx-submit-loading"))) {
        let meta = this.extractMeta(formEl);
        let formData = serializeForm(formEl, __spreadValues({ submitter }, meta));
        this.pushWithReply(refGenerator, "event", {
          type: "form",
          event: phxEvent,
          value: formData,
          cid
        }, onReply);
      }
    }
    uploadFiles(formEl, targetCtx, ref, cid, onComplete) {
      let joinCountAtUpload = this.joinCount;
      let inputEls = LiveUploader.activeFileInputs(formEl);
      let numFileInputsInProgress = inputEls.length;
      inputEls.forEach((inputEl) => {
        let uploader = new LiveUploader(inputEl, this, () => {
          numFileInputsInProgress--;
          if (numFileInputsInProgress === 0) {
            onComplete();
          }
        });
        let entries = uploader.entries().map((entry) => entry.toPreflightPayload());
        if (entries.length === 0) {
          numFileInputsInProgress--;
          return;
        }
        let payload = {
          ref: inputEl.getAttribute(PHX_UPLOAD_REF),
          entries,
          cid: this.targetComponentID(inputEl.form, targetCtx)
        };
        this.log("upload", () => ["sending preflight request", payload]);
        this.pushWithReply(null, "allow_upload", payload, (resp) => {
          this.log("upload", () => ["got preflight response", resp]);
          uploader.entries().forEach((entry) => {
            if (resp.entries && !resp.entries[entry.ref]) {
              this.handleFailedEntryPreflight(entry.ref, "failed preflight", uploader);
            }
          });
          if (resp.error || Object.keys(resp.entries).length === 0) {
            this.undoRefs(ref);
            let errors = resp.error || [];
            errors.map(([entry_ref, reason]) => {
              this.handleFailedEntryPreflight(entry_ref, reason, uploader);
            });
          } else {
            let onError = (callback) => {
              this.channel.onError(() => {
                if (this.joinCount === joinCountAtUpload) {
                  callback();
                }
              });
            };
            uploader.initAdapterUpload(resp, onError, this.liveSocket);
          }
        });
      });
    }
    handleFailedEntryPreflight(uploadRef, reason, uploader) {
      if (uploader.isAutoUpload()) {
        let entry = uploader.entries().find((entry2) => entry2.ref === uploadRef.toString());
        if (entry) {
          entry.cancel();
        }
      } else {
        uploader.entries().map((entry) => entry.cancel());
      }
      this.log("upload", () => [`error for entry ${uploadRef}`, reason]);
    }
    dispatchUploads(targetCtx, name, filesOrBlobs) {
      let targetElement = this.targetCtxElement(targetCtx) || this.el;
      let inputs = dom_default.findUploadInputs(targetElement).filter((el) => el.name === name);
      if (inputs.length === 0) {
        logError(`no live file inputs found matching the name "${name}"`);
      } else if (inputs.length > 1) {
        logError(`duplicate live file inputs found matching the name "${name}"`);
      } else {
        dom_default.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, { detail: { files: filesOrBlobs } });
      }
    }
    targetCtxElement(targetCtx) {
      if (isCid(targetCtx)) {
        let [target] = dom_default.findComponentNodeList(this.el, targetCtx);
        return target;
      } else if (targetCtx) {
        return targetCtx;
      } else {
        return null;
      }
    }
    pushFormRecovery(form, newCid, callback) {
      this.liveSocket.withinOwners(form, (view, targetCtx) => {
        let phxChange = this.binding("change");
        let inputs = Array.from(form.elements).filter((el) => dom_default.isFormInput(el) && el.name && !el.hasAttribute(phxChange));
        if (inputs.length === 0) {
          return;
        }
        inputs.forEach((input2) => input2.hasAttribute(PHX_UPLOAD_REF) && LiveUploader.clearFiles(input2));
        let input = inputs.find((el) => el.type !== "hidden") || inputs[0];
        let phxEvent = form.getAttribute(this.binding(PHX_AUTO_RECOVER)) || form.getAttribute(this.binding("change"));
        js_default.exec("change", phxEvent, view, input, ["push", { _target: input.name, newCid, callback }]);
      });
    }
    pushLinkPatch(href, targetEl, callback) {
      let linkRef = this.liveSocket.setPendingLink(href);
      let refGen = targetEl ? () => this.putRef([targetEl], "click") : null;
      let fallback = () => this.liveSocket.redirect(window.location.href);
      let url = href.startsWith("/") ? `${location.protocol}//${location.host}${href}` : href;
      let push = this.pushWithReply(refGen, "live_patch", { url }, (resp) => {
        this.liveSocket.requestDOMUpdate(() => {
          if (resp.link_redirect) {
            this.liveSocket.replaceMain(href, null, callback, linkRef);
          } else {
            if (this.liveSocket.commitPendingLink(linkRef)) {
              this.href = href;
            }
            this.applyPendingUpdates();
            callback && callback(linkRef);
          }
        });
      });
      if (push) {
        push.receive("timeout", fallback);
      } else {
        fallback();
      }
    }
    formsForRecovery(html2) {
      if (this.joinCount === 0) {
        return [];
      }
      let phxChange = this.binding("change");
      let template = document.createElement("template");
      template.innerHTML = html2;
      return dom_default.all(this.el, `form[${phxChange}]`).filter((form) => form.id && this.ownsElement(form)).filter((form) => form.elements.length > 0).filter((form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== "ignore").map((form) => {
        const phxChangeValue = CSS.escape(form.getAttribute(phxChange));
        let newForm = template.content.querySelector(`form[id="${form.id}"][${phxChange}="${phxChangeValue}"]`);
        if (newForm) {
          return [form, newForm, this.targetComponentID(newForm)];
        } else {
          return [form, form, this.targetComponentID(form)];
        }
      }).filter(([form, newForm, newCid]) => newForm);
    }
    maybePushComponentsDestroyed(destroyedCIDs) {
      let willDestroyCIDs = destroyedCIDs.filter((cid) => {
        return dom_default.findComponentNodeList(this.el, cid).length === 0;
      });
      if (willDestroyCIDs.length > 0) {
        willDestroyCIDs.forEach((cid) => this.rendered.resetRender(cid));
        this.pushWithReply(null, "cids_will_destroy", { cids: willDestroyCIDs }, () => {
          let completelyDestroyCIDs = willDestroyCIDs.filter((cid) => {
            return dom_default.findComponentNodeList(this.el, cid).length === 0;
          });
          if (completelyDestroyCIDs.length > 0) {
            this.pushWithReply(null, "cids_destroyed", { cids: completelyDestroyCIDs }, (resp) => {
              this.rendered.pruneCIDs(resp.cids);
            });
          }
        });
      }
    }
    ownsElement(el) {
      let parentViewEl = el.closest(PHX_VIEW_SELECTOR);
      return el.getAttribute(PHX_PARENT_ID) === this.id || parentViewEl && parentViewEl.id === this.id || !parentViewEl && this.isDead;
    }
    submitForm(form, targetCtx, phxEvent, submitter, opts = {}) {
      dom_default.putPrivate(form, PHX_HAS_SUBMITTED, true);
      const phxFeedbackFor = this.liveSocket.binding(PHX_FEEDBACK_FOR);
      const phxFeedbackGroup = this.liveSocket.binding(PHX_FEEDBACK_GROUP);
      const inputs = Array.from(form.elements);
      inputs.forEach((input) => dom_default.putPrivate(input, PHX_HAS_SUBMITTED, true));
      this.liveSocket.blurActiveElement(this);
      this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {
        inputs.forEach((input) => dom_default.showError(input, phxFeedbackFor, phxFeedbackGroup));
        this.liveSocket.restorePreviouslyActiveFocus();
      });
    }
    binding(kind) {
      return this.liveSocket.binding(kind);
    }
  };
  var LiveSocket = class {
    constructor(url, phxSocket, opts = {}) {
      this.unloaded = false;
      if (!phxSocket || phxSocket.constructor.name === "Object") {
        throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);
      }
      this.socket = new phxSocket(url, opts);
      this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;
      this.opts = opts;
      this.params = closure2(opts.params || {});
      this.viewLogger = opts.viewLogger;
      this.metadataCallbacks = opts.metadata || {};
      this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});
      this.activeElement = null;
      this.prevActive = null;
      this.silenced = false;
      this.main = null;
      this.outgoingMainEl = null;
      this.clickStartedAtTarget = null;
      this.linkRef = 1;
      this.roots = {};
      this.href = window.location.href;
      this.pendingLink = null;
      this.currentLocation = clone(window.location);
      this.hooks = opts.hooks || {};
      this.uploaders = opts.uploaders || {};
      this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;
      this.reloadWithJitterTimer = null;
      this.maxReloads = opts.maxReloads || MAX_RELOADS;
      this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN;
      this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX;
      this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER;
      this.localStorage = opts.localStorage || window.localStorage;
      this.sessionStorage = opts.sessionStorage || window.sessionStorage;
      this.boundTopLevelEvents = false;
      this.domCallbacks = Object.assign({ onNodeAdded: closure2(), onBeforeElUpdated: closure2() }, opts.dom || {});
      this.transitions = new TransitionSet();
      window.addEventListener("pagehide", (_e) => {
        this.unloaded = true;
      });
      this.socket.onOpen(() => {
        if (this.isUnloaded()) {
          window.location.reload();
        }
      });
    }
    isProfileEnabled() {
      return this.sessionStorage.getItem(PHX_LV_PROFILE) === "true";
    }
    isDebugEnabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "true";
    }
    isDebugDisabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "false";
    }
    enableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "true");
    }
    enableProfiling() {
      this.sessionStorage.setItem(PHX_LV_PROFILE, "true");
    }
    disableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "false");
    }
    disableProfiling() {
      this.sessionStorage.removeItem(PHX_LV_PROFILE);
    }
    enableLatencySim(upperBoundMs) {
      this.enableDebug();
      console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable");
      this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);
    }
    disableLatencySim() {
      this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM);
    }
    getLatencySim() {
      let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM);
      return str ? parseInt(str) : null;
    }
    getSocket() {
      return this.socket;
    }
    connect() {
      if (window.location.hostname === "localhost" && !this.isDebugDisabled()) {
        this.enableDebug();
      }
      let doConnect = () => {
        if (this.joinRootViews()) {
          this.bindTopLevelEvents();
          this.socket.connect();
        } else if (this.main) {
          this.socket.connect();
        } else {
          this.bindTopLevelEvents({ dead: true });
        }
        this.joinDeadView();
      };
      if (["complete", "loaded", "interactive"].indexOf(document.readyState) >= 0) {
        doConnect();
      } else {
        document.addEventListener("DOMContentLoaded", () => doConnect());
      }
    }
    disconnect(callback) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.disconnect(callback);
    }
    replaceTransport(transport) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.replaceTransport(transport);
      this.connect();
    }
    execJS(el, encodedJS, eventType = null) {
      this.owner(el, (view) => js_default.exec(eventType, encodedJS, view, el));
    }
    execJSHookPush(el, phxEvent, data, callback) {
      this.withinOwners(el, (view) => {
        js_default.exec("hook", phxEvent, view, el, ["push", { data, callback }]);
      });
    }
    unload() {
      if (this.unloaded) {
        return;
      }
      if (this.main && this.isConnected()) {
        this.log(this.main, "socket", () => ["disconnect for page nav"]);
      }
      this.unloaded = true;
      this.destroyAllViews();
      this.disconnect();
    }
    triggerDOM(kind, args) {
      this.domCallbacks[kind](...args);
    }
    time(name, func) {
      if (!this.isProfileEnabled() || !console.time) {
        return func();
      }
      console.time(name);
      let result = func();
      console.timeEnd(name);
      return result;
    }
    log(view, kind, msgCallback) {
      if (this.viewLogger) {
        let [msg, obj] = msgCallback();
        this.viewLogger(view, kind, msg, obj);
      } else if (this.isDebugEnabled()) {
        let [msg, obj] = msgCallback();
        debug(view, kind, msg, obj);
      }
    }
    requestDOMUpdate(callback) {
      this.transitions.after(callback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.transitions.addTransition(time, onStart, onDone);
    }
    onChannel(channel, event, cb) {
      channel.on(event, (data) => {
        let latency = this.getLatencySim();
        if (!latency) {
          cb(data);
        } else {
          setTimeout(() => cb(data), latency);
        }
      });
    }
    wrapPush(view, opts, push) {
      let latency = this.getLatencySim();
      let oldJoinCount = view.joinCount;
      if (!latency) {
        if (this.isConnected() && opts.timeout) {
          return push().receive("timeout", () => {
            if (view.joinCount === oldJoinCount && !view.isDestroyed()) {
              this.reloadWithJitter(view, () => {
                this.log(view, "timeout", () => ["received timeout while communicating with server. Falling back to hard refresh for recovery"]);
              });
            }
          });
        } else {
          return push();
        }
      }
      let fakePush = {
        receives: [],
        receive(kind, cb) {
          this.receives.push([kind, cb]);
        }
      };
      setTimeout(() => {
        if (view.isDestroyed()) {
          return;
        }
        fakePush.receives.reduce((acc, [kind, cb]) => acc.receive(kind, cb), push());
      }, latency);
      return fakePush;
    }
    reloadWithJitter(view, log) {
      clearTimeout(this.reloadWithJitterTimer);
      this.disconnect();
      let minMs = this.reloadJitterMin;
      let maxMs = this.reloadJitterMax;
      let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;
      let tries = browser_default.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, (count) => count + 1);
      if (tries > this.maxReloads) {
        afterMs = this.failsafeJitter;
      }
      this.reloadWithJitterTimer = setTimeout(() => {
        if (view.isDestroyed() || view.isConnected()) {
          return;
        }
        view.destroy();
        log ? log() : this.log(view, "join", () => [`encountered ${tries} consecutive reloads`]);
        if (tries > this.maxReloads) {
          this.log(view, "join", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);
        }
        if (this.hasPendingLink()) {
          window.location = this.pendingLink;
        } else {
          window.location.reload();
        }
      }, afterMs);
    }
    getHookCallbacks(name) {
      return name && name.startsWith("Phoenix.") ? hooks_default[name.split(".")[1]] : this.hooks[name];
    }
    isUnloaded() {
      return this.unloaded;
    }
    isConnected() {
      return this.socket.isConnected();
    }
    getBindingPrefix() {
      return this.bindingPrefix;
    }
    binding(kind) {
      return `${this.getBindingPrefix()}${kind}`;
    }
    channel(topic, params) {
      return this.socket.channel(topic, params);
    }
    joinDeadView() {
      let body = document.body;
      if (body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)) {
        let view = this.newRootView(body);
        view.setHref(this.getHref());
        view.joinDead();
        if (!this.main) {
          this.main = view;
        }
        window.requestAnimationFrame(() => view.execNewMounted());
      }
    }
    joinRootViews() {
      let rootsFound = false;
      dom_default.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, (rootEl) => {
        if (!this.getRootById(rootEl.id)) {
          let view = this.newRootView(rootEl);
          view.setHref(this.getHref());
          view.join();
          if (rootEl.hasAttribute(PHX_MAIN)) {
            this.main = view;
          }
        }
        rootsFound = true;
      });
      return rootsFound;
    }
    redirect(to, flash) {
      this.unload();
      browser_default.redirect(to, flash);
    }
    replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)) {
      let liveReferer = this.currentLocation.href;
      this.outgoingMainEl = this.outgoingMainEl || this.main.el;
      let newMainEl = dom_default.cloneNode(this.outgoingMainEl, "");
      this.main.showLoader(this.loaderTimeout);
      this.main.destroy();
      this.main = this.newRootView(newMainEl, flash, liveReferer);
      this.main.setRedirect(href);
      this.transitionRemoves(null, true);
      this.main.join((joinCount, onDone) => {
        if (joinCount === 1 && this.commitPendingLink(linkRef)) {
          this.requestDOMUpdate(() => {
            dom_default.findPhxSticky(document).forEach((el) => newMainEl.appendChild(el));
            this.outgoingMainEl.replaceWith(newMainEl);
            this.outgoingMainEl = null;
            callback && callback(linkRef);
            onDone();
          });
        }
      });
    }
    transitionRemoves(elements, skipSticky) {
      let removeAttr = this.binding("remove");
      elements = elements || dom_default.all(document, `[${removeAttr}]`);
      if (skipSticky) {
        const stickies = dom_default.findPhxSticky(document) || [];
        elements = elements.filter((el) => !dom_default.isChildOfAny(el, stickies));
      }
      elements.forEach((el) => {
        this.execJS(el, el.getAttribute(removeAttr), "remove");
      });
    }
    isPhxView(el) {
      return el.getAttribute && el.getAttribute(PHX_SESSION) !== null;
    }
    newRootView(el, flash, liveReferer) {
      let view = new View(el, this, null, flash, liveReferer);
      this.roots[view.id] = view;
      return view;
    }
    owner(childEl, callback) {
      let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) => this.getViewByEl(el)) || this.main;
      if (view) {
        callback(view);
      }
    }
    withinOwners(childEl, callback) {
      this.owner(childEl, (view) => callback(view, childEl));
    }
    getViewByEl(el) {
      let rootId = el.getAttribute(PHX_ROOT_ID);
      return maybe(this.getRootById(rootId), (root) => root.getDescendentByEl(el));
    }
    getRootById(id) {
      return this.roots[id];
    }
    destroyAllViews() {
      for (let id in this.roots) {
        this.roots[id].destroy();
        delete this.roots[id];
      }
      this.main = null;
    }
    destroyViewByEl(el) {
      let root = this.getRootById(el.getAttribute(PHX_ROOT_ID));
      if (root && root.id === el.id) {
        root.destroy();
        delete this.roots[root.id];
      } else if (root) {
        root.destroyDescendent(el.id);
      }
    }
    setActiveElement(target) {
      if (this.activeElement === target) {
        return;
      }
      this.activeElement = target;
      let cancel = () => {
        if (target === this.activeElement) {
          this.activeElement = null;
        }
        target.removeEventListener("mouseup", this);
        target.removeEventListener("touchend", this);
      };
      target.addEventListener("mouseup", cancel);
      target.addEventListener("touchend", cancel);
    }
    getActiveElement() {
      if (document.activeElement === document.body) {
        return this.activeElement || document.activeElement;
      } else {
        return document.activeElement || document.body;
      }
    }
    dropActiveElement(view) {
      if (this.prevActive && view.ownsElement(this.prevActive)) {
        this.prevActive = null;
      }
    }
    restorePreviouslyActiveFocus() {
      if (this.prevActive && this.prevActive !== document.body) {
        this.prevActive.focus();
      }
    }
    blurActiveElement() {
      this.prevActive = this.getActiveElement();
      if (this.prevActive !== document.body) {
        this.prevActive.blur();
      }
    }
    bindTopLevelEvents({ dead } = {}) {
      if (this.boundTopLevelEvents) {
        return;
      }
      this.boundTopLevelEvents = true;
      this.socket.onClose((event) => {
        if (event && event.code === 1e3 && this.main) {
          return this.reloadWithJitter(this.main);
        }
      });
      document.body.addEventListener("click", function() {
      });
      window.addEventListener("pageshow", (e) => {
        if (e.persisted) {
          this.getSocket().disconnect();
          this.withPageLoading({ to: window.location.href, kind: "redirect" });
          window.location.reload();
        }
      }, true);
      if (!dead) {
        this.bindNav();
      }
      this.bindClicks();
      if (!dead) {
        this.bindForms();
      }
      this.bind({ keyup: "keyup", keydown: "keydown" }, (e, type, view, targetEl, phxEvent, phxTarget) => {
        let matchKey = targetEl.getAttribute(this.binding(PHX_KEY));
        let pressedKey = e.key && e.key.toLowerCase();
        if (matchKey && matchKey.toLowerCase() !== pressedKey) {
          return;
        }
        let data = __spreadValues({ key: e.key }, this.eventMeta(type, e, targetEl));
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      });
      this.bind({ blur: "focusout", focus: "focusin" }, (e, type, view, targetEl, phxEvent, phxTarget) => {
        if (!phxTarget) {
          let data = __spreadValues({ key: e.key }, this.eventMeta(type, e, targetEl));
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      this.bind({ blur: "blur", focus: "focus" }, (e, type, view, targetEl, phxEvent, phxTarget) => {
        if (phxTarget === "window") {
          let data = this.eventMeta(type, e, targetEl);
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      window.addEventListener("dragover", (e) => e.preventDefault());
      window.addEventListener("drop", (e) => {
        e.preventDefault();
        let dropTargetId = maybe(closestPhxBinding(e.target, this.binding(PHX_DROP_TARGET)), (trueTarget) => {
          return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET));
        });
        let dropTarget = dropTargetId && document.getElementById(dropTargetId);
        let files = Array.from(e.dataTransfer.files || []);
        if (!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)) {
          return;
        }
        LiveUploader.trackFiles(dropTarget, files, e.dataTransfer);
        dropTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
      this.on(PHX_TRACK_UPLOADS, (e) => {
        let uploadTarget = e.target;
        if (!dom_default.isUploadInput(uploadTarget)) {
          return;
        }
        let files = Array.from(e.detail.files || []).filter((f) => f instanceof File || f instanceof Blob);
        LiveUploader.trackFiles(uploadTarget, files);
        uploadTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
    }
    eventMeta(eventName, e, targetEl) {
      let callback = this.metadataCallbacks[eventName];
      return callback ? callback(e, targetEl) : {};
    }
    setPendingLink(href) {
      this.linkRef++;
      this.pendingLink = href;
      return this.linkRef;
    }
    commitPendingLink(linkRef) {
      if (this.linkRef !== linkRef) {
        return false;
      } else {
        this.href = this.pendingLink;
        this.pendingLink = null;
        return true;
      }
    }
    getHref() {
      return this.href;
    }
    hasPendingLink() {
      return !!this.pendingLink;
    }
    bind(events, callback) {
      for (let event in events) {
        let browserEventName = events[event];
        this.on(browserEventName, (e) => {
          let binding = this.binding(event);
          let windowBinding = this.binding(`window-${event}`);
          let targetPhxEvent = e.target.getAttribute && e.target.getAttribute(binding);
          if (targetPhxEvent) {
            this.debounce(e.target, e, browserEventName, () => {
              this.withinOwners(e.target, (view) => {
                callback(e, event, view, e.target, targetPhxEvent, null);
              });
            });
          } else {
            dom_default.all(document, `[${windowBinding}]`, (el) => {
              let phxEvent = el.getAttribute(windowBinding);
              this.debounce(el, e, browserEventName, () => {
                this.withinOwners(el, (view) => {
                  callback(e, event, view, el, phxEvent, "window");
                });
              });
            });
          }
        });
      }
    }
    bindClicks() {
      window.addEventListener("mousedown", (e) => this.clickStartedAtTarget = e.target);
      this.bindClick("click", "click", false);
      this.bindClick("mousedown", "capture-click", true);
    }
    bindClick(eventName, bindingName, capture) {
      let click = this.binding(bindingName);
      window.addEventListener(eventName, (e) => {
        let target = null;
        if (capture) {
          target = e.target.matches(`[${click}]`) ? e.target : e.target.querySelector(`[${click}]`);
        } else {
          if (e.detail === 0)
            this.clickStartedAtTarget = e.target;
          let clickStartedAtTarget = this.clickStartedAtTarget || e.target;
          target = closestPhxBinding(clickStartedAtTarget, click);
          this.dispatchClickAway(e, clickStartedAtTarget);
          this.clickStartedAtTarget = null;
        }
        let phxEvent = target && target.getAttribute(click);
        if (!phxEvent) {
          if (!capture && dom_default.isNewPageClick(e, window.location)) {
            this.unload();
          }
          return;
        }
        if (target.getAttribute("href") === "#") {
          e.preventDefault();
        }
        if (target.hasAttribute(PHX_REF)) {
          return;
        }
        this.debounce(target, e, "click", () => {
          this.withinOwners(target, (view) => {
            js_default.exec("click", phxEvent, view, target, ["push", { data: this.eventMeta("click", e, target) }]);
          });
        });
      }, capture);
    }
    dispatchClickAway(e, clickStartedAt) {
      let phxClickAway = this.binding("click-away");
      dom_default.all(document, `[${phxClickAway}]`, (el) => {
        if (!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))) {
          this.withinOwners(el, (view) => {
            let phxEvent = el.getAttribute(phxClickAway);
            if (js_default.isVisible(el) && js_default.isInViewport(el)) {
              js_default.exec("click", phxEvent, view, el, ["push", { data: this.eventMeta("click", e, e.target) }]);
            }
          });
        }
      });
    }
    bindNav() {
      if (!browser_default.canPushState()) {
        return;
      }
      if (history.scrollRestoration) {
        history.scrollRestoration = "manual";
      }
      let scrollTimer = null;
      window.addEventListener("scroll", (_e) => {
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(() => {
          browser_default.updateCurrentState((state) => Object.assign(state, { scroll: window.scrollY }));
        }, 100);
      });
      window.addEventListener("popstate", (event) => {
        if (!this.registerNewLocation(window.location)) {
          return;
        }
        let { type, id, root, scroll } = event.state || {};
        let href = window.location.href;
        dom_default.dispatchEvent(window, "phx:navigate", { detail: { href, patch: type === "patch", pop: true } });
        this.requestDOMUpdate(() => {
          if (this.main.isConnected() && (type === "patch" && id === this.main.id)) {
            this.main.pushLinkPatch(href, null, () => {
              this.maybeScroll(scroll);
            });
          } else {
            this.replaceMain(href, null, () => {
              if (root) {
                this.replaceRootHistory();
              }
              this.maybeScroll(scroll);
            });
          }
        });
      }, false);
      window.addEventListener("click", (e) => {
        let target = closestPhxBinding(e.target, PHX_LIVE_LINK);
        let type = target && target.getAttribute(PHX_LIVE_LINK);
        if (!type || !this.isConnected() || !this.main || dom_default.wantsNewTab(e)) {
          return;
        }
        let href = target.href instanceof SVGAnimatedString ? target.href.baseVal : target.href;
        let linkState = target.getAttribute(PHX_LINK_STATE);
        e.preventDefault();
        e.stopImmediatePropagation();
        if (this.pendingLink === href) {
          return;
        }
        this.requestDOMUpdate(() => {
          if (type === "patch") {
            this.pushHistoryPatch(href, linkState, target);
          } else if (type === "redirect") {
            this.historyRedirect(href, linkState);
          } else {
            throw new Error(`expected ${PHX_LIVE_LINK} to be "patch" or "redirect", got: ${type}`);
          }
          let phxClick = target.getAttribute(this.binding("click"));
          if (phxClick) {
            this.requestDOMUpdate(() => this.execJS(target, phxClick, "click"));
          }
        });
      }, false);
    }
    maybeScroll(scroll) {
      if (typeof scroll === "number") {
        requestAnimationFrame(() => {
          window.scrollTo(0, scroll);
        });
      }
    }
    dispatchEvent(event, payload = {}) {
      dom_default.dispatchEvent(window, `phx:${event}`, { detail: payload });
    }
    dispatchEvents(events) {
      events.forEach(([event, payload]) => this.dispatchEvent(event, payload));
    }
    withPageLoading(info, callback) {
      dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: info });
      let done = () => dom_default.dispatchEvent(window, "phx:page-loading-stop", { detail: info });
      return callback ? callback(done) : done;
    }
    pushHistoryPatch(href, linkState, targetEl) {
      if (!this.isConnected() || !this.main.isMain()) {
        return browser_default.redirect(href);
      }
      this.withPageLoading({ to: href, kind: "patch" }, (done) => {
        this.main.pushLinkPatch(href, targetEl, (linkRef) => {
          this.historyPatch(href, linkState, linkRef);
          done();
        });
      });
    }
    historyPatch(href, linkState, linkRef = this.setPendingLink(href)) {
      if (!this.commitPendingLink(linkRef)) {
        return;
      }
      browser_default.pushState(linkState, { type: "patch", id: this.main.id }, href);
      dom_default.dispatchEvent(window, "phx:navigate", { detail: { patch: true, href, pop: false } });
      this.registerNewLocation(window.location);
    }
    historyRedirect(href, linkState, flash) {
      if (!this.isConnected() || !this.main.isMain()) {
        return browser_default.redirect(href, flash);
      }
      if (/^\/$|^\/[^\/]+.*$/.test(href)) {
        let { protocol, host } = window.location;
        href = `${protocol}//${host}${href}`;
      }
      let scroll = window.scrollY;
      this.withPageLoading({ to: href, kind: "redirect" }, (done) => {
        this.replaceMain(href, flash, (linkRef) => {
          if (linkRef === this.linkRef) {
            browser_default.pushState(linkState, { type: "redirect", id: this.main.id, scroll }, href);
            dom_default.dispatchEvent(window, "phx:navigate", { detail: { href, patch: false, pop: false } });
            this.registerNewLocation(window.location);
          }
          done();
        });
      });
    }
    replaceRootHistory() {
      browser_default.pushState("replace", { root: true, type: "patch", id: this.main.id });
    }
    registerNewLocation(newLocation) {
      let { pathname, search } = this.currentLocation;
      if (pathname + search === newLocation.pathname + newLocation.search) {
        return false;
      } else {
        this.currentLocation = clone(newLocation);
        return true;
      }
    }
    bindForms() {
      let iterations = 0;
      let externalFormSubmitted = false;
      this.on("submit", (e) => {
        let phxSubmit = e.target.getAttribute(this.binding("submit"));
        let phxChange = e.target.getAttribute(this.binding("change"));
        if (!externalFormSubmitted && phxChange && !phxSubmit) {
          externalFormSubmitted = true;
          e.preventDefault();
          this.withinOwners(e.target, (view) => {
            view.disableForm(e.target);
            window.requestAnimationFrame(() => {
              if (dom_default.isUnloadableFormSubmit(e)) {
                this.unload();
              }
              e.target.submit();
            });
          });
        }
      }, true);
      this.on("submit", (e) => {
        let phxEvent = e.target.getAttribute(this.binding("submit"));
        if (!phxEvent) {
          if (dom_default.isUnloadableFormSubmit(e)) {
            this.unload();
          }
          return;
        }
        e.preventDefault();
        e.target.disabled = true;
        this.withinOwners(e.target, (view) => {
          js_default.exec("submit", phxEvent, view, e.target, ["push", { submitter: e.submitter }]);
        });
      }, false);
      for (let type of ["change", "input"]) {
        this.on(type, (e) => {
          let phxChange = this.binding("change");
          let input = e.target;
          let inputEvent = input.getAttribute(phxChange);
          let formEvent = input.form && input.form.getAttribute(phxChange);
          let phxEvent = inputEvent || formEvent;
          if (!phxEvent) {
            return;
          }
          if (input.type === "number" && input.validity && input.validity.badInput) {
            return;
          }
          let dispatcher = inputEvent ? input : input.form;
          let currentIterations = iterations;
          iterations++;
          let { at, type: lastType } = dom_default.private(input, "prev-iteration") || {};
          if (at === currentIterations - 1 && type === "change" && lastType === "input") {
            return;
          }
          dom_default.putPrivate(input, "prev-iteration", { at: currentIterations, type });
          this.debounce(input, e, type, () => {
            this.withinOwners(dispatcher, (view) => {
              dom_default.putPrivate(input, PHX_HAS_FOCUSED, true);
              if (!dom_default.isTextualInput(input)) {
                this.setActiveElement(input);
              }
              js_default.exec("change", phxEvent, view, input, ["push", { _target: e.target.name, dispatcher }]);
            });
          });
        }, false);
      }
      this.on("reset", (e) => {
        let form = e.target;
        dom_default.resetForm(form, this.binding(PHX_FEEDBACK_FOR), this.binding(PHX_FEEDBACK_GROUP));
        let input = Array.from(form.elements).find((el) => el.type === "reset");
        if (input) {
          window.requestAnimationFrame(() => {
            input.dispatchEvent(new Event("input", { bubbles: true, cancelable: false }));
          });
        }
      });
    }
    debounce(el, event, eventType, callback) {
      if (eventType === "blur" || eventType === "focusout") {
        return callback();
      }
      let phxDebounce = this.binding(PHX_DEBOUNCE);
      let phxThrottle = this.binding(PHX_THROTTLE);
      let defaultDebounce = this.defaults.debounce.toString();
      let defaultThrottle = this.defaults.throttle.toString();
      this.withinOwners(el, (view) => {
        let asyncFilter = () => !view.isDestroyed() && document.body.contains(el);
        dom_default.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {
          callback();
        });
      });
    }
    silenceEvents(callback) {
      this.silenced = true;
      callback();
      this.silenced = false;
    }
    on(event, callback) {
      window.addEventListener(event, (e) => {
        if (!this.silenced) {
          callback(e);
        }
      });
    }
  };
  var TransitionSet = class {
    constructor() {
      this.transitions = /* @__PURE__ */ new Set();
      this.pendingOps = [];
    }
    reset() {
      this.transitions.forEach((timer) => {
        clearTimeout(timer);
        this.transitions.delete(timer);
      });
      this.flushPendingOps();
    }
    after(callback) {
      if (this.size() === 0) {
        callback();
      } else {
        this.pushPendingOp(callback);
      }
    }
    addTransition(time, onStart, onDone) {
      onStart();
      let timer = setTimeout(() => {
        this.transitions.delete(timer);
        onDone();
        this.flushPendingOps();
      }, time);
      this.transitions.add(timer);
    }
    pushPendingOp(op) {
      this.pendingOps.push(op);
    }
    size() {
      return this.transitions.size;
    }
    flushPendingOps() {
      if (this.size() > 0) {
        return;
      }
      let op = this.pendingOps.shift();
      if (op) {
        op();
        this.flushPendingOps();
      }
    }
  };

  // js/app.js
  var import_topbar = __toESM(require_topbar());

  // node_modules/preline/src/utils/index.ts
  var stringToBoolean = (string) => {
    return string === "true" ? true : false;
  };
  var getClassProperty = (el, prop, val = "") => {
    return (window.getComputedStyle(el).getPropertyValue(prop) || val).replace(
      " ",
      ""
    );
  };
  var getClassPropertyAlt = (el, prop, val = "") => {
    let targetClass = "";
    el.classList.forEach((c) => {
      if (c.includes(prop)) {
        targetClass = c;
      }
    });
    return targetClass.match(/:(.*)]/) ? targetClass.match(/:(.*)]/)[1] : val;
  };
  var isIOS = () => {
    if (/iPad|iPhone|iPod/.test(navigator.platform)) {
      return true;
    } else {
      return navigator.maxTouchPoints && navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform);
    }
  };
  var isIpadOS = () => {
    return navigator.maxTouchPoints && navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform);
  };
  var isEnoughSpace = (el, toggle, preferredPosition = "auto", space = 10, wrapper = null) => {
    const referenceRect = toggle.getBoundingClientRect();
    const wrapperRect = wrapper ? wrapper.getBoundingClientRect() : null;
    const viewportHeight = window.innerHeight;
    const spaceAbove = wrapperRect ? referenceRect.top - wrapperRect.top : referenceRect.top;
    const spaceBelow = (wrapper ? wrapperRect.bottom : viewportHeight) - referenceRect.bottom;
    const minimumSpaceRequired = el.clientHeight + space;
    if (preferredPosition === "bottom") {
      return spaceBelow >= minimumSpaceRequired;
    } else if (preferredPosition === "top") {
      return spaceAbove >= minimumSpaceRequired;
    } else {
      return spaceAbove >= minimumSpaceRequired || spaceBelow >= minimumSpaceRequired;
    }
  };
  var isFormElement = (target) => {
    return target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement || target instanceof HTMLSelectElement;
  };
  var isParentOrElementHidden = (element) => {
    if (!element)
      return false;
    const computedStyle = window.getComputedStyle(element);
    if (computedStyle.display === "none")
      return true;
    return isParentOrElementHidden(element.parentElement);
  };
  var debounce = (func, timeout = 200) => {
    let timer;
    return (...args) => {
      clearTimeout(timer);
      timer = setTimeout(() => {
        func.apply(void 0, args);
      }, timeout);
    };
  };
  var dispatch = (evt, element, payload = null) => {
    const event = new CustomEvent(evt, {
      detail: { payload },
      bubbles: true,
      cancelable: true,
      composed: false
    });
    element.dispatchEvent(event);
  };
  var afterTransition = (el, callback) => {
    const handleEvent = () => {
      callback();
      el.removeEventListener("transitionend", handleEvent, true);
    };
    const hasTransition = window.getComputedStyle(el, null).getPropertyValue("transition") !== (navigator.userAgent.includes("Firefox") ? "all" : "all 0s ease 0s");
    if (hasTransition)
      el.addEventListener("transitionend", handleEvent, true);
    else
      callback();
  };
  var htmlToElement = (html2) => {
    const template = document.createElement("template");
    html2 = html2.trim();
    template.innerHTML = html2;
    return template.content.firstChild;
  };
  var classToClassList = (classes, target, splitter = " ", action = "add") => {
    const classesToArray = classes.split(splitter);
    classesToArray.forEach(
      (cl) => action === "add" ? target.classList.add(cl) : target.classList.remove(cl)
    );
  };
  var menuSearchHistory = {
    historyIndex: -1,
    addHistory(index) {
      this.historyIndex = index;
    },
    existsInHistory(index) {
      return index > this.historyIndex;
    },
    clearHistory() {
      this.historyIndex = -1;
    }
  };

  // node_modules/preline/src/plugins/base-plugin/index.ts
  var HSBasePlugin = class {
    constructor(el, options, events) {
      this.el = el;
      this.options = options;
      this.events = events;
      this.el = el;
      this.options = options;
      this.events = {};
    }
    createCollection(collection, element) {
      var _a;
      collection.push({
        id: ((_a = element == null ? void 0 : element.el) == null ? void 0 : _a.id) || collection.length + 1,
        element
      });
    }
    fireEvent(evt, payload = null) {
      if (this.events.hasOwnProperty(evt))
        return this.events[evt](payload);
    }
    on(evt, cb) {
      this.events[evt] = cb;
    }
  };

  // node_modules/preline/src/plugins/copy-markup/index.ts
  var HSCopyMarkup = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-copy-markup");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.targetSelector = (concatOptions == null ? void 0 : concatOptions.targetSelector) || null;
      this.wrapperSelector = (concatOptions == null ? void 0 : concatOptions.wrapperSelector) || null;
      this.limit = (concatOptions == null ? void 0 : concatOptions.limit) || null;
      this.items = [];
      if (this.targetSelector)
        this.init();
    }
    init() {
      this.createCollection(window.$hsCopyMarkupCollection, this);
      this.setTarget();
      this.setWrapper();
      this.addPredefinedItems();
      this.el.addEventListener("click", () => this.copy());
    }
    copy() {
      if (this.limit && this.items.length >= this.limit)
        return false;
      if (this.el.hasAttribute("disabled"))
        this.el.setAttribute("disabled", "");
      const copiedElement = this.target.cloneNode(true);
      this.addToItems(copiedElement);
      if (this.limit && this.items.length >= this.limit)
        this.el.setAttribute("disabled", "disabled");
      this.fireEvent("copy", copiedElement);
      dispatch("copy.hs.copyMarkup", copiedElement, copiedElement);
    }
    addPredefinedItems() {
      Array.from(this.wrapper.children).filter(
        (el) => !el.classList.contains("[--ignore-for-count]")
      ).forEach((el) => {
        this.addToItems(el);
      });
    }
    setTarget() {
      const target = typeof this.targetSelector === "string" ? document.querySelector(this.targetSelector).cloneNode(true) : this.targetSelector.cloneNode(true);
      target.removeAttribute("id");
      this.target = target;
    }
    setWrapper() {
      this.wrapper = typeof this.wrapperSelector === "string" ? document.querySelector(this.wrapperSelector) : this.wrapperSelector;
    }
    addToItems(item) {
      const deleteItemButton = item.querySelector(
        "[data-hs-copy-markup-delete-item]"
      );
      if (this.wrapper)
        this.wrapper.append(item);
      else
        this.el.before(item);
      if (deleteItemButton)
        deleteItemButton.addEventListener("click", () => this.delete(item));
      this.items.push(item);
    }
    // Public methods
    delete(target) {
      const index = this.items.indexOf(target);
      if (index !== -1)
        this.items.splice(index, 1);
      target.remove();
      this.fireEvent("delete", target);
      dispatch("delete.hs.copyMarkup", target, target);
    }
    // Static method
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsCopyMarkupCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsCopyMarkupCollection)
        window.$hsCopyMarkupCollection = [];
      document.querySelectorAll("[data-hs-copy-markup]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsCopyMarkupCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        )) {
          const data = el.getAttribute("data-hs-copy-markup");
          const options = data ? JSON.parse(data) : {};
          new HSCopyMarkup(el, options);
        }
      });
    }
  };
  window.addEventListener("load", () => {
    HSCopyMarkup.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSCopyMarkup = HSCopyMarkup;
  }
  var copy_markup_default = HSCopyMarkup;

  // node_modules/preline/src/plugins/accordion/index.ts
  var HSAccordion = class extends HSBasePlugin {
    constructor(el, options, events) {
      super(el, options, events);
      this.toggle = this.el.querySelector(".hs-accordion-toggle") || null;
      this.content = this.el.querySelector(".hs-accordion-content") || null;
      this.group = this.el.closest(".hs-accordion-group") || null;
      this.isAlwaysOpened = this.group.hasAttribute("data-hs-accordion-always-open") || false;
      if (this.toggle && this.content)
        this.init();
    }
    init() {
      this.createCollection(window.$hsAccordionCollection, this);
      this.toggle.addEventListener("click", () => {
        if (this.el.classList.contains("active")) {
          this.hide();
        } else {
          this.show();
        }
      });
    }
    // Public methods
    show() {
      if (this.group && !this.isAlwaysOpened && this.group.querySelector(".hs-accordion.active") && this.group.querySelector(".hs-accordion.active") !== this.el) {
        const currentlyOpened = window.$hsAccordionCollection.find(
          (el) => el.element.el === this.group.querySelector(".hs-accordion.active")
        );
        currentlyOpened.element.hide();
      }
      if (this.el.classList.contains("active"))
        return false;
      this.el.classList.add("active");
      this.content.style.display = "block";
      this.content.style.height = "0";
      setTimeout(() => {
        this.content.style.height = `${this.content.scrollHeight}px`;
      });
      afterTransition(this.content, () => {
        this.content.style.display = "block";
        this.content.style.height = "";
        this.fireEvent("open", this.el);
        dispatch("open.hs.accordion", this.el, this.el);
      });
    }
    hide() {
      if (!this.el.classList.contains("active"))
        return false;
      this.el.classList.remove("active");
      this.content.style.height = `${this.content.scrollHeight}px`;
      setTimeout(() => {
        this.content.style.height = "0";
      });
      afterTransition(this.content, () => {
        this.content.style.display = "";
        this.content.style.height = "0";
        this.fireEvent("close", this.el);
        dispatch("close.hs.accordion", this.el, this.el);
      });
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsAccordionCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element.el : null;
    }
    static show(target) {
      const elInCollection = window.$hsAccordionCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.content.style.display !== "block")
        elInCollection.element.show();
    }
    static hide(target) {
      const elInCollection = window.$hsAccordionCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.content.style.display === "block")
        elInCollection.element.hide();
    }
    static autoInit() {
      if (!window.$hsAccordionCollection)
        window.$hsAccordionCollection = [];
      document.querySelectorAll(".hs-accordion:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsAccordionCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSAccordion(el);
      });
    }
    // Backward compatibility
    static on(evt, target, cb) {
      const elInCollection = window.$hsAccordionCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection)
        elInCollection.element.events[evt] = cb;
    }
  };
  window.addEventListener("load", () => {
    HSAccordion.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSAccordion = HSAccordion;
  }
  var accordion_default = HSAccordion;

  // node_modules/preline/src/plugins/carousel/index.ts
  var HSCarousel = class extends HSBasePlugin {
    constructor(el, options) {
      var _a, _b, _c;
      super(el, options);
      const data = el.getAttribute("data-hs-carousel");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.currentIndex = concatOptions.currentIndex || 0;
      this.loadingClasses = concatOptions.loadingClasses ? `${concatOptions.loadingClasses}`.split(",") : null;
      this.loadingClassesRemove = ((_a = this.loadingClasses) == null ? void 0 : _a[0]) ? this.loadingClasses[0].split(" ") : "opacity-0";
      this.loadingClassesAdd = ((_b = this.loadingClasses) == null ? void 0 : _b[1]) ? this.loadingClasses[1].split(" ") : "";
      this.afterLoadingClassesAdd = ((_c = this.loadingClasses) == null ? void 0 : _c[2]) ? this.loadingClasses[2].split(" ") : "";
      this.isAutoPlay = typeof concatOptions.isAutoPlay !== "undefined" ? concatOptions.isAutoPlay : false;
      this.speed = concatOptions.speed || 4e3;
      this.isInfiniteLoop = typeof concatOptions.isInfiniteLoop !== "undefined" ? concatOptions.isInfiniteLoop : true;
      this.inner = this.el.querySelector(".hs-carousel-body") || null;
      this.slides = this.el.querySelectorAll(".hs-carousel-slide") || [];
      this.prev = this.el.querySelector(".hs-carousel-prev") || null;
      this.next = this.el.querySelector(".hs-carousel-next") || null;
      this.dots = this.el.querySelectorAll(".hs-carousel-pagination > *") || null;
      this.sliderWidth = this.inner.parentElement.clientWidth;
      this.touchX = {
        start: 0,
        end: 0
      };
      this.init();
    }
    init() {
      this.createCollection(window.$hsCarouselCollection, this);
      if (this.inner) {
        this.calculateWidth();
        if (this.loadingClassesRemove) {
          if (typeof this.loadingClassesRemove === "string")
            this.inner.classList.remove(this.loadingClassesRemove);
          else
            this.inner.classList.remove(...this.loadingClassesRemove);
        }
        if (this.loadingClassesAdd) {
          if (typeof this.loadingClassesAdd === "string")
            this.inner.classList.add(this.loadingClassesAdd);
          else
            this.inner.classList.add(...this.loadingClassesAdd);
        }
      }
      if (this.prev)
        this.prev.addEventListener("click", () => {
          this.goToPrev();
          if (this.isAutoPlay) {
            this.resetTimer();
            this.setTimer();
          }
        });
      if (this.next)
        this.next.addEventListener("click", () => {
          this.goToNext();
          if (this.isAutoPlay) {
            this.resetTimer();
            this.setTimer();
          }
        });
      if (this.dots) {
        this.dots.forEach(
          (el, i) => el.addEventListener("click", () => {
            this.goTo(i);
            if (this.isAutoPlay) {
              this.resetTimer();
              this.setTimer();
            }
          })
        );
      }
      if (this.slides.length) {
        this.addCurrentClass();
        if (!this.isInfiniteLoop)
          this.addDisabledClass();
        if (this.isAutoPlay)
          this.autoPlay();
      }
      if (this.inner && this.afterLoadingClassesAdd) {
        setTimeout(() => {
          if (typeof this.afterLoadingClassesAdd === "string")
            this.inner.classList.add(this.afterLoadingClassesAdd);
          else
            this.inner.classList.add(...this.afterLoadingClassesAdd);
        });
      }
      this.el.classList.add("init");
      this.el.addEventListener("touchstart", (evt) => {
        this.touchX.start = evt.changedTouches[0].screenX;
      });
      this.el.addEventListener("touchend", (evt) => {
        this.touchX.end = evt.changedTouches[0].screenX;
        this.detectDirection();
      });
      this.observeResize();
    }
    observeResize() {
      const resizeObserver = new ResizeObserver(() => this.recalculateWidth());
      resizeObserver.observe(document.querySelector("body"));
    }
    calculateWidth() {
      this.inner.style.width = `${this.sliderWidth * this.slides.length}px`;
      this.inner.style.transform = `translate(-${this.currentIndex * this.sliderWidth}px, 0px)`;
      this.slides.forEach((el) => {
        el.style.width = `${this.sliderWidth}px`;
      });
    }
    addCurrentClass() {
      this.slides.forEach((el, i) => {
        if (i === this.currentIndex) {
          el.classList.add("active");
        } else {
          el.classList.remove("active");
        }
      });
      if (this.dots) {
        this.dots.forEach((el, i) => {
          if (i === this.currentIndex) {
            el.classList.add("active");
          } else {
            el.classList.remove("active");
          }
        });
      }
    }
    addDisabledClass() {
      if (!this.prev || !this.next)
        return false;
      if (this.currentIndex === 0) {
        this.next.classList.remove("disabled");
        this.prev.classList.add("disabled");
      } else if (this.currentIndex === this.slides.length - 1) {
        this.prev.classList.remove("disabled");
        this.next.classList.add("disabled");
      } else {
        this.prev.classList.remove("disabled");
        this.next.classList.remove("disabled");
      }
    }
    autoPlay() {
      this.setTimer();
    }
    setTimer() {
      this.timer = setInterval(() => {
        if (this.currentIndex === this.slides.length - 1)
          this.goTo(0);
        else
          this.goToNext();
      }, this.speed);
    }
    resetTimer() {
      clearInterval(this.timer);
    }
    detectDirection() {
      const { start: start2, end: end2 } = this.touchX;
      if (end2 < start2)
        this.goToNext();
      if (end2 > start2)
        this.goToPrev();
    }
    // Public methods
    recalculateWidth() {
      this.sliderWidth = this.inner.parentElement.clientWidth;
      this.calculateWidth();
    }
    goToPrev() {
      if (this.currentIndex === 0 && this.isInfiniteLoop) {
        this.currentIndex = this.slides.length - 1;
        this.inner.style.transform = `translate(-${this.currentIndex * this.sliderWidth}px, 0px)`;
        this.addCurrentClass();
      } else if (this.currentIndex !== 0) {
        this.currentIndex -= 1;
        this.inner.style.transform = `translate(-${this.currentIndex * this.sliderWidth}px, 0px)`;
        this.addCurrentClass();
        this.addDisabledClass();
      }
    }
    goToNext() {
      if (this.currentIndex === this.slides.length - 1 && this.isInfiniteLoop) {
        this.currentIndex = 0;
        this.inner.style.transform = `translate(-${this.currentIndex * this.sliderWidth}px, 0px)`;
        this.addCurrentClass();
      } else if (this.currentIndex < this.slides.length - 1) {
        this.currentIndex += 1;
        this.inner.style.transform = `translate(-${this.currentIndex * this.sliderWidth}px, 0px)`;
        this.addCurrentClass();
        this.addDisabledClass();
      }
    }
    goTo(i) {
      this.currentIndex = i;
      this.inner.style.transform = `translate(-${this.currentIndex * this.sliderWidth}px, 0px)`;
      this.addCurrentClass();
      if (!this.isInfiniteLoop)
        this.addDisabledClass();
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsCarouselCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsCarouselCollection)
        window.$hsCarouselCollection = [];
      document.querySelectorAll("[data-hs-carousel]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsCarouselCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSCarousel(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSCarousel.autoInit();
  });
  window.addEventListener("resize", () => {
    if (!window.$hsCarouselCollection)
      return false;
    window.$hsCarouselCollection.forEach((el) => {
      el.element.recalculateWidth();
    });
  });
  if (typeof window !== "undefined") {
    window.HSCarousel = HSCarousel;
  }
  var carousel_default = HSCarousel;

  // node_modules/preline/src/plugins/collapse/index.ts
  var HSCollapse = class extends HSBasePlugin {
    constructor(el, options, events) {
      super(el, options, events);
      this.contentId = this.el.dataset.hsCollapse;
      this.content = document.querySelector(this.contentId);
      this.animationInProcess = false;
      if (this.content)
        this.init();
    }
    init() {
      this.createCollection(window.$hsCollapseCollection, this);
      this.el.addEventListener("click", () => {
        if (this.content.classList.contains("open")) {
          this.hide();
        } else {
          this.show();
        }
      });
    }
    hideAllMegaMenuItems() {
      this.content.querySelectorAll(".hs-mega-menu-content.block").forEach((el) => {
        el.classList.remove("block");
        el.classList.add("hidden");
      });
    }
    // Public methods
    show() {
      if (this.animationInProcess || this.el.classList.contains("open"))
        return false;
      this.animationInProcess = true;
      this.el.classList.add("open");
      this.content.classList.add("open");
      this.content.classList.remove("hidden");
      this.content.style.height = "0";
      setTimeout(() => {
        this.content.style.height = `${this.content.scrollHeight}px`;
        this.fireEvent("beforeOpen", this.el);
        dispatch("beforeOpen.hs.collapse", this.el, this.el);
      });
      afterTransition(this.content, () => {
        this.content.style.height = "";
        this.fireEvent("open", this.el);
        dispatch("open.hs.collapse", this.el, this.el);
        this.animationInProcess = false;
      });
    }
    hide() {
      if (this.animationInProcess || !this.el.classList.contains("open"))
        return false;
      this.animationInProcess = true;
      this.el.classList.remove("open");
      this.content.style.height = `${this.content.scrollHeight}px`;
      setTimeout(() => {
        this.content.style.height = "0";
      });
      this.content.classList.remove("open");
      afterTransition(this.content, () => {
        this.content.classList.add("hidden");
        this.content.style.height = "";
        this.fireEvent("hide", this.el);
        dispatch("hide.hs.collapse", this.el, this.el);
        this.animationInProcess = false;
      });
      if (this.content.querySelectorAll(".hs-mega-menu-content.block").length) {
        this.hideAllMegaMenuItems();
      }
    }
    // Static methods
    static getInstance(target, isInstance = false) {
      const elInCollection = window.$hsCollapseCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element.el : null;
    }
    static autoInit() {
      if (!window.$hsCollapseCollection)
        window.$hsCollapseCollection = [];
      document.querySelectorAll(".hs-collapse-toggle:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsCollapseCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSCollapse(el);
      });
    }
    static show(target) {
      const elInCollection = window.$hsCollapseCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.content.classList.contains("hidden"))
        elInCollection.element.show();
    }
    static hide(target) {
      const elInCollection = window.$hsCollapseCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && !elInCollection.element.content.classList.contains("hidden"))
        elInCollection.element.hide();
    }
    // Backward compatibility
    static on(evt, target, cb) {
      const elInCollection = window.$hsCollapseCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection)
        elInCollection.element.events[evt] = cb;
    }
  };
  window.addEventListener("load", () => {
    HSCollapse.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSCollapse = HSCollapse;
  }
  var collapse_default = HSCollapse;

  // node_modules/preline/src/constants.ts
  var POSITIONS = {
    auto: "auto",
    "auto-start": "auto-start",
    "auto-end": "auto-end",
    top: "top",
    "top-left": "top-start",
    "top-right": "top-end",
    bottom: "bottom",
    "bottom-left": "bottom-start",
    "bottom-right": "bottom-end",
    right: "right",
    "right-start": "right-start",
    "right-end": "right-end",
    left: "left",
    "left-start": "left-start",
    "left-end": "left-end"
  };
  var DROPDOWN_ACCESSIBILITY_KEY_SET = [
    "Escape",
    "ArrowUp",
    "ArrowDown",
    "Home",
    "End",
    "Enter"
  ];
  var TABS_ACCESSIBILITY_KEY_SET = [
    "ArrowUp",
    "ArrowLeft",
    "ArrowDown",
    "ArrowRight",
    "Home",
    "End"
  ];
  var SELECT_ACCESSIBILITY_KEY_SET = [
    "ArrowUp",
    "ArrowLeft",
    "ArrowDown",
    "ArrowRight",
    "Home",
    "End",
    "Escape",
    "Enter",
    "Tab"
  ];
  var COMBO_BOX_ACCESSIBILITY_KEY_SET = [
    "ArrowUp",
    "ArrowLeft",
    "ArrowDown",
    "ArrowRight",
    "Home",
    "End",
    "Escape",
    "Enter"
  ];
  var BREAKPOINTS = {
    sm: 640,
    md: 768,
    lg: 1024,
    xl: 1280,
    "2xl": 1536
  };

  // node_modules/preline/src/plugins/combobox/index.ts
  var HSComboBox = class extends HSBasePlugin {
    constructor(el, options) {
      var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v;
      super(el, options);
      const data = el.getAttribute("data-hs-combo-box");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.gap = 5;
      this.viewport = (_a = typeof (concatOptions == null ? void 0 : concatOptions.viewport) === "string" ? document.querySelector(concatOptions == null ? void 0 : concatOptions.viewport) : concatOptions == null ? void 0 : concatOptions.viewport) != null ? _a : null;
      this.preventVisibility = (_b = concatOptions == null ? void 0 : concatOptions.preventVisibility) != null ? _b : false;
      this.apiUrl = (_c = concatOptions == null ? void 0 : concatOptions.apiUrl) != null ? _c : null;
      this.apiDataPart = (_d = concatOptions == null ? void 0 : concatOptions.apiDataPart) != null ? _d : null;
      this.apiQuery = (_e = concatOptions == null ? void 0 : concatOptions.apiQuery) != null ? _e : null;
      this.apiSearchQuery = (_f = concatOptions == null ? void 0 : concatOptions.apiSearchQuery) != null ? _f : null;
      this.apiHeaders = (_g = concatOptions == null ? void 0 : concatOptions.apiHeaders) != null ? _g : {};
      this.apiGroupField = (_h = concatOptions == null ? void 0 : concatOptions.apiGroupField) != null ? _h : null;
      this.outputItemTemplate = (_i = concatOptions == null ? void 0 : concatOptions.outputItemTemplate) != null ? _i : `<div class="cursor-pointer py-2 px-4 w-full text-sm text-gray-800 hover:bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-100 dark:bg-slate-900 dark:hover:bg-slate-800 dark:text-gray-200 dark:focus:bg-slate-800" data-hs-combo-box-output-item>
			<div class="flex justify-between items-center w-full">
				<span data-hs-combo-box-search-text></span>
				<span class="hidden hs-combo-box-selected:block">
					<svg class="flex-shrink-0 size-3.5 text-blue-600 dark:text-blue-500" xmlns="http:.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<polyline points="20 6 9 17 4 12"></polyline>
					</svg>
				</span>
			</div>
		</div>`;
      this.outputEmptyTemplate = (_j = concatOptions == null ? void 0 : concatOptions.outputEmptyTemplate) != null ? _j : `<div class="py-2 px-4 w-full text-sm text-gray-800 rounded-lg dark:bg-slate-900 dark:text-gray-200">Nothing found...</div>`;
      this.outputLoaderTemplate = (_k = concatOptions == null ? void 0 : concatOptions.outputLoaderTemplate) != null ? _k : `<div class="flex justify-center items-center py-2 px-4 text-sm text-gray-800 rounded-lg bg-white dark:bg-slate-900 dark:text-gray-200">
				<div class="animate-spin inline-block size-6 border-[3px] border-current border-t-transparent text-blue-600 rounded-full dark:text-blue-500" role="status" aria-label="loading">
					<span class="sr-only">Loading...</span>
				</div>
			</div>`;
      this.groupingType = (_l = concatOptions == null ? void 0 : concatOptions.groupingType) != null ? _l : null;
      this.groupingTitleTemplate = (_m = concatOptions == null ? void 0 : concatOptions.groupingTitleTemplate) != null ? _m : this.groupingType === "default" ? `<div class="block mb-1 text-xs font-semibold uppercase text-blue-600 dark:text-blue-500"></div>` : `<button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold whitespace-nowrap rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none"></button>`;
      this.tabsWrapperTemplate = (_n = concatOptions == null ? void 0 : concatOptions.tabsWrapperTemplate) != null ? _n : `<div class="overflow-x-auto p-4"></div>`;
      this.preventSelection = (_o = concatOptions == null ? void 0 : concatOptions.preventSelection) != null ? _o : false;
      this.isOpenOnFocus = (_p = concatOptions == null ? void 0 : concatOptions.isOpenOnFocus) != null ? _p : false;
      this.input = (_q = this.el.querySelector("[data-hs-combo-box-input]")) != null ? _q : null;
      this.output = (_r = this.el.querySelector("[data-hs-combo-box-output]")) != null ? _r : null;
      this.itemsWrapper = (_s = this.el.querySelector("[data-hs-combo-box-output-items-wrapper]")) != null ? _s : null;
      this.items = (_t = Array.from(this.el.querySelectorAll("[data-hs-combo-box-output-item]"))) != null ? _t : [];
      this.tabs = [];
      this.toggle = (_u = this.el.querySelector("[data-hs-combo-box-toggle]")) != null ? _u : null;
      this.outputPlaceholder = null;
      this.selected = this.value = (_v = this.el.querySelector("[data-hs-combo-box-input]").value) != null ? _v : "";
      this.isOpened = false;
      this.isCurrent = false;
      this.animationInProcess = false;
      this.selectedGroup = "all";
      this.init();
    }
    init() {
      this.createCollection(window.$hsComboBoxCollection, this);
      this.build();
    }
    build() {
      this.buildInput();
      if (this.groupingType)
        this.setGroups();
      this.buildItems();
      if (this.preventVisibility) {
        this.isOpened = true;
        this.recalculateDirection();
      }
      if (this.toggle)
        this.buildToggle();
    }
    setResultAndRender(value = "") {
      this.setResults(value);
      if (this.apiSearchQuery)
        this.itemsFromJson();
    }
    buildInput() {
      if (this.isOpenOnFocus) {
        this.input.addEventListener("focus", () => {
          if (!this.isOpened) {
            this.setResultAndRender();
            this.open();
          }
        });
      }
      this.input.addEventListener(
        "input",
        debounce((evt) => {
          this.setResultAndRender(evt.target.value);
          if (!this.isOpened)
            this.open();
        })
      );
    }
    buildItems() {
      if (this.apiUrl)
        this.itemsFromJson();
      else {
        if (this.itemsWrapper)
          this.itemsWrapper.innerHTML = "";
        else
          this.output.innerHTML = "";
        this.itemsFromHtml();
      }
    }
    setResults(val) {
      this.value = val;
      this.resultItems();
      if (this.hasVisibleItems())
        this.destroyOutputPlaceholder();
      else
        this.buildOutputPlaceholder();
    }
    isItemExists(obj) {
      return this.items.some(
        (el) => Array.from(el.querySelectorAll("[data-hs-combo-box-search-text]")).some(
          (elI) => elI.getAttribute("data-hs-combo-box-search-text") === obj[elI.getAttribute("data-hs-combo-box-output-item-field")]
        )
      );
    }
    isTextExists(el, val) {
      const lowerCased = val.map((v) => v.toLowerCase());
      return Array.from(
        el.querySelectorAll("[data-hs-combo-box-search-text]")
      ).some(
        (elI) => lowerCased.includes(
          elI.getAttribute("data-hs-combo-box-search-text").toLowerCase()
        )
      );
    }
    isTextExistsAny(el, val) {
      return Array.from(
        el.querySelectorAll("[data-hs-combo-box-search-text]")
      ).some(
        (elI) => elI.getAttribute("data-hs-combo-box-search-text").toLowerCase().includes(val.toLowerCase())
      );
    }
    valuesBySelector(el) {
      return Array.from(
        el.querySelectorAll("[data-hs-combo-box-search-text]")
      ).reduce(
        (acc, cur) => [
          ...acc,
          cur.getAttribute("data-hs-combo-box-search-text")
        ],
        []
      );
    }
    buildOutputLoader() {
      if (this.outputLoader)
        return false;
      this.outputLoader = htmlToElement(this.outputLoaderTemplate);
      if (this.items.length || this.outputPlaceholder) {
        this.outputLoader.style.position = "absolute";
        this.outputLoader.style.top = "0";
        this.outputLoader.style.bottom = "0";
        this.outputLoader.style.left = "0";
        this.outputLoader.style.right = "0";
        this.outputLoader.style.zIndex = "2";
      } else {
        this.outputLoader.style.position = "";
        this.outputLoader.style.top = "";
        this.outputLoader.style.bottom = "";
        this.outputLoader.style.left = "";
        this.outputLoader.style.right = "";
        this.outputLoader.style.zIndex = "";
        this.outputLoader.style.height = "30px";
      }
      this.output.append(this.outputLoader);
    }
    destroyOutputLoader() {
      if (this.outputLoader)
        this.outputLoader.remove();
      this.outputLoader = null;
    }
    async itemsFromJson() {
      this.buildOutputLoader();
      try {
        const query = `${this.apiQuery}`;
        const searchQuery = `${this.apiSearchQuery}=${this.value.toLowerCase()}`;
        let url = this.apiUrl;
        if (this.apiQuery && this.apiSearchQuery) {
          url += `?${searchQuery}&${query}`;
        } else if (this.apiQuery) {
          url += `?${query}`;
        } else if (this.apiSearchQuery) {
          url += `?${searchQuery}`;
        }
        const res = await fetch(url, this.apiHeaders);
        let items = await res.json();
        if (this.apiDataPart) {
          items = items[this.apiDataPart];
        }
        if (this.apiSearchQuery) {
          this.items = [];
        }
        if (this.itemsWrapper) {
          this.itemsWrapper.innerHTML = "";
        } else {
          this.output.innerHTML = "";
        }
        if (this.groupingType === "tabs") {
          this.setApiGroups(items);
          this.groupTabsRender();
          this.jsonItemsRender(items);
        } else if (this.groupingType === "default") {
          this.setApiGroups(items);
          this.groups.forEach((el) => {
            const title = htmlToElement(this.groupingTitleTemplate);
            title.setAttribute("data-hs-combo-box-group-title", el.name);
            title.classList.add("--exclude-accessibility");
            title.innerText = el.title;
            const newItems = items.filter(
              (i) => i[this.apiGroupField] === el.name
            );
            if (this.itemsWrapper)
              this.itemsWrapper.append(title);
            else
              this.output.append(title);
            this.jsonItemsRender(newItems);
          });
        } else {
          this.jsonItemsRender(items);
        }
        this.setResults(this.input.value);
      } catch (err) {
        console.error(err);
      }
      this.destroyOutputLoader();
    }
    jsonItemsRender(items) {
      items.forEach((item, index) => {
        if (this.isItemExists(item))
          return false;
        const newItem = htmlToElement(this.outputItemTemplate);
        newItem.querySelectorAll("[data-hs-combo-box-search-text]").forEach((el) => {
          var _a, _b;
          el.textContent = (_a = item[el.getAttribute("data-hs-combo-box-output-item-field")]) != null ? _a : "";
          el.setAttribute(
            "data-hs-combo-box-search-text",
            (_b = item[el.getAttribute("data-hs-combo-box-output-item-field")]) != null ? _b : ""
          );
        });
        newItem.querySelectorAll("[data-hs-combo-box-output-item-attr]").forEach((el) => {
          const attributes = JSON.parse(
            el.getAttribute("data-hs-combo-box-output-item-attr")
          );
          attributes.forEach((attr) => {
            el.setAttribute(attr.attr, item[attr.valueFrom]);
          });
        });
        newItem.setAttribute("tabIndex", `${index}`);
        if (this.groupingType === "tabs" || this.groupingType === "default") {
          newItem.setAttribute(
            "data-hs-combo-box-output-item",
            `{"group": {"name": "${item[this.apiGroupField]}", "title": "${item[this.apiGroupField]}"}}`
          );
        }
        this.items = [...this.items, newItem];
        if (!this.preventSelection) {
          newItem.addEventListener("click", () => {
            this.close(
              newItem.querySelector("[data-hs-combo-box-value]").getAttribute("data-hs-combo-box-search-text")
            );
            this.setSelectedByValue(this.valuesBySelector(newItem));
          });
        }
        this.appendItemsToWrapper(newItem);
      });
    }
    setGroups() {
      const groups = [];
      this.items.forEach((item) => {
        const { group } = JSON.parse(
          item.getAttribute("data-hs-combo-box-output-item")
        );
        if (!groups.some((el) => (el == null ? void 0 : el.name) === group.name)) {
          groups.push(group);
        }
      });
      this.groups = groups;
    }
    setCurrent() {
      if (window.$hsComboBoxCollection.length) {
        window.$hsComboBoxCollection.map((el) => el.element.isCurrent = false);
        this.isCurrent = true;
      }
    }
    setApiGroups(items) {
      const groups = [];
      items.forEach((item) => {
        const group = item[this.apiGroupField];
        if (!groups.some((el) => el.name === group)) {
          groups.push({
            name: group,
            title: group
          });
        }
      });
      this.groups = groups;
    }
    sortItems() {
      const compareFn = (i1, i2) => {
        const a = i1.querySelector("[data-hs-combo-box-value]").getAttribute("data-hs-combo-box-search-text");
        const b = i2.querySelector("[data-hs-combo-box-value]").getAttribute("data-hs-combo-box-search-text");
        if (a < b) {
          return -1;
        } else if (a > b) {
          return 1;
        }
        return 0;
      };
      return this.items.sort(compareFn);
    }
    itemRender(item) {
      const val = item.querySelector("[data-hs-combo-box-value]").getAttribute("data-hs-combo-box-search-text");
      if (this.itemsWrapper)
        this.itemsWrapper.append(item);
      else
        this.output.append(item);
      if (!this.preventSelection) {
        item.addEventListener("click", () => {
          this.close(val);
          this.setSelectedByValue(this.valuesBySelector(item));
        });
      }
    }
    plainRender(items) {
      items.forEach((item) => {
        this.itemRender(item);
      });
    }
    groupTabsRender() {
      const tabsScroll = htmlToElement(this.tabsWrapperTemplate);
      const tabsWrapper = htmlToElement(
        `<div class="flex flex-nowrap gap-x-2"></div>`
      );
      tabsScroll.append(tabsWrapper);
      this.output.insertBefore(tabsScroll, this.output.firstChild);
      const tabDef = htmlToElement(this.groupingTitleTemplate);
      tabDef.setAttribute("data-hs-combo-box-group-title", "all");
      tabDef.classList.add("--exclude-accessibility", "active");
      tabDef.innerText = "All";
      this.tabs = [...this.tabs, tabDef];
      tabsWrapper.append(tabDef);
      tabDef.addEventListener("click", () => {
        this.selectedGroup = "all";
        const selectedTab = this.tabs.find(
          (elI) => elI.getAttribute("data-hs-combo-box-group-title") === this.selectedGroup
        );
        this.tabs.forEach((el) => el.classList.remove("active"));
        selectedTab.classList.add("active");
        this.setItemsVisibility();
      });
      this.groups.forEach((el) => {
        const tab = htmlToElement(this.groupingTitleTemplate);
        tab.setAttribute("data-hs-combo-box-group-title", el.name);
        tab.classList.add("--exclude-accessibility");
        tab.innerText = el.title;
        this.tabs = [...this.tabs, tab];
        tabsWrapper.append(tab);
        tab.addEventListener("click", () => {
          this.selectedGroup = el.name;
          const selectedTab = this.tabs.find(
            (elI) => elI.getAttribute("data-hs-combo-box-group-title") === this.selectedGroup
          );
          this.tabs.forEach((el2) => el2.classList.remove("active"));
          selectedTab.classList.add("active");
          this.setItemsVisibility();
        });
      });
    }
    groupDefaultRender() {
      this.groups.forEach((el) => {
        const title = htmlToElement(this.groupingTitleTemplate);
        title.setAttribute("data-hs-combo-box-group-title", el.name);
        title.classList.add("--exclude-accessibility");
        title.innerText = el.title;
        if (this.itemsWrapper)
          this.itemsWrapper.append(title);
        else
          this.output.append(title);
        const items = this.sortItems().filter((f) => {
          const { group } = JSON.parse(
            f.getAttribute("data-hs-combo-box-output-item")
          );
          return group.name === el.name;
        });
        this.plainRender(items);
      });
    }
    itemsFromHtml() {
      if (this.groupingType === "default") {
        this.groupDefaultRender();
      } else if (this.groupingType === "tabs") {
        const items = this.sortItems();
        this.groupTabsRender();
        this.plainRender(items);
      } else {
        const items = this.sortItems();
        this.plainRender(items);
      }
      this.setResults(this.input.value);
    }
    buildToggle() {
      this.toggle.addEventListener("click", () => {
        if (this.isOpened)
          this.close();
        else
          this.open(this.toggle.getAttribute("data-hs-combo-box-toggle"));
      });
    }
    setSelectedByValue(val) {
      this.items.forEach((el) => {
        if (this.isTextExists(el, val))
          el.classList.add("selected");
        else
          el.classList.remove("selected");
      });
    }
    setValue(val) {
      this.selected = val;
      this.value = val;
      this.input.value = val;
    }
    setItemsVisibility() {
      if (this.groupingType === "tabs" && this.selectedGroup !== "all") {
        this.items.forEach((item) => {
          item.style.display = "none";
        });
      }
      const items = this.groupingType === "tabs" ? this.selectedGroup === "all" ? this.items : this.items.filter((f) => {
        const { group } = JSON.parse(
          f.getAttribute("data-hs-combo-box-output-item")
        );
        return group.name === this.selectedGroup;
      }) : this.items;
      if (this.groupingType === "tabs" && this.selectedGroup !== "all") {
        items.forEach((item) => {
          item.style.display = "block";
        });
      }
      items.forEach((item) => {
        if (!this.isTextExistsAny(item, this.value))
          item.style.display = "none";
        else
          item.style.display = "block";
      });
      if (this.groupingType === "default") {
        this.output.querySelectorAll("[data-hs-combo-box-group-title]").forEach((el) => {
          const g = el.getAttribute("data-hs-combo-box-group-title");
          const items2 = this.items.filter((f) => {
            const { group } = JSON.parse(
              f.getAttribute("data-hs-combo-box-output-item")
            );
            return group.name === g && f.style.display === "block";
          });
          if (items2.length)
            el.style.display = "block";
          else
            el.style.display = "none";
        });
      }
    }
    hasVisibleItems() {
      return this.items.length ? this.items.some((el) => el.style.display === "block") : false;
    }
    appendItemsToWrapper(item) {
      if (this.itemsWrapper) {
        this.itemsWrapper.append(item);
      } else {
        this.output.append(item);
      }
    }
    buildOutputPlaceholder() {
      if (!this.outputPlaceholder)
        this.outputPlaceholder = htmlToElement(this.outputEmptyTemplate);
      this.appendItemsToWrapper(this.outputPlaceholder);
    }
    destroyOutputPlaceholder() {
      if (this.outputPlaceholder)
        this.outputPlaceholder.remove();
      this.outputPlaceholder = null;
    }
    resultItems() {
      if (!this.items.length)
        return false;
      this.setItemsVisibility();
      this.setSelectedByValue([this.selected]);
    }
    // Public methods
    setValueAndOpen(val) {
      this.value = val;
      if (this.items.length) {
        this.setItemsVisibility();
      }
    }
    open(val) {
      if (this.animationInProcess)
        return false;
      if (typeof val !== "undefined")
        this.setValueAndOpen(val);
      if (this.preventVisibility)
        return false;
      this.animationInProcess = true;
      this.output.style.display = "block";
      this.recalculateDirection();
      setTimeout(() => {
        this.el.classList.add("active");
        this.animationInProcess = false;
      });
      this.isOpened = true;
    }
    setValueAndClear(val) {
      if (val)
        this.setValue(val);
      else
        this.setValue(this.selected);
      if (this.outputPlaceholder)
        this.destroyOutputPlaceholder();
    }
    close(val) {
      if (this.animationInProcess)
        return false;
      if (this.preventVisibility) {
        this.setValueAndClear(val);
        return false;
      }
      this.animationInProcess = true;
      this.el.classList.remove("active");
      this.output.classList.remove("bottom-full", "top-full");
      this.output.style.marginTop = "";
      this.output.style.marginBottom = "";
      afterTransition(this.output, () => {
        this.output.style.display = "none";
        this.setValueAndClear(val);
        this.animationInProcess = false;
      });
      this.isOpened = false;
    }
    recalculateDirection() {
      if (isEnoughSpace(
        this.output,
        this.input,
        "bottom",
        this.gap,
        this.viewport
      )) {
        this.output.classList.remove("bottom-full");
        this.output.style.marginBottom = "";
        this.output.classList.add("top-full");
        this.output.style.marginTop = `${this.gap}px`;
      } else {
        this.output.classList.remove("top-full");
        this.output.style.marginTop = "";
        this.output.classList.add("bottom-full");
        this.output.style.marginBottom = `${this.gap}px`;
      }
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsComboBoxCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsComboBoxCollection)
        window.$hsComboBoxCollection = [];
      document.querySelectorAll("[data-hs-combo-box]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsComboBoxCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        )) {
          const data = el.getAttribute("data-hs-combo-box");
          const options = data ? JSON.parse(data) : {};
          new HSComboBox(el, options);
        }
      });
      if (window.$hsComboBoxCollection) {
        window.addEventListener("click", (evt) => {
          const evtTarget = evt.target;
          HSComboBox.closeCurrentlyOpened(evtTarget);
        });
        document.addEventListener(
          "keydown",
          (evt) => HSComboBox.accessibility(evt)
        );
      }
    }
    static close(target) {
      const elInCollection = window.$hsComboBoxCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.isOpened) {
        elInCollection.element.close();
      }
    }
    static closeCurrentlyOpened(evtTarget = null) {
      if (!evtTarget.closest("[data-hs-combo-box].active")) {
        const currentlyOpened = window.$hsComboBoxCollection.filter((el) => el.element.isOpened) || null;
        if (currentlyOpened) {
          currentlyOpened.forEach((el) => {
            el.element.close();
          });
        }
      }
    }
    // Accessibility methods
    static getPreparedItems(isReversed = false, output) {
      if (!output)
        return null;
      const preparedItems = isReversed ? Array.from(
        output.querySelectorAll(":scope > *:not(.--exclude-accessibility)")
      ).filter((el) => el.style.display !== "none").reverse() : Array.from(
        output.querySelectorAll(":scope > *:not(.--exclude-accessibility)")
      ).filter((el) => el.style.display !== "none");
      const items = preparedItems.filter(
        (el) => !el.classList.contains("disabled")
      );
      return items;
    }
    static setHighlighted(prev, current, input) {
      current.focus();
      input.value = current.querySelector("[data-hs-combo-box-value]").getAttribute("data-hs-combo-box-search-text");
      if (prev)
        prev.classList.remove("hs-combo-box-output-item-highlighted");
      current.classList.add("hs-combo-box-output-item-highlighted");
    }
    static accessibility(evt) {
      const target = window.$hsComboBoxCollection.find(
        (el) => el.element.isOpened
      );
      if (target && COMBO_BOX_ACCESSIBILITY_KEY_SET.includes(evt.code) && !evt.metaKey) {
        switch (evt.code) {
          case "Escape":
            evt.preventDefault();
            this.onEscape();
            break;
          case "ArrowUp":
            evt.preventDefault();
            this.onArrow();
            break;
          case "ArrowDown":
            evt.preventDefault();
            this.onArrow(false);
            break;
          case "Home":
            evt.preventDefault();
            this.onStartEnd();
            break;
          case "End":
            evt.preventDefault();
            this.onStartEnd(false);
            break;
          case "Enter":
            evt.preventDefault();
            this.onEnter(evt);
            break;
          default:
            break;
        }
      }
    }
    static onEscape() {
      const target = window.$hsComboBoxCollection.find(
        (el) => !el.element.preventVisibility && el.element.isOpened
      );
      if (target) {
        target.element.close();
        target.element.input.blur();
      }
    }
    static onArrow(isArrowUp = true) {
      var _a;
      const target = window.$hsComboBoxCollection.find(
        (el) => el.element.preventVisibility ? el.element.isCurrent : el.element.isOpened
      );
      if (target) {
        const output = (_a = target.element.itemsWrapper) != null ? _a : target.element.output;
        if (!output)
          return false;
        const items = HSComboBox.getPreparedItems(isArrowUp, output);
        const current = output.querySelector(
          ".hs-combo-box-output-item-highlighted"
        );
        let currentItem = null;
        if (!current)
          items[0].classList.add("hs-combo-box-output-item-highlighted");
        let currentInd = items.findIndex((el) => el === current);
        if (currentInd + 1 < items.length)
          currentInd++;
        currentItem = items[currentInd];
        HSComboBox.setHighlighted(current, currentItem, target.element.input);
      }
    }
    static onStartEnd(isStart = true) {
      var _a;
      const target = window.$hsComboBoxCollection.find(
        (el) => el.element.preventVisibility ? el.element.isCurrent : el.element.isOpened
      );
      if (target) {
        const output = (_a = target.element.itemsWrapper) != null ? _a : target.element.output;
        if (!output)
          return false;
        const items = HSComboBox.getPreparedItems(isStart, output);
        const current = output.querySelector(
          ".hs-combo-box-output-item-highlighted"
        );
        if (items.length)
          HSComboBox.setHighlighted(
            current,
            items[0],
            target.element.input
          );
      }
    }
    static onEnter(evt) {
      const target = evt.target;
      const opened = window.$hsComboBoxCollection.find(
        // ::TEST !el.element.preventVisibility && el.element.isOpened
        (el) => !isParentOrElementHidden(el.element.el) && el.element.isOpened
      );
      const link = opened.element.el.querySelector("a");
      if (target.hasAttribute("data-hs-combo-box-input")) {
        opened.element.close();
        target.blur();
      } else {
        if (!opened.element.preventSelection)
          opened.element.setSelectedByValue(
            opened.element.valuesBySelector(evt.target)
          );
        if (opened.element.preventSelection && link)
          window.location.assign(link.getAttribute("href"));
        opened.element.close(
          !opened.element.preventSelection ? evt.target.querySelector("[data-hs-combo-box-value]").getAttribute("data-hs-combo-box-search-text") : null
        );
      }
    }
  };
  window.addEventListener("load", () => {
    HSComboBox.autoInit();
  });
  document.addEventListener("scroll", () => {
    if (!window.$hsComboBoxCollection)
      return false;
    const target = window.$hsComboBoxCollection.find((el) => el.element.isOpened);
    if (target)
      target.element.recalculateDirection();
  });
  if (typeof window !== "undefined") {
    window.HSComboBox = HSComboBox;
  }
  var combobox_default = HSComboBox;

  // node_modules/@popperjs/core/lib/enums.js
  var top2 = "top";
  var bottom2 = "bottom";
  var right = "right";
  var left = "left";
  var auto = "auto";
  var basePlacements = [top2, bottom2, right, left];
  var start = "start";
  var end = "end";
  var clippingParents = "clippingParents";
  var viewport = "viewport";
  var popper = "popper";
  var reference = "reference";
  var variationPlacements = /* @__PURE__ */ basePlacements.reduce(function(acc, placement) {
    return acc.concat([placement + "-" + start, placement + "-" + end]);
  }, []);
  var placements = /* @__PURE__ */ [].concat(basePlacements, [auto]).reduce(function(acc, placement) {
    return acc.concat([placement, placement + "-" + start, placement + "-" + end]);
  }, []);
  var beforeRead = "beforeRead";
  var read = "read";
  var afterRead = "afterRead";
  var beforeMain = "beforeMain";
  var main = "main";
  var afterMain = "afterMain";
  var beforeWrite = "beforeWrite";
  var write = "write";
  var afterWrite = "afterWrite";
  var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];

  // node_modules/@popperjs/core/lib/dom-utils/getNodeName.js
  function getNodeName(element) {
    return element ? (element.nodeName || "").toLowerCase() : null;
  }

  // node_modules/@popperjs/core/lib/dom-utils/getWindow.js
  function getWindow(node) {
    if (node == null) {
      return window;
    }
    if (node.toString() !== "[object Window]") {
      var ownerDocument = node.ownerDocument;
      return ownerDocument ? ownerDocument.defaultView || window : window;
    }
    return node;
  }

  // node_modules/@popperjs/core/lib/dom-utils/instanceOf.js
  function isElement(node) {
    var OwnElement = getWindow(node).Element;
    return node instanceof OwnElement || node instanceof Element;
  }
  function isHTMLElement(node) {
    var OwnElement = getWindow(node).HTMLElement;
    return node instanceof OwnElement || node instanceof HTMLElement;
  }
  function isShadowRoot(node) {
    if (typeof ShadowRoot === "undefined") {
      return false;
    }
    var OwnElement = getWindow(node).ShadowRoot;
    return node instanceof OwnElement || node instanceof ShadowRoot;
  }

  // node_modules/@popperjs/core/lib/modifiers/applyStyles.js
  function applyStyles(_ref) {
    var state = _ref.state;
    Object.keys(state.elements).forEach(function(name) {
      var style = state.styles[name] || {};
      var attributes = state.attributes[name] || {};
      var element = state.elements[name];
      if (!isHTMLElement(element) || !getNodeName(element)) {
        return;
      }
      Object.assign(element.style, style);
      Object.keys(attributes).forEach(function(name2) {
        var value = attributes[name2];
        if (value === false) {
          element.removeAttribute(name2);
        } else {
          element.setAttribute(name2, value === true ? "" : value);
        }
      });
    });
  }
  function effect(_ref2) {
    var state = _ref2.state;
    var initialStyles = {
      popper: {
        position: state.options.strategy,
        left: "0",
        top: "0",
        margin: "0"
      },
      arrow: {
        position: "absolute"
      },
      reference: {}
    };
    Object.assign(state.elements.popper.style, initialStyles.popper);
    state.styles = initialStyles;
    if (state.elements.arrow) {
      Object.assign(state.elements.arrow.style, initialStyles.arrow);
    }
    return function() {
      Object.keys(state.elements).forEach(function(name) {
        var element = state.elements[name];
        var attributes = state.attributes[name] || {};
        var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]);
        var style = styleProperties.reduce(function(style2, property) {
          style2[property] = "";
          return style2;
        }, {});
        if (!isHTMLElement(element) || !getNodeName(element)) {
          return;
        }
        Object.assign(element.style, style);
        Object.keys(attributes).forEach(function(attribute) {
          element.removeAttribute(attribute);
        });
      });
    };
  }
  var applyStyles_default = {
    name: "applyStyles",
    enabled: true,
    phase: "write",
    fn: applyStyles,
    effect,
    requires: ["computeStyles"]
  };

  // node_modules/@popperjs/core/lib/utils/getBasePlacement.js
  function getBasePlacement(placement) {
    return placement.split("-")[0];
  }

  // node_modules/@popperjs/core/lib/utils/math.js
  var max = Math.max;
  var min = Math.min;
  var round = Math.round;

  // node_modules/@popperjs/core/lib/utils/userAgent.js
  function getUAString() {
    var uaData = navigator.userAgentData;
    if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {
      return uaData.brands.map(function(item) {
        return item.brand + "/" + item.version;
      }).join(" ");
    }
    return navigator.userAgent;
  }

  // node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js
  function isLayoutViewport() {
    return !/^((?!chrome|android).)*safari/i.test(getUAString());
  }

  // node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js
  function getBoundingClientRect(element, includeScale, isFixedStrategy) {
    if (includeScale === void 0) {
      includeScale = false;
    }
    if (isFixedStrategy === void 0) {
      isFixedStrategy = false;
    }
    var clientRect = element.getBoundingClientRect();
    var scaleX = 1;
    var scaleY = 1;
    if (includeScale && isHTMLElement(element)) {
      scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;
      scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;
    }
    var _ref = isElement(element) ? getWindow(element) : window, visualViewport = _ref.visualViewport;
    var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;
    var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;
    var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;
    var width = clientRect.width / scaleX;
    var height = clientRect.height / scaleY;
    return {
      width,
      height,
      top: y,
      right: x + width,
      bottom: y + height,
      left: x,
      x,
      y
    };
  }

  // node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js
  function getLayoutRect(element) {
    var clientRect = getBoundingClientRect(element);
    var width = element.offsetWidth;
    var height = element.offsetHeight;
    if (Math.abs(clientRect.width - width) <= 1) {
      width = clientRect.width;
    }
    if (Math.abs(clientRect.height - height) <= 1) {
      height = clientRect.height;
    }
    return {
      x: element.offsetLeft,
      y: element.offsetTop,
      width,
      height
    };
  }

  // node_modules/@popperjs/core/lib/dom-utils/contains.js
  function contains(parent, child) {
    var rootNode = child.getRootNode && child.getRootNode();
    if (parent.contains(child)) {
      return true;
    } else if (rootNode && isShadowRoot(rootNode)) {
      var next = child;
      do {
        if (next && parent.isSameNode(next)) {
          return true;
        }
        next = next.parentNode || next.host;
      } while (next);
    }
    return false;
  }

  // node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js
  function getComputedStyle2(element) {
    return getWindow(element).getComputedStyle(element);
  }

  // node_modules/@popperjs/core/lib/dom-utils/isTableElement.js
  function isTableElement(element) {
    return ["table", "td", "th"].indexOf(getNodeName(element)) >= 0;
  }

  // node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js
  function getDocumentElement(element) {
    return ((isElement(element) ? element.ownerDocument : (
      // $FlowFixMe[prop-missing]
      element.document
    )) || window.document).documentElement;
  }

  // node_modules/@popperjs/core/lib/dom-utils/getParentNode.js
  function getParentNode(element) {
    if (getNodeName(element) === "html") {
      return element;
    }
    return (
      // this is a quicker (but less type safe) way to save quite some bytes from the bundle
      // $FlowFixMe[incompatible-return]
      // $FlowFixMe[prop-missing]
      element.assignedSlot || // step into the shadow DOM of the parent of a slotted node
      element.parentNode || // DOM Element detected
      (isShadowRoot(element) ? element.host : null) || // ShadowRoot detected
      // $FlowFixMe[incompatible-call]: HTMLElement is a Node
      getDocumentElement(element)
    );
  }

  // node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js
  function getTrueOffsetParent(element) {
    if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837
    getComputedStyle2(element).position === "fixed") {
      return null;
    }
    return element.offsetParent;
  }
  function getContainingBlock(element) {
    var isFirefox = /firefox/i.test(getUAString());
    var isIE = /Trident/i.test(getUAString());
    if (isIE && isHTMLElement(element)) {
      var elementCss = getComputedStyle2(element);
      if (elementCss.position === "fixed") {
        return null;
      }
    }
    var currentNode = getParentNode(element);
    if (isShadowRoot(currentNode)) {
      currentNode = currentNode.host;
    }
    while (isHTMLElement(currentNode) && ["html", "body"].indexOf(getNodeName(currentNode)) < 0) {
      var css = getComputedStyle2(currentNode);
      if (css.transform !== "none" || css.perspective !== "none" || css.contain === "paint" || ["transform", "perspective"].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === "filter" || isFirefox && css.filter && css.filter !== "none") {
        return currentNode;
      } else {
        currentNode = currentNode.parentNode;
      }
    }
    return null;
  }
  function getOffsetParent(element) {
    var window2 = getWindow(element);
    var offsetParent = getTrueOffsetParent(element);
    while (offsetParent && isTableElement(offsetParent) && getComputedStyle2(offsetParent).position === "static") {
      offsetParent = getTrueOffsetParent(offsetParent);
    }
    if (offsetParent && (getNodeName(offsetParent) === "html" || getNodeName(offsetParent) === "body" && getComputedStyle2(offsetParent).position === "static")) {
      return window2;
    }
    return offsetParent || getContainingBlock(element) || window2;
  }

  // node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js
  function getMainAxisFromPlacement(placement) {
    return ["top", "bottom"].indexOf(placement) >= 0 ? "x" : "y";
  }

  // node_modules/@popperjs/core/lib/utils/within.js
  function within(min2, value, max2) {
    return max(min2, min(value, max2));
  }
  function withinMaxClamp(min2, value, max2) {
    var v = within(min2, value, max2);
    return v > max2 ? max2 : v;
  }

  // node_modules/@popperjs/core/lib/utils/getFreshSideObject.js
  function getFreshSideObject() {
    return {
      top: 0,
      right: 0,
      bottom: 0,
      left: 0
    };
  }

  // node_modules/@popperjs/core/lib/utils/mergePaddingObject.js
  function mergePaddingObject(paddingObject) {
    return Object.assign({}, getFreshSideObject(), paddingObject);
  }

  // node_modules/@popperjs/core/lib/utils/expandToHashMap.js
  function expandToHashMap(value, keys) {
    return keys.reduce(function(hashMap, key) {
      hashMap[key] = value;
      return hashMap;
    }, {});
  }

  // node_modules/@popperjs/core/lib/modifiers/arrow.js
  var toPaddingObject = function toPaddingObject2(padding, state) {
    padding = typeof padding === "function" ? padding(Object.assign({}, state.rects, {
      placement: state.placement
    })) : padding;
    return mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
  };
  function arrow(_ref) {
    var _state$modifiersData$;
    var state = _ref.state, name = _ref.name, options = _ref.options;
    var arrowElement = state.elements.arrow;
    var popperOffsets2 = state.modifiersData.popperOffsets;
    var basePlacement = getBasePlacement(state.placement);
    var axis = getMainAxisFromPlacement(basePlacement);
    var isVertical = [left, right].indexOf(basePlacement) >= 0;
    var len = isVertical ? "height" : "width";
    if (!arrowElement || !popperOffsets2) {
      return;
    }
    var paddingObject = toPaddingObject(options.padding, state);
    var arrowRect = getLayoutRect(arrowElement);
    var minProp = axis === "y" ? top2 : left;
    var maxProp = axis === "y" ? bottom2 : right;
    var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets2[axis] - state.rects.popper[len];
    var startDiff = popperOffsets2[axis] - state.rects.reference[axis];
    var arrowOffsetParent = getOffsetParent(arrowElement);
    var clientSize = arrowOffsetParent ? axis === "y" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;
    var centerToReference = endDiff / 2 - startDiff / 2;
    var min2 = paddingObject[minProp];
    var max2 = clientSize - arrowRect[len] - paddingObject[maxProp];
    var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;
    var offset2 = within(min2, center, max2);
    var axisProp = axis;
    state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset2, _state$modifiersData$.centerOffset = offset2 - center, _state$modifiersData$);
  }
  function effect2(_ref2) {
    var state = _ref2.state, options = _ref2.options;
    var _options$element = options.element, arrowElement = _options$element === void 0 ? "[data-popper-arrow]" : _options$element;
    if (arrowElement == null) {
      return;
    }
    if (typeof arrowElement === "string") {
      arrowElement = state.elements.popper.querySelector(arrowElement);
      if (!arrowElement) {
        return;
      }
    }
    if (!contains(state.elements.popper, arrowElement)) {
      return;
    }
    state.elements.arrow = arrowElement;
  }
  var arrow_default = {
    name: "arrow",
    enabled: true,
    phase: "main",
    fn: arrow,
    effect: effect2,
    requires: ["popperOffsets"],
    requiresIfExists: ["preventOverflow"]
  };

  // node_modules/@popperjs/core/lib/utils/getVariation.js
  function getVariation(placement) {
    return placement.split("-")[1];
  }

  // node_modules/@popperjs/core/lib/modifiers/computeStyles.js
  var unsetSides = {
    top: "auto",
    right: "auto",
    bottom: "auto",
    left: "auto"
  };
  function roundOffsetsByDPR(_ref, win) {
    var x = _ref.x, y = _ref.y;
    var dpr = win.devicePixelRatio || 1;
    return {
      x: round(x * dpr) / dpr || 0,
      y: round(y * dpr) / dpr || 0
    };
  }
  function mapToStyles(_ref2) {
    var _Object$assign2;
    var popper2 = _ref2.popper, popperRect = _ref2.popperRect, placement = _ref2.placement, variation = _ref2.variation, offsets = _ref2.offsets, position = _ref2.position, gpuAcceleration = _ref2.gpuAcceleration, adaptive = _ref2.adaptive, roundOffsets = _ref2.roundOffsets, isFixed = _ref2.isFixed;
    var _offsets$x = offsets.x, x = _offsets$x === void 0 ? 0 : _offsets$x, _offsets$y = offsets.y, y = _offsets$y === void 0 ? 0 : _offsets$y;
    var _ref3 = typeof roundOffsets === "function" ? roundOffsets({
      x,
      y
    }) : {
      x,
      y
    };
    x = _ref3.x;
    y = _ref3.y;
    var hasX = offsets.hasOwnProperty("x");
    var hasY = offsets.hasOwnProperty("y");
    var sideX = left;
    var sideY = top2;
    var win = window;
    if (adaptive) {
      var offsetParent = getOffsetParent(popper2);
      var heightProp = "clientHeight";
      var widthProp = "clientWidth";
      if (offsetParent === getWindow(popper2)) {
        offsetParent = getDocumentElement(popper2);
        if (getComputedStyle2(offsetParent).position !== "static" && position === "absolute") {
          heightProp = "scrollHeight";
          widthProp = "scrollWidth";
        }
      }
      offsetParent = offsetParent;
      if (placement === top2 || (placement === left || placement === right) && variation === end) {
        sideY = bottom2;
        var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : (
          // $FlowFixMe[prop-missing]
          offsetParent[heightProp]
        );
        y -= offsetY - popperRect.height;
        y *= gpuAcceleration ? 1 : -1;
      }
      if (placement === left || (placement === top2 || placement === bottom2) && variation === end) {
        sideX = right;
        var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : (
          // $FlowFixMe[prop-missing]
          offsetParent[widthProp]
        );
        x -= offsetX - popperRect.width;
        x *= gpuAcceleration ? 1 : -1;
      }
    }
    var commonStyles = Object.assign({
      position
    }, adaptive && unsetSides);
    var _ref4 = roundOffsets === true ? roundOffsetsByDPR({
      x,
      y
    }, getWindow(popper2)) : {
      x,
      y
    };
    x = _ref4.x;
    y = _ref4.y;
    if (gpuAcceleration) {
      var _Object$assign;
      return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? "0" : "", _Object$assign[sideX] = hasX ? "0" : "", _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? "translate(" + x + "px, " + y + "px)" : "translate3d(" + x + "px, " + y + "px, 0)", _Object$assign));
    }
    return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + "px" : "", _Object$assign2[sideX] = hasX ? x + "px" : "", _Object$assign2.transform = "", _Object$assign2));
  }
  function computeStyles(_ref5) {
    var state = _ref5.state, options = _ref5.options;
    var _options$gpuAccelerat = options.gpuAcceleration, gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat, _options$adaptive = options.adaptive, adaptive = _options$adaptive === void 0 ? true : _options$adaptive, _options$roundOffsets = options.roundOffsets, roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;
    var commonStyles = {
      placement: getBasePlacement(state.placement),
      variation: getVariation(state.placement),
      popper: state.elements.popper,
      popperRect: state.rects.popper,
      gpuAcceleration,
      isFixed: state.options.strategy === "fixed"
    };
    if (state.modifiersData.popperOffsets != null) {
      state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {
        offsets: state.modifiersData.popperOffsets,
        position: state.options.strategy,
        adaptive,
        roundOffsets
      })));
    }
    if (state.modifiersData.arrow != null) {
      state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {
        offsets: state.modifiersData.arrow,
        position: "absolute",
        adaptive: false,
        roundOffsets
      })));
    }
    state.attributes.popper = Object.assign({}, state.attributes.popper, {
      "data-popper-placement": state.placement
    });
  }
  var computeStyles_default = {
    name: "computeStyles",
    enabled: true,
    phase: "beforeWrite",
    fn: computeStyles,
    data: {}
  };

  // node_modules/@popperjs/core/lib/modifiers/eventListeners.js
  var passive = {
    passive: true
  };
  function effect3(_ref) {
    var state = _ref.state, instance = _ref.instance, options = _ref.options;
    var _options$scroll = options.scroll, scroll = _options$scroll === void 0 ? true : _options$scroll, _options$resize = options.resize, resize = _options$resize === void 0 ? true : _options$resize;
    var window2 = getWindow(state.elements.popper);
    var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);
    if (scroll) {
      scrollParents.forEach(function(scrollParent) {
        scrollParent.addEventListener("scroll", instance.update, passive);
      });
    }
    if (resize) {
      window2.addEventListener("resize", instance.update, passive);
    }
    return function() {
      if (scroll) {
        scrollParents.forEach(function(scrollParent) {
          scrollParent.removeEventListener("scroll", instance.update, passive);
        });
      }
      if (resize) {
        window2.removeEventListener("resize", instance.update, passive);
      }
    };
  }
  var eventListeners_default = {
    name: "eventListeners",
    enabled: true,
    phase: "write",
    fn: function fn() {
    },
    effect: effect3,
    data: {}
  };

  // node_modules/@popperjs/core/lib/utils/getOppositePlacement.js
  var hash = {
    left: "right",
    right: "left",
    bottom: "top",
    top: "bottom"
  };
  function getOppositePlacement(placement) {
    return placement.replace(/left|right|bottom|top/g, function(matched) {
      return hash[matched];
    });
  }

  // node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js
  var hash2 = {
    start: "end",
    end: "start"
  };
  function getOppositeVariationPlacement(placement) {
    return placement.replace(/start|end/g, function(matched) {
      return hash2[matched];
    });
  }

  // node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js
  function getWindowScroll(node) {
    var win = getWindow(node);
    var scrollLeft = win.pageXOffset;
    var scrollTop2 = win.pageYOffset;
    return {
      scrollLeft,
      scrollTop: scrollTop2
    };
  }

  // node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js
  function getWindowScrollBarX(element) {
    return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;
  }

  // node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js
  function getViewportRect(element, strategy) {
    var win = getWindow(element);
    var html2 = getDocumentElement(element);
    var visualViewport = win.visualViewport;
    var width = html2.clientWidth;
    var height = html2.clientHeight;
    var x = 0;
    var y = 0;
    if (visualViewport) {
      width = visualViewport.width;
      height = visualViewport.height;
      var layoutViewport = isLayoutViewport();
      if (layoutViewport || !layoutViewport && strategy === "fixed") {
        x = visualViewport.offsetLeft;
        y = visualViewport.offsetTop;
      }
    }
    return {
      width,
      height,
      x: x + getWindowScrollBarX(element),
      y
    };
  }

  // node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js
  function getDocumentRect(element) {
    var _element$ownerDocumen;
    var html2 = getDocumentElement(element);
    var winScroll = getWindowScroll(element);
    var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;
    var width = max(html2.scrollWidth, html2.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);
    var height = max(html2.scrollHeight, html2.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);
    var x = -winScroll.scrollLeft + getWindowScrollBarX(element);
    var y = -winScroll.scrollTop;
    if (getComputedStyle2(body || html2).direction === "rtl") {
      x += max(html2.clientWidth, body ? body.clientWidth : 0) - width;
    }
    return {
      width,
      height,
      x,
      y
    };
  }

  // node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js
  function isScrollParent(element) {
    var _getComputedStyle = getComputedStyle2(element), overflow = _getComputedStyle.overflow, overflowX = _getComputedStyle.overflowX, overflowY = _getComputedStyle.overflowY;
    return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);
  }

  // node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js
  function getScrollParent(node) {
    if (["html", "body", "#document"].indexOf(getNodeName(node)) >= 0) {
      return node.ownerDocument.body;
    }
    if (isHTMLElement(node) && isScrollParent(node)) {
      return node;
    }
    return getScrollParent(getParentNode(node));
  }

  // node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js
  function listScrollParents(element, list) {
    var _element$ownerDocumen;
    if (list === void 0) {
      list = [];
    }
    var scrollParent = getScrollParent(element);
    var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);
    var win = getWindow(scrollParent);
    var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;
    var updatedList = list.concat(target);
    return isBody ? updatedList : (
      // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here
      updatedList.concat(listScrollParents(getParentNode(target)))
    );
  }

  // node_modules/@popperjs/core/lib/utils/rectToClientRect.js
  function rectToClientRect(rect) {
    return Object.assign({}, rect, {
      left: rect.x,
      top: rect.y,
      right: rect.x + rect.width,
      bottom: rect.y + rect.height
    });
  }

  // node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js
  function getInnerBoundingClientRect(element, strategy) {
    var rect = getBoundingClientRect(element, false, strategy === "fixed");
    rect.top = rect.top + element.clientTop;
    rect.left = rect.left + element.clientLeft;
    rect.bottom = rect.top + element.clientHeight;
    rect.right = rect.left + element.clientWidth;
    rect.width = element.clientWidth;
    rect.height = element.clientHeight;
    rect.x = rect.left;
    rect.y = rect.top;
    return rect;
  }
  function getClientRectFromMixedType(element, clippingParent, strategy) {
    return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));
  }
  function getClippingParents(element) {
    var clippingParents2 = listScrollParents(getParentNode(element));
    var canEscapeClipping = ["absolute", "fixed"].indexOf(getComputedStyle2(element).position) >= 0;
    var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;
    if (!isElement(clipperElement)) {
      return [];
    }
    return clippingParents2.filter(function(clippingParent) {
      return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== "body";
    });
  }
  function getClippingRect(element, boundary, rootBoundary, strategy) {
    var mainClippingParents = boundary === "clippingParents" ? getClippingParents(element) : [].concat(boundary);
    var clippingParents2 = [].concat(mainClippingParents, [rootBoundary]);
    var firstClippingParent = clippingParents2[0];
    var clippingRect = clippingParents2.reduce(function(accRect, clippingParent) {
      var rect = getClientRectFromMixedType(element, clippingParent, strategy);
      accRect.top = max(rect.top, accRect.top);
      accRect.right = min(rect.right, accRect.right);
      accRect.bottom = min(rect.bottom, accRect.bottom);
      accRect.left = max(rect.left, accRect.left);
      return accRect;
    }, getClientRectFromMixedType(element, firstClippingParent, strategy));
    clippingRect.width = clippingRect.right - clippingRect.left;
    clippingRect.height = clippingRect.bottom - clippingRect.top;
    clippingRect.x = clippingRect.left;
    clippingRect.y = clippingRect.top;
    return clippingRect;
  }

  // node_modules/@popperjs/core/lib/utils/computeOffsets.js
  function computeOffsets(_ref) {
    var reference2 = _ref.reference, element = _ref.element, placement = _ref.placement;
    var basePlacement = placement ? getBasePlacement(placement) : null;
    var variation = placement ? getVariation(placement) : null;
    var commonX = reference2.x + reference2.width / 2 - element.width / 2;
    var commonY = reference2.y + reference2.height / 2 - element.height / 2;
    var offsets;
    switch (basePlacement) {
      case top2:
        offsets = {
          x: commonX,
          y: reference2.y - element.height
        };
        break;
      case bottom2:
        offsets = {
          x: commonX,
          y: reference2.y + reference2.height
        };
        break;
      case right:
        offsets = {
          x: reference2.x + reference2.width,
          y: commonY
        };
        break;
      case left:
        offsets = {
          x: reference2.x - element.width,
          y: commonY
        };
        break;
      default:
        offsets = {
          x: reference2.x,
          y: reference2.y
        };
    }
    var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;
    if (mainAxis != null) {
      var len = mainAxis === "y" ? "height" : "width";
      switch (variation) {
        case start:
          offsets[mainAxis] = offsets[mainAxis] - (reference2[len] / 2 - element[len] / 2);
          break;
        case end:
          offsets[mainAxis] = offsets[mainAxis] + (reference2[len] / 2 - element[len] / 2);
          break;
        default:
      }
    }
    return offsets;
  }

  // node_modules/@popperjs/core/lib/utils/detectOverflow.js
  function detectOverflow(state, options) {
    if (options === void 0) {
      options = {};
    }
    var _options = options, _options$placement = _options.placement, placement = _options$placement === void 0 ? state.placement : _options$placement, _options$strategy = _options.strategy, strategy = _options$strategy === void 0 ? state.strategy : _options$strategy, _options$boundary = _options.boundary, boundary = _options$boundary === void 0 ? clippingParents : _options$boundary, _options$rootBoundary = _options.rootBoundary, rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary, _options$elementConte = _options.elementContext, elementContext = _options$elementConte === void 0 ? popper : _options$elementConte, _options$altBoundary = _options.altBoundary, altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary, _options$padding = _options.padding, padding = _options$padding === void 0 ? 0 : _options$padding;
    var paddingObject = mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
    var altContext = elementContext === popper ? reference : popper;
    var popperRect = state.rects.popper;
    var element = state.elements[altBoundary ? altContext : elementContext];
    var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);
    var referenceClientRect = getBoundingClientRect(state.elements.reference);
    var popperOffsets2 = computeOffsets({
      reference: referenceClientRect,
      element: popperRect,
      strategy: "absolute",
      placement
    });
    var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets2));
    var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect;
    var overflowOffsets = {
      top: clippingClientRect.top - elementClientRect.top + paddingObject.top,
      bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,
      left: clippingClientRect.left - elementClientRect.left + paddingObject.left,
      right: elementClientRect.right - clippingClientRect.right + paddingObject.right
    };
    var offsetData = state.modifiersData.offset;
    if (elementContext === popper && offsetData) {
      var offset2 = offsetData[placement];
      Object.keys(overflowOffsets).forEach(function(key) {
        var multiply = [right, bottom2].indexOf(key) >= 0 ? 1 : -1;
        var axis = [top2, bottom2].indexOf(key) >= 0 ? "y" : "x";
        overflowOffsets[key] += offset2[axis] * multiply;
      });
    }
    return overflowOffsets;
  }

  // node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js
  function computeAutoPlacement(state, options) {
    if (options === void 0) {
      options = {};
    }
    var _options = options, placement = _options.placement, boundary = _options.boundary, rootBoundary = _options.rootBoundary, padding = _options.padding, flipVariations = _options.flipVariations, _options$allowedAutoP = _options.allowedAutoPlacements, allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;
    var variation = getVariation(placement);
    var placements2 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function(placement2) {
      return getVariation(placement2) === variation;
    }) : basePlacements;
    var allowedPlacements = placements2.filter(function(placement2) {
      return allowedAutoPlacements.indexOf(placement2) >= 0;
    });
    if (allowedPlacements.length === 0) {
      allowedPlacements = placements2;
    }
    var overflows = allowedPlacements.reduce(function(acc, placement2) {
      acc[placement2] = detectOverflow(state, {
        placement: placement2,
        boundary,
        rootBoundary,
        padding
      })[getBasePlacement(placement2)];
      return acc;
    }, {});
    return Object.keys(overflows).sort(function(a, b) {
      return overflows[a] - overflows[b];
    });
  }

  // node_modules/@popperjs/core/lib/modifiers/flip.js
  function getExpandedFallbackPlacements(placement) {
    if (getBasePlacement(placement) === auto) {
      return [];
    }
    var oppositePlacement = getOppositePlacement(placement);
    return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];
  }
  function flip(_ref) {
    var state = _ref.state, options = _ref.options, name = _ref.name;
    if (state.modifiersData[name]._skip) {
      return;
    }
    var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis, specifiedFallbackPlacements = options.fallbackPlacements, padding = options.padding, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, _options$flipVariatio = options.flipVariations, flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio, allowedAutoPlacements = options.allowedAutoPlacements;
    var preferredPlacement = state.options.placement;
    var basePlacement = getBasePlacement(preferredPlacement);
    var isBasePlacement = basePlacement === preferredPlacement;
    var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));
    var placements2 = [preferredPlacement].concat(fallbackPlacements).reduce(function(acc, placement2) {
      return acc.concat(getBasePlacement(placement2) === auto ? computeAutoPlacement(state, {
        placement: placement2,
        boundary,
        rootBoundary,
        padding,
        flipVariations,
        allowedAutoPlacements
      }) : placement2);
    }, []);
    var referenceRect = state.rects.reference;
    var popperRect = state.rects.popper;
    var checksMap = /* @__PURE__ */ new Map();
    var makeFallbackChecks = true;
    var firstFittingPlacement = placements2[0];
    for (var i = 0; i < placements2.length; i++) {
      var placement = placements2[i];
      var _basePlacement = getBasePlacement(placement);
      var isStartVariation = getVariation(placement) === start;
      var isVertical = [top2, bottom2].indexOf(_basePlacement) >= 0;
      var len = isVertical ? "width" : "height";
      var overflow = detectOverflow(state, {
        placement,
        boundary,
        rootBoundary,
        altBoundary,
        padding
      });
      var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom2 : top2;
      if (referenceRect[len] > popperRect[len]) {
        mainVariationSide = getOppositePlacement(mainVariationSide);
      }
      var altVariationSide = getOppositePlacement(mainVariationSide);
      var checks = [];
      if (checkMainAxis) {
        checks.push(overflow[_basePlacement] <= 0);
      }
      if (checkAltAxis) {
        checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);
      }
      if (checks.every(function(check) {
        return check;
      })) {
        firstFittingPlacement = placement;
        makeFallbackChecks = false;
        break;
      }
      checksMap.set(placement, checks);
    }
    if (makeFallbackChecks) {
      var numberOfChecks = flipVariations ? 3 : 1;
      var _loop = function _loop2(_i2) {
        var fittingPlacement = placements2.find(function(placement2) {
          var checks2 = checksMap.get(placement2);
          if (checks2) {
            return checks2.slice(0, _i2).every(function(check) {
              return check;
            });
          }
        });
        if (fittingPlacement) {
          firstFittingPlacement = fittingPlacement;
          return "break";
        }
      };
      for (var _i = numberOfChecks; _i > 0; _i--) {
        var _ret = _loop(_i);
        if (_ret === "break")
          break;
      }
    }
    if (state.placement !== firstFittingPlacement) {
      state.modifiersData[name]._skip = true;
      state.placement = firstFittingPlacement;
      state.reset = true;
    }
  }
  var flip_default = {
    name: "flip",
    enabled: true,
    phase: "main",
    fn: flip,
    requiresIfExists: ["offset"],
    data: {
      _skip: false
    }
  };

  // node_modules/@popperjs/core/lib/modifiers/hide.js
  function getSideOffsets(overflow, rect, preventedOffsets) {
    if (preventedOffsets === void 0) {
      preventedOffsets = {
        x: 0,
        y: 0
      };
    }
    return {
      top: overflow.top - rect.height - preventedOffsets.y,
      right: overflow.right - rect.width + preventedOffsets.x,
      bottom: overflow.bottom - rect.height + preventedOffsets.y,
      left: overflow.left - rect.width - preventedOffsets.x
    };
  }
  function isAnySideFullyClipped(overflow) {
    return [top2, right, bottom2, left].some(function(side) {
      return overflow[side] >= 0;
    });
  }
  function hide(_ref) {
    var state = _ref.state, name = _ref.name;
    var referenceRect = state.rects.reference;
    var popperRect = state.rects.popper;
    var preventedOffsets = state.modifiersData.preventOverflow;
    var referenceOverflow = detectOverflow(state, {
      elementContext: "reference"
    });
    var popperAltOverflow = detectOverflow(state, {
      altBoundary: true
    });
    var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);
    var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);
    var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);
    var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);
    state.modifiersData[name] = {
      referenceClippingOffsets,
      popperEscapeOffsets,
      isReferenceHidden,
      hasPopperEscaped
    };
    state.attributes.popper = Object.assign({}, state.attributes.popper, {
      "data-popper-reference-hidden": isReferenceHidden,
      "data-popper-escaped": hasPopperEscaped
    });
  }
  var hide_default = {
    name: "hide",
    enabled: true,
    phase: "main",
    requiresIfExists: ["preventOverflow"],
    fn: hide
  };

  // node_modules/@popperjs/core/lib/modifiers/offset.js
  function distanceAndSkiddingToXY(placement, rects, offset2) {
    var basePlacement = getBasePlacement(placement);
    var invertDistance = [left, top2].indexOf(basePlacement) >= 0 ? -1 : 1;
    var _ref = typeof offset2 === "function" ? offset2(Object.assign({}, rects, {
      placement
    })) : offset2, skidding = _ref[0], distance = _ref[1];
    skidding = skidding || 0;
    distance = (distance || 0) * invertDistance;
    return [left, right].indexOf(basePlacement) >= 0 ? {
      x: distance,
      y: skidding
    } : {
      x: skidding,
      y: distance
    };
  }
  function offset(_ref2) {
    var state = _ref2.state, options = _ref2.options, name = _ref2.name;
    var _options$offset = options.offset, offset2 = _options$offset === void 0 ? [0, 0] : _options$offset;
    var data = placements.reduce(function(acc, placement) {
      acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset2);
      return acc;
    }, {});
    var _data$state$placement = data[state.placement], x = _data$state$placement.x, y = _data$state$placement.y;
    if (state.modifiersData.popperOffsets != null) {
      state.modifiersData.popperOffsets.x += x;
      state.modifiersData.popperOffsets.y += y;
    }
    state.modifiersData[name] = data;
  }
  var offset_default = {
    name: "offset",
    enabled: true,
    phase: "main",
    requires: ["popperOffsets"],
    fn: offset
  };

  // node_modules/@popperjs/core/lib/modifiers/popperOffsets.js
  function popperOffsets(_ref) {
    var state = _ref.state, name = _ref.name;
    state.modifiersData[name] = computeOffsets({
      reference: state.rects.reference,
      element: state.rects.popper,
      strategy: "absolute",
      placement: state.placement
    });
  }
  var popperOffsets_default = {
    name: "popperOffsets",
    enabled: true,
    phase: "read",
    fn: popperOffsets,
    data: {}
  };

  // node_modules/@popperjs/core/lib/utils/getAltAxis.js
  function getAltAxis(axis) {
    return axis === "x" ? "y" : "x";
  }

  // node_modules/@popperjs/core/lib/modifiers/preventOverflow.js
  function preventOverflow(_ref) {
    var state = _ref.state, options = _ref.options, name = _ref.name;
    var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, padding = options.padding, _options$tether = options.tether, tether = _options$tether === void 0 ? true : _options$tether, _options$tetherOffset = options.tetherOffset, tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;
    var overflow = detectOverflow(state, {
      boundary,
      rootBoundary,
      padding,
      altBoundary
    });
    var basePlacement = getBasePlacement(state.placement);
    var variation = getVariation(state.placement);
    var isBasePlacement = !variation;
    var mainAxis = getMainAxisFromPlacement(basePlacement);
    var altAxis = getAltAxis(mainAxis);
    var popperOffsets2 = state.modifiersData.popperOffsets;
    var referenceRect = state.rects.reference;
    var popperRect = state.rects.popper;
    var tetherOffsetValue = typeof tetherOffset === "function" ? tetherOffset(Object.assign({}, state.rects, {
      placement: state.placement
    })) : tetherOffset;
    var normalizedTetherOffsetValue = typeof tetherOffsetValue === "number" ? {
      mainAxis: tetherOffsetValue,
      altAxis: tetherOffsetValue
    } : Object.assign({
      mainAxis: 0,
      altAxis: 0
    }, tetherOffsetValue);
    var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;
    var data = {
      x: 0,
      y: 0
    };
    if (!popperOffsets2) {
      return;
    }
    if (checkMainAxis) {
      var _offsetModifierState$;
      var mainSide = mainAxis === "y" ? top2 : left;
      var altSide = mainAxis === "y" ? bottom2 : right;
      var len = mainAxis === "y" ? "height" : "width";
      var offset2 = popperOffsets2[mainAxis];
      var min2 = offset2 + overflow[mainSide];
      var max2 = offset2 - overflow[altSide];
      var additive = tether ? -popperRect[len] / 2 : 0;
      var minLen = variation === start ? referenceRect[len] : popperRect[len];
      var maxLen = variation === start ? -popperRect[len] : -referenceRect[len];
      var arrowElement = state.elements.arrow;
      var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {
        width: 0,
        height: 0
      };
      var arrowPaddingObject = state.modifiersData["arrow#persistent"] ? state.modifiersData["arrow#persistent"].padding : getFreshSideObject();
      var arrowPaddingMin = arrowPaddingObject[mainSide];
      var arrowPaddingMax = arrowPaddingObject[altSide];
      var arrowLen = within(0, referenceRect[len], arrowRect[len]);
      var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;
      var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;
      var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);
      var clientOffset = arrowOffsetParent ? mainAxis === "y" ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;
      var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;
      var tetherMin = offset2 + minOffset - offsetModifierValue - clientOffset;
      var tetherMax = offset2 + maxOffset - offsetModifierValue;
      var preventedOffset = within(tether ? min(min2, tetherMin) : min2, offset2, tether ? max(max2, tetherMax) : max2);
      popperOffsets2[mainAxis] = preventedOffset;
      data[mainAxis] = preventedOffset - offset2;
    }
    if (checkAltAxis) {
      var _offsetModifierState$2;
      var _mainSide = mainAxis === "x" ? top2 : left;
      var _altSide = mainAxis === "x" ? bottom2 : right;
      var _offset = popperOffsets2[altAxis];
      var _len = altAxis === "y" ? "height" : "width";
      var _min = _offset + overflow[_mainSide];
      var _max = _offset - overflow[_altSide];
      var isOriginSide = [top2, left].indexOf(basePlacement) !== -1;
      var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;
      var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;
      var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;
      var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);
      popperOffsets2[altAxis] = _preventedOffset;
      data[altAxis] = _preventedOffset - _offset;
    }
    state.modifiersData[name] = data;
  }
  var preventOverflow_default = {
    name: "preventOverflow",
    enabled: true,
    phase: "main",
    fn: preventOverflow,
    requiresIfExists: ["offset"]
  };

  // node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js
  function getHTMLElementScroll(element) {
    return {
      scrollLeft: element.scrollLeft,
      scrollTop: element.scrollTop
    };
  }

  // node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js
  function getNodeScroll(node) {
    if (node === getWindow(node) || !isHTMLElement(node)) {
      return getWindowScroll(node);
    } else {
      return getHTMLElementScroll(node);
    }
  }

  // node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js
  function isElementScaled(element) {
    var rect = element.getBoundingClientRect();
    var scaleX = round(rect.width) / element.offsetWidth || 1;
    var scaleY = round(rect.height) / element.offsetHeight || 1;
    return scaleX !== 1 || scaleY !== 1;
  }
  function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {
    if (isFixed === void 0) {
      isFixed = false;
    }
    var isOffsetParentAnElement = isHTMLElement(offsetParent);
    var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);
    var documentElement = getDocumentElement(offsetParent);
    var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);
    var scroll = {
      scrollLeft: 0,
      scrollTop: 0
    };
    var offsets = {
      x: 0,
      y: 0
    };
    if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {
      if (getNodeName(offsetParent) !== "body" || // https://github.com/popperjs/popper-core/issues/1078
      isScrollParent(documentElement)) {
        scroll = getNodeScroll(offsetParent);
      }
      if (isHTMLElement(offsetParent)) {
        offsets = getBoundingClientRect(offsetParent, true);
        offsets.x += offsetParent.clientLeft;
        offsets.y += offsetParent.clientTop;
      } else if (documentElement) {
        offsets.x = getWindowScrollBarX(documentElement);
      }
    }
    return {
      x: rect.left + scroll.scrollLeft - offsets.x,
      y: rect.top + scroll.scrollTop - offsets.y,
      width: rect.width,
      height: rect.height
    };
  }

  // node_modules/@popperjs/core/lib/utils/orderModifiers.js
  function order(modifiers) {
    var map = /* @__PURE__ */ new Map();
    var visited = /* @__PURE__ */ new Set();
    var result = [];
    modifiers.forEach(function(modifier) {
      map.set(modifier.name, modifier);
    });
    function sort(modifier) {
      visited.add(modifier.name);
      var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);
      requires.forEach(function(dep) {
        if (!visited.has(dep)) {
          var depModifier = map.get(dep);
          if (depModifier) {
            sort(depModifier);
          }
        }
      });
      result.push(modifier);
    }
    modifiers.forEach(function(modifier) {
      if (!visited.has(modifier.name)) {
        sort(modifier);
      }
    });
    return result;
  }
  function orderModifiers(modifiers) {
    var orderedModifiers = order(modifiers);
    return modifierPhases.reduce(function(acc, phase) {
      return acc.concat(orderedModifiers.filter(function(modifier) {
        return modifier.phase === phase;
      }));
    }, []);
  }

  // node_modules/@popperjs/core/lib/utils/debounce.js
  function debounce2(fn2) {
    var pending;
    return function() {
      if (!pending) {
        pending = new Promise(function(resolve) {
          Promise.resolve().then(function() {
            pending = void 0;
            resolve(fn2());
          });
        });
      }
      return pending;
    };
  }

  // node_modules/@popperjs/core/lib/utils/mergeByName.js
  function mergeByName(modifiers) {
    var merged = modifiers.reduce(function(merged2, current) {
      var existing = merged2[current.name];
      merged2[current.name] = existing ? Object.assign({}, existing, current, {
        options: Object.assign({}, existing.options, current.options),
        data: Object.assign({}, existing.data, current.data)
      }) : current;
      return merged2;
    }, {});
    return Object.keys(merged).map(function(key) {
      return merged[key];
    });
  }

  // node_modules/@popperjs/core/lib/createPopper.js
  var DEFAULT_OPTIONS = {
    placement: "bottom",
    modifiers: [],
    strategy: "absolute"
  };
  function areValidElements() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return !args.some(function(element) {
      return !(element && typeof element.getBoundingClientRect === "function");
    });
  }
  function popperGenerator(generatorOptions) {
    if (generatorOptions === void 0) {
      generatorOptions = {};
    }
    var _generatorOptions = generatorOptions, _generatorOptions$def = _generatorOptions.defaultModifiers, defaultModifiers2 = _generatorOptions$def === void 0 ? [] : _generatorOptions$def, _generatorOptions$def2 = _generatorOptions.defaultOptions, defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;
    return function createPopper2(reference2, popper2, options) {
      if (options === void 0) {
        options = defaultOptions;
      }
      var state = {
        placement: "bottom",
        orderedModifiers: [],
        options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),
        modifiersData: {},
        elements: {
          reference: reference2,
          popper: popper2
        },
        attributes: {},
        styles: {}
      };
      var effectCleanupFns = [];
      var isDestroyed = false;
      var instance = {
        state,
        setOptions: function setOptions(setOptionsAction) {
          var options2 = typeof setOptionsAction === "function" ? setOptionsAction(state.options) : setOptionsAction;
          cleanupModifierEffects();
          state.options = Object.assign({}, defaultOptions, state.options, options2);
          state.scrollParents = {
            reference: isElement(reference2) ? listScrollParents(reference2) : reference2.contextElement ? listScrollParents(reference2.contextElement) : [],
            popper: listScrollParents(popper2)
          };
          var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers2, state.options.modifiers)));
          state.orderedModifiers = orderedModifiers.filter(function(m) {
            return m.enabled;
          });
          runModifierEffects();
          return instance.update();
        },
        // Sync update – it will always be executed, even if not necessary. This
        // is useful for low frequency updates where sync behavior simplifies the
        // logic.
        // For high frequency updates (e.g. `resize` and `scroll` events), always
        // prefer the async Popper#update method
        forceUpdate: function forceUpdate() {
          if (isDestroyed) {
            return;
          }
          var _state$elements = state.elements, reference3 = _state$elements.reference, popper3 = _state$elements.popper;
          if (!areValidElements(reference3, popper3)) {
            return;
          }
          state.rects = {
            reference: getCompositeRect(reference3, getOffsetParent(popper3), state.options.strategy === "fixed"),
            popper: getLayoutRect(popper3)
          };
          state.reset = false;
          state.placement = state.options.placement;
          state.orderedModifiers.forEach(function(modifier) {
            return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);
          });
          for (var index = 0; index < state.orderedModifiers.length; index++) {
            if (state.reset === true) {
              state.reset = false;
              index = -1;
              continue;
            }
            var _state$orderedModifie = state.orderedModifiers[index], fn2 = _state$orderedModifie.fn, _state$orderedModifie2 = _state$orderedModifie.options, _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2, name = _state$orderedModifie.name;
            if (typeof fn2 === "function") {
              state = fn2({
                state,
                options: _options,
                name,
                instance
              }) || state;
            }
          }
        },
        // Async and optimistically optimized update – it will not be executed if
        // not necessary (debounced to run at most once-per-tick)
        update: debounce2(function() {
          return new Promise(function(resolve) {
            instance.forceUpdate();
            resolve(state);
          });
        }),
        destroy: function destroy() {
          cleanupModifierEffects();
          isDestroyed = true;
        }
      };
      if (!areValidElements(reference2, popper2)) {
        return instance;
      }
      instance.setOptions(options).then(function(state2) {
        if (!isDestroyed && options.onFirstUpdate) {
          options.onFirstUpdate(state2);
        }
      });
      function runModifierEffects() {
        state.orderedModifiers.forEach(function(_ref) {
          var name = _ref.name, _ref$options = _ref.options, options2 = _ref$options === void 0 ? {} : _ref$options, effect4 = _ref.effect;
          if (typeof effect4 === "function") {
            var cleanupFn = effect4({
              state,
              name,
              instance,
              options: options2
            });
            var noopFn = function noopFn2() {
            };
            effectCleanupFns.push(cleanupFn || noopFn);
          }
        });
      }
      function cleanupModifierEffects() {
        effectCleanupFns.forEach(function(fn2) {
          return fn2();
        });
        effectCleanupFns = [];
      }
      return instance;
    };
  }

  // node_modules/@popperjs/core/lib/popper.js
  var defaultModifiers = [eventListeners_default, popperOffsets_default, computeStyles_default, applyStyles_default, offset_default, flip_default, preventOverflow_default, arrow_default, hide_default];
  var createPopper = /* @__PURE__ */ popperGenerator({
    defaultModifiers
  });

  // node_modules/preline/src/plugins/dropdown/index.ts
  var HSDropdown = class extends HSBasePlugin {
    constructor(el, options, events) {
      super(el, options, events);
      this.toggle = this.el.querySelector(":scope > .hs-dropdown-toggle") || this.el.children[0];
      this.menu = this.el.querySelector(":scope > .hs-dropdown-menu");
      this.eventMode = getClassProperty(this.el, "--trigger", "click");
      this.closeMode = getClassProperty(this.el, "--auto-close", "true");
      this.animationInProcess = false;
      if (this.toggle && this.menu)
        this.init();
    }
    init() {
      this.createCollection(window.$hsDropdownCollection, this);
      if (this.toggle.disabled)
        return false;
      this.toggle.addEventListener("click", () => this.onClickHandler());
      if (!isIOS() && !isIpadOS()) {
        this.el.addEventListener("mouseenter", () => this.onMouseEnterHandler());
        this.el.addEventListener("mouseleave", () => this.onMouseLeaveHandler());
      }
    }
    resizeHandler() {
      this.eventMode = getClassProperty(this.el, "--trigger", "click");
    }
    onClickHandler() {
      if (this.el.classList.contains("open") && !this.menu.classList.contains("hidden")) {
        this.close();
      } else {
        this.open();
      }
    }
    onMouseEnterHandler() {
      if (this.eventMode !== "hover")
        return false;
      if (this.el._popper)
        this.forceClearState();
      if (!this.el.classList.contains("open") && this.menu.classList.contains("hidden")) {
        this.open();
      }
    }
    onMouseLeaveHandler() {
      if (this.eventMode !== "hover")
        return false;
      if (this.el.classList.contains("open") && !this.menu.classList.contains("hidden")) {
        this.close();
      }
    }
    destroyPopper() {
      this.menu.classList.remove("block");
      this.menu.classList.add("hidden");
      this.menu.style.inset = null;
      this.menu.style.position = null;
      if (this.el && this.el._popper)
        this.el._popper.destroy();
      this.animationInProcess = false;
    }
    absoluteStrategyModifiers() {
      return [
        {
          name: "applyStyles",
          fn: (data) => {
            const strategy = (window.getComputedStyle(this.el).getPropertyValue("--strategy") || "absolute").replace(" ", "");
            const adaptive = (window.getComputedStyle(this.el).getPropertyValue("--adaptive") || "adaptive").replace(" ", "");
            data.state.elements.popper.style.position = strategy;
            data.state.elements.popper.style.transform = adaptive === "adaptive" ? data.state.styles.popper.transform : null;
            data.state.elements.popper.style.top = null;
            data.state.elements.popper.style.bottom = null;
            data.state.elements.popper.style.left = null;
            data.state.elements.popper.style.right = null;
            data.state.elements.popper.style.margin = 0;
          }
        },
        {
          name: "computeStyles",
          options: {
            adaptive: false
          }
        }
      ];
    }
    // Public methods
    open() {
      if (this.el.classList.contains("open"))
        return false;
      if (this.animationInProcess)
        return false;
      this.animationInProcess = true;
      const placement = (window.getComputedStyle(this.el).getPropertyValue("--placement") || "").replace(" ", "");
      const flip2 = (window.getComputedStyle(this.el).getPropertyValue("--flip") || "true").replace(" ", "");
      const strategy = (window.getComputedStyle(this.el).getPropertyValue("--strategy") || "fixed").replace(" ", "");
      const offset2 = parseInt(
        (window.getComputedStyle(this.el).getPropertyValue("--offset") || "10").replace(" ", "")
      );
      if (strategy !== "static") {
        this.el._popper = createPopper(this.el, this.menu, {
          placement: POSITIONS[placement] || "bottom-start",
          strategy,
          modifiers: [
            ...strategy !== "fixed" ? this.absoluteStrategyModifiers() : [],
            {
              name: "flip",
              enabled: flip2 === "true"
            },
            {
              name: "offset",
              options: {
                offset: [0, offset2]
              }
            }
          ]
        });
      }
      this.menu.style.margin = null;
      this.menu.classList.remove("hidden");
      this.menu.classList.add("block");
      setTimeout(() => {
        this.el.classList.add("open");
        this.animationInProcess = false;
      });
      this.fireEvent("open", this.el);
      dispatch("open.hs.dropdown", this.el, this.el);
    }
    close(isAnimated = true) {
      if (this.animationInProcess || !this.el.classList.contains("open"))
        return false;
      this.animationInProcess = true;
      if (isAnimated) {
        const el = this.el.querySelector("[data-hs-dropdown-transition]") || this.menu;
        afterTransition(el, () => this.destroyPopper());
      } else
        this.destroyPopper();
      this.menu.style.margin = null;
      this.el.classList.remove("open");
      this.fireEvent("close", this.el);
      dispatch("close.hs.dropdown", this.el, this.el);
    }
    forceClearState() {
      this.destroyPopper();
      this.menu.style.margin = null;
      this.el.classList.remove("open");
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsDropdownCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element.el : null;
    }
    static autoInit() {
      if (!window.$hsDropdownCollection)
        window.$hsDropdownCollection = [];
      document.querySelectorAll(".hs-dropdown:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsDropdownCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSDropdown(el);
      });
      if (window.$hsDropdownCollection) {
        document.addEventListener(
          "keydown",
          (evt) => HSDropdown.accessibility(evt)
        );
        window.addEventListener("click", (evt) => {
          const evtTarget = evt.target;
          HSDropdown.closeCurrentlyOpened(evtTarget);
        });
        let prevWidth = window.innerWidth;
        window.addEventListener("resize", () => {
          if (window.innerWidth !== prevWidth) {
            prevWidth = innerWidth;
            HSDropdown.closeCurrentlyOpened(null, false);
          }
        });
      }
    }
    static open(target) {
      const elInCollection = window.$hsDropdownCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.menu.classList.contains("hidden"))
        elInCollection.element.open();
    }
    static close(target) {
      const elInCollection = window.$hsDropdownCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && !elInCollection.element.menu.classList.contains("hidden")) {
        elInCollection.element.close();
      }
    }
    // Accessibility methods
    static accessibility(evt) {
      this.history = menuSearchHistory;
      const target = window.$hsDropdownCollection.find(
        (el) => el.element.el.classList.contains("open")
      );
      if (target && (DROPDOWN_ACCESSIBILITY_KEY_SET.includes(evt.code) || evt.code.length === 4 && evt.code[evt.code.length - 1].match(/^[A-Z]*$/)) && !evt.metaKey && !target.element.menu.querySelector("input:focus")) {
        switch (evt.code) {
          case "Escape":
            if (!target.element.menu.querySelector(".hs-select.active")) {
              evt.preventDefault();
              this.onEscape(evt);
            }
            break;
          case "Enter":
            if (!target.element.menu.querySelector(".hs-select button:focus") && !target.element.menu.querySelector(".hs-collapse-toggle:focus")) {
              this.onEnter(evt);
            }
            break;
          case "ArrowUp":
            evt.preventDefault();
            this.onArrow();
            break;
          case "ArrowDown":
            evt.preventDefault();
            this.onArrow(false);
            break;
          case "Home":
            evt.preventDefault();
            this.onStartEnd();
            break;
          case "End":
            evt.preventDefault();
            this.onStartEnd(false);
            break;
          default:
            evt.preventDefault();
            this.onFirstLetter(evt.key);
            break;
        }
      }
    }
    static onEscape(evt) {
      const dropdown = evt.target.closest(".hs-dropdown.open");
      if (window.$hsDropdownCollection.find((el) => el.element.el === dropdown)) {
        const target = window.$hsDropdownCollection.find(
          (el) => el.element.el === dropdown
        );
        if (target) {
          target.element.close();
          target.element.toggle.focus();
        }
      } else {
        this.closeCurrentlyOpened();
      }
    }
    static onEnter(evt) {
      const dropdown = evt.target.parentElement;
      if (window.$hsDropdownCollection.find((el) => el.element.el === dropdown)) {
        evt.preventDefault();
        const target = window.$hsDropdownCollection.find(
          (el) => el.element.el === dropdown
        );
        if (target)
          target.element.open();
      }
    }
    static onArrow(isArrowUp = true) {
      const target = window.$hsDropdownCollection.find(
        (el) => el.element.el.classList.contains("open")
      );
      if (target) {
        const menu = target.element.menu;
        if (!menu)
          return false;
        const preparedLinks = isArrowUp ? Array.from(
          menu.querySelectorAll(
            "a:not([hidden]), .hs-dropdown > button:not([hidden])"
          )
        ).reverse() : Array.from(
          menu.querySelectorAll(
            "a:not([hidden]), .hs-dropdown > button:not([hidden])"
          )
        );
        const links = preparedLinks.filter(
          (el) => !el.classList.contains("disabled")
        );
        const current = menu.querySelector("a:focus, button:focus");
        let currentInd = links.findIndex((el) => el === current);
        if (currentInd + 1 < links.length) {
          currentInd++;
        }
        links[currentInd].focus();
      }
    }
    static onStartEnd(isStart = true) {
      const target = window.$hsDropdownCollection.find(
        (el) => el.element.el.classList.contains("open")
      );
      if (target) {
        const menu = target.element.menu;
        if (!menu)
          return false;
        const preparedLinks = isStart ? Array.from(menu.querySelectorAll("a")) : Array.from(menu.querySelectorAll("a")).reverse();
        const links = preparedLinks.filter(
          (el) => !el.classList.contains("disabled")
        );
        if (links.length) {
          links[0].focus();
        }
      }
    }
    static onFirstLetter(code) {
      const target = window.$hsDropdownCollection.find(
        (el) => el.element.el.classList.contains("open")
      );
      if (target) {
        const menu = target.element.menu;
        if (!menu)
          return false;
        const links = Array.from(menu.querySelectorAll("a"));
        const getCurrentInd = () => links.findIndex(
          (el, i) => el.innerText.toLowerCase().charAt(0) === code.toLowerCase() && this.history.existsInHistory(i)
        );
        let currentInd = getCurrentInd();
        if (currentInd === -1) {
          this.history.clearHistory();
          currentInd = getCurrentInd();
        }
        if (currentInd !== -1) {
          links[currentInd].focus();
          this.history.addHistory(currentInd);
        }
      }
    }
    static closeCurrentlyOpened(evtTarget = null, isAnimated = true) {
      const parent = evtTarget && evtTarget.closest(".hs-dropdown") && evtTarget.closest(".hs-dropdown").parentElement.closest(".hs-dropdown") ? evtTarget.closest(".hs-dropdown").parentElement.closest(".hs-dropdown") : null;
      let currentlyOpened = parent ? window.$hsDropdownCollection.filter(
        (el) => el.element.el.classList.contains("open") && el.element.menu.closest(".hs-dropdown").parentElement.closest(".hs-dropdown") === parent
      ) : window.$hsDropdownCollection.filter(
        (el) => el.element.el.classList.contains("open")
      );
      if (evtTarget && evtTarget.closest(".hs-dropdown") && getClassPropertyAlt(evtTarget.closest(".hs-dropdown"), "--auto-close") === "inside") {
        currentlyOpened = currentlyOpened.filter(
          (el) => el.element.el !== evtTarget.closest(".hs-dropdown")
        );
      }
      if (currentlyOpened) {
        currentlyOpened.forEach((el) => {
          if (el.element.closeMode === "false" || el.element.closeMode === "outside")
            return false;
          el.element.close(isAnimated);
        });
      }
    }
    // Backward compatibility
    static on(evt, target, cb) {
      const elInCollection = window.$hsDropdownCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection)
        elInCollection.element.events[evt] = cb;
    }
  };
  window.addEventListener("load", () => {
    HSDropdown.autoInit();
  });
  window.addEventListener("resize", () => {
    if (!window.$hsDropdownCollection)
      window.$hsDropdownCollection = [];
    window.$hsDropdownCollection.forEach((el) => el.element.resizeHandler());
  });
  if (typeof window !== "undefined") {
    window.HSDropdown = HSDropdown;
  }
  var dropdown_default = HSDropdown;

  // node_modules/preline/src/plugins/input-number/index.ts
  var HSInputNumber = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      this.input = this.el.querySelector("[data-hs-input-number-input]") || null;
      this.increment = this.el.querySelector("[data-hs-input-number-increment]") || null;
      this.decrement = this.el.querySelector("[data-hs-input-number-decrement]") || null;
      if (this.input) {
        this.inputValue = !isNaN(parseInt(this.input.value)) ? parseInt(this.input.value) : 0;
      }
      const data = this.el.dataset.hsInputNumber;
      const dataOptions = data ? JSON.parse(data) : { step: 1 };
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.minInputValue = "min" in concatOptions ? concatOptions.min : 0;
      this.maxInputValue = "max" in concatOptions ? concatOptions.max : null;
      this.step = "step" in concatOptions && concatOptions.step > 0 ? concatOptions.step : 1;
      this.init();
    }
    init() {
      this.createCollection(window.$hsInputNumberCollection, this);
      if (this.input && this.increment)
        this.build();
    }
    build() {
      if (this.input)
        this.buildInput();
      if (this.increment)
        this.buildIncrement();
      if (this.decrement)
        this.buildDecrement();
      if (this.inputValue <= 0 && this.minInputValue === 0) {
        this.inputValue = 0;
        this.input.value = "0";
      }
      if (this.inputValue <= 0 || this.minInputValue < 0)
        this.changeValue();
      if (this.input.hasAttribute("disabled"))
        this.disableButtons();
    }
    buildInput() {
      this.input.addEventListener("input", () => this.changeValue());
    }
    buildIncrement() {
      this.increment.addEventListener("click", () => {
        this.changeValue("increment");
      });
    }
    buildDecrement() {
      this.decrement.addEventListener("click", () => {
        this.changeValue("decrement");
      });
    }
    changeValue(event = "none") {
      var _a, _b;
      const payload = { inputValue: this.inputValue };
      const minInputValue = (_a = this.minInputValue) != null ? _a : Number.MIN_SAFE_INTEGER;
      const maxInputValue = (_b = this.maxInputValue) != null ? _b : Number.MAX_SAFE_INTEGER;
      this.inputValue = isNaN(this.inputValue) ? 0 : this.inputValue;
      switch (event) {
        case "increment":
          const incrementedResult = this.inputValue + this.step;
          this.inputValue = incrementedResult >= minInputValue && incrementedResult <= maxInputValue ? incrementedResult : maxInputValue;
          this.input.value = this.inputValue.toString();
          break;
        case "decrement":
          const decrementedResult = this.inputValue - this.step;
          this.inputValue = decrementedResult >= minInputValue && decrementedResult <= maxInputValue ? decrementedResult : minInputValue;
          this.input.value = this.inputValue.toString();
          break;
        default:
          const defaultResult = isNaN(parseInt(this.input.value)) ? 0 : parseInt(this.input.value);
          this.inputValue = defaultResult >= maxInputValue ? maxInputValue : defaultResult <= minInputValue ? minInputValue : defaultResult;
          if (this.inputValue <= minInputValue)
            this.input.value = this.inputValue.toString();
          break;
      }
      payload.inputValue = this.inputValue;
      if (this.inputValue === minInputValue) {
        this.el.classList.add("disabled");
        if (this.decrement)
          this.disableButtons("decrement");
      } else {
        this.el.classList.remove("disabled");
        if (this.decrement)
          this.enableButtons("decrement");
      }
      if (this.inputValue === maxInputValue) {
        this.el.classList.add("disabled");
        if (this.increment)
          this.disableButtons("increment");
      } else {
        this.el.classList.remove("disabled");
        if (this.increment)
          this.enableButtons("increment");
      }
      this.fireEvent("change", payload);
      dispatch("change.hs.inputNumber", this.el, payload);
    }
    disableButtons(mode = "all") {
      if (mode === "all") {
        if (this.increment.tagName === "BUTTON" || this.increment.tagName === "INPUT")
          this.increment.setAttribute("disabled", "disabled");
        if (this.decrement.tagName === "BUTTON" || this.decrement.tagName === "INPUT")
          this.decrement.setAttribute("disabled", "disabled");
      } else if (mode === "increment") {
        if (this.increment.tagName === "BUTTON" || this.increment.tagName === "INPUT")
          this.increment.setAttribute("disabled", "disabled");
      } else if (mode === "decrement") {
        if (this.decrement.tagName === "BUTTON" || this.decrement.tagName === "INPUT")
          this.decrement.setAttribute("disabled", "disabled");
      }
    }
    enableButtons(mode = "all") {
      if (mode === "all") {
        if (this.increment.tagName === "BUTTON" || this.increment.tagName === "INPUT")
          this.increment.removeAttribute("disabled");
        if (this.decrement.tagName === "BUTTON" || this.decrement.tagName === "INPUT")
          this.decrement.removeAttribute("disabled");
      } else if (mode === "increment") {
        if (this.increment.tagName === "BUTTON" || this.increment.tagName === "INPUT")
          this.increment.removeAttribute("disabled");
      } else if (mode === "decrement") {
        if (this.decrement.tagName === "BUTTON" || this.decrement.tagName === "INPUT")
          this.decrement.removeAttribute("disabled");
      }
    }
    // Global method
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsInputNumberCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsInputNumberCollection)
        window.$hsInputNumberCollection = [];
      document.querySelectorAll("[data-hs-input-number]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsInputNumberCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSInputNumber(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSInputNumber.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSInputNumber = HSInputNumber;
  }
  var input_number_default = HSInputNumber;

  // node_modules/preline/src/plugins/overlay/index.ts
  var HSOverlay = class extends HSBasePlugin {
    constructor(el, options, events) {
      var _a, _b;
      super(el, options, events);
      const data = el.getAttribute("data-hs-overlay-options");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.hiddenClass = (concatOptions == null ? void 0 : concatOptions.hiddenClass) || "hidden";
      this.isClosePrev = (_a = concatOptions == null ? void 0 : concatOptions.isClosePrev) != null ? _a : true;
      this.backdropClasses = (_b = concatOptions == null ? void 0 : concatOptions.backdropClasses) != null ? _b : "transition duration fixed inset-0 bg-gray-900 bg-opacity-50 dark:bg-opacity-80 hs-overlay-backdrop";
      this.openNextOverlay = false;
      this.autoHide = null;
      this.overlayId = this.el.getAttribute("data-hs-overlay");
      this.overlay = document.querySelector(this.overlayId);
      if (this.overlay) {
        this.isCloseWhenClickInside = stringToBoolean(
          getClassProperty(this.overlay, "--close-when-click-inside", "false") || "false"
        );
        this.isTabAccessibilityLimited = stringToBoolean(
          getClassProperty(this.overlay, "--tab-accessibility-limited", "true") || "true"
        );
        this.isLayoutAffect = stringToBoolean(
          getClassProperty(this.overlay, "--is-layout-affect", "false") || "false"
        );
        this.hasAutofocus = stringToBoolean(
          getClassProperty(this.overlay, "--has-autofocus", "true") || "true"
        );
        this.hasAbilityToCloseOnBackdropClick = stringToBoolean(
          this.overlay.getAttribute("data-hs-overlay-keyboard") || "true"
        );
        const autoCloseBreakpoint = getClassProperty(
          this.overlay,
          "--auto-close"
        );
        this.autoClose = !isNaN(+autoCloseBreakpoint) && isFinite(+autoCloseBreakpoint) ? +autoCloseBreakpoint : BREAKPOINTS[autoCloseBreakpoint] || null;
        const openedBreakpoint = getClassProperty(this.overlay, "--opened");
        this.openedBreakpoint = (!isNaN(+openedBreakpoint) && isFinite(+openedBreakpoint) ? +openedBreakpoint : BREAKPOINTS[openedBreakpoint]) || null;
      }
      if (this.overlay)
        this.init();
    }
    init() {
      this.createCollection(window.$hsOverlayCollection, this);
      if (this.isLayoutAffect && this.openedBreakpoint) {
        const instance = HSOverlay.getInstance(this.el, true);
        HSOverlay.setOpened(
          this.openedBreakpoint,
          instance
        );
      }
      this.el.addEventListener("click", () => {
        if (this.overlay.classList.contains("opened"))
          this.close();
        else
          this.open();
      });
      this.overlay.addEventListener("click", (evt) => {
        if (evt.target.id && `#${evt.target.id}` === this.overlayId && this.isCloseWhenClickInside && this.hasAbilityToCloseOnBackdropClick) {
          this.close();
        }
      });
    }
    hideAuto() {
      const time = parseInt(getClassProperty(this.overlay, "--auto-hide", "0"));
      if (time) {
        this.autoHide = setTimeout(() => {
          this.close();
        }, time);
      }
    }
    checkTimer() {
      if (this.autoHide) {
        clearTimeout(this.autoHide);
        this.autoHide = null;
      }
    }
    buildBackdrop() {
      const overlayClasses = this.overlay.classList.value.split(" ");
      const overlayZIndex = parseInt(
        window.getComputedStyle(this.overlay).getPropertyValue("z-index")
      );
      const backdropId = this.overlay.getAttribute("data-hs-overlay-backdrop-container") || false;
      let backdrop = document.createElement("div");
      let backdropClasses = this.backdropClasses;
      const closeOnBackdrop = getClassProperty(this.overlay, "--overlay-backdrop", "true") !== "static";
      const disableBackdrop = getClassProperty(this.overlay, "--overlay-backdrop", "true") === "false";
      backdrop.id = `${this.overlay.id}-backdrop`;
      if ("style" in backdrop)
        backdrop.style.zIndex = `${overlayZIndex - 1}`;
      for (const value of overlayClasses) {
        if (value.startsWith("hs-overlay-backdrop-open:") || value.includes(":hs-overlay-backdrop-open:")) {
          backdropClasses += ` ${value}`;
        }
      }
      if (disableBackdrop)
        return;
      if (backdropId) {
        backdrop = document.querySelector(backdropId).cloneNode(true);
        backdrop.classList.remove("hidden");
        backdropClasses = `${backdrop.classList.toString()}`;
        backdrop.classList.value = "";
      }
      if (closeOnBackdrop) {
        backdrop.addEventListener(
          "click",
          () => this.close(),
          true
        );
      }
      backdrop.setAttribute(
        "data-hs-overlay-backdrop-template",
        ""
      );
      document.body.appendChild(backdrop);
      setTimeout(() => {
        backdrop.classList.value = backdropClasses;
      });
    }
    destroyBackdrop() {
      const backdrop = document.querySelector(
        `#${this.overlay.id}-backdrop`
      );
      if (!backdrop)
        return;
      if (this.openNextOverlay) {
        backdrop.style.transitionDuration = `${parseFloat(
          window.getComputedStyle(backdrop).transitionDuration.replace(/[^\d.-]/g, "")
        ) * 1.8}s`;
      }
      backdrop.classList.add("opacity-0");
      afterTransition(backdrop, () => {
        backdrop.remove();
      });
    }
    focusElement() {
      const input = this.overlay.querySelector("[autofocus]");
      if (!input)
        return false;
      else
        input.focus();
    }
    // Public methods
    open() {
      if (!this.overlay)
        return false;
      const currentlyOpened = window.$hsOverlayCollection.find(
        (el) => el.element.overlay === document.querySelector(".hs-overlay.open") && !el.element.isLayoutAffect
      );
      const disabledScroll = getClassProperty(this.overlay, "--body-scroll", "false") !== "true";
      if (this.isClosePrev && currentlyOpened) {
        this.openNextOverlay = true;
        return currentlyOpened.element.close().then(() => {
          this.open();
          this.openNextOverlay = false;
        });
      }
      if (disabledScroll) {
        document.body.style.overflow = "hidden";
      }
      this.buildBackdrop();
      this.checkTimer();
      this.hideAuto();
      this.overlay.classList.remove(this.hiddenClass);
      this.overlay.setAttribute("aria-overlay", "true");
      this.overlay.setAttribute("tabindex", "-1");
      setTimeout(() => {
        if (this.overlay.classList.contains("opened"))
          return false;
        this.overlay.classList.add("open", "opened");
        if (this.isLayoutAffect)
          document.body.classList.add("hs-overlay-body-open");
        this.fireEvent("open", this.el);
        dispatch("open.hs.overlay", this.el, this.el);
        if (this.hasAutofocus)
          this.focusElement();
      }, 50);
    }
    close(forceClose = false) {
      if (this.isLayoutAffect)
        document.body.classList.remove("hs-overlay-body-open");
      const closeFn = (cb) => {
        if (this.overlay.classList.contains("open"))
          return false;
        this.overlay.classList.add(this.hiddenClass);
        this.destroyBackdrop();
        this.fireEvent("close", this.el);
        dispatch("close.hs.overlay", this.el, this.el);
        if (!document.querySelector(".hs-overlay.opened"))
          document.body.style.overflow = "";
        cb(this.overlay);
      };
      return new Promise((resolve) => {
        if (!this.overlay)
          return false;
        this.overlay.classList.remove("open", "opened");
        this.overlay.removeAttribute("aria-overlay");
        this.overlay.removeAttribute("tabindex");
        if (forceClose)
          closeFn(resolve);
        else
          afterTransition(this.overlay, () => {
            closeFn(resolve);
          });
      });
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsOverlayCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target) || el.element.overlay === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element.el : null;
    }
    static autoInit() {
      if (!window.$hsOverlayCollection)
        window.$hsOverlayCollection = [];
      document.querySelectorAll("[data-hs-overlay]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsOverlayCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSOverlay(el);
      });
      if (window.$hsOverlayCollection) {
        document.addEventListener(
          "keydown",
          (evt) => HSOverlay.accessibility(evt)
        );
      }
    }
    static open(target) {
      const elInCollection = window.$hsOverlayCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target) || el.element.overlay === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.overlay.classList.contains(
        elInCollection.element.hiddenClass
      ))
        elInCollection.element.open();
    }
    static close(target) {
      const elInCollection = window.$hsOverlayCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target) || el.element.overlay === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && !elInCollection.element.overlay.classList.contains(
        elInCollection.element.hiddenClass
      ))
        elInCollection.element.close();
    }
    static setOpened(breakpoint, el) {
      if (document.body.clientWidth >= breakpoint) {
        document.body.classList.add("hs-overlay-body-open");
        el.element.overlay.classList.add("opened");
      } else
        el.element.close(true);
    }
    // Accessibility methods
    static accessibility(evt) {
      var _a, _b;
      const targets = window.$hsOverlayCollection.filter(
        (el) => el.element.overlay.classList.contains("open")
      );
      const target = targets[targets.length - 1];
      const focusableElements = (_b = (_a = target == null ? void 0 : target.element) == null ? void 0 : _a.overlay) == null ? void 0 : _b.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
      );
      const notHiddenFocusableElements = [];
      if (focusableElements == null ? void 0 : focusableElements.length)
        focusableElements.forEach((el) => {
          if (!isParentOrElementHidden(el))
            notHiddenFocusableElements.push(el);
        });
      const basicCheck = target && !evt.metaKey;
      if (basicCheck && !target.element.isTabAccessibilityLimited && evt.code === "Tab")
        return false;
      if (basicCheck && notHiddenFocusableElements.length && evt.code === "Tab") {
        evt.preventDefault();
        this.onTab(target, notHiddenFocusableElements);
      }
      if (basicCheck && evt.code === "Escape") {
        evt.preventDefault();
        this.onEscape(target);
      }
    }
    static onEscape(target) {
      if (target && target.element.hasAbilityToCloseOnBackdropClick)
        target.element.close();
    }
    static onTab(target, focusableElements) {
      if (!focusableElements.length)
        return false;
      const focused = target.element.overlay.querySelector(":focus");
      const focusedIndex = Array.from(focusableElements).indexOf(
        focused
      );
      if (focusedIndex > -1) {
        const nextIndex = (focusedIndex + 1) % focusableElements.length;
        focusableElements[nextIndex].focus();
      } else {
        focusableElements[0].focus();
      }
    }
    // Backward compatibility
    static on(evt, target, cb) {
      const elInCollection = window.$hsOverlayCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target) || el.element.overlay === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection)
        elInCollection.element.events[evt] = cb;
    }
  };
  var autoCloseResizeFn = () => {
    if (!window.$hsOverlayCollection.length || !window.$hsOverlayCollection.find((el) => el.element.autoClose))
      return false;
    const overlays = window.$hsOverlayCollection.filter(
      (el) => el.element.autoClose
    );
    overlays.forEach((overlay) => {
      if (document.body.clientWidth >= overlay.element.autoClose)
        overlay.element.close(true);
    });
  };
  var setOpenedResizeFn = () => {
    if (!window.$hsOverlayCollection.length || !window.$hsOverlayCollection.find((el) => el.element.openedBreakpoint))
      return false;
    const overlays = window.$hsOverlayCollection.filter(
      (el) => el.element.openedBreakpoint
    );
    overlays.forEach((overlay) => {
      HSOverlay.setOpened(overlay.element.openedBreakpoint, overlay);
    });
  };
  window.addEventListener("load", () => {
    HSOverlay.autoInit();
  });
  window.addEventListener("resize", () => {
    autoCloseResizeFn();
    setOpenedResizeFn();
  });
  if (typeof window !== "undefined") {
    window.HSOverlay = HSOverlay;
  }
  var overlay_default = HSOverlay;

  // node_modules/preline/src/plugins/pin-input/index.ts
  var HSPinInput = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-pin-input");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.items = this.el.querySelectorAll("[data-hs-pin-input-item]");
      this.currentItem = null;
      this.currentValue = new Array(this.items.length).fill("");
      this.placeholders = [];
      this.availableCharsRE = new RegExp(
        (concatOptions == null ? void 0 : concatOptions.availableCharsRE) || "^[a-zA-Z0-9]+$"
      );
      this.init();
    }
    init() {
      this.createCollection(window.$hsPinInputCollection, this);
      if (this.items.length)
        this.build();
    }
    build() {
      this.buildInputItems();
    }
    buildInputItems() {
      this.items.forEach((el, index) => {
        this.placeholders.push(el.getAttribute("placeholder") || "");
        if (el.hasAttribute("autofocus"))
          this.onFocusIn(index);
        el.addEventListener("input", (evt) => this.onInput(evt, index));
        el.addEventListener("paste", (evt) => this.onPaste(evt));
        el.addEventListener("keydown", (evt) => this.onKeydown(evt, index));
        el.addEventListener("focusin", () => this.onFocusIn(index));
        el.addEventListener("focusout", () => this.onFocusOut(index));
      });
    }
    checkIfNumber(value) {
      return value.match(this.availableCharsRE);
    }
    autoFillAll(text) {
      Array.from(text).forEach((n, i) => {
        if (!(this == null ? void 0 : this.items[i]))
          return false;
        this.items[i].value = n;
        this.items[i].dispatchEvent(new Event("input", { bubbles: true }));
      });
    }
    setCurrentValue() {
      this.currentValue = Array.from(this.items).map(
        (el) => el.value
      );
    }
    toggleCompleted() {
      if (!this.currentValue.includes(""))
        this.el.classList.add("active");
      else
        this.el.classList.remove("active");
    }
    onInput(evt, index) {
      const originalValue = evt.target.value;
      this.currentItem = evt.target;
      this.currentItem.value = "";
      this.currentItem.value = originalValue[originalValue.length - 1];
      if (!this.checkIfNumber(this.currentItem.value)) {
        this.currentItem.value = this.currentValue[index] || "";
        return false;
      }
      this.setCurrentValue();
      if (this.currentItem.value) {
        if (index < this.items.length - 1)
          this.items[index + 1].focus();
        if (!this.currentValue.includes("")) {
          const payload = { currentValue: this.currentValue };
          this.fireEvent("completed", payload);
          dispatch("completed.hs.pinInput", this.el, payload);
        }
        this.toggleCompleted();
      } else {
        if (index > 0)
          this.items[index - 1].focus();
      }
    }
    onKeydown(evt, index) {
      if (evt.key === "Backspace" && index > 0) {
        if (this.items[index].value === "") {
          this.items[index - 1].value = "";
          this.items[index - 1].focus();
        } else {
          this.items[index].value = "";
        }
      }
      this.setCurrentValue();
      this.toggleCompleted();
    }
    onFocusIn(index) {
      this.items[index].setAttribute("placeholder", "");
    }
    onFocusOut(index) {
      this.items[index].setAttribute("placeholder", this.placeholders[index]);
    }
    onPaste(evt) {
      evt.preventDefault();
      this.items.forEach((el) => {
        if (document.activeElement === el)
          this.autoFillAll(evt.clipboardData.getData("text"));
      });
    }
    // Static method
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsPinInputCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsPinInputCollection)
        window.$hsPinInputCollection = [];
      document.querySelectorAll("[data-hs-pin-input]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsPinInputCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSPinInput(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSPinInput.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSPinInput = HSPinInput;
  }
  var pin_input_default = HSPinInput;

  // node_modules/preline/src/plugins/remove-element/index.ts
  var HSRemoveElement = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-remove-element-options");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.removeTargetId = this.el.getAttribute("data-hs-remove-element");
      this.removeTarget = document.querySelector(this.removeTargetId);
      this.removeTargetAnimationClass = (concatOptions == null ? void 0 : concatOptions.removeTargetAnimationClass) || "hs-removing";
      if (this.removeTarget)
        this.init();
    }
    init() {
      this.createCollection(window.$hsRemoveElementCollection, this);
      this.el.addEventListener("click", () => this.remove());
    }
    remove() {
      if (!this.removeTarget)
        return false;
      this.removeTarget.classList.add(this.removeTargetAnimationClass);
      afterTransition(this.removeTarget, () => {
        this.removeTarget.remove();
      });
    }
    // Static method
    static autoInit() {
      if (!window.$hsRemoveElementCollection)
        window.$hsRemoveElementCollection = [];
      document.querySelectorAll("[data-hs-remove-element]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsRemoveElementCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSRemoveElement(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSRemoveElement.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSRemoveElement = HSRemoveElement;
  }
  var remove_element_default = HSRemoveElement;

  // node_modules/preline/src/plugins/search-by-json/index.ts
  var HSSearchByJson = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-search-by-json");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.jsonUrl = concatOptions.jsonUrl;
      this.minChars = concatOptions.minChars || 3;
      this.dropdownTemplate = concatOptions.dropdownTemplate || "<div></div>";
      this.dropdownClasses = concatOptions.dropdownClasses || "absolute top-full z-[1] w-full bg-white border border-gray-200 rounded-md hidden mt-2";
      this.dropdownItemTemplate = concatOptions.dropdownItemTemplate || "<div></div>";
      this.dropdownItemTemplatesByType = concatOptions.dropdownItemTemplatesByType || null;
      this.dropdownItemClasses = concatOptions.dropdownItemClasses || "py-2 px-4 w-full cursor-pointer text-sm hover:bg-gray-300 hover:text-black";
      this.highlightedTextTagName = concatOptions.highlightedTextTagName || "u";
      this.highlightedTextClasses = concatOptions.highlightedTextClasses || "bg-green-200";
      if (this.jsonUrl)
        this.fetchData().then(() => this.init());
    }
    init() {
      this.createCollection(window.$hsSearchByJsonCollection, this);
      this.buildDropdown();
      this.el.addEventListener(
        "input",
        debounce((evt) => {
          this.val = evt.target.value;
          if (this.val.length > this.minChars) {
            this.searchData(this.val);
          } else {
            this.result = [];
          }
          if (this.result.length) {
            this.dropdown.classList.remove("hidden");
          } else {
            this.dropdown.classList.add("hidden");
          }
          this.buildItems();
        })
      );
    }
    async fetchData() {
      await fetch(this.jsonUrl).then((data) => data.json()).then((data) => this.json = data);
    }
    searchData(val) {
      this.result = this.json.filter((el) => {
        const value = val.toLowerCase();
        const title = el.title.toLowerCase();
        const description = el.description.toLowerCase();
        return title.includes(value) || description.includes(value);
      });
    }
    buildDropdown() {
      this.dropdown = htmlToElement(this.dropdownTemplate);
      if (this.dropdownClasses)
        classToClassList(this.dropdownClasses, this.dropdown);
      this.el.after(this.dropdown);
    }
    buildItems() {
      this.dropdown.innerHTML = "";
      this.result.forEach((el) => {
        const link = htmlToElement(
          `<a class="block" href="${el.url}" target="_blank"></a>`
        );
        link.append(this.itemTemplate(el));
        this.dropdown.append(link);
      });
    }
    itemTemplate(el) {
      const re = new RegExp(this.val, "gi");
      const newTitle = el.title.replace(
        re,
        `<${this.highlightedTextTagName} class="inline-block ${this.highlightedTextClasses}">${this.val}</${this.highlightedTextTagName}>`
      );
      const newDescription = el.description.replace(
        re,
        `<${this.highlightedTextTagName} class="inline-block ${this.highlightedTextClasses}">${this.val}</${this.highlightedTextTagName}>`
      );
      const templateByType = this.dropdownItemTemplatesByType ? this.dropdownItemTemplatesByType.find(
        (template2) => template2.type === el.type
      ) : null;
      const template = templateByType ? htmlToElement(templateByType.markup) : htmlToElement(this.dropdownItemTemplate);
      if (this.dropdownItemClasses)
        classToClassList(this.dropdownItemClasses, template);
      const title = template.querySelector("[data-title]");
      if (title)
        title.append(htmlToElement(`<span>${newTitle}</span>`));
      else
        template.append(htmlToElement(`<span>${newTitle}</span>`));
      const description = template.querySelector("[data-description]");
      if (description)
        description.append(htmlToElement(`<span>${newDescription}</span>`));
      else if (!templateByType) {
        const br = htmlToElement("<br>");
        template.append(br);
        template.append(htmlToElement(`<span>${newDescription}</span>`));
      }
      return template;
    }
    // Static method
    static getInstance(target) {
      const elInCollection = window.$hsSearchByJsonCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsSearchByJsonCollection)
        window.$hsSearchByJsonCollection = [];
      document.querySelectorAll("[data-hs-search-by-json]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsSearchByJsonCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSSearchByJson(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSSearchByJson.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSSearchByJson = HSSearchByJson;
  }

  // node_modules/preline/src/plugins/scrollspy/index.ts
  var HSScrollspy = class extends HSBasePlugin {
    constructor(el, options = {}) {
      super(el, options);
      this.activeSection = null;
      this.contentId = this.el.getAttribute("data-hs-scrollspy");
      this.content = document.querySelector(this.contentId);
      this.links = this.el.querySelectorAll("[href]");
      this.sections = [];
      this.scrollableId = this.el.getAttribute(
        "data-hs-scrollspy-scrollable-parent"
      );
      this.scrollable = this.scrollableId ? document.querySelector(this.scrollableId) : document;
      this.init();
    }
    init() {
      this.createCollection(window.$hsScrollspyCollection, this);
      this.links.forEach((el) => {
        this.sections.push(
          this.scrollable.querySelector(el.getAttribute("href"))
        );
      });
      Array.from(this.sections).forEach((section) => {
        if (!section.getAttribute("id"))
          return false;
        this.scrollable.addEventListener(
          "scroll",
          (evt) => this.update(evt, section)
        );
      });
      this.links.forEach((el) => {
        el.addEventListener("click", (evt) => {
          evt.preventDefault();
          if (el.getAttribute("href") === "javascript:;")
            return false;
          this.scrollTo(el);
        });
      });
    }
    update(evt, section) {
      const globalOffset = parseInt(
        getClassProperty(this.el, "--scrollspy-offset", "0")
      );
      const userOffset = parseInt(getClassProperty(section, "--scrollspy-offset")) || globalOffset;
      const scrollableParentOffset = evt.target === document ? 0 : parseInt(
        String(evt.target.getBoundingClientRect().top)
      );
      const topOffset = parseInt(String(section.getBoundingClientRect().top)) - userOffset - scrollableParentOffset;
      const height = section.offsetHeight;
      if (topOffset <= 0 && topOffset + height > 0) {
        if (this.activeSection === section)
          return false;
        this.links.forEach((el) => {
          el.classList.remove("active");
        });
        const current = this.el.querySelector(
          `[href="#${section.getAttribute("id")}"]`
        );
        if (current) {
          current.classList.add("active");
          const group = current.closest("[data-hs-scrollspy-group]");
          if (group) {
            const parentLink = group.querySelector("[href]");
            if (parentLink)
              parentLink.classList.add("active");
          }
        }
        this.activeSection = section;
      }
    }
    scrollTo(link) {
      const targetId = link.getAttribute("href");
      const target = document.querySelector(targetId);
      const globalOffset = parseInt(
        getClassProperty(this.el, "--scrollspy-offset", "0")
      );
      const userOffset = parseInt(getClassProperty(target, "--scrollspy-offset")) || globalOffset;
      const scrollableParentOffset = this.scrollable === document ? 0 : this.scrollable.offsetTop;
      const topOffset = target.offsetTop - userOffset - scrollableParentOffset;
      const view = this.scrollable === document ? window : this.scrollable;
      const scrollFn = () => {
        window.history.replaceState(null, null, link.getAttribute("href"));
        if ("scrollTo" in view) {
          view.scrollTo({
            top: topOffset,
            left: 0,
            behavior: "smooth"
          });
        }
      };
      const beforeScroll = this.fireEvent("beforeScroll", this.el);
      dispatch("beforeScroll.hs.scrollspy", this.el, this.el);
      if (beforeScroll instanceof Promise)
        beforeScroll.then(() => scrollFn());
      else
        scrollFn();
    }
    // Static methods
    static getInstance(target, isInstance = false) {
      const elInCollection = window.$hsScrollspyCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element.el : null;
    }
    static autoInit() {
      if (!window.$hsScrollspyCollection)
        window.$hsScrollspyCollection = [];
      document.querySelectorAll("[data-hs-scrollspy]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsScrollspyCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSScrollspy(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSScrollspy.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSScrollspy = HSScrollspy;
  }
  var scrollspy_default = HSScrollspy;

  // node_modules/preline/src/plugins/select/index.ts
  var HSSelect = class extends HSBasePlugin {
    constructor(el, options) {
      var _a;
      super(el, options);
      const data = el.getAttribute("data-hs-select");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.value = (concatOptions == null ? void 0 : concatOptions.value) || this.el.value || null;
      this.placeholder = (concatOptions == null ? void 0 : concatOptions.placeholder) || "Select...";
      this.hasSearch = (concatOptions == null ? void 0 : concatOptions.hasSearch) || false;
      this.preventSearchFocus = (concatOptions == null ? void 0 : concatOptions.preventSearchFocus) || false;
      this.mode = (concatOptions == null ? void 0 : concatOptions.mode) || "default";
      this.viewport = typeof (concatOptions == null ? void 0 : concatOptions.viewport) !== "undefined" ? document.querySelector(concatOptions == null ? void 0 : concatOptions.viewport) : null;
      this.isOpened = Boolean(concatOptions == null ? void 0 : concatOptions.isOpened) || false;
      this.isMultiple = this.el.hasAttribute("multiple") || false;
      this.isDisabled = this.el.hasAttribute("disabled") || false;
      this.selectedItems = [];
      this.wrapperClasses = (concatOptions == null ? void 0 : concatOptions.wrapperClasses) || null;
      this.toggleTag = (concatOptions == null ? void 0 : concatOptions.toggleTag) || null;
      this.toggleClasses = (concatOptions == null ? void 0 : concatOptions.toggleClasses) || null;
      this.toggleCountText = (concatOptions == null ? void 0 : concatOptions.toggleCountText) || null;
      this.toggleCountTextMinItems = (concatOptions == null ? void 0 : concatOptions.toggleCountTextMinItems) || 1;
      this.tagsItemTemplate = (concatOptions == null ? void 0 : concatOptions.tagsItemTemplate) || null;
      this.tagsItemClasses = (concatOptions == null ? void 0 : concatOptions.tagsItemClasses) || null;
      this.tagsInputClasses = (concatOptions == null ? void 0 : concatOptions.tagsInputClasses) || null;
      this.dropdownTag = (concatOptions == null ? void 0 : concatOptions.dropdownTag) || null;
      this.dropdownClasses = (concatOptions == null ? void 0 : concatOptions.dropdownClasses) || null;
      this.dropdownDirectionClasses = (concatOptions == null ? void 0 : concatOptions.dropdownDirectionClasses) || null;
      this.dropdownSpace = (concatOptions == null ? void 0 : concatOptions.dropdownSpace) || 10;
      this.searchWrapperTemplate = (concatOptions == null ? void 0 : concatOptions.searchWrapperTemplate) || null;
      this.searchWrapperClasses = (concatOptions == null ? void 0 : concatOptions.searchWrapperClasses) || "bg-white p-2 sticky top-0";
      this.searchClasses = (concatOptions == null ? void 0 : concatOptions.searchClasses) || "block w-[calc(100%-2rem)] text-sm border-gray-200 rounded-md focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 py-2 px-3 my-2 mx-4";
      this.searchPlaceholder = (concatOptions == null ? void 0 : concatOptions.searchPlaceholder) || "Search...";
      this.searchNoResultText = (concatOptions == null ? void 0 : concatOptions.searchNoResultText) || "No options found...";
      this.searchNoResultClasses = (concatOptions == null ? void 0 : concatOptions.searchNoResultClasses) || "px-4 text-sm";
      this.optionTemplate = (concatOptions == null ? void 0 : concatOptions.optionTemplate) || null;
      this.optionTag = (concatOptions == null ? void 0 : concatOptions.optionTag) || null;
      this.optionClasses = (concatOptions == null ? void 0 : concatOptions.optionClasses) || null;
      this.extraMarkup = (concatOptions == null ? void 0 : concatOptions.extraMarkup) || null;
      this.descriptionClasses = (concatOptions == null ? void 0 : concatOptions.descriptionClasses) || null;
      this.iconClasses = (concatOptions == null ? void 0 : concatOptions.iconClasses) || null;
      this.isAddTagOnEnter = (_a = concatOptions == null ? void 0 : concatOptions.isAddTagOnEnter) != null ? _a : true;
      this.animationInProcess = false;
      this.selectOptions = [];
      this.tagsInputHelper = null;
      this.init();
    }
    init() {
      this.createCollection(window.$hsSelectCollection, this);
      this.build();
    }
    build() {
      this.el.style.display = "none";
      if (this.el.children) {
        Array.from(this.el.children).filter((el) => el.value && el.value !== "").forEach((el) => {
          const data = el.getAttribute("data-hs-select-option");
          this.selectOptions = [
            ...this.selectOptions,
            {
              title: el.textContent,
              val: el.value,
              options: data !== "undefined" ? JSON.parse(data) : null
            }
          ];
        });
      }
      if (this.isMultiple) {
        const selectedOptions = Array.from(
          this.el.options
        ).filter((el) => el.selected);
        if (selectedOptions) {
          const values = [];
          selectedOptions.forEach((el) => {
            values.push(el.value);
          });
          this.value = values;
        }
      }
      this.buildWrapper();
      if (this.mode === "tags")
        this.buildTags();
      else
        this.buildToggle();
      this.buildDropdown();
      if (this.extraMarkup)
        this.buildExtraMarkup();
    }
    buildWrapper() {
      this.wrapper = document.createElement("div");
      this.wrapper.classList.add("hs-select", "relative");
      if (this.mode === "tags") {
        this.wrapper.addEventListener("click", (evt) => {
          if (!evt.target.closest("[data-hs-select-dropdown]") && !evt.target.closest("[data-tag-value]")) {
            this.tagsInput.focus();
          }
        });
      }
      if (this.wrapperClasses)
        classToClassList(this.wrapperClasses, this.wrapper);
      this.el.before(this.wrapper);
      this.wrapper.append(this.el);
    }
    buildExtraMarkup() {
      const appendMarkup = (markup) => {
        this.wrapper.append(htmlToElement(markup));
      };
      if (Array.isArray(this.extraMarkup))
        this.extraMarkup.forEach((el) => appendMarkup(el));
      else
        appendMarkup(this.extraMarkup);
    }
    buildToggle() {
      var _a;
      let icon, title;
      this.toggleTextWrapper = document.createElement("span");
      this.toggleTextWrapper.classList.add("truncate");
      this.toggle = htmlToElement(this.toggleTag || "<div></div>");
      icon = this.toggle.querySelector("[data-icon]");
      title = this.toggle.querySelector("[data-title]");
      if (!this.isMultiple && icon)
        this.setToggleIcon();
      if (!this.isMultiple && title)
        this.setToggleTitle();
      if (this.isMultiple) {
        this.toggleTextWrapper.innerHTML = this.value.length ? this.stringFromValue() : this.placeholder;
      } else {
        this.toggleTextWrapper.innerHTML = ((_a = this.getItemByValue(this.value)) == null ? void 0 : _a.title) || this.placeholder;
      }
      if (!title)
        this.toggle.append(this.toggleTextWrapper);
      if (this.toggleClasses)
        classToClassList(this.toggleClasses, this.toggle);
      if (this.isDisabled)
        this.toggle.classList.add("disabled");
      if (this.wrapper)
        this.wrapper.append(this.toggle);
      this.toggle.addEventListener("click", () => {
        if (this.isDisabled)
          return false;
        if (this.isOpened)
          this.close();
        else
          this.open();
      });
    }
    setToggleIcon() {
      var _a, _b;
      const icon = this.toggle.querySelector("[data-icon]");
      icon.innerHTML = "";
      if (icon) {
        const img = htmlToElement(
          ((_b = (_a = this.getItemByValue(this.value)) == null ? void 0 : _a.options) == null ? void 0 : _b.icon) || ""
        );
        icon.append(img);
        if (!img)
          icon.classList.add("hidden");
        else
          icon.classList.remove("hidden");
      }
    }
    setToggleTitle() {
      var _a;
      const title = this.toggle.querySelector("[data-title]");
      title.classList.add("truncate");
      title.innerHTML = "";
      if (title) {
        const titleText = ((_a = this.getItemByValue(this.value)) == null ? void 0 : _a.title) || this.placeholder;
        title.innerHTML = titleText;
        this.toggle.append(title);
      }
    }
    buildTags() {
      this.buildTagsInput();
      this.setTagsItems();
    }
    reassignTagsInputPlaceholder(placeholder) {
      this.tagsInput.placeholder = placeholder;
      this.tagsInputHelper.innerHTML = placeholder;
      this.calculateInputWidth();
    }
    buildTagsItem(val) {
      var _a, _b, _c;
      const item = this.getItemByValue(val);
      let template, title, remove, icon;
      const newItem = document.createElement("div");
      newItem.setAttribute("data-tag-value", val);
      if (this.tagsItemClasses)
        classToClassList(this.tagsItemClasses, newItem);
      if (this.tagsItemTemplate) {
        template = htmlToElement(this.tagsItemTemplate);
        newItem.append(template);
      }
      if ((_a = item == null ? void 0 : item.options) == null ? void 0 : _a.icon) {
        const img = htmlToElement((_b = item == null ? void 0 : item.options) == null ? void 0 : _b.icon);
        icon = template ? template.querySelector("[data-icon]") : document.createElement("span");
        icon.append(img);
        if (!template)
          newItem.append(icon);
      }
      if (template && template.querySelector("[data-icon]") && !((_c = item == null ? void 0 : item.options) == null ? void 0 : _c.icon)) {
        template.querySelector("[data-icon]").classList.add("hidden");
      }
      title = template ? template.querySelector("[data-title]") : document.createElement("span");
      title.textContent = item.title || "";
      if (!template)
        newItem.append(title);
      if (template) {
        remove = template.querySelector("[data-remove]");
      } else {
        remove = document.createElement("span");
        remove.textContent = "X";
        newItem.append(remove);
      }
      remove.addEventListener("click", () => {
        this.value = this.value.filter((el) => el !== val);
        this.selectedItems = this.selectedItems.filter((el) => el !== val);
        if (!this.value.length)
          this.reassignTagsInputPlaceholder(this.placeholder);
        this.unselectMultipleItems();
        this.selectMultipleItems();
        newItem.remove();
      });
      this.wrapper.append(newItem);
    }
    getItemByValue(val) {
      return this.selectOptions.find((el) => el.val === val);
    }
    setTagsItems() {
      if (this.value) {
        this.value.forEach((val) => {
          if (!this.selectedItems.includes(val))
            this.buildTagsItem(val);
          this.selectedItems = !this.selectedItems.includes(val) ? [...this.selectedItems, val] : this.selectedItems;
        });
      }
    }
    buildTagsInput() {
      this.tagsInput = document.createElement("input");
      if (this.tagsInputClasses)
        classToClassList(this.tagsInputClasses, this.tagsInput);
      this.tagsInput.addEventListener("focus", () => this.open());
      this.tagsInput.addEventListener("input", () => this.calculateInputWidth());
      this.tagsInput.addEventListener(
        "input",
        debounce(
          (evt) => this.searchOptions(evt.target.value)
        )
      );
      this.tagsInput.addEventListener("keydown", (evt) => {
        if (evt.key === "Enter" && this.isAddTagOnEnter) {
          const val = evt.target.value;
          if (this.selectOptions.find((el) => el.val === val))
            return false;
          this.addSelectOption(val, val);
          this.buildOption(val, val);
          this.dropdown.querySelector(`[data-value="${val}"]`).click();
          this.resetTagsInputField();
        }
      });
      this.wrapper.append(this.tagsInput);
      setTimeout(() => {
        this.adjustInputWidth();
        this.reassignTagsInputPlaceholder(
          this.value.length ? "" : this.placeholder
        );
      });
    }
    buildDropdown() {
      this.dropdown = htmlToElement(this.dropdownTag || "<div></div>");
      this.dropdown.setAttribute("data-hs-select-dropdown", "");
      this.dropdown.classList.add("absolute", "top-full");
      if (!this.isOpened)
        this.dropdown.classList.add("hidden");
      if (this.dropdownClasses)
        classToClassList(this.dropdownClasses, this.dropdown);
      if (this.wrapper)
        this.wrapper.append(this.dropdown);
      if (this.dropdown && this.hasSearch)
        this.buildSearch();
      if (this.selectOptions)
        this.selectOptions.forEach(
          (props, i) => this.buildOption(props.title, props.val, props.options, `${i}`)
        );
    }
    buildSearch() {
      let input;
      this.searchWrapper = htmlToElement(
        this.searchWrapperTemplate || "<div></div>"
      );
      if (this.searchWrapperClasses)
        classToClassList(this.searchWrapperClasses, this.searchWrapper);
      input = this.searchWrapper.querySelector("[data-input]");
      this.search = htmlToElement('<input type="text" />');
      this.search.placeholder = this.searchPlaceholder;
      if (this.searchClasses)
        classToClassList(this.searchClasses, this.search);
      this.search.addEventListener(
        "input",
        debounce(
          (evt) => this.searchOptions(evt.target.value)
        )
      );
      if (input)
        input.append(this.search);
      else
        this.searchWrapper.append(this.search);
      this.dropdown.append(this.searchWrapper);
    }
    buildOption(title, val, options, index = "1") {
      let template = null;
      let titleWrapper = null;
      let iconWrapper = null;
      let descriptionWrapper = null;
      const option = htmlToElement(this.optionTag || "<div></div>");
      option.setAttribute("data-value", val);
      option.setAttribute("data-title-value", title);
      option.setAttribute("tabIndex", index);
      option.classList.add("cursor-pointer");
      if (this.optionTemplate) {
        template = htmlToElement(this.optionTemplate);
        option.append(template);
      }
      if (template) {
        titleWrapper = template.querySelector("[data-title]");
        titleWrapper.textContent = title || "";
      } else {
        option.textContent = title || "";
      }
      if (options) {
        if (options.icon) {
          const img = htmlToElement(options.icon);
          img.classList.add("mw-full");
          if (template) {
            iconWrapper = template.querySelector("[data-icon]");
            iconWrapper.append(img);
          } else {
            const icon = htmlToElement("<div></div>");
            if (this.iconClasses)
              classToClassList(this.iconClasses, icon);
            icon.append(img);
            option.append(icon);
          }
        }
        if (options.description) {
          if (template) {
            descriptionWrapper = template.querySelector("[data-description]");
            descriptionWrapper.append(options.description);
          } else {
            const description = htmlToElement("<div></div>");
            description.textContent = options.description;
            if (this.descriptionClasses)
              classToClassList(this.descriptionClasses, description);
            option.append(description);
          }
        }
      }
      if (template && template.querySelector("[data-icon]") && !options && !(options == null ? void 0 : options.icon)) {
        template.querySelector("[data-icon]").classList.add("hidden");
      }
      if (this.value && (this.isMultiple ? this.value.includes(val) : this.value === val))
        option.classList.add("selected");
      option.addEventListener("click", () => this.onSelectOption(val));
      if (this.optionClasses)
        classToClassList(this.optionClasses, option);
      if (this.dropdown)
        this.dropdown.append(option);
    }
    destroyOption(val) {
      const option = this.dropdown.querySelector(`[data-value="${val}"]`);
      if (!option)
        return false;
      option.remove();
    }
    buildOriginalOption(title, val, options) {
      const option = htmlToElement("<option></option>");
      option.setAttribute("value", val);
      option.setAttribute("data-hs-select-option", JSON.stringify(options));
      option.innerText = title;
      this.el.append(option);
    }
    destroyOriginalOption(val) {
      const option = this.el.querySelector(`[value="${val}"]`);
      if (!option)
        return false;
      option.remove();
    }
    buildTagsInputHelper() {
      this.tagsInputHelper = document.createElement("span");
      this.tagsInputHelper.style.fontSize = window.getComputedStyle(
        this.tagsInput
      ).fontSize;
      this.tagsInputHelper.style.fontFamily = window.getComputedStyle(
        this.tagsInput
      ).fontFamily;
      this.tagsInputHelper.style.fontWeight = window.getComputedStyle(
        this.tagsInput
      ).fontWeight;
      this.tagsInputHelper.style.letterSpacing = window.getComputedStyle(
        this.tagsInput
      ).letterSpacing;
      this.tagsInputHelper.style.visibility = "hidden";
      this.tagsInputHelper.style.whiteSpace = "pre";
      this.tagsInputHelper.style.position = "absolute";
      this.wrapper.appendChild(this.tagsInputHelper);
    }
    calculateInputWidth() {
      this.tagsInputHelper.textContent = this.tagsInput.value || this.tagsInput.placeholder;
      const inputPadding = parseInt(window.getComputedStyle(this.tagsInput).paddingLeft) + parseInt(window.getComputedStyle(this.tagsInput).paddingRight);
      const inputBorder = parseInt(window.getComputedStyle(this.tagsInput).borderLeftWidth) + parseInt(window.getComputedStyle(this.tagsInput).borderRightWidth);
      const newWidth = this.tagsInputHelper.offsetWidth + inputPadding + inputBorder;
      const maxWidth = this.wrapper.offsetWidth - (parseInt(window.getComputedStyle(this.wrapper).paddingLeft) + parseInt(window.getComputedStyle(this.wrapper).paddingRight));
      this.tagsInput.style.width = `${Math.min(newWidth, maxWidth) + 2}px`;
    }
    adjustInputWidth() {
      this.buildTagsInputHelper();
      this.calculateInputWidth();
    }
    onSelectOption(val) {
      this.clearSelections();
      if (this.isMultiple) {
        this.value = this.value.includes(val) ? Array.from(this.value).filter((el) => el !== val) : [...Array.from(this.value), val];
        this.selectMultipleItems();
        this.setNewValue();
      } else {
        this.value = val;
        this.selectSingleItem();
        this.setNewValue();
      }
      this.fireEvent("change", this.value);
      dispatch("change.hs.select", this.el, this.value);
      if (this.mode === "tags") {
        const intersection = this.selectedItems.filter(
          (x) => !this.value.includes(x)
        );
        if (intersection.length) {
          intersection.forEach((el) => {
            this.selectedItems = this.selectedItems.filter((elI) => elI !== el);
            this.wrapper.querySelector(`[data-tag-value="${el}"]`).remove();
          });
        }
        this.resetTagsInputField();
      }
      if (!this.isMultiple) {
        if (this.toggle.querySelector("[data-icon]"))
          this.setToggleIcon();
        if (this.toggle.querySelector("[data-title]"))
          this.setToggleTitle();
        this.close();
      }
      if (!this.value.length && this.mode === "tags")
        this.reassignTagsInputPlaceholder(this.placeholder);
      if (this.isOpened && this.mode === "tags" && this.tagsInput)
        this.tagsInput.focus();
    }
    addSelectOption(title, val, options) {
      this.selectOptions = [
        ...this.selectOptions,
        {
          title,
          val,
          options
        }
      ];
    }
    removeSelectOption(val) {
      const hasOption = !!this.selectOptions.some(
        (el) => el.val === val
      );
      if (!hasOption)
        return false;
      this.selectOptions = this.selectOptions.filter(
        (el) => el.val !== val
      );
    }
    resetTagsInputField() {
      this.tagsInput.value = "";
      this.reassignTagsInputPlaceholder("");
      this.searchOptions("");
    }
    clearSelections() {
      Array.from(this.dropdown.children).forEach((el) => {
        if (el.classList.contains("selected"))
          el.classList.remove("selected");
      });
      Array.from(this.el.children).forEach((el) => {
        if (el.selected)
          el.selected = false;
      });
    }
    setNewValue() {
      if (this.mode === "tags") {
        this.setTagsItems();
      } else {
        if (this.value.length)
          this.toggleTextWrapper.innerHTML = this.stringFromValue();
        else
          this.toggleTextWrapper.innerHTML = this.placeholder;
      }
    }
    stringFromValue() {
      const value = [];
      this.selectOptions.forEach((el) => {
        if (this.isMultiple) {
          if (this.value.includes(el.val))
            value.push(el.title);
        } else {
          if (this.value === el.val)
            value.push(el.title);
        }
      });
      return this.toggleCountText && this.toggleCountText !== "" && value.length >= this.toggleCountTextMinItems ? `${value.length} ${this.toggleCountText}` : value.join(", ");
    }
    selectSingleItem() {
      const selectedOption = Array.from(this.el.children).find(
        (el) => this.value === el.value
      );
      selectedOption.selected = true;
      const selectedItem = Array.from(this.dropdown.children).find(
        (el) => this.value === el.getAttribute("data-value")
      );
      selectedItem.classList.add("selected");
    }
    selectMultipleItems() {
      Array.from(this.dropdown.children).filter((el) => this.value.includes(el.getAttribute("data-value"))).forEach((el) => el.classList.add("selected"));
      Array.from(this.el.children).filter((el) => this.value.includes(el.value)).forEach((el) => el.selected = true);
    }
    unselectMultipleItems() {
      Array.from(this.dropdown.children).forEach(
        (el) => el.classList.remove("selected")
      );
      Array.from(this.el.children).forEach(
        (el) => el.selected = false
      );
    }
    searchOptions(val) {
      if (this.searchNoResult) {
        this.searchNoResult.remove();
        this.searchNoResult = null;
      }
      this.searchNoResult = htmlToElement("<span></span>");
      this.searchNoResult.innerText = this.searchNoResultText;
      classToClassList(this.searchNoResultClasses, this.searchNoResult);
      const options = this.dropdown.querySelectorAll("[data-value]");
      let hasItems = false;
      options.forEach((el) => {
        const optionVal = el.getAttribute("data-title-value").toLocaleLowerCase();
        if (!optionVal.includes(val.toLocaleLowerCase()))
          el.classList.add("hidden");
        else {
          el.classList.remove("hidden");
          hasItems = true;
        }
      });
      if (!hasItems)
        this.dropdown.append(this.searchNoResult);
    }
    eraseToggleIcon() {
      const icon = this.toggle.querySelector("[data-icon]");
      if (icon) {
        icon.innerHTML = null;
        icon.classList.add("hidden");
      }
    }
    eraseToggleTitle() {
      const title = this.toggle.querySelector("[data-title]");
      if (title) {
        title.innerHTML = this.placeholder;
      } else {
        this.toggleTextWrapper.innerHTML = this.placeholder;
      }
    }
    // Public methods
    destroy() {
      const parent = this.el.parentElement.parentElement;
      this.el.classList.remove("hidden");
      this.el.style.display = "";
      parent.prepend(this.el);
      parent.querySelector(".hs-select").remove();
      this.wrapper = null;
    }
    open() {
      if (this.animationInProcess)
        return false;
      this.animationInProcess = true;
      this.dropdown.classList.remove("hidden");
      this.recalculateDirection();
      setTimeout(() => {
        this.wrapper.classList.add("active");
        this.dropdown.classList.add("opened");
        if (this.hasSearch && !this.preventSearchFocus)
          this.search.focus();
        this.animationInProcess = false;
      });
      this.isOpened = true;
    }
    close() {
      var _a, _b, _c;
      if (this.animationInProcess)
        return false;
      this.animationInProcess = true;
      this.wrapper.classList.remove("active");
      this.dropdown.classList.remove("opened", "bottom-full", "top-full");
      if ((_a = this.dropdownDirectionClasses) == null ? void 0 : _a.bottom)
        this.dropdown.classList.remove(this.dropdownDirectionClasses.bottom);
      if ((_b = this.dropdownDirectionClasses) == null ? void 0 : _b.top)
        this.dropdown.classList.remove(this.dropdownDirectionClasses.top);
      this.dropdown.style.marginTop = "";
      this.dropdown.style.marginBottom = "";
      afterTransition(this.dropdown, () => {
        this.dropdown.classList.add("hidden");
        if (this.hasSearch) {
          this.search.value = "";
          this.search.dispatchEvent(new Event("input", { bubbles: true }));
          this.search.blur();
        }
        this.animationInProcess = false;
      });
      (_c = this.dropdown.querySelector(".hs-select-option-highlighted")) == null ? void 0 : _c.classList.remove("hs-select-option-highlighted");
      this.isOpened = false;
    }
    addOption(items) {
      let i = `${this.selectOptions.length}`;
      const addOption = (option) => {
        const { title, val, options } = option;
        const hasOption = !!this.selectOptions.some(
          (el) => el.val === val
        );
        if (!hasOption) {
          this.addSelectOption(title, val, options);
          this.buildOption(title, val, options, i);
          this.buildOriginalOption(title, val, options);
        }
      };
      if (Array.isArray(items)) {
        items.forEach((option) => {
          addOption(option);
        });
      } else {
        addOption(items);
      }
    }
    removeOption(values) {
      const removeOption = (val) => {
        const hasOption = !!this.selectOptions.some(
          (el) => el.val === val
        );
        if (hasOption) {
          this.removeSelectOption(val);
          this.destroyOption(val);
          this.destroyOriginalOption(val);
          if (this.value === val) {
            this.value = null;
            this.eraseToggleTitle();
            this.eraseToggleIcon();
          }
        }
      };
      if (Array.isArray(values)) {
        values.forEach((val) => {
          removeOption(val);
        });
      } else {
        removeOption(values);
      }
    }
    recalculateDirection() {
      var _a, _b, _c, _d;
      if (isEnoughSpace(
        this.dropdown,
        this.toggle || this.tagsInput,
        "bottom",
        this.dropdownSpace,
        this.viewport
      )) {
        this.dropdown.classList.remove("bottom-full");
        if ((_a = this.dropdownDirectionClasses) == null ? void 0 : _a.bottom)
          this.dropdown.classList.remove(this.dropdownDirectionClasses.bottom);
        this.dropdown.style.marginBottom = "";
        this.dropdown.classList.add("top-full");
        if ((_b = this.dropdownDirectionClasses) == null ? void 0 : _b.top)
          this.dropdown.classList.add(this.dropdownDirectionClasses.top);
        this.dropdown.style.marginTop = `${this.dropdownSpace}px`;
      } else {
        this.dropdown.classList.remove("top-full");
        if ((_c = this.dropdownDirectionClasses) == null ? void 0 : _c.top)
          this.dropdown.classList.remove(this.dropdownDirectionClasses.top);
        this.dropdown.style.marginTop = "";
        this.dropdown.classList.add("bottom-full");
        if ((_d = this.dropdownDirectionClasses) == null ? void 0 : _d.bottom)
          this.dropdown.classList.add(this.dropdownDirectionClasses.bottom);
        this.dropdown.style.marginBottom = `${this.dropdownSpace}px`;
      }
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsSelectCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsSelectCollection)
        window.$hsSelectCollection = [];
      document.querySelectorAll("[data-hs-select]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsSelectCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        )) {
          const data = el.getAttribute("data-hs-select");
          const options = data ? JSON.parse(data) : {};
          new HSSelect(el, options);
        }
      });
      if (window.$hsSelectCollection) {
        window.addEventListener("click", (evt) => {
          const evtTarget = evt.target;
          HSSelect.closeCurrentlyOpened(evtTarget);
        });
        document.addEventListener(
          "keydown",
          (evt) => HSSelect.accessibility(evt)
        );
      }
    }
    static close(target) {
      const elInCollection = window.$hsSelectCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection && elInCollection.element.isOpened) {
        elInCollection.element.close();
      }
    }
    static closeCurrentlyOpened(evtTarget = null) {
      if (!evtTarget.closest(".hs-select.active")) {
        const currentlyOpened = window.$hsSelectCollection.filter((el) => el.element.isOpened) || null;
        if (currentlyOpened) {
          currentlyOpened.forEach((el) => {
            el.element.close();
          });
        }
      }
    }
    // Accessibility methods
    static accessibility(evt) {
      const target = window.$hsSelectCollection.find((el) => el.element.isOpened);
      if (target && SELECT_ACCESSIBILITY_KEY_SET.includes(evt.code) && !evt.metaKey) {
        switch (evt.code) {
          case "Escape":
            evt.preventDefault();
            this.onEscape();
            break;
          case "ArrowUp":
            evt.preventDefault();
            this.onArrow();
            break;
          case "ArrowDown":
            evt.preventDefault();
            this.onArrow(false);
            break;
          case "Tab":
            evt.preventDefault();
            this.onTab(evt.shiftKey);
            break;
          case "Home":
            evt.preventDefault();
            this.onStartEnd();
            break;
          case "End":
            evt.preventDefault();
            this.onStartEnd(false);
            break;
          case "Enter":
            evt.preventDefault();
            this.onEnter(evt);
            break;
          default:
            break;
        }
      }
    }
    static onEscape() {
      const target = window.$hsSelectCollection.find((el) => el.element.isOpened);
      if (target)
        target.element.close();
    }
    static onArrow(isArrowUp = true) {
      const target = window.$hsSelectCollection.find((el) => el.element.isOpened);
      if (target) {
        const dropdown = target.element.dropdown;
        if (!dropdown)
          return false;
        const preparedOptions = isArrowUp ? Array.from(
          dropdown.querySelectorAll(":scope > *:not(.hidden)")
        ).reverse() : Array.from(dropdown.querySelectorAll(":scope > *:not(.hidden)"));
        const options = preparedOptions.filter(
          (el) => !el.classList.contains("disabled")
        );
        const current = dropdown.querySelector(".hs-select-option-highlighted");
        if (!current)
          options[0].classList.add("hs-select-option-highlighted");
        let currentInd = options.findIndex((el) => el === current);
        if (currentInd + 1 < options.length) {
          currentInd++;
        }
        options[currentInd].focus();
        if (current)
          current.classList.remove("hs-select-option-highlighted");
        options[currentInd].classList.add("hs-select-option-highlighted");
      }
    }
    static onTab(isArrowUp = true) {
      const target = window.$hsSelectCollection.find((el) => el.element.isOpened);
      if (target) {
        const dropdown = target.element.dropdown;
        if (!dropdown)
          return false;
        const preparedOptions = isArrowUp ? Array.from(
          dropdown.querySelectorAll(":scope >  *:not(.hidden)")
        ).reverse() : Array.from(dropdown.querySelectorAll(":scope >  *:not(.hidden)"));
        const options = preparedOptions.filter(
          (el) => !el.classList.contains("disabled")
        );
        const current = dropdown.querySelector(".hs-select-option-highlighted");
        if (!current)
          options[0].classList.add("hs-select-option-highlighted");
        let currentInd = options.findIndex((el) => el === current);
        if (currentInd + 1 < options.length) {
          currentInd++;
        } else {
          if (current)
            current.classList.remove("hs-select-option-highlighted");
          target.element.close();
          target.element.toggle.focus();
          return false;
        }
        options[currentInd].focus();
        if (current)
          current.classList.remove("hs-select-option-highlighted");
        options[currentInd].classList.add("hs-select-option-highlighted");
      }
    }
    static onStartEnd(isStart = true) {
      const target = window.$hsSelectCollection.find((el) => el.element.isOpened);
      if (target) {
        const dropdown = target.element.dropdown;
        if (!dropdown)
          return false;
        const preparedOptions = isStart ? Array.from(dropdown.querySelectorAll(":scope >  *:not(.hidden)")) : Array.from(
          dropdown.querySelectorAll(":scope >  *:not(.hidden)")
        ).reverse();
        const options = preparedOptions.filter(
          (el) => !el.classList.contains("disabled")
        );
        const current = dropdown.querySelector(".hs-select-option-highlighted");
        if (options.length) {
          options[0].focus();
          if (current)
            current.classList.remove("hs-select-option-highlighted");
          options[0].classList.add("hs-select-option-highlighted");
        }
      }
    }
    static onEnter(evt) {
      const select = evt.target.previousSibling;
      if (window.$hsSelectCollection.find((el) => el.element.el === select)) {
        const opened = window.$hsSelectCollection.find(
          (el) => el.element.isOpened
        );
        const target = window.$hsSelectCollection.find(
          (el) => el.element.el === select
        );
        opened.element.close();
        target.element.open();
      } else {
        const target = window.$hsSelectCollection.find(
          (el) => el.element.isOpened
        );
        if (target)
          target.element.onSelectOption(
            evt.target.dataset.value || ""
          );
      }
    }
  };
  window.addEventListener("load", () => {
    HSSelect.autoInit();
  });
  document.addEventListener("scroll", () => {
    if (!window.$hsSelectCollection)
      return false;
    const target = window.$hsSelectCollection.find((el) => el.element.isOpened);
    if (target)
      target.element.recalculateDirection();
  });
  if (typeof window !== "undefined") {
    window.HSSelect = HSSelect;
  }
  var select_default = HSSelect;

  // node_modules/preline/src/plugins/stepper/index.ts
  var HSStepper = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-stepper");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.currentIndex = (concatOptions == null ? void 0 : concatOptions.currentIndex) || 1;
      this.mode = (concatOptions == null ? void 0 : concatOptions.mode) || "linear";
      this.isCompleted = typeof (concatOptions == null ? void 0 : concatOptions.isCompleted) !== "undefined" ? concatOptions == null ? void 0 : concatOptions.isCompleted : false;
      this.totalSteps = 1;
      this.navItems = [];
      this.contentItems = [];
      this.init();
    }
    init() {
      this.createCollection(window.$hsStepperCollection, this);
      this.buildNav();
      this.buildContent();
      this.buildButtons();
      this.setTotalSteps();
    }
    getUncompletedSteps(inIncludedSkipped = false) {
      return this.navItems.filter(
        ({ isCompleted, isSkip }) => inIncludedSkipped ? !isCompleted || isSkip : !isCompleted && !isSkip
      );
    }
    setTotalSteps() {
      this.navItems.forEach((item) => {
        const { index } = item;
        if (index > this.totalSteps)
          this.totalSteps = index;
      });
    }
    // Nav
    buildNav() {
      this.el.querySelectorAll("[data-hs-stepper-nav-item]").forEach((el) => this.addNavItem(el));
      this.navItems.forEach((item) => this.buildNavItem(item));
    }
    buildNavItem(item) {
      const { index, isDisabled, el } = item;
      if (index === this.currentIndex)
        this.setCurrentNavItem();
      if (this.mode !== "linear" || isDisabled) {
        el.addEventListener("click", () => this.handleNavItemClick(item));
      }
    }
    addNavItem(el) {
      const {
        index,
        isFinal = false,
        isCompleted = false,
        isSkip = false,
        isOptional = false,
        isDisabled = false,
        isProcessed = false,
        hasError = false
      } = JSON.parse(el.getAttribute("data-hs-stepper-nav-item"));
      if (isCompleted)
        el.classList.add("success");
      if (isSkip)
        el.classList.add("skipped");
      if (isDisabled) {
        if (el.tagName === "BUTTON" || el.tagName === "INPUT")
          el.setAttribute("disabled", "disabled");
        el.classList.add("disabled");
      }
      if (hasError)
        el.classList.add("error");
      this.navItems.push({
        index,
        isFinal,
        isCompleted,
        isSkip,
        isOptional,
        isDisabled,
        isProcessed,
        hasError,
        el
      });
    }
    setCurrentNavItem() {
      this.navItems.forEach((item) => {
        const { index, el } = item;
        if (index === this.currentIndex)
          this.setCurrentNavItemActions(el);
        else
          this.unsetCurrentNavItemActions(el);
      });
    }
    setCurrentNavItemActions(el) {
      el.classList.add("active");
      this.fireEvent("active", this.currentIndex);
      dispatch("active.hs.stepper", this.el, this.currentIndex);
    }
    getNavItem(n = this.currentIndex) {
      return this.navItems.find(({ index }) => index === n);
    }
    setProcessedNavItemActions(item) {
      item.isProcessed = true;
      item.el.classList.add("processed");
    }
    setErrorNavItemActions(item) {
      item.hasError = true;
      item.el.classList.add("error");
    }
    unsetCurrentNavItemActions(el) {
      el.classList.remove("active");
    }
    handleNavItemClick(item) {
      const { index } = item;
      this.currentIndex = index;
      this.setCurrentNavItem();
      this.setCurrentContentItem();
      this.checkForTheFirstStep();
    }
    // Content
    buildContent() {
      this.el.querySelectorAll("[data-hs-stepper-content-item]").forEach((el) => this.addContentItem(el));
      this.navItems.forEach((item) => this.buildContentItem(item));
    }
    buildContentItem(item) {
      const { index } = item;
      if (index === this.currentIndex)
        this.setCurrentContentItem();
    }
    addContentItem(el) {
      const {
        index,
        isFinal = false,
        isCompleted = false,
        isSkip = false
      } = JSON.parse(el.getAttribute("data-hs-stepper-content-item"));
      if (isCompleted)
        el.classList.add("success");
      if (isSkip)
        el.classList.add("skipped");
      this.contentItems.push({
        index,
        isFinal,
        isCompleted,
        isSkip,
        el
      });
    }
    setCurrentContentItem() {
      if (this.isCompleted) {
        const finalContentItem = this.contentItems.find(({ isFinal }) => isFinal);
        const otherContentItems = this.contentItems.filter(
          ({ isFinal }) => !isFinal
        );
        finalContentItem.el.style.display = "";
        otherContentItems.forEach(({ el }) => el.style.display = "none");
        return false;
      }
      this.contentItems.forEach((item) => {
        const { index, el } = item;
        if (index === this.currentIndex)
          this.setCurrentContentItemActions(el);
        else
          this.unsetCurrentContentItemActions(el);
      });
    }
    hideAllContentItems() {
      this.contentItems.forEach(({ el }) => el.style.display = "none");
    }
    setCurrentContentItemActions(el) {
      el.style.display = "";
    }
    unsetCurrentContentItemActions(el) {
      el.style.display = "none";
    }
    disableAll() {
      const currentNavItem = this.getNavItem(this.currentIndex);
      currentNavItem.hasError = false;
      currentNavItem.isCompleted = false;
      currentNavItem.isDisabled = false;
      currentNavItem.el.classList.remove("error", "success");
      this.disableButtons();
    }
    disableNavItemActions(item) {
      item.isDisabled = true;
      item.el.classList.add("disabled");
    }
    enableNavItemActions(item) {
      item.isDisabled = false;
      item.el.classList.remove("disabled");
    }
    // Buttons
    buildButtons() {
      this.backBtn = this.el.querySelector("[data-hs-stepper-back-btn]");
      this.nextBtn = this.el.querySelector("[data-hs-stepper-next-btn]");
      this.skipBtn = this.el.querySelector("[data-hs-stepper-skip-btn]");
      this.completeStepBtn = this.el.querySelector(
        "[data-hs-stepper-complete-step-btn]"
      );
      this.finishBtn = this.el.querySelector("[data-hs-stepper-finish-btn]");
      this.resetBtn = this.el.querySelector("[data-hs-stepper-reset-btn]");
      this.buildBackButton();
      this.buildNextButton();
      this.buildSkipButton();
      this.buildCompleteStepButton();
      this.buildFinishButton();
      this.buildResetButton();
    }
    // back
    buildBackButton() {
      if (!this.backBtn)
        return;
      this.checkForTheFirstStep();
      this.backBtn.addEventListener("click", () => {
        this.handleBackButtonClick();
        if (this.mode === "linear") {
          const currentNavItem = this.navItems.find(
            ({ index }) => index === this.currentIndex
          );
          const currentContentItem = this.contentItems.find(
            ({ index }) => index === this.currentIndex
          );
          if (!currentNavItem || !currentContentItem)
            return;
          if (currentNavItem.isCompleted) {
            currentNavItem.isCompleted = false;
            currentNavItem.isSkip = false;
            currentNavItem.el.classList.remove("success", "skipped");
          }
          if (currentContentItem.isCompleted) {
            currentContentItem.isCompleted = false;
            currentContentItem.isSkip = false;
            currentContentItem.el.classList.remove("success", "skipped");
          }
          if (this.mode === "linear" && this.currentIndex !== this.totalSteps) {
            if (this.nextBtn)
              this.nextBtn.style.display = "";
            if (this.completeStepBtn)
              this.completeStepBtn.style.display = "";
          }
          this.showSkipButton();
          this.showFinishButton();
          this.showCompleteStepButton();
        }
      });
    }
    handleBackButtonClick() {
      if (this.currentIndex === 1)
        return;
      if (this.mode === "linear") {
        this.removeOptionalClasses();
      }
      this.currentIndex--;
      if (this.mode === "linear") {
        this.removeOptionalClasses();
      }
      this.setCurrentNavItem();
      this.setCurrentContentItem();
      this.checkForTheFirstStep();
      if (this.completeStepBtn)
        this.changeTextAndDisableCompleteButtonIfStepCompleted();
      this.fireEvent("back", this.currentIndex);
      dispatch("back.hs.stepper", this.el, this.currentIndex);
    }
    checkForTheFirstStep() {
      if (this.currentIndex === 1) {
        this.setToDisabled(this.backBtn);
      } else {
        this.setToNonDisabled(this.backBtn);
      }
    }
    setToDisabled(el) {
      if (el.tagName === "BUTTON" || el.tagName === "INPUT")
        el.setAttribute("disabled", "disabled");
      el.classList.add("disabled");
    }
    setToNonDisabled(el) {
      if (el.tagName === "BUTTON" || el.tagName === "INPUT")
        el.removeAttribute("disabled");
      el.classList.remove("disabled");
    }
    // next
    buildNextButton() {
      if (!this.nextBtn)
        return;
      this.nextBtn.addEventListener("click", () => {
        var _a;
        this.fireEvent("beforeNext", this.currentIndex);
        dispatch("beforeNext.hs.stepper", this.el, this.currentIndex);
        if ((_a = this.getNavItem(this.currentIndex)) == null ? void 0 : _a.isProcessed) {
          this.disableAll();
          return false;
        }
        this.goToNext();
      });
    }
    unsetProcessedNavItemActions(item) {
      item.isProcessed = false;
      item.el.classList.remove("processed");
    }
    handleNextButtonClick(infinite = true) {
      if (infinite) {
        if (this.currentIndex === this.totalSteps)
          this.currentIndex = 1;
        else
          this.currentIndex++;
      } else {
        const nonCompletedSteps = this.getUncompletedSteps();
        if (nonCompletedSteps.length === 1) {
          const { index } = nonCompletedSteps[0];
          this.currentIndex = index;
        } else {
          if (this.currentIndex === this.totalSteps)
            return;
          this.currentIndex++;
        }
      }
      if (this.mode === "linear") {
        this.removeOptionalClasses();
      }
      this.setCurrentNavItem();
      this.setCurrentContentItem();
      this.checkForTheFirstStep();
      if (this.completeStepBtn)
        this.changeTextAndDisableCompleteButtonIfStepCompleted();
      this.showSkipButton();
      this.showFinishButton();
      this.showCompleteStepButton();
      this.fireEvent("next", this.currentIndex);
      dispatch("next.hs.stepper", this.el, this.currentIndex);
    }
    removeOptionalClasses() {
      const currentNavItem = this.navItems.find(
        ({ index }) => index === this.currentIndex
      );
      const currentContentItem = this.contentItems.find(
        ({ index }) => index === this.currentIndex
      );
      currentNavItem.isSkip = false;
      currentNavItem.hasError = false;
      currentNavItem.isDisabled = false;
      currentContentItem.isSkip = false;
      currentNavItem.el.classList.remove("skipped", "success", "error");
      currentContentItem.el.classList.remove("skipped", "success", "error");
    }
    // skip
    buildSkipButton() {
      if (!this.skipBtn)
        return;
      this.showSkipButton();
      this.skipBtn.addEventListener("click", () => {
        this.handleSkipButtonClick();
        if (this.mode === "linear" && this.currentIndex === this.totalSteps) {
          if (this.nextBtn)
            this.nextBtn.style.display = "none";
          if (this.completeStepBtn)
            this.completeStepBtn.style.display = "none";
          if (this.finishBtn)
            this.finishBtn.style.display = "";
        }
      });
    }
    setSkipItem(n) {
      const targetNavItem = this.navItems.find(
        ({ index }) => index === (n || this.currentIndex)
      );
      const targetContentItem = this.contentItems.find(
        ({ index }) => index === (n || this.currentIndex)
      );
      if (!targetNavItem || !targetContentItem)
        return;
      this.setSkipItemActions(targetNavItem);
      this.setSkipItemActions(targetContentItem);
    }
    setSkipItemActions(item) {
      item.isSkip = true;
      item.el.classList.add("skipped");
    }
    showSkipButton() {
      if (!this.skipBtn)
        return;
      const { isOptional } = this.navItems.find(
        ({ index }) => index === this.currentIndex
      );
      if (isOptional)
        this.skipBtn.style.display = "";
      else
        this.skipBtn.style.display = "none";
    }
    handleSkipButtonClick() {
      this.setSkipItem();
      this.handleNextButtonClick();
      this.fireEvent("skip", this.currentIndex);
      dispatch("skip.hs.stepper", this.el, this.currentIndex);
    }
    // complete
    buildCompleteStepButton() {
      if (!this.completeStepBtn)
        return;
      this.completeStepBtnDefaultText = this.completeStepBtn.innerText;
      this.completeStepBtn.addEventListener(
        "click",
        () => this.handleCompleteStepButtonClick()
      );
    }
    changeTextAndDisableCompleteButtonIfStepCompleted() {
      const currentNavItem = this.navItems.find(
        ({ index }) => index === this.currentIndex
      );
      const { completedText } = JSON.parse(
        this.completeStepBtn.getAttribute("data-hs-stepper-complete-step-btn")
      );
      if (!currentNavItem)
        return;
      if (currentNavItem.isCompleted) {
        this.completeStepBtn.innerText = completedText || this.completeStepBtnDefaultText;
        this.completeStepBtn.setAttribute("disabled", "disabled");
        this.completeStepBtn.classList.add("disabled");
      } else {
        this.completeStepBtn.innerText = this.completeStepBtnDefaultText;
        this.completeStepBtn.removeAttribute("disabled");
        this.completeStepBtn.classList.remove("disabled");
      }
    }
    setCompleteItem(n) {
      const targetNavItem = this.navItems.find(
        ({ index }) => index === (n || this.currentIndex)
      );
      const targetContentItem = this.contentItems.find(
        ({ index }) => index === (n || this.currentIndex)
      );
      if (!targetNavItem || !targetContentItem)
        return;
      this.setCompleteItemActions(targetNavItem);
      this.setCompleteItemActions(targetContentItem);
    }
    setCompleteItemActions(item) {
      item.isCompleted = true;
      item.el.classList.add("success");
    }
    showCompleteStepButton() {
      if (!this.completeStepBtn)
        return;
      const nonCompletedSteps = this.getUncompletedSteps();
      if (nonCompletedSteps.length === 1)
        this.completeStepBtn.style.display = "none";
      else
        this.completeStepBtn.style.display = "";
    }
    handleCompleteStepButtonClick() {
      this.setCompleteItem();
      this.fireEvent("complete", this.currentIndex);
      dispatch("complete.hs.stepper", this.el, this.currentIndex);
      this.handleNextButtonClick(false);
      this.showFinishButton();
      this.showCompleteStepButton();
      this.checkForTheFirstStep();
      if (this.completeStepBtn)
        this.changeTextAndDisableCompleteButtonIfStepCompleted();
      this.showSkipButton();
    }
    // finish
    buildFinishButton() {
      if (!this.finishBtn)
        return;
      if (this.isCompleted) {
        this.setCompleted();
      }
      this.finishBtn.addEventListener(
        "click",
        () => this.handleFinishButtonClick()
      );
    }
    setCompleted() {
      this.el.classList.add("completed");
    }
    unsetCompleted() {
      this.el.classList.remove("completed");
    }
    showFinishButton() {
      if (!this.finishBtn)
        return;
      const nonCompletedSteps = this.getUncompletedSteps();
      if (nonCompletedSteps.length === 1)
        this.finishBtn.style.display = "";
      else
        this.finishBtn.style.display = "none";
    }
    handleFinishButtonClick() {
      const uncompletedSteps = this.getUncompletedSteps();
      const uncompletedOrSkipSteps = this.getUncompletedSteps(true);
      const { el } = this.contentItems.find(({ isFinal }) => isFinal);
      if (uncompletedSteps.length)
        uncompletedSteps.forEach(({ index }) => this.setCompleteItem(index));
      this.currentIndex = this.totalSteps;
      this.setCurrentNavItem();
      this.hideAllContentItems();
      const currentNavItem = this.navItems.find(
        ({ index }) => index === this.currentIndex
      );
      const currentNavItemEl = currentNavItem ? currentNavItem.el : null;
      currentNavItemEl.classList.remove("active");
      el.style.display = "block";
      if (this.backBtn)
        this.backBtn.style.display = "none";
      if (this.nextBtn)
        this.nextBtn.style.display = "none";
      if (this.skipBtn)
        this.skipBtn.style.display = "none";
      if (this.completeStepBtn)
        this.completeStepBtn.style.display = "none";
      if (this.finishBtn)
        this.finishBtn.style.display = "none";
      if (this.resetBtn)
        this.resetBtn.style.display = "";
      if (uncompletedOrSkipSteps.length <= 1) {
        this.isCompleted = true;
        this.setCompleted();
      }
      this.fireEvent("finish", this.currentIndex);
      dispatch("finish.hs.stepper", this.el, this.currentIndex);
    }
    // reset
    buildResetButton() {
      if (!this.resetBtn)
        return;
      this.resetBtn.addEventListener(
        "click",
        () => this.handleResetButtonClick()
      );
    }
    handleResetButtonClick() {
      if (this.backBtn)
        this.backBtn.style.display = "";
      if (this.nextBtn)
        this.nextBtn.style.display = "";
      if (this.completeStepBtn) {
        this.completeStepBtn.style.display = "";
        this.completeStepBtn.innerText = this.completeStepBtnDefaultText;
        this.completeStepBtn.removeAttribute("disabled");
        this.completeStepBtn.classList.remove("disabled");
      }
      if (this.resetBtn)
        this.resetBtn.style.display = "none";
      this.navItems.forEach((item) => {
        const { el } = item;
        item.isSkip = false;
        item.isCompleted = false;
        this.unsetCurrentNavItemActions(el);
        el.classList.remove("success", "skipped");
      });
      this.contentItems.forEach((item) => {
        const { el } = item;
        item.isSkip = false;
        item.isCompleted = false;
        this.unsetCurrentContentItemActions(el);
        el.classList.remove("success", "skipped");
      });
      this.currentIndex = 1;
      this.setCurrentNavItem();
      this.setCurrentContentItem();
      this.showFinishButton();
      this.showCompleteStepButton();
      this.checkForTheFirstStep();
      this.unsetCompleted();
      this.isCompleted = false;
      this.fireEvent("reset", this.currentIndex);
      dispatch("reset.hs.stepper", this.el, this.currentIndex);
    }
    // Public methods
    setProcessedNavItem(n) {
      const targetNavItem = this.getNavItem(n);
      if (!targetNavItem)
        return;
      this.setProcessedNavItemActions(targetNavItem);
    }
    unsetProcessedNavItem(n) {
      const targetNavItem = this.getNavItem(n);
      if (!targetNavItem)
        return;
      this.unsetProcessedNavItemActions(targetNavItem);
    }
    goToNext() {
      if (this.mode === "linear")
        this.setCompleteItem();
      this.handleNextButtonClick(this.mode !== "linear");
      if (this.mode === "linear" && this.currentIndex === this.totalSteps) {
        if (this.nextBtn)
          this.nextBtn.style.display = "none";
        if (this.completeStepBtn)
          this.completeStepBtn.style.display = "none";
      }
    }
    disableButtons() {
      if (this.backBtn)
        this.setToDisabled(this.backBtn);
      if (this.nextBtn)
        this.setToDisabled(this.nextBtn);
    }
    enableButtons() {
      if (this.backBtn)
        this.setToNonDisabled(this.backBtn);
      if (this.nextBtn)
        this.setToNonDisabled(this.nextBtn);
    }
    setErrorNavItem(n) {
      const targetNavItem = this.getNavItem(n);
      if (!targetNavItem)
        return;
      this.setErrorNavItemActions(targetNavItem);
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsStepperCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsStepperCollection)
        window.$hsStepperCollection = [];
      document.querySelectorAll("[data-hs-stepper]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsStepperCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSStepper(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSStepper.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSStepper = HSStepper;
  }
  var stepper_default = HSStepper;

  // node_modules/preline/src/plugins/strong-password/index.ts
  var HSStrongPassword = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      this.isOpened = false;
      this.strength = 0;
      this.passedRules = /* @__PURE__ */ new Set();
      const data = el.getAttribute("data-hs-strong-password");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.target = (concatOptions == null ? void 0 : concatOptions.target) ? typeof (concatOptions == null ? void 0 : concatOptions.target) === "string" ? document.querySelector(concatOptions.target) : concatOptions.target : null;
      this.hints = (concatOptions == null ? void 0 : concatOptions.hints) ? typeof (concatOptions == null ? void 0 : concatOptions.hints) === "string" ? document.querySelector(concatOptions.hints) : concatOptions.hints : null;
      this.stripClasses = (concatOptions == null ? void 0 : concatOptions.stripClasses) || null;
      this.minLength = (concatOptions == null ? void 0 : concatOptions.minLength) || 6;
      this.mode = (concatOptions == null ? void 0 : concatOptions.mode) || "default";
      this.popoverSpace = (concatOptions == null ? void 0 : concatOptions.popoverSpace) || 10;
      this.checksExclude = (concatOptions == null ? void 0 : concatOptions.checksExclude) || [];
      this.availableChecks = [
        "lowercase",
        "uppercase",
        "numbers",
        "special-characters",
        "min-length"
      ].filter((el2) => !this.checksExclude.includes(el2));
      this.specialCharactersSet = (concatOptions == null ? void 0 : concatOptions.specialCharactersSet) || "!\"#$%&'()*+,-./:;<=>?@[\\\\\\]^_`{|}~";
      if (this.target)
        this.init();
    }
    init() {
      this.createCollection(window.$hsStrongPasswordCollection, this);
      if (this.availableChecks.length)
        this.build();
    }
    build() {
      this.buildStrips();
      if (this.hints)
        this.buildHints();
      this.setStrength(this.target.value);
      this.target.addEventListener(
        "input",
        (evt) => {
          this.setStrength(evt.target.value);
        }
      );
    }
    buildStrips() {
      this.el.innerHTML = "";
      if (this.stripClasses) {
        for (let i = 0; i < this.availableChecks.length; i++) {
          const newStrip = htmlToElement("<div></div>");
          classToClassList(this.stripClasses, newStrip);
          this.el.append(newStrip);
        }
      }
    }
    buildHints() {
      this.weakness = this.hints.querySelector(
        "[data-hs-strong-password-hints-weakness-text]"
      ) || null;
      this.rules = Array.from(
        this.hints.querySelectorAll(
          "[data-hs-strong-password-hints-rule-text]"
        )
      ) || null;
      this.rules.forEach((rule) => {
        var _a;
        const ruleValue = rule.getAttribute(
          "data-hs-strong-password-hints-rule-text"
        );
        if ((_a = this.checksExclude) == null ? void 0 : _a.includes(ruleValue))
          rule.remove();
      });
      if (this.weakness)
        this.buildWeakness();
      if (this.rules)
        this.buildRules();
      if (this.mode === "popover") {
        this.target.addEventListener("focus", () => {
          this.isOpened = true;
          this.hints.classList.remove("hidden");
          this.hints.classList.add("block");
          this.recalculateDirection();
        });
        this.target.addEventListener("blur", () => {
          this.isOpened = false;
          this.hints.classList.remove(
            "block",
            "bottom-full",
            "top-full"
          );
          this.hints.classList.add("hidden");
          this.hints.style.marginTop = "";
          this.hints.style.marginBottom = "";
        });
      }
    }
    buildWeakness() {
      this.checkStrength(this.target.value);
      this.setWeaknessText();
      this.target.addEventListener(
        "input",
        () => setTimeout(() => this.setWeaknessText())
      );
    }
    buildRules() {
      this.setRulesText();
      this.target.addEventListener(
        "input",
        () => setTimeout(() => this.setRulesText())
      );
    }
    setWeaknessText() {
      const weaknessText = this.weakness.getAttribute(
        "data-hs-strong-password-hints-weakness-text"
      );
      const weaknessTextToJson = JSON.parse(weaknessText);
      this.weakness.textContent = weaknessTextToJson[this.strength];
    }
    setRulesText() {
      this.rules.forEach((rule) => {
        const ruleValue = rule.getAttribute(
          "data-hs-strong-password-hints-rule-text"
        );
        this.checkIfPassed(rule, this.passedRules.has(ruleValue));
      });
    }
    togglePopover() {
      const popover = this.el.querySelector(".popover");
      if (popover)
        popover.classList.toggle("show");
    }
    checkStrength(val) {
      const passedRules = /* @__PURE__ */ new Set();
      const regexps = {
        lowercase: /[a-z]+/,
        uppercase: /[A-Z]+/,
        numbers: /[0-9]+/,
        "special-characters": new RegExp(`[${this.specialCharactersSet}]`)
      };
      let strength = 0;
      if (this.availableChecks.includes("lowercase") && val.match(regexps["lowercase"])) {
        strength += 1;
        passedRules.add("lowercase");
      }
      if (this.availableChecks.includes("uppercase") && val.match(regexps["uppercase"])) {
        strength += 1;
        passedRules.add("uppercase");
      }
      if (this.availableChecks.includes("numbers") && val.match(regexps["numbers"])) {
        strength += 1;
        passedRules.add("numbers");
      }
      if (this.availableChecks.includes("special-characters") && val.match(regexps["special-characters"])) {
        strength += 1;
        passedRules.add("special-characters");
      }
      if (this.availableChecks.includes("min-length") && val.length >= this.minLength) {
        strength += 1;
        passedRules.add("min-length");
      }
      if (!val.length) {
        strength = 0;
      }
      if (strength === this.availableChecks.length)
        this.el.classList.add("accepted");
      else
        this.el.classList.remove("accepted");
      this.strength = strength;
      this.passedRules = passedRules;
      return {
        strength: this.strength,
        rules: this.passedRules
      };
    }
    checkIfPassed(el, isRulePassed = false) {
      const check = el.querySelector("[data-check]");
      const uncheck = el.querySelector("[data-uncheck]");
      if (isRulePassed) {
        el.classList.add("active");
        check.classList.remove("hidden");
        uncheck.classList.add("hidden");
      } else {
        el.classList.remove("active");
        check.classList.add("hidden");
        uncheck.classList.remove("hidden");
      }
    }
    setStrength(val) {
      const { strength, rules } = this.checkStrength(val);
      const payload = {
        strength,
        rules
      };
      this.hideStrips(strength);
      this.fireEvent("change", payload);
      dispatch("change.hs.strongPassword", this.el, payload);
    }
    hideStrips(qty) {
      Array.from(this.el.children).forEach((el, i) => {
        if (i < qty)
          el.classList.add("passed");
        else
          el.classList.remove("passed");
      });
    }
    // Public methods
    recalculateDirection() {
      if (isEnoughSpace(
        this.hints,
        this.target,
        "bottom",
        this.popoverSpace
      )) {
        this.hints.classList.remove("bottom-full");
        this.hints.classList.add("top-full");
        this.hints.style.marginBottom = "";
        this.hints.style.marginTop = `${this.popoverSpace}px`;
      } else {
        this.hints.classList.remove("top-full");
        this.hints.classList.add("bottom-full");
        this.hints.style.marginTop = "";
        this.hints.style.marginBottom = `${this.popoverSpace}px`;
      }
    }
    // Static methods
    static getInstance(target) {
      const elInCollection = window.$hsStrongPasswordCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsStrongPasswordCollection)
        window.$hsStrongPasswordCollection = [];
      document.querySelectorAll(
        "[data-hs-strong-password]:not(.--prevent-on-load-init)"
      ).forEach((el) => {
        if (!window.$hsStrongPasswordCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        )) {
          const data = el.getAttribute("data-hs-strong-password");
          const options = data ? JSON.parse(data) : {};
          new HSStrongPassword(el, options);
        }
      });
    }
  };
  window.addEventListener("load", () => {
    HSStrongPassword.autoInit();
  });
  document.addEventListener("scroll", () => {
    if (!window.$hsStrongPasswordCollection)
      return false;
    const target = window.$hsStrongPasswordCollection.find(
      (el) => el.element.isOpened
    );
    if (target)
      target.element.recalculateDirection();
  });
  if (typeof window !== "undefined") {
    window.HSStrongPassword = HSStrongPassword;
  }
  var strong_password_default = HSStrongPassword;

  // node_modules/preline/src/plugins/tabs/index.ts
  var HSTabs = class extends HSBasePlugin {
    constructor(el, options, events) {
      super(el, options, events);
      this.toggles = this.el.querySelectorAll("[data-hs-tab]");
      this.extraToggleId = this.el.getAttribute("hs-data-tab-select");
      this.extraToggle = document.querySelector(this.extraToggleId);
      this.current = Array.from(this.toggles).find(
        (el2) => el2.classList.contains("active")
      );
      this.currentContentId = this.current.getAttribute("data-hs-tab");
      this.currentContent = document.querySelector(this.currentContentId);
      this.prev = null;
      this.prevContentId = null;
      this.prevContent = null;
      this.init();
    }
    init() {
      this.createCollection(window.$hsTabsCollection, this);
      this.toggles.forEach((el) => {
        el.addEventListener("click", () => this.open(el));
      });
      if (this.extraToggle) {
        this.extraToggle.addEventListener("change", (evt) => this.change(evt));
      }
    }
    open(el) {
      this.prev = this.current;
      this.prevContentId = this.currentContentId;
      this.prevContent = this.currentContent;
      this.current = el;
      this.currentContentId = this.current.getAttribute("data-hs-tab");
      this.currentContent = document.querySelector(this.currentContentId);
      this.prev.classList.remove("active");
      this.prevContent.classList.add("hidden");
      this.current.classList.add("active");
      this.currentContent.classList.remove("hidden");
      this.fireEvent("change", {
        el,
        prev: this.prevContentId,
        current: this.currentContentId
      });
      dispatch("change.hs.tab", el, {
        el,
        prev: this.prevContentId,
        current: this.currentContentId
      });
    }
    change(evt) {
      const toggle = document.querySelector(
        `[data-hs-tab="${evt.target.value}"]`
      );
      if (toggle)
        toggle.click();
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsTabsCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsTabsCollection)
        window.$hsTabsCollection = [];
      document.querySelectorAll(
        '[role="tablist"]:not(select):not(.--prevent-on-load-init)'
      ).forEach((el) => {
        if (!window.$hsTabsCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSTabs(el);
      });
      if (window.$hsTabsCollection)
        document.addEventListener("keydown", (evt) => HSTabs.accessibility(evt));
    }
    static open(target) {
      const elInCollection = window.$hsTabsCollection.find(
        (el) => Array.from(el.element.toggles).includes(
          typeof target === "string" ? document.querySelector(target) : target
        )
      );
      const targetInCollection = Array.from(elInCollection.element.toggles).find(
        (el) => el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (targetInCollection && !targetInCollection.classList.contains("active"))
        elInCollection.element.open(targetInCollection);
    }
    // Accessibility methods
    static accessibility(evt) {
      const target = document.querySelector("[data-hs-tab]:focus");
      if (target && TABS_ACCESSIBILITY_KEY_SET.includes(evt.code) && !evt.metaKey) {
        const isVertical = target.closest('[role="tablist"]').getAttribute("data-hs-tabs-vertical");
        evt.preventDefault();
        switch (evt.code) {
          case (isVertical === "true" ? "ArrowUp" : "ArrowLeft"):
            this.onArrow();
            break;
          case (isVertical === "true" ? "ArrowDown" : "ArrowRight"):
            this.onArrow(false);
            break;
          case "Home":
            this.onStartEnd();
            break;
          case "End":
            this.onStartEnd(false);
            break;
          default:
            break;
        }
      }
    }
    static onArrow(isOpposite = true) {
      const target = document.querySelector("[data-hs-tab]:focus").closest('[role="tablist"]');
      const targetInCollection = window.$hsTabsCollection.find(
        (el) => el.element.el === target
      );
      if (targetInCollection) {
        const toggles = isOpposite ? Array.from(targetInCollection.element.toggles).reverse() : Array.from(targetInCollection.element.toggles);
        const focused = toggles.find((el) => document.activeElement === el);
        let focusedInd = toggles.findIndex((el) => el === focused);
        focusedInd = focusedInd + 1 < toggles.length ? focusedInd + 1 : 0;
        toggles[focusedInd].focus();
        toggles[focusedInd].click();
      }
    }
    static onStartEnd(isOpposite = true) {
      const target = document.querySelector("[data-hs-tab]:focus").closest('[role="tablist"]');
      const targetInCollection = window.$hsTabsCollection.find(
        (el) => el.element.el === target
      );
      if (targetInCollection) {
        const toggles = isOpposite ? Array.from(targetInCollection.element.toggles) : Array.from(targetInCollection.element.toggles).reverse();
        if (toggles.length) {
          toggles[0].focus();
          toggles[0].click();
        }
      }
    }
    // Backward compatibility
    static on(evt, target, cb) {
      const elInCollection = window.$hsTabsCollection.find(
        (el) => Array.from(el.element.toggles).includes(
          typeof target === "string" ? document.querySelector(target) : target
        )
      );
      if (elInCollection)
        elInCollection.element.events[evt] = cb;
    }
  };
  window.addEventListener("load", () => {
    HSTabs.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSTabs = HSTabs;
  }
  var tabs_default = HSTabs;

  // node_modules/preline/src/plugins/theme-switch/index.ts
  var HSThemeSwitch = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-theme-switch");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.theme = (concatOptions == null ? void 0 : concatOptions.theme) || localStorage.getItem("hs_theme") || "default";
      this.themeSet = ["light", "dark", "default"];
      this.init();
    }
    init() {
      this.createCollection(window.$hsThemeSwitchCollection, this);
      if (this.theme !== "default")
        this.setAppearance();
    }
    setResetStyles() {
      const style = document.createElement("style");
      style.innerText = `*{transition: unset !important;}`;
      style.setAttribute("data-hs-appearance-onload-styles", "");
      document.head.appendChild(style);
      return style;
    }
    addSystemThemeObserver() {
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", ({ matches }) => {
        if (matches)
          this.setAppearance("dark", false);
        else
          this.setAppearance("default", false);
      });
    }
    removeSystemThemeObserver() {
      window.matchMedia("(prefers-color-scheme: dark)").removeEventListener;
    }
    // Public methods
    setAppearance(theme = this.theme, isSaveToLocalStorage = true, isSetDispatchEvent = true) {
      const html2 = document.querySelector("html");
      const resetStyles = this.setResetStyles();
      if (isSaveToLocalStorage)
        localStorage.setItem("hs_theme", theme);
      if (theme === "auto")
        theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "default";
      html2.classList.remove("light", "dark", "default", "auto");
      html2.classList.add(theme);
      setTimeout(() => resetStyles.remove());
      if (isSetDispatchEvent)
        window.dispatchEvent(
          new CustomEvent("on-hs-appearance-change", { detail: theme })
        );
    }
    // Static methods
    static getInstance(target) {
      const elInCollection = window.$hsThemeSwitchCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsThemeSwitchCollection)
        window.$hsThemeSwitchCollection = [];
      const toggleObserveSystemTheme = (el) => {
        if (localStorage.getItem("hs_theme") === "auto")
          el.addSystemThemeObserver();
        else
          el.removeSystemThemeObserver();
      };
      document.querySelectorAll("[data-hs-theme-switch]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsThemeSwitchCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        )) {
          const switchTheme = new HSThemeSwitch(el);
          switchTheme.el.checked = switchTheme.theme === "dark";
          toggleObserveSystemTheme(switchTheme);
          switchTheme.el.addEventListener("change", (evt) => {
            const theme = evt.target.checked ? "dark" : "default";
            switchTheme.setAppearance(theme);
            toggleObserveSystemTheme(switchTheme);
          });
        }
      });
      document.querySelectorAll(
        "[data-hs-theme-click-value]:not(.--prevent-on-load-init)"
      ).forEach((el) => {
        const theme = el.getAttribute("data-hs-theme-click-value");
        const switchTheme = new HSThemeSwitch(el);
        toggleObserveSystemTheme(switchTheme);
        switchTheme.el.addEventListener("click", () => {
          switchTheme.setAppearance(theme);
          toggleObserveSystemTheme(switchTheme);
        });
      });
    }
  };
  window.addEventListener("load", () => {
    HSThemeSwitch.autoInit();
  });
  if (window.$hsThemeSwitchCollection) {
    window.addEventListener(
      "on-hs-appearance-change",
      (evt) => {
        window.$hsThemeSwitchCollection.forEach((el) => {
          el.element.el.checked = evt.detail === "dark";
        });
      }
    );
  }
  if (typeof window !== "undefined") {
    window.HSThemeSwitch = HSThemeSwitch;
  }

  // node_modules/preline/src/plugins/toggle-count/index.ts
  var HSToggleCount = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-toggle-count");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      this.target = (concatOptions == null ? void 0 : concatOptions.target) ? typeof (concatOptions == null ? void 0 : concatOptions.target) === "string" ? document.querySelector(concatOptions.target) : concatOptions.target : null;
      this.min = (concatOptions == null ? void 0 : concatOptions.min) || 0;
      this.max = (concatOptions == null ? void 0 : concatOptions.max) || 0;
      this.duration = (concatOptions == null ? void 0 : concatOptions.duration) || 700;
      this.isChecked = this.target.checked || false;
      if (this.target)
        this.init();
    }
    init() {
      this.createCollection(window.$hsToggleCountCollection, this);
      if (this.isChecked)
        this.el.innerText = String(this.max);
      this.target.addEventListener("change", () => {
        this.isChecked = !this.isChecked;
        this.toggle();
      });
    }
    toggle() {
      if (this.isChecked)
        this.countUp();
      else
        this.countDown();
    }
    animate(from, to) {
      let startTimestamp = 0;
      const step = (timestamp) => {
        if (!startTimestamp)
          startTimestamp = timestamp;
        const progress = Math.min(
          (timestamp - startTimestamp) / this.duration,
          1
        );
        this.el.innerText = String(Math.floor(progress * (to - from) + from));
        if (progress < 1)
          window.requestAnimationFrame(step);
      };
      window.requestAnimationFrame(step);
    }
    // Public methods
    countUp() {
      this.animate(this.min, this.max);
    }
    countDown() {
      this.animate(this.max, this.min);
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsToggleCountCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsToggleCountCollection)
        window.$hsToggleCountCollection = [];
      document.querySelectorAll("[data-hs-toggle-count]:not(.--prevent-on-load-init)").forEach((el) => {
        if (!window.$hsToggleCountCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSToggleCount(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSToggleCount.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSToggleCount = HSToggleCount;
  }
  var toggle_count_default = HSToggleCount;

  // node_modules/preline/src/plugins/toggle-password/index.ts
  var HSTogglePassword = class extends HSBasePlugin {
    constructor(el, options) {
      super(el, options);
      const data = el.getAttribute("data-hs-toggle-password");
      const dataOptions = data ? JSON.parse(data) : {};
      const concatOptions = __spreadValues(__spreadValues({}, dataOptions), options);
      const targets = [];
      if ((concatOptions == null ? void 0 : concatOptions.target) && typeof (concatOptions == null ? void 0 : concatOptions.target) === "string") {
        const ids = concatOptions == null ? void 0 : concatOptions.target.split(",");
        ids.forEach((id) => {
          targets.push(document.querySelector(id));
        });
      } else if ((concatOptions == null ? void 0 : concatOptions.target) && typeof (concatOptions == null ? void 0 : concatOptions.target) === "object") {
        concatOptions.target.forEach(
          (el2) => targets.push(document.querySelector(el2))
        );
      } else {
        concatOptions.target.forEach(
          (el2) => targets.push(el2)
        );
      }
      this.target = targets;
      this.isShown = this.el.hasAttribute("type") ? this.el.checked : false;
      this.eventType = isFormElement(this.el) ? "change" : "click";
      this.isMultiple = this.target.length > 1 && !!this.el.closest("[data-hs-toggle-password-group]");
      if (this.target)
        this.init();
    }
    init() {
      this.createCollection(window.$hsTogglePasswordCollection, this);
      if (!this.isShown) {
        this.hide();
      } else {
        this.show();
      }
      this.el.addEventListener(this.eventType, () => {
        if (this.isShown) {
          this.hide();
        } else {
          this.show();
        }
        this.fireEvent("toggle", this.target);
        dispatch("toggle.hs.toggle-select", this.el, this.target);
      });
    }
    getMultipleToggles() {
      const group = this.el.closest("[data-hs-toggle-password-group]");
      const toggles = group.querySelectorAll("[data-hs-toggle-password]");
      const togglesInCollection = [];
      toggles.forEach((el) => {
        togglesInCollection.push(
          HSTogglePassword.getInstance(el)
        );
      });
      return togglesInCollection;
    }
    // Public methods
    show() {
      if (this.isMultiple) {
        const toggles = this.getMultipleToggles();
        toggles.forEach(
          (el) => el ? el.isShown = true : false
        );
        this.el.closest("[data-hs-toggle-password-group]").classList.add("active");
      } else {
        this.isShown = true;
        this.el.classList.add("active");
      }
      this.target.forEach((el) => {
        el.type = "text";
      });
    }
    hide() {
      if (this.isMultiple) {
        const toggles = this.getMultipleToggles();
        toggles.forEach(
          (el) => el ? el.isShown = false : false
        );
        this.el.closest("[data-hs-toggle-password-group]").classList.remove("active");
      } else {
        this.isShown = false;
        this.el.classList.remove("active");
      }
      this.target.forEach((el) => {
        el.type = "password";
      });
    }
    // Static methods
    static getInstance(target, isInstance) {
      const elInCollection = window.$hsTogglePasswordCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element : null;
    }
    static autoInit() {
      if (!window.$hsTogglePasswordCollection)
        window.$hsTogglePasswordCollection = [];
      document.querySelectorAll(
        "[data-hs-toggle-password]:not(.--prevent-on-load-init)"
      ).forEach((el) => {
        if (!window.$hsTogglePasswordCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSTogglePassword(el);
      });
    }
  };
  window.addEventListener("load", () => {
    HSTogglePassword.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSTogglePassword = HSTogglePassword;
  }
  var toggle_password_default = HSTogglePassword;

  // node_modules/preline/src/plugins/tooltip/index.ts
  var HSTooltip = class extends HSBasePlugin {
    constructor(el, options, events) {
      super(el, options, events);
      if (this.el) {
        this.toggle = this.el.querySelector(".hs-tooltip-toggle") || this.el;
        this.content = this.el.querySelector(".hs-tooltip-content");
        this.eventMode = getClassProperty(this.el, "--trigger") || "hover";
        this.preventPopper = getClassProperty(
          this.el,
          "--prevent-popper",
          "false"
        );
        this.placement = getClassProperty(this.el, "--placement");
        this.strategy = getClassProperty(
          this.el,
          "--strategy"
        );
      }
      if (this.el && this.toggle && this.content)
        this.init();
    }
    init() {
      this.createCollection(window.$hsTooltipCollection, this);
      if (this.eventMode === "click") {
        this.toggle.addEventListener("click", () => this.click());
      } else if (this.eventMode === "focus") {
        this.toggle.addEventListener("click", () => this.focus());
      } else if (this.eventMode === "hover") {
        this.toggle.addEventListener("mouseenter", () => this.enter());
        this.toggle.addEventListener("mouseleave", () => this.leave());
      }
      if (this.preventPopper === "false")
        this.buildPopper();
    }
    enter() {
      this.show();
    }
    leave() {
      this.hide();
    }
    click() {
      if (this.el.classList.contains("show"))
        return false;
      this.show();
      const handle = () => {
        setTimeout(() => {
          this.hide();
          this.toggle.removeEventListener("click", handle, true);
          this.toggle.removeEventListener("blur", handle, true);
        });
      };
      this.toggle.addEventListener("click", handle, true);
      this.toggle.addEventListener("blur", handle, true);
    }
    focus() {
      this.show();
      const handle = () => {
        this.hide();
        this.toggle.removeEventListener("blur", handle, true);
      };
      this.toggle.addEventListener("blur", handle, true);
    }
    buildPopper() {
      this.popperInstance = createPopper(this.toggle, this.content, {
        placement: POSITIONS[this.placement] || "top",
        strategy: this.strategy || "fixed",
        modifiers: [
          {
            name: "offset",
            options: {
              offset: [0, 5]
            }
          }
        ]
      });
    }
    // Public methods
    show() {
      this.content.classList.remove("hidden");
      if (this.preventPopper === "false") {
        this.popperInstance.setOptions((options) => __spreadProps(__spreadValues({}, options), {
          modifiers: [
            ...options.modifiers,
            {
              name: "eventListeners",
              enabled: true
            }
          ]
        }));
        this.popperInstance.update();
      }
      setTimeout(() => {
        this.el.classList.add("show");
        this.fireEvent("show", this.el);
        dispatch("show.hs.tooltip", this.el, this.el);
      });
    }
    hide() {
      this.el.classList.remove("show");
      if (this.preventPopper === "false") {
        this.popperInstance.setOptions((options) => __spreadProps(__spreadValues({}, options), {
          modifiers: [
            ...options.modifiers,
            {
              name: "eventListeners",
              enabled: false
            }
          ]
        }));
      }
      this.fireEvent("hide", this.el);
      dispatch("hide.hs.tooltip", this.el, this.el);
      afterTransition(this.content, () => {
        if (this.el.classList.contains("show"))
          return false;
        this.content.classList.add("hidden");
      });
    }
    // Static methods
    static getInstance(target, isInstance = false) {
      const elInCollection = window.$hsTooltipCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      return elInCollection ? isInstance ? elInCollection : elInCollection.element.el : null;
    }
    static autoInit() {
      if (!window.$hsTooltipCollection)
        window.$hsTooltipCollection = [];
      document.querySelectorAll(".hs-tooltip").forEach((el) => {
        if (!window.$hsTooltipCollection.find(
          (elC) => {
            var _a;
            return ((_a = elC == null ? void 0 : elC.element) == null ? void 0 : _a.el) === el;
          }
        ))
          new HSTooltip(el);
      });
    }
    static show(target) {
      const elInCollection = window.$hsTooltipCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection) {
        switch (elInCollection.element.eventMode) {
          case "click":
            elInCollection.element.click();
            break;
          case "focus":
            elInCollection.element.focus();
            break;
          default:
            elInCollection.element.enter();
            break;
        }
      }
    }
    static hide(target) {
      const elInCollection = window.$hsTooltipCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection)
        elInCollection.element.hide();
    }
    // Backward compatibility
    static on(evt, target, cb) {
      const elInCollection = window.$hsTooltipCollection.find(
        (el) => el.element.el === (typeof target === "string" ? document.querySelector(target) : target)
      );
      if (elInCollection)
        elInCollection.element.events[evt] = cb;
    }
  };
  window.addEventListener("load", () => {
    HSTooltip.autoInit();
  });
  if (typeof window !== "undefined") {
    window.HSTooltip = HSTooltip;
  }
  var tooltip_default = HSTooltip;

  // node_modules/preline/src/spa/index.ts
  var COLLECTIONS = [
    { key: "copy-markup", fn: copy_markup_default },
    { key: "accordion", fn: accordion_default },
    { key: "carousel", fn: carousel_default },
    { key: "collapse", fn: collapse_default },
    { key: "combobox", fn: combobox_default },
    { key: "dropdown", fn: dropdown_default },
    { key: "input-number", fn: input_number_default },
    { key: "overlay", fn: overlay_default },
    { key: "pin-input", fn: pin_input_default },
    { key: "remove-element", fn: remove_element_default },
    { key: "scrollspy", fn: scrollspy_default },
    { key: "select", fn: select_default },
    { key: "stepper", fn: stepper_default },
    { key: "strong-password", fn: strong_password_default },
    { key: "tabs", fn: tabs_default },
    { key: "toggle-count", fn: toggle_count_default },
    { key: "toggle-password", fn: toggle_password_default },
    { key: "tooltip", fn: tooltip_default }
  ];

  // node_modules/preline/src/static/index.ts
  var HSStaticMethods = {
    getClassProperty,
    afterTransition,
    autoInit(collection = "all") {
      if (collection === "all") {
        COLLECTIONS.forEach(({ fn: fn2 }) => {
          fn2 == null ? void 0 : fn2.autoInit();
        });
      } else {
        COLLECTIONS.forEach(({ key, fn: fn2 }) => {
          if (collection.includes(key))
            fn2 == null ? void 0 : fn2.autoInit();
        });
      }
    }
  };
  if (typeof window !== "undefined") {
    window.HSStaticMethods = HSStaticMethods;
  }

  // js/app.js
  var csrfToken = document.querySelector("meta[name='csrf-token']").getAttribute("content");
  var liveSocket = new LiveSocket("/live", Socket, {
    longPollFallbackMs: 2500,
    params: { _csrf_token: csrfToken }
  });
  import_topbar.default.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" });
  window.addEventListener("phx:page-loading-start", (_info) => import_topbar.default.show(300));
  window.addEventListener("phx:page-loading-stop", (_info) => import_topbar.default.hide());
  liveSocket.connect();
  window.liveSocket = liveSocket;
  var html = document.querySelector("html");
  var isLightOrAuto = localStorage.getItem("hs_theme") === "light" || localStorage.getItem("hs_theme") === "auto" && !window.matchMedia("(prefers-color-scheme: dark)").matches;
  var isDarkOrAuto = localStorage.getItem("hs_theme") === "dark" || localStorage.getItem("hs_theme") === "auto" && window.matchMedia("(prefers-color-scheme: dark)").matches;
  if (isLightOrAuto && html.classList.contains("dark"))
    html.classList.remove("dark");
  else if (isDarkOrAuto && html.classList.contains("light"))
    html.classList.remove("light");
  else if (isDarkOrAuto && !html.classList.contains("dark"))
    html.classList.add("dark");
  else if (isLightOrAuto && !html.classList.contains("light"))
    html.classList.add("light");
})();
/**
 * @license MIT
 * topbar 2.0.0, 2023-02-04
 * https://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
/*! Bundled license information:

preline/src/plugins/base-plugin/index.ts:
  (*
   * HSBasePlugin
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/copy-markup/index.ts:
  (*
   * HSCopyMarkup
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/accordion/index.ts:
  (*
   * HSAccordion
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/carousel/index.ts:
  (*
   * HSCarousel
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/collapse/index.ts:
  (*
   * HSCollapse
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/combobox/index.ts:
  (*
   * HSComboBox
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/dropdown/index.ts:
  (*
   * HSDropdown
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/input-number/index.ts:
  (*
   * HSInputNumber
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/overlay/index.ts:
  (*
   * HSOverlay
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/pin-input/index.ts:
  (*
   * HSPinInput
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/remove-element/index.ts:
  (*
   * HSRemoveElement
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/search-by-json/index.ts:
  (*
   * HSTogglePassword
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/scrollspy/index.ts:
  (*
   * HSScrollspy
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/select/index.ts:
  (*
   * HSSelect
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/stepper/index.ts:
  (*
   * HSStepper
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/strong-password/index.ts:
  (*
   * HSStrongPassword
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/tabs/index.ts:
  (*
   * HSTabs
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/theme-switch/index.ts:
  (*
   * HSThemeSwitch
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/toggle-count/index.ts:
  (*
   * HSToggleCount
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/toggle-password/index.ts:
  (*
   * HSTogglePassword
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/plugins/tooltip/index.ts:
  (*
   * HSTooltip
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)

preline/src/static/index.ts:
  (*
   * HSStaticMethods
   * @version: 2.1.0
   * @author: HTMLStream
   * @license: Licensed under MIT (https://preline.co/docs/license.html)
   * Copyright 2023 HTMLStream
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL3ZlbmRvci90b3BiYXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2h0bWwvcHJpdi9zdGF0aWMvcGhvZW5peF9odG1sLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC91dGlscy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wdXNoLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC90aW1lci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY2hhbm5lbC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvYWpheC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvbG9uZ3BvbGwuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3ByZXNlbmNlLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zZXJpYWxpemVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zb2NrZXQuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2VudHJ5X3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3V0aWxzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2Jyb3dzZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvYXJpYS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9qcy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb20uanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdXBsb2FkX2VudHJ5LmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2xpdmVfdXBsb2FkZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvaG9va3MuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvbm9kZV9tb2R1bGVzL21vcnBoZG9tL2Rpc3QvbW9ycGhkb20tZXNtLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wYXRjaC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9yZW5kZXJlZC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3X2hvb2suanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlldy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3NvY2tldC5qcyIsICIuLi8uLi8uLi9hc3NldHMvanMvYXBwLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvdXRpbHMvaW5kZXgudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9wbHVnaW5zL2Jhc2UtcGx1Z2luL2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9jb3B5LW1hcmt1cC9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvYWNjb3JkaW9uL2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9jYXJvdXNlbC9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvY29sbGFwc2UvaW5kZXgudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9jb25zdGFudHMudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9wbHVnaW5zL2NvbWJvYm94L2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2VudW1zLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXROb2RlTmFtZS5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9hcHBseVN0eWxlcy5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL21hdGguanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvdXNlckFnZW50LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc0xheW91dFZpZXdwb3J0LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldExheW91dFJlY3QuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2NvbnRhaW5zLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc1RhYmxlRWxlbWVudC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRQYXJlbnROb2RlLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL3dpdGhpbi5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRGcmVzaFNpZGVPYmplY3QuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2V4cGFuZFRvSGFzaE1hcC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvYXJyb3cuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0VmFyaWF0aW9uLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9jb21wdXRlU3R5bGVzLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9ldmVudExpc3RlbmVycy5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93U2Nyb2xsLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRWaWV3cG9ydFJlY3QuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldERvY3VtZW50UmVjdC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNTY3JvbGxQYXJlbnQuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFNjcm9sbFBhcmVudC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvbGlzdFNjcm9sbFBhcmVudHMuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Q2xpcHBpbmdSZWN0LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2NvbXB1dGVPZmZzZXRzLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2NvbXB1dGVBdXRvUGxhY2VtZW50LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9mbGlwLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9oaWRlLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9vZmZzZXQuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL3BvcHBlck9mZnNldHMuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0QWx0QXhpcy5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvcHJldmVudE92ZXJmbG93LmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRIVE1MRWxlbWVudFNjcm9sbC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZVNjcm9sbC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Q29tcG9zaXRlUmVjdC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9vcmRlck1vZGlmaWVycy5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tZXJnZUJ5TmFtZS5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9jcmVhdGVQb3BwZXIuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvcG9wcGVyLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9kcm9wZG93bi9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvaW5wdXQtbnVtYmVyL2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9vdmVybGF5L2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9waW4taW5wdXQvaW5kZXgudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9wbHVnaW5zL3JlbW92ZS1lbGVtZW50L2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9zZWFyY2gtYnktanNvbi9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvc2Nyb2xsc3B5L2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy9zZWxlY3QvaW5kZXgudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9wbHVnaW5zL3N0ZXBwZXIvaW5kZXgudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9wbHVnaW5zL3N0cm9uZy1wYXNzd29yZC9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvdGFicy9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvdGhlbWUtc3dpdGNoL2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvcHJlbGluZS9zcmMvcGx1Z2lucy90b2dnbGUtY291bnQvaW5kZXgudHMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9wcmVsaW5lL3NyYy9wbHVnaW5zL3RvZ2dsZS1wYXNzd29yZC9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3BsdWdpbnMvdG9vbHRpcC9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3NwYS9pbmRleC50cyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3ByZWxpbmUvc3JjL3N0YXRpYy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBAbGljZW5zZSBNSVRcbiAqIHRvcGJhciAyLjAuMCwgMjAyMy0wMi0wNFxuICogaHR0cHM6Ly9idXVuZ3V5ZW4uZ2l0aHViLmlvL3RvcGJhclxuICogQ29weXJpZ2h0IChjKSAyMDIxIEJ1dSBOZ3V5ZW5cbiAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50KSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC8xNTc5NjcxXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3RUaW1lID0gMDtcbiAgICB2YXIgdmVuZG9ycyA9IFtcIm1zXCIsIFwibW96XCIsIFwid2Via2l0XCIsIFwib1wiXTtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPVxuICAgICAgICB3aW5kb3dbdmVuZG9yc1t4XSArIFwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID1cbiAgICAgICAgd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdIHx8XG4gICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XG4gICAgfVxuICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTtcbiAgICAgICAgfSwgdGltZVRvQ2FsbCk7XG4gICAgICAgIGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKVxuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICB9O1xuICB9KSgpO1xuXG4gIHZhciBjYW52YXMsXG4gICAgY3VycmVudFByb2dyZXNzLFxuICAgIHNob3dpbmcsXG4gICAgcHJvZ3Jlc3NUaW1lcklkID0gbnVsbCxcbiAgICBmYWRlVGltZXJJZCA9IG51bGwsXG4gICAgZGVsYXlUaW1lcklkID0gbnVsbCxcbiAgICBhZGRFdmVudCA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyKSBlbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgICAgZWxzZSBpZiAoZWxlbS5hdHRhY2hFdmVudCkgZWxlbS5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBoYW5kbGVyKTtcbiAgICAgIGVsc2UgZWxlbVtcIm9uXCIgKyB0eXBlXSA9IGhhbmRsZXI7XG4gICAgfSxcbiAgICBvcHRpb25zID0ge1xuICAgICAgYXV0b1J1bjogdHJ1ZSxcbiAgICAgIGJhclRoaWNrbmVzczogMyxcbiAgICAgIGJhckNvbG9yczoge1xuICAgICAgICAwOiBcInJnYmEoMjYsICAxODgsIDE1NiwgLjkpXCIsXG4gICAgICAgIFwiLjI1XCI6IFwicmdiYSg1MiwgIDE1MiwgMjE5LCAuOSlcIixcbiAgICAgICAgXCIuNTBcIjogXCJyZ2JhKDI0MSwgMTk2LCAxNSwgIC45KVwiLFxuICAgICAgICBcIi43NVwiOiBcInJnYmEoMjMwLCAxMjYsIDM0LCAgLjkpXCIsXG4gICAgICAgIFwiMS4wXCI6IFwicmdiYSgyMTEsIDg0LCAgMCwgICAuOSlcIixcbiAgICAgIH0sXG4gICAgICBzaGFkb3dCbHVyOiAxMCxcbiAgICAgIHNoYWRvd0NvbG9yOiBcInJnYmEoMCwgICAwLCAgIDAsICAgLjYpXCIsXG4gICAgICBjbGFzc05hbWU6IG51bGwsXG4gICAgfSxcbiAgICByZXBhaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5iYXJUaGlja25lc3MgKiA1OyAvLyBuZWVkIHNwYWNlIGZvciBzaGFkb3dcblxuICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBjdHguc2hhZG93Qmx1ciA9IG9wdGlvbnMuc2hhZG93Qmx1cjtcbiAgICAgIGN0eC5zaGFkb3dDb2xvciA9IG9wdGlvbnMuc2hhZG93Q29sb3I7XG5cbiAgICAgIHZhciBsaW5lR3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTtcbiAgICAgIGZvciAodmFyIHN0b3AgaW4gb3B0aW9ucy5iYXJDb2xvcnMpXG4gICAgICAgIGxpbmVHcmFkaWVudC5hZGRDb2xvclN0b3Aoc3RvcCwgb3B0aW9ucy5iYXJDb2xvcnNbc3RvcF0pO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IG9wdGlvbnMuYmFyVGhpY2tuZXNzO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgY3R4Lm1vdmVUbygwLCBvcHRpb25zLmJhclRoaWNrbmVzcyAvIDIpO1xuICAgICAgY3R4LmxpbmVUbyhcbiAgICAgICAgTWF0aC5jZWlsKGN1cnJlbnRQcm9ncmVzcyAqIGNhbnZhcy53aWR0aCksXG4gICAgICAgIG9wdGlvbnMuYmFyVGhpY2tuZXNzIC8gMlxuICAgICAgKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGxpbmVHcmFkaWVudDtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9LFxuICAgIGNyZWF0ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICB2YXIgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICAgIHN0eWxlLnRvcCA9IHN0eWxlLmxlZnQgPSBzdHlsZS5yaWdodCA9IHN0eWxlLm1hcmdpbiA9IHN0eWxlLnBhZGRpbmcgPSAwO1xuICAgICAgc3R5bGUuekluZGV4ID0gMTAwMDAxO1xuICAgICAgc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgaWYgKG9wdGlvbnMuY2xhc3NOYW1lKSBjYW52YXMuY2xhc3NMaXN0LmFkZChvcHRpb25zLmNsYXNzTmFtZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICBhZGRFdmVudCh3aW5kb3csIFwicmVzaXplXCIsIHJlcGFpbnQpO1xuICAgIH0sXG4gICAgdG9wYmFyID0ge1xuICAgICAgY29uZmlnOiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cylcbiAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBvcHRpb25zW2tleV0gPSBvcHRzW2tleV07XG4gICAgICB9LFxuICAgICAgc2hvdzogZnVuY3Rpb24gKGRlbGF5KSB7XG4gICAgICAgIGlmIChzaG93aW5nKSByZXR1cm47XG4gICAgICAgIGlmIChkZWxheSkge1xuICAgICAgICAgIGlmIChkZWxheVRpbWVySWQpIHJldHVybjtcbiAgICAgICAgICBkZWxheVRpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRvcGJhci5zaG93KCksIGRlbGF5KTtcbiAgICAgICAgfSBlbHNlICB7XG4gICAgICAgICAgc2hvd2luZyA9IHRydWU7XG4gICAgICAgICAgaWYgKGZhZGVUaW1lcklkICE9PSBudWxsKSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoZmFkZVRpbWVySWQpO1xuICAgICAgICAgIGlmICghY2FudmFzKSBjcmVhdGVDYW52YXMoKTtcbiAgICAgICAgICBjYW52YXMuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgdG9wYmFyLnByb2dyZXNzKDApO1xuICAgICAgICAgIGlmIChvcHRpb25zLmF1dG9SdW4pIHtcbiAgICAgICAgICAgIChmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgICAgICBwcm9ncmVzc1RpbWVySWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICAgICAgICB0b3BiYXIucHJvZ3Jlc3MoXG4gICAgICAgICAgICAgICAgXCIrXCIgKyAwLjA1ICogTWF0aC5wb3coMSAtIE1hdGguc3FydChjdXJyZW50UHJvZ3Jlc3MpLCAyKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm9ncmVzczogZnVuY3Rpb24gKHRvKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdG8gPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBjdXJyZW50UHJvZ3Jlc3M7XG4gICAgICAgIGlmICh0eXBlb2YgdG8gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB0byA9XG4gICAgICAgICAgICAodG8uaW5kZXhPZihcIitcIikgPj0gMCB8fCB0by5pbmRleE9mKFwiLVwiKSA+PSAwXG4gICAgICAgICAgICAgID8gY3VycmVudFByb2dyZXNzXG4gICAgICAgICAgICAgIDogMCkgKyBwYXJzZUZsb2F0KHRvKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50UHJvZ3Jlc3MgPSB0byA+IDEgPyAxIDogdG87XG4gICAgICAgIHJlcGFpbnQoKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9ncmVzcztcbiAgICAgIH0sXG4gICAgICBoaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkZWxheVRpbWVySWQpO1xuICAgICAgICBkZWxheVRpbWVySWQgPSBudWxsO1xuICAgICAgICBpZiAoIXNob3dpbmcpIHJldHVybjtcbiAgICAgICAgc2hvd2luZyA9IGZhbHNlO1xuICAgICAgICBpZiAocHJvZ3Jlc3NUaW1lcklkICE9IG51bGwpIHtcbiAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUocHJvZ3Jlc3NUaW1lcklkKTtcbiAgICAgICAgICBwcm9ncmVzc1RpbWVySWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIChmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgIGlmICh0b3BiYXIucHJvZ3Jlc3MoXCIrLjFcIikgPj0gMSkge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLm9wYWNpdHkgLT0gMC4wNTtcbiAgICAgICAgICAgIGlmIChjYW52YXMuc3R5bGUub3BhY2l0eSA8PSAwLjA1KSB7XG4gICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIGZhZGVUaW1lcklkID0gbnVsbDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmYWRlVGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB0b3BiYXI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRvcGJhcjtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnRvcGJhciA9IHRvcGJhcjtcbiAgfVxufS5jYWxsKHRoaXMsIHdpbmRvdywgZG9jdW1lbnQpKTtcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgUG9seWZpbGxFdmVudCA9IGV2ZW50Q29uc3RydWN0b3IoKTtcblxuICBmdW5jdGlvbiBldmVudENvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB3aW5kb3cuQ3VzdG9tRXZlbnQ7XG4gICAgLy8gSUU8PTkgU3VwcG9ydFxuICAgIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7YnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZH07XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICBldnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9XG4gICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZEhpZGRlbklucHV0KG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGlucHV0Lm5hbWUgPSBuYW1lO1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZWxlbWVudCwgdGFyZ2V0TW9kaWZpZXJLZXkpIHtcbiAgICB2YXIgdG8gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9cIiksXG4gICAgICAgIG1ldGhvZCA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfbWV0aG9kXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpLFxuICAgICAgICBjc3JmID0gYnVpbGRIaWRkZW5JbnB1dChcIl9jc3JmX3Rva2VuXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jc3JmXCIpKSxcbiAgICAgICAgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLFxuICAgICAgICBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gICAgZm9ybS5tZXRob2QgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSA9PT0gXCJnZXRcIikgPyBcImdldFwiIDogXCJwb3N0XCI7XG4gICAgZm9ybS5hY3Rpb24gPSB0bztcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGlmICh0YXJnZXQpIGZvcm0udGFyZ2V0ID0gdGFyZ2V0O1xuICAgIGVsc2UgaWYgKHRhcmdldE1vZGlmaWVyS2V5KSBmb3JtLnRhcmdldCA9IFwiX2JsYW5rXCI7XG5cbiAgICBmb3JtLmFwcGVuZENoaWxkKGNzcmYpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQobWV0aG9kKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgLy8gSW5zZXJ0IGEgYnV0dG9uIGFuZCBjbGljayBpdCBpbnN0ZWFkIG9mIHVzaW5nIGBmb3JtLnN1Ym1pdGBcbiAgICAvLyBiZWNhdXNlIHRoZSBgc3VibWl0YCBmdW5jdGlvbiBkb2VzIG5vdCBlbWl0IGEgYHN1Ym1pdGAgZXZlbnQuXG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc3VibWl0KTtcbiAgICBzdWJtaXQuY2xpY2soKTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBwaG9lbml4TGlua0V2ZW50ID0gbmV3IFBvbHlmaWxsRXZlbnQoJ3Bob2VuaXgubGluay5jbGljaycsIHtcbiAgICAgICAgXCJidWJibGVzXCI6IHRydWUsIFwiY2FuY2VsYWJsZVwiOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFlbGVtZW50LmRpc3BhdGNoRXZlbnQocGhvZW5peExpbmtFdmVudCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b1wiKSkge1xuICAgICAgICBoYW5kbGVDbGljayhlbGVtZW50LCBlLm1ldGFLZXkgfHwgZS5zaGlmdEtleSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIGZhbHNlKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGhvZW5peC5saW5rLmNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgbWVzc2FnZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtY29uZmlybVwiKTtcbiAgICBpZihtZXNzYWdlICYmICF3aW5kb3cuY29uZmlybShtZXNzYWdlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwgZmFsc2UpO1xufSkoKTtcbiIsICIvLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbHVlKSA9PiB7XG4gIGlmKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKXtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICBsZXQgY2xvc3VyZSA9IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsdWUgfVxuICAgIHJldHVybiBjbG9zdXJlXG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgZ2xvYmFsU2VsZiA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IG51bGxcbmV4cG9ydCBjb25zdCBwaHhXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogbnVsbFxuZXhwb3J0IGNvbnN0IGdsb2JhbCA9IGdsb2JhbFNlbGYgfHwgcGh4V2luZG93IHx8IGdsb2JhbFxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVlNOID0gXCIyLjAuMFwiXG5leHBvcnQgY29uc3QgU09DS0VUX1NUQVRFUyA9IHtjb25uZWN0aW5nOiAwLCBvcGVuOiAxLCBjbG9zaW5nOiAyLCBjbG9zZWQ6IDN9XG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FT1VUID0gMTAwMDBcbmV4cG9ydCBjb25zdCBXU19DTE9TRV9OT1JNQUwgPSAxMDAwXG5leHBvcnQgY29uc3QgQ0hBTk5FTF9TVEFURVMgPSB7XG4gIGNsb3NlZDogXCJjbG9zZWRcIixcbiAgZXJyb3JlZDogXCJlcnJvcmVkXCIsXG4gIGpvaW5lZDogXCJqb2luZWRcIixcbiAgam9pbmluZzogXCJqb2luaW5nXCIsXG4gIGxlYXZpbmc6IFwibGVhdmluZ1wiLFxufVxuZXhwb3J0IGNvbnN0IENIQU5ORUxfRVZFTlRTID0ge1xuICBjbG9zZTogXCJwaHhfY2xvc2VcIixcbiAgZXJyb3I6IFwicGh4X2Vycm9yXCIsXG4gIGpvaW46IFwicGh4X2pvaW5cIixcbiAgcmVwbHk6IFwicGh4X3JlcGx5XCIsXG4gIGxlYXZlOiBcInBoeF9sZWF2ZVwiXG59XG5cbmV4cG9ydCBjb25zdCBUUkFOU1BPUlRTID0ge1xuICBsb25ncG9sbDogXCJsb25ncG9sbFwiLFxuICB3ZWJzb2NrZXQ6IFwid2Vic29ja2V0XCJcbn1cbmV4cG9ydCBjb25zdCBYSFJfU1RBVEVTID0ge1xuICBjb21wbGV0ZTogNFxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFB1c2hcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQsIGZvciBleGFtcGxlIGBcInBoeF9qb2luXCJgXG4gKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCAtIFRoZSBwYXlsb2FkLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IDEyM31gXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCAtIFRoZSBwdXNoIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1c2gge1xuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBldmVudCwgcGF5bG9hZCwgdGltZW91dCl7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuZXZlbnQgPSBldmVudFxuICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQgfHwgZnVuY3Rpb24gKCl7IHJldHVybiB7fSB9XG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICAgIHRoaXMucmVjSG9va3MgPSBbXVxuICAgIHRoaXMuc2VudCA9IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRcbiAgICovXG4gIHJlc2VuZCh0aW1lb3V0KXtcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy5yZXNldCgpXG4gICAgdGhpcy5zZW5kKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc2VuZCgpe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoXCJ0aW1lb3V0XCIpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnN0YXJ0VGltZW91dCgpXG4gICAgdGhpcy5zZW50ID0gdHJ1ZVxuICAgIHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7XG4gICAgICB0b3BpYzogdGhpcy5jaGFubmVsLnRvcGljLFxuICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQoKSxcbiAgICAgIHJlZjogdGhpcy5yZWYsXG4gICAgICBqb2luX3JlZjogdGhpcy5jaGFubmVsLmpvaW5SZWYoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBzdGF0dXNcbiAgICogQHBhcmFtIHsqfSBjYWxsYmFja1xuICAgKi9cbiAgcmVjZWl2ZShzdGF0dXMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmhhc1JlY2VpdmVkKHN0YXR1cykpe1xuICAgICAgY2FsbGJhY2sodGhpcy5yZWNlaXZlZFJlc3AucmVzcG9uc2UpXG4gICAgfVxuXG4gICAgdGhpcy5yZWNIb29rcy5wdXNoKHtzdGF0dXMsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXNldCgpe1xuICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgIHRoaXMucmVmID0gbnVsbFxuICAgIHRoaXMucmVmRXZlbnQgPSBudWxsXG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF0Y2hSZWNlaXZlKHtzdGF0dXMsIHJlc3BvbnNlLCBfcmVmfSl7XG4gICAgdGhpcy5yZWNIb29rcy5maWx0ZXIoaCA9PiBoLnN0YXR1cyA9PT0gc3RhdHVzKVxuICAgICAgLmZvckVhY2goaCA9PiBoLmNhbGxiYWNrKHJlc3BvbnNlKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuY2VsUmVmRXZlbnQoKXtcbiAgICBpZighdGhpcy5yZWZFdmVudCl7IHJldHVybiB9XG4gICAgdGhpcy5jaGFubmVsLm9mZih0aGlzLnJlZkV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFRpbWVyKVxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydFRpbWVvdXQoKXtcbiAgICBpZih0aGlzLnRpbWVvdXRUaW1lcil7IHRoaXMuY2FuY2VsVGltZW91dCgpIH1cbiAgICB0aGlzLnJlZiA9IHRoaXMuY2hhbm5lbC5zb2NrZXQubWFrZVJlZigpXG4gICAgdGhpcy5yZWZFdmVudCA9IHRoaXMuY2hhbm5lbC5yZXBseUV2ZW50TmFtZSh0aGlzLnJlZilcblxuICAgIHRoaXMuY2hhbm5lbC5vbih0aGlzLnJlZkV2ZW50LCBwYXlsb2FkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgICAgdGhpcy5jYW5jZWxUaW1lb3V0KClcbiAgICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gcGF5bG9hZFxuICAgICAgdGhpcy5tYXRjaFJlY2VpdmUocGF5bG9hZClcbiAgICB9KVxuXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcihcInRpbWVvdXRcIiwge30pXG4gICAgfSwgdGhpcy50aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXNSZWNlaXZlZChzdGF0dXMpe1xuICAgIHJldHVybiB0aGlzLnJlY2VpdmVkUmVzcCAmJiB0aGlzLnJlY2VpdmVkUmVzcC5zdGF0dXMgPT09IHN0YXR1c1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKHN0YXR1cywgcmVzcG9uc2Upe1xuICAgIHRoaXMuY2hhbm5lbC50cmlnZ2VyKHRoaXMucmVmRXZlbnQsIHtzdGF0dXMsIHJlc3BvbnNlfSlcbiAgfVxufVxuIiwgIi8qKlxuICpcbiAqIENyZWF0ZXMgYSB0aW1lciB0aGF0IGFjY2VwdHMgYSBgdGltZXJDYWxjYCBmdW5jdGlvbiB0byBwZXJmb3JtXG4gKiBjYWxjdWxhdGVkIHRpbWVvdXQgcmV0cmllcywgc3VjaCBhcyBleHBvbmVudGlhbCBiYWNrb2ZmLlxuICpcbiAqIEBleGFtcGxlXG4gKiBsZXQgcmVjb25uZWN0VGltZXIgPSBuZXcgVGltZXIoKCkgPT4gdGhpcy5jb25uZWN0KCksIGZ1bmN0aW9uKHRyaWVzKXtcbiAqICAgcmV0dXJuIFsxMDAwLCA1MDAwLCAxMDAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICogfSlcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDUwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXJDYWxjXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyIHtcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHRpbWVyQ2FsYyl7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gICAgdGhpcy50aW1lckNhbGMgPSB0aW1lckNhbGNcbiAgICB0aGlzLnRpbWVyID0gbnVsbFxuICAgIHRoaXMudHJpZXMgPSAwXG4gIH1cblxuICByZXNldCgpe1xuICAgIHRoaXMudHJpZXMgPSAwXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbnkgcHJldmlvdXMgc2NoZWR1bGVUaW1lb3V0IGFuZCBzY2hlZHVsZXMgY2FsbGJhY2tcbiAgICovXG4gIHNjaGVkdWxlVGltZW91dCgpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKVxuXG4gICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmllcyA9IHRoaXMudHJpZXMgKyAxXG4gICAgICB0aGlzLmNhbGxiYWNrKClcbiAgICB9LCB0aGlzLnRpbWVyQ2FsYyh0aGlzLnRyaWVzICsgMSkpXG4gIH1cbn1cbiIsICJpbXBvcnQge2Nsb3N1cmV9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTLFxuICBDSEFOTkVMX1NUQVRFUyxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IFB1c2ggZnJvbSBcIi4vcHVzaFwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IHBhcmFtc1xuICogQHBhcmFtIHtTb2NrZXR9IHNvY2tldFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFubmVsIHtcbiAgY29uc3RydWN0b3IodG9waWMsIHBhcmFtcywgc29ja2V0KXtcbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgdGhpcy50b3BpYyA9IHRvcGljXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKHBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLnNvY2tldCA9IHNvY2tldFxuICAgIHRoaXMuYmluZGluZ3MgPSBbXVxuICAgIHRoaXMuYmluZGluZ1JlZiA9IDBcbiAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnNvY2tldC50aW1lb3V0XG4gICAgdGhpcy5qb2luZWRPbmNlID0gZmFsc2VcbiAgICB0aGlzLmpvaW5QdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMuam9pbiwgdGhpcy5wYXJhbXMsIHRoaXMudGltZW91dClcbiAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VSZWZzID0gW11cblxuICAgIHRoaXMucmVqb2luVGltZXIgPSBuZXcgVGltZXIoKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luKCkgfVxuICAgIH0sIHRoaXMuc29ja2V0LnJlam9pbkFmdGVyTXMpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkVycm9yKCgpID0+IHRoaXMucmVqb2luVGltZXIucmVzZXQoKSkpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbk9wZW4oKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLmlzRXJyb3JlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSlcbiAgICApXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5lZFxuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIuZm9yRWFjaChwdXNoRXZlbnQgPT4gcHVzaEV2ZW50LnNlbmQoKSlcbiAgICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5vbkNsb3NlKCgpID0+IHtcbiAgICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGNsb3NlICR7dGhpcy50b3BpY30gJHt0aGlzLmpvaW5SZWYoKX1gKVxuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmNsb3NlZFxuICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlKHRoaXMpXG4gICAgfSlcbiAgICB0aGlzLm9uRXJyb3IocmVhc29uID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBlcnJvciAke3RoaXMudG9waWN9YCwgcmVhc29uKVxuICAgICAgaWYodGhpcy5pc0pvaW5pbmcoKSl7IHRoaXMuam9pblB1c2gucmVzZXQoKSB9XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgdGltZW91dCAke3RoaXMudG9waWN9ICgke3RoaXMuam9pblJlZigpfSlgLCB0aGlzLmpvaW5QdXNoLnRpbWVvdXQpXG4gICAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aGlzLnRpbWVvdXQpXG4gICAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgdGhpcy5qb2luUHVzaC5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uKENIQU5ORUxfRVZFTlRTLnJlcGx5LCAocGF5bG9hZCwgcmVmKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXIodGhpcy5yZXBseUV2ZW50TmFtZShyZWYpLCBwYXlsb2FkKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSm9pbiB0aGUgY2hhbm5lbFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmllZCB0byBqb2luIG11bHRpcGxlIHRpbWVzLiAnam9pbicgY2FuIG9ubHkgYmUgY2FsbGVkIGEgc2luZ2xlIHRpbWUgcGVyIGNoYW5uZWwgaW5zdGFuY2VcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgICAgdGhpcy5qb2luZWRPbmNlID0gdHJ1ZVxuICAgICAgdGhpcy5yZWpvaW4oKVxuICAgICAgcmV0dXJuIHRoaXMuam9pblB1c2hcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgY2xvc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuY2xvc2UsIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIEhvb2sgaW50byBjaGFubmVsIGVycm9yc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgcmV0dXJuIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuZXJyb3IsIHJlYXNvbiA9PiBjYWxsYmFjayhyZWFzb24pKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgb24gY2hhbm5lbCBldmVudHNcbiAgICpcbiAgICogU3Vic2NyaXB0aW9uIHJldHVybnMgYSByZWYgY291bnRlciwgd2hpY2ggY2FuIGJlIHVzZWQgbGF0ZXIgdG9cbiAgICogdW5zdWJzY3JpYmUgdGhlIGV4YWN0IGV2ZW50IGxpc3RlbmVyXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNvbnN0IHJlZjIgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fb3RoZXJfc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICogLy8gU2luY2UgdW5zdWJzY3JpcHRpb24sIGRvX3N0dWZmIHdvbid0IGZpcmUsXG4gICAqIC8vIHdoaWxlIGRvX290aGVyX3N0dWZmIHdpbGwga2VlcCBmaXJpbmcgb24gdGhlIFwiZXZlbnRcIlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5iaW5kaW5nUmVmKytcbiAgICB0aGlzLmJpbmRpbmdzLnB1c2goe2V2ZW50LCByZWYsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmVzIG9mZiBvZiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBVc2UgdGhlIHJlZiByZXR1cm5lZCBmcm9tIGEgY2hhbm5lbC5vbigpIHRvIHVuc3Vic2NyaWJlIG9uZVxuICAgKiBoYW5kbGVyLCBvciBwYXNzIG5vdGhpbmcgZm9yIHRoZSByZWYgdG8gdW5zdWJzY3JpYmUgYWxsXG4gICAqIGhhbmRsZXJzIGZvciB0aGUgZ2l2ZW4gZXZlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVuc3Vic2NyaWJlIHRoZSBkb19zdHVmZiBoYW5kbGVyXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICpcbiAgICogLy8gVW5zdWJzY3JpYmUgYWxsIGhhbmRsZXJzIGZyb20gZXZlbnRcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiKVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSByZWZcbiAgICovXG4gIG9mZihldmVudCwgcmVmKXtcbiAgICB0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoKGJpbmQpID0+IHtcbiAgICAgIHJldHVybiAhKGJpbmQuZXZlbnQgPT09IGV2ZW50ICYmICh0eXBlb2YgcmVmID09PSBcInVuZGVmaW5lZFwiIHx8IHJlZiA9PT0gYmluZC5yZWYpKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhblB1c2goKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5pc0pvaW5lZCgpIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIGBldmVudGAgdG8gcGhvZW5peCB3aXRoIHRoZSBwYXlsb2FkIGBwYXlsb2FkYC5cbiAgICogUGhvZW5peCByZWNlaXZlcyB0aGlzIGluIHRoZSBgaGFuZGxlX2luKGV2ZW50LCBwYXlsb2FkLCBzb2NrZXQpYFxuICAgKiBmdW5jdGlvbi4gaWYgcGhvZW5peCByZXBsaWVzIG9yIGl0IHRpbWVzIG91dCAoZGVmYXVsdCAxMDAwMG1zKSxcbiAgICogdGhlbiBvcHRpb25hbGx5IHRoZSByZXBseSBjYW4gYmUgcmVjZWl2ZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwucHVzaChcImV2ZW50XCIpXG4gICAqICAgLnJlY2VpdmUoXCJva1wiLCBwYXlsb2FkID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCByZXBsaWVkOlwiLCBwYXlsb2FkKSlcbiAgICogICAucmVjZWl2ZShcImVycm9yXCIsIGVyciA9PiBjb25zb2xlLmxvZyhcInBob2VuaXggZXJyb3JlZFwiLCBlcnIpKVxuICAgKiAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiBjb25zb2xlLmxvZyhcInRpbWVkIG91dCBwdXNoaW5nXCIpKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lb3V0XVxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIHB1c2goZXZlbnQsIHBheWxvYWQsIHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9XG4gICAgaWYoIXRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRyaWVkIHRvIHB1c2ggJyR7ZXZlbnR9JyB0byAnJHt0aGlzLnRvcGljfScgYmVmb3JlIGpvaW5pbmcuIFVzZSBjaGFubmVsLmpvaW4oKSBiZWZvcmUgcHVzaGluZyBldmVudHNgKVxuICAgIH1cbiAgICBsZXQgcHVzaEV2ZW50ID0gbmV3IFB1c2godGhpcywgZXZlbnQsIGZ1bmN0aW9uICgpeyByZXR1cm4gcGF5bG9hZCB9LCB0aW1lb3V0KVxuICAgIGlmKHRoaXMuY2FuUHVzaCgpKXtcbiAgICAgIHB1c2hFdmVudC5zZW5kKClcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEV2ZW50LnN0YXJ0VGltZW91dCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIucHVzaChwdXNoRXZlbnQpXG4gICAgfVxuXG4gICAgcmV0dXJuIHB1c2hFdmVudFxuICB9XG5cbiAgLyoqIExlYXZlcyB0aGUgY2hhbm5lbFxuICAgKlxuICAgKiBVbnN1YnNjcmliZXMgZnJvbSBzZXJ2ZXIgZXZlbnRzLCBhbmRcbiAgICogaW5zdHJ1Y3RzIGNoYW5uZWwgdG8gdGVybWluYXRlIG9uIHNlcnZlclxuICAgKlxuICAgKiBUcmlnZ2VycyBvbkNsb3NlKCkgaG9va3NcbiAgICpcbiAgICogVG8gcmVjZWl2ZSBsZWF2ZSBhY2tub3dsZWRnZW1lbnRzLCB1c2UgdGhlIGByZWNlaXZlYFxuICAgKiBob29rIHRvIGJpbmQgdG8gdGhlIHNlcnZlciBhY2ssIGllOlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjaGFubmVsLmxlYXZlKCkucmVjZWl2ZShcIm9rXCIsICgpID0+IGFsZXJ0KFwibGVmdCFcIikgKVxuICAgKlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBsZWF2ZSh0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICB0aGlzLmpvaW5QdXNoLmNhbmNlbFRpbWVvdXQoKVxuXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmxlYXZpbmdcbiAgICBsZXQgb25DbG9zZSA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBsZWF2ZSAke3RoaXMudG9waWN9YClcbiAgICAgIHRoaXMudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgXCJsZWF2ZVwiKVxuICAgIH1cbiAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aW1lb3V0KVxuICAgIGxlYXZlUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IG9uQ2xvc2UoKSlcbiAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgaWYoIXRoaXMuY2FuUHVzaCgpKXsgbGVhdmVQdXNoLnRyaWdnZXIoXCJva1wiLCB7fSkgfVxuXG4gICAgcmV0dXJuIGxlYXZlUHVzaFxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRhYmxlIG1lc3NhZ2UgaG9va1xuICAgKlxuICAgKiBSZWNlaXZlcyBhbGwgZXZlbnRzIGZvciBzcGVjaWFsaXplZCBtZXNzYWdlIGhhbmRsaW5nXG4gICAqIGJlZm9yZSBkaXNwYXRjaGluZyB0byB0aGUgY2hhbm5lbCBjYWxsYmFja3MuXG4gICAqXG4gICAqIE11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgb25NZXNzYWdlKF9ldmVudCwgcGF5bG9hZCwgX3JlZil7IHJldHVybiBwYXlsb2FkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzTWVtYmVyKHRvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZil7XG4gICAgaWYodGhpcy50b3BpYyAhPT0gdG9waWMpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgaWYoam9pblJlZiAmJiBqb2luUmVmICE9PSB0aGlzLmpvaW5SZWYoKSl7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBcImRyb3BwaW5nIG91dGRhdGVkIG1lc3NhZ2VcIiwge3RvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZn0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGpvaW5SZWYoKXsgcmV0dXJuIHRoaXMuam9pblB1c2gucmVmIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlam9pbih0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICBpZih0aGlzLmlzTGVhdmluZygpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnNvY2tldC5sZWF2ZU9wZW5Ub3BpYyh0aGlzLnRvcGljKVxuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nXG4gICAgdGhpcy5qb2luUHVzaC5yZXNlbmQodGltZW91dClcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKXtcbiAgICBsZXQgaGFuZGxlZFBheWxvYWQgPSB0aGlzLm9uTWVzc2FnZShldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKVxuICAgIGlmKHBheWxvYWQgJiYgIWhhbmRsZWRQYXlsb2FkKXsgdGhyb3cgbmV3IEVycm9yKFwiY2hhbm5lbCBvbk1lc3NhZ2UgY2FsbGJhY2tzIG11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXCIpIH1cblxuICAgIGxldCBldmVudEJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoYmluZCA9PiBiaW5kLmV2ZW50ID09PSBldmVudClcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBldmVudEJpbmRpbmdzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGxldCBiaW5kID0gZXZlbnRCaW5kaW5nc1tpXVxuICAgICAgYmluZC5jYWxsYmFjayhoYW5kbGVkUGF5bG9hZCwgcmVmLCBqb2luUmVmIHx8IHRoaXMuam9pblJlZigpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVwbHlFdmVudE5hbWUocmVmKXsgcmV0dXJuIGBjaGFuX3JlcGx5XyR7cmVmfWAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNDbG9zZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmNsb3NlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Vycm9yZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmVycm9yZWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNKb2luZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5lZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5pbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5pbmcgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNMZWF2aW5nKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5sZWF2aW5nIH1cbn1cbiIsICJpbXBvcnQge1xuICBnbG9iYWwsXG4gIFhIUl9TVEFURVNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWpheCB7XG5cbiAgc3RhdGljIHJlcXVlc3QobWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBpZihnbG9iYWwuWERvbWFpblJlcXVlc3Qpe1xuICAgICAgbGV0IHJlcSA9IG5ldyBnbG9iYWwuWERvbWFpblJlcXVlc3QoKSAvLyBJRTgsIElFOVxuICAgICAgcmV0dXJuIHRoaXMueGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpIC8vIElFNyssIEZpcmVmb3gsIENocm9tZSwgT3BlcmEsIFNhZmFyaVxuICAgICAgcmV0dXJuIHRoaXMueGhyUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjaylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgeGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEudGltZW91dCA9IHRpbWVvdXRcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50KVxuICAgIHJlcS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgLy8gV29yayBhcm91bmQgYnVnIGluIElFOSB0aGF0IHJlcXVpcmVzIGFuIGF0dGFjaGVkIG9ucHJvZ3Jlc3MgaGFuZGxlclxuICAgIHJlcS5vbnByb2dyZXNzID0gKCkgPT4geyB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyB4aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50LCB0cnVlKVxuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIGFjY2VwdClcbiAgICByZXEub25lcnJvciA9ICgpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwpXG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmKHJlcS5yZWFkeVN0YXRlID09PSBYSFJfU1RBVEVTLmNvbXBsZXRlICYmIGNhbGxiYWNrKXtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gdGhpcy5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dClcbiAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgICB9XG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgcmVxLnNlbmQoYm9keSlcbiAgICByZXR1cm4gcmVxXG4gIH1cblxuICBzdGF0aWMgcGFyc2VKU09OKHJlc3Ape1xuICAgIGlmKCFyZXNwIHx8IHJlc3AgPT09IFwiXCIpeyByZXR1cm4gbnVsbCB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcClcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJmYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZVwiLCByZXNwKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplKG9iaiwgcGFyZW50S2V5KXtcbiAgICBsZXQgcXVlcnlTdHIgPSBbXVxuICAgIGZvcih2YXIga2V5IGluIG9iail7XG4gICAgICBpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSl7IGNvbnRpbnVlIH1cbiAgICAgIGxldCBwYXJhbUtleSA9IHBhcmVudEtleSA/IGAke3BhcmVudEtleX1bJHtrZXl9XWAgOiBrZXlcbiAgICAgIGxldCBwYXJhbVZhbCA9IG9ialtrZXldXG4gICAgICBpZih0eXBlb2YgcGFyYW1WYWwgPT09IFwib2JqZWN0XCIpe1xuICAgICAgICBxdWVyeVN0ci5wdXNoKHRoaXMuc2VyaWFsaXplKHBhcmFtVmFsLCBwYXJhbUtleSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWVyeVN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwYXJhbUtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbVZhbCkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWVyeVN0ci5qb2luKFwiJlwiKVxuICB9XG5cbiAgc3RhdGljIGFwcGVuZFBhcmFtcyh1cmwsIHBhcmFtcyl7XG4gICAgaWYoT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGggPT09IDApeyByZXR1cm4gdXJsIH1cblxuICAgIGxldCBwcmVmaXggPSB1cmwubWF0Y2goL1xcPy8pID8gXCImXCIgOiBcIj9cIlxuICAgIHJldHVybiBgJHt1cmx9JHtwcmVmaXh9JHt0aGlzLnNlcmlhbGl6ZShwYXJhbXMpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFNPQ0tFVF9TVEFURVMsXG4gIFRSQU5TUE9SVFNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEFqYXggZnJvbSBcIi4vYWpheFwiXG5cbmxldCBhcnJheUJ1ZmZlclRvQmFzZTY0ID0gKGJ1ZmZlcikgPT4ge1xuICBsZXQgYmluYXJ5ID0gXCJcIlxuICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShidWZmZXIpXG4gIGxldCBsZW4gPSBieXRlcy5ieXRlTGVuZ3RoXG4gIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKyl7IGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKSB9XG4gIHJldHVybiBidG9hKGJpbmFyeSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICAvLyB3ZSBtdXN0IHdhaXQgZm9yIHRoZSBjYWxsZXIgdG8gZmluaXNoIHNldHRpbmcgdXAgb3VyIGNhbGxiYWNrcyBhbmQgdGltZW91dCBwcm9wZXJ0aWVzXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnBvbGwoKSwgMClcbiAgfVxuXG4gIG5vcm1hbGl6ZUVuZHBvaW50KGVuZFBvaW50KXtcbiAgICByZXR1cm4gKGVuZFBvaW50XG4gICAgICAucmVwbGFjZShcIndzOi8vXCIsIFwiaHR0cDovL1wiKVxuICAgICAgLnJlcGxhY2UoXCJ3c3M6Ly9cIiwgXCJodHRwczovL1wiKVxuICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cChcIiguKilcXC9cIiArIFRSQU5TUE9SVFMud2Vic29ja2V0KSwgXCIkMS9cIiArIFRSQU5TUE9SVFMubG9uZ3BvbGwpKVxuICB9XG5cbiAgZW5kcG9pbnRVUkwoKXtcbiAgICByZXR1cm4gQWpheC5hcHBlbmRQYXJhbXModGhpcy5wb2xsRW5kcG9pbnQsIHt0b2tlbjogdGhpcy50b2tlbn0pXG4gIH1cblxuICBjbG9zZUFuZFJldHJ5KGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIHRoaXMuY2xvc2UoY29kZSwgcmVhc29uLCB3YXNDbGVhbilcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgfVxuXG4gIG9udGltZW91dCgpe1xuICAgIHRoaXMub25lcnJvcihcInRpbWVvdXRcIilcbiAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAwNSwgXCJ0aW1lb3V0XCIsIGZhbHNlKVxuICB9XG5cbiAgaXNBY3RpdmUoKXsgcmV0dXJuIHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5vcGVuIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nIH1cblxuICBwb2xsKCl7XG4gICAgdGhpcy5hamF4KFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiLCBudWxsLCAoKSA9PiB0aGlzLm9udGltZW91dCgpLCByZXNwID0+IHtcbiAgICAgIGlmKHJlc3Ape1xuICAgICAgICB2YXIge3N0YXR1cywgdG9rZW4sIG1lc3NhZ2VzfSA9IHJlc3BcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSAwXG4gICAgICB9XG5cbiAgICAgIHN3aXRjaChzdGF0dXMpe1xuICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKG1zZyA9PiB7XG4gICAgICAgICAgICAvLyBUYXNrcyBhcmUgd2hhdCB0aGluZ3MgbGlrZSBldmVudCBoYW5kbGVycywgc2V0VGltZW91dCBjYWxsYmFja3MsXG4gICAgICAgICAgICAvLyBwcm9taXNlIHJlc29sdmVzIGFuZCBtb3JlIGFyZSBydW4gd2l0aGluLlxuICAgICAgICAgICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzLCB0aGVyZSBhcmUgdHdvIGRpZmZlcmVudCBraW5kcyBvZiB0YXNrcyxcbiAgICAgICAgICAgIC8vIG1pY3JvdGFza3MgYW5kIG1hY3JvdGFza3MuXG4gICAgICAgICAgICAvLyBNaWNyb3Rhc2tzIGFyZSBtYWlubHkgdXNlZCBmb3IgUHJvbWlzZXMsIHdoaWxlIG1hY3JvdGFza3MgYXJlXG4gICAgICAgICAgICAvLyB1c2VkIGZvciBldmVyeXRoaW5nIGVsc2UuXG4gICAgICAgICAgICAvLyBNaWNyb3Rhc2tzIGFsd2F5cyBoYXZlIHByaW9yaXR5IG92ZXIgbWFjcm90YXNrcy4gSWYgdGhlIEpTIGVuZ2luZVxuICAgICAgICAgICAgLy8gaXMgbG9va2luZyBmb3IgYSB0YXNrIHRvIHJ1biwgaXQgd2lsbCBhbHdheXMgdHJ5IHRvIGVtcHR5IHRoZVxuICAgICAgICAgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJlZm9yZSBhdHRlbXB0aW5nIHRvIHJ1biBhbnl0aGluZyBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gbWFjcm90YXNrIHF1ZXVlLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCwgbWVzc2FnZXMgYWx3YXlzIGFycml2ZSBpbiB0aGVpciBvd25cbiAgICAgICAgICAgIC8vIGV2ZW50LiBUaGlzIG1lYW5zIHRoYXQgaWYgYW55IHByb21pc2VzIGFyZSByZXNvbHZlZCBmcm9tIHdpdGhpbixcbiAgICAgICAgICAgIC8vIHRoZWlyIGNhbGxiYWNrcyB3aWxsIGFsd2F5cyBmaW5pc2ggZXhlY3V0aW9uIGJ5IHRoZSB0aW1lIHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBtZXNzYWdlIGV2ZW50IGhhbmRsZXIgaXMgcnVuLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIGVtdWxhdGUgdGhpcyBiZWhhdmlvdXIsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGVhY2hcbiAgICAgICAgICAgIC8vIG9ubWVzc2FnZSBoYW5kbGVyIGlzIHJ1biB3aXRoaW4gaXRzIG93biBtYWNyb3Rhc2suXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMub25tZXNzYWdlKHtkYXRhOiBtc2d9KSwgMClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyMDQ6XG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQxMDpcbiAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLm9wZW5cbiAgICAgICAgICB0aGlzLm9ub3Blbih7fSlcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDAzOlxuICAgICAgICAgIHRoaXMub25lcnJvcig0MDMpXG4gICAgICAgICAgdGhpcy5jbG9zZSgxMDA4LCBcImZvcmJpZGRlblwiLCBmYWxzZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgIHRoaXMub25lcnJvcig1MDApXG4gICAgICAgICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMTEsIFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCIsIDUwMClcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYHVuaGFuZGxlZCBwb2xsIHN0YXR1cyAke3N0YXR1c31gKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyB3ZSBjb2xsZWN0IGFsbCBwdXNoZXMgd2l0aGluIHRoZSBjdXJyZW50IGV2ZW50IGxvb3AgYnlcbiAgLy8gc2V0VGltZW91dCAwLCB3aGljaCBvcHRpbWl6ZXMgYmFjay10by1iYWNrIHByb2NlZHVyYWxcbiAgLy8gcHVzaGVzIGFnYWluc3QgYW4gZW1wdHkgYnVmZmVyXG5cbiAgc2VuZChib2R5KXtcbiAgICBpZih0eXBlb2YoYm9keSkgIT09IFwic3RyaW5nXCIpeyBib2R5ID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChib2R5KSB9XG4gICAgaWYodGhpcy5jdXJyZW50QmF0Y2gpe1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2gucHVzaChib2R5KVxuICAgIH0gZWxzZSBpZih0aGlzLmF3YWl0aW5nQmF0Y2hBY2spe1xuICAgICAgdGhpcy5iYXRjaEJ1ZmZlci5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gW2JvZHldXG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hTZW5kKHRoaXMuY3VycmVudEJhdGNoKVxuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IG51bGxcbiAgICAgIH0sIDApXG4gICAgfVxuICB9XG5cbiAgYmF0Y2hTZW5kKG1lc3NhZ2VzKXtcbiAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSB0cnVlXG4gICAgdGhpcy5hamF4KFwiUE9TVFwiLCBcImFwcGxpY2F0aW9uL3gtbmRqc29uXCIsIG1lc3NhZ2VzLmpvaW4oXCJcXG5cIiksICgpID0+IHRoaXMub25lcnJvcihcInRpbWVvdXRcIiksIHJlc3AgPT4ge1xuICAgICAgdGhpcy5hd2FpdGluZ0JhdGNoQWNrID0gZmFsc2VcbiAgICAgIGlmKCFyZXNwIHx8IHJlc3Auc3RhdHVzICE9PSAyMDApe1xuICAgICAgICB0aGlzLm9uZXJyb3IocmVzcCAmJiByZXNwLnN0YXR1cylcbiAgICAgICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMTEsIFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCIsIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmKHRoaXMuYmF0Y2hCdWZmZXIubGVuZ3RoID4gMCl7XG4gICAgICAgIHRoaXMuYmF0Y2hTZW5kKHRoaXMuYmF0Y2hCdWZmZXIpXG4gICAgICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKXtcbiAgICBmb3IobGV0IHJlcSBvZiB0aGlzLnJlcXMpeyByZXEuYWJvcnQoKSB9XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5jbG9zZWRcbiAgICBsZXQgb3B0cyA9IE9iamVjdC5hc3NpZ24oe2NvZGU6IDEwMDAsIHJlYXNvbjogdW5kZWZpbmVkLCB3YXNDbGVhbjogdHJ1ZX0sIHtjb2RlLCByZWFzb24sIHdhc0NsZWFufSlcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50QmF0Y2hUaW1lcilcbiAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gbnVsbFxuICAgIGlmKHR5cGVvZihDbG9zZUV2ZW50KSAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICB0aGlzLm9uY2xvc2UobmV3IENsb3NlRXZlbnQoXCJjbG9zZVwiLCBvcHRzKSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbmNsb3NlKG9wdHMpXG4gICAgfVxuICB9XG5cbiAgYWpheChtZXRob2QsIGNvbnRlbnRUeXBlLCBib2R5LCBvbkNhbGxlclRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVxXG4gICAgbGV0IG9udGltZW91dCA9ICgpID0+IHtcbiAgICAgIHRoaXMucmVxcy5kZWxldGUocmVxKVxuICAgICAgb25DYWxsZXJUaW1lb3V0KClcbiAgICB9XG4gICAgcmVxID0gQWpheC5yZXF1ZXN0KG1ldGhvZCwgdGhpcy5lbmRwb2ludFVSTCgpLCBjb250ZW50VHlwZSwgYm9keSwgdGhpcy50aW1lb3V0LCBvbnRpbWVvdXQsIHJlc3AgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBpZih0aGlzLmlzQWN0aXZlKCkpeyBjYWxsYmFjayhyZXNwKSB9XG4gICAgfSlcbiAgICB0aGlzLnJlcXMuYWRkKHJlcSlcbiAgfVxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFByZXNlbmNlXG4gKiBAcGFyYW0ge0NoYW5uZWx9IGNoYW5uZWwgLSBUaGUgQ2hhbm5lbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgb3B0aW9ucyxcbiAqICAgICAgICBmb3IgZXhhbXBsZSBge2V2ZW50czoge3N0YXRlOiBcInN0YXRlXCIsIGRpZmY6IFwiZGlmZlwifX1gXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbmNlIHtcblxuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBvcHRzID0ge30pe1xuICAgIGxldCBldmVudHMgPSBvcHRzLmV2ZW50cyB8fCB7c3RhdGU6IFwicHJlc2VuY2Vfc3RhdGVcIiwgZGlmZjogXCJwcmVzZW5jZV9kaWZmXCJ9XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWxcbiAgICB0aGlzLmpvaW5SZWYgPSBudWxsXG4gICAgdGhpcy5jYWxsZXIgPSB7XG4gICAgICBvbkpvaW46IGZ1bmN0aW9uICgpeyB9LFxuICAgICAgb25MZWF2ZTogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvblN5bmM6IGZ1bmN0aW9uICgpeyB9XG4gICAgfVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKGV2ZW50cy5zdGF0ZSwgbmV3U3RhdGUgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICB0aGlzLmpvaW5SZWYgPSB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgICB0aGlzLnN0YXRlID0gUHJlc2VuY2Uuc3luY1N0YXRlKHRoaXMuc3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpXG5cbiAgICAgIHRoaXMucGVuZGluZ0RpZmZzLmZvckVhY2goZGlmZiA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpXG4gICAgICB9KVxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgICAgb25TeW5jKClcbiAgICB9KVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKGV2ZW50cy5kaWZmLCBkaWZmID0+IHtcbiAgICAgIGxldCB7b25Kb2luLCBvbkxlYXZlLCBvblN5bmN9ID0gdGhpcy5jYWxsZXJcblxuICAgICAgaWYodGhpcy5pblBlbmRpbmdTeW5jU3RhdGUoKSl7XG4gICAgICAgIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goZGlmZilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpXG4gICAgICAgIG9uU3luYygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbihjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uSm9pbiA9IGNhbGxiYWNrIH1cblxuICBvbkxlYXZlKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25MZWF2ZSA9IGNhbGxiYWNrIH1cblxuICBvblN5bmMoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vblN5bmMgPSBjYWxsYmFjayB9XG5cbiAgbGlzdChieSl7IHJldHVybiBQcmVzZW5jZS5saXN0KHRoaXMuc3RhdGUsIGJ5KSB9XG5cbiAgaW5QZW5kaW5nU3luY1N0YXRlKCl7XG4gICAgcmV0dXJuICF0aGlzLmpvaW5SZWYgfHwgKHRoaXMuam9pblJlZiAhPT0gdGhpcy5jaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8vIGxvd2VyLWxldmVsIHB1YmxpYyBzdGF0aWMgQVBJXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gc3luYyB0aGUgbGlzdCBvZiBwcmVzZW5jZXMgb24gdGhlIHNlcnZlclxuICAgKiB3aXRoIHRoZSBjbGllbnQncyBzdGF0ZS4gQW4gb3B0aW9uYWwgYG9uSm9pbmAgYW5kIGBvbkxlYXZlYCBjYWxsYmFjayBjYW5cbiAgICogYmUgcHJvdmlkZWQgdG8gcmVhY3QgdG8gY2hhbmdlcyBpbiB0aGUgY2xpZW50J3MgbG9jYWwgcHJlc2VuY2VzIGFjcm9zc1xuICAgKiBkaXNjb25uZWN0cyBhbmQgcmVjb25uZWN0cyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBzeW5jU3RhdGUoY3VycmVudFN0YXRlLCBuZXdTdGF0ZSwgb25Kb2luLCBvbkxlYXZlKXtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLmNsb25lKGN1cnJlbnRTdGF0ZSlcbiAgICBsZXQgam9pbnMgPSB7fVxuICAgIGxldCBsZWF2ZXMgPSB7fVxuXG4gICAgdGhpcy5tYXAoc3RhdGUsIChrZXksIHByZXNlbmNlKSA9PiB7XG4gICAgICBpZighbmV3U3RhdGVba2V5XSl7XG4gICAgICAgIGxlYXZlc1trZXldID0gcHJlc2VuY2VcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMubWFwKG5ld1N0YXRlLCAoa2V5LCBuZXdQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBuZXdSZWZzID0gbmV3UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgY3VyUmVmcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBqb2luZWRNZXRhcyA9IG5ld1ByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IGN1clJlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgbGV0IGxlZnRNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBuZXdSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIGlmKGpvaW5lZE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGpvaW5zW2tleV0gPSBuZXdQcmVzZW5jZVxuICAgICAgICAgIGpvaW5zW2tleV0ubWV0YXMgPSBqb2luZWRNZXRhc1xuICAgICAgICB9XG4gICAgICAgIGlmKGxlZnRNZXRhcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZWF2ZXNba2V5XSA9IHRoaXMuY2xvbmUoY3VycmVudFByZXNlbmNlKVxuICAgICAgICAgIGxlYXZlc1trZXldLm1ldGFzID0gbGVmdE1ldGFzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpvaW5zW2tleV0gPSBuZXdQcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuc3luY0RpZmYoc3RhdGUsIHtqb2luczogam9pbnMsIGxlYXZlczogbGVhdmVzfSwgb25Kb2luLCBvbkxlYXZlKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIFVzZWQgdG8gc3luYyBhIGRpZmYgb2YgcHJlc2VuY2Ugam9pbiBhbmQgbGVhdmVcbiAgICogZXZlbnRzIGZyb20gdGhlIHNlcnZlciwgYXMgdGhleSBoYXBwZW4uIExpa2UgYHN5bmNTdGF0ZWAsIGBzeW5jRGlmZmBcbiAgICogYWNjZXB0cyBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrcyB0byByZWFjdCB0byBhIHVzZXJcbiAgICogam9pbmluZyBvciBsZWF2aW5nIGZyb20gYSBkZXZpY2UuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBzeW5jRGlmZihzdGF0ZSwgZGlmZiwgb25Kb2luLCBvbkxlYXZlKXtcbiAgICBsZXQge2pvaW5zLCBsZWF2ZXN9ID0gdGhpcy5jbG9uZShkaWZmKVxuICAgIGlmKCFvbkpvaW4peyBvbkpvaW4gPSBmdW5jdGlvbiAoKXsgfSB9XG4gICAgaWYoIW9uTGVhdmUpeyBvbkxlYXZlID0gZnVuY3Rpb24gKCl7IH0gfVxuXG4gICAgdGhpcy5tYXAoam9pbnMsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgc3RhdGVba2V5XSA9IHRoaXMuY2xvbmUobmV3UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2Upe1xuICAgICAgICBsZXQgam9pbmVkUmVmcyA9IHN0YXRlW2tleV0ubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgY3VyTWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gam9pbmVkUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBzdGF0ZVtrZXldLm1ldGFzLnVuc2hpZnQoLi4uY3VyTWV0YXMpXG4gICAgICB9XG4gICAgICBvbkpvaW4oa2V5LCBjdXJyZW50UHJlc2VuY2UsIG5ld1ByZXNlbmNlKVxuICAgIH0pXG4gICAgdGhpcy5tYXAobGVhdmVzLCAoa2V5LCBsZWZ0UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBpZighY3VycmVudFByZXNlbmNlKXsgcmV0dXJuIH1cbiAgICAgIGxldCByZWZzVG9SZW1vdmUgPSBsZWZ0UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgY3VycmVudFByZXNlbmNlLm1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIHJlZnNUb1JlbW92ZS5pbmRleE9mKHAucGh4X3JlZikgPCAwXG4gICAgICB9KVxuICAgICAgb25MZWF2ZShrZXksIGN1cnJlbnRQcmVzZW5jZSwgbGVmdFByZXNlbmNlKVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlLm1ldGFzLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGRlbGV0ZSBzdGF0ZVtrZXldXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gc3RhdGVcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcmVzZW5jZXMsIHdpdGggc2VsZWN0ZWQgbWV0YWRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcmVzZW5jZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2hvb3NlclxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJlc2VuY2V9XG4gICAqL1xuICBzdGF0aWMgbGlzdChwcmVzZW5jZXMsIGNob29zZXIpe1xuICAgIGlmKCFjaG9vc2VyKXsgY2hvb3NlciA9IGZ1bmN0aW9uIChrZXksIHByZXMpeyByZXR1cm4gcHJlcyB9IH1cblxuICAgIHJldHVybiB0aGlzLm1hcChwcmVzZW5jZXMsIChrZXksIHByZXNlbmNlKSA9PiB7XG4gICAgICByZXR1cm4gY2hvb3NlcihrZXksIHByZXNlbmNlKVxuICAgIH0pXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgc3RhdGljIG1hcChvYmosIGZ1bmMpe1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLm1hcChrZXkgPT4gZnVuYyhrZXksIG9ialtrZXldKSlcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShvYmopeyByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKSB9XG59XG4iLCAiLyogVGhlIGRlZmF1bHQgc2VyaWFsaXplciBmb3IgZW5jb2RpbmcgYW5kIGRlY29kaW5nIG1lc3NhZ2VzICovXG5pbXBvcnQge1xuICBDSEFOTkVMX0VWRU5UU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEhFQURFUl9MRU5HVEg6IDEsXG4gIE1FVEFfTEVOR1RIOiA0LFxuICBLSU5EUzoge3B1c2g6IDAsIHJlcGx5OiAxLCBicm9hZGNhc3Q6IDJ9LFxuXG4gIGVuY29kZShtc2csIGNhbGxiYWNrKXtcbiAgICBpZihtc2cucGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RW5jb2RlKG1zZykpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwYXlsb2FkID0gW21zZy5qb2luX3JlZiwgbXNnLnJlZiwgbXNnLnRvcGljLCBtc2cuZXZlbnQsIG1zZy5wYXlsb2FkXVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGUocmF3UGF5bG9hZCwgY2FsbGJhY2spe1xuICAgIGlmKHJhd1BheWxvYWQuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKXtcbiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmJpbmFyeURlY29kZShyYXdQYXlsb2FkKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IFtqb2luX3JlZiwgcmVmLCB0b3BpYywgZXZlbnQsIHBheWxvYWRdID0gSlNPTi5wYXJzZShyYXdQYXlsb2FkKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKHtqb2luX3JlZiwgcmVmLCB0b3BpYywgZXZlbnQsIHBheWxvYWR9KVxuICAgIH1cbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgYmluYXJ5RW5jb2RlKG1lc3NhZ2Upe1xuICAgIGxldCB7am9pbl9yZWYsIHJlZiwgZXZlbnQsIHRvcGljLCBwYXlsb2FkfSA9IG1lc3NhZ2VcbiAgICBsZXQgbWV0YUxlbmd0aCA9IHRoaXMuTUVUQV9MRU5HVEggKyBqb2luX3JlZi5sZW5ndGggKyByZWYubGVuZ3RoICsgdG9waWMubGVuZ3RoICsgZXZlbnQubGVuZ3RoXG4gICAgbGV0IGhlYWRlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLkhFQURFUl9MRU5HVEggKyBtZXRhTGVuZ3RoKVxuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGhlYWRlcilcbiAgICBsZXQgb2Zmc2V0ID0gMFxuXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy5LSU5EUy5wdXNoKSAvLyBraW5kXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgam9pbl9yZWYubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHJlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdG9waWMubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGV2ZW50Lmxlbmd0aClcbiAgICBBcnJheS5mcm9tKGpvaW5fcmVmLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbShyZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHRvcGljLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbShldmVudCwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuXG4gICAgdmFyIGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLmJ5dGVMZW5ndGggKyBwYXlsb2FkLmJ5dGVMZW5ndGgpXG4gICAgY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KGhlYWRlciksIDApXG4gICAgY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KHBheWxvYWQpLCBoZWFkZXIuYnl0ZUxlbmd0aClcblxuICAgIHJldHVybiBjb21iaW5lZC5idWZmZXJcbiAgfSxcblxuICBiaW5hcnlEZWNvZGUoYnVmZmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpXG4gICAgbGV0IGtpbmQgPSB2aWV3LmdldFVpbnQ4KDApXG4gICAgbGV0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKVxuICAgIHN3aXRjaChraW5kKXtcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5wdXNoOiByZXR1cm4gdGhpcy5kZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5yZXBseTogcmV0dXJuIHRoaXMuZGVjb2RlUmVwbHkoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLmJyb2FkY2FzdDogcmV0dXJuIHRoaXMuZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICB9XG4gIH0sXG5cbiAgZGVjb2RlUHVzaChidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCBqb2luUmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIHRoaXMuTUVUQV9MRU5HVEggLSAxIC8vIHB1c2hlcyBoYXZlIG5vIHJlZlxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgcmV0dXJuIHtqb2luX3JlZjogam9pblJlZiwgcmVmOiBudWxsLCB0b3BpYzogdG9waWMsIGV2ZW50OiBldmVudCwgcGF5bG9hZDogZGF0YX1cbiAgfSxcblxuICBkZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCBqb2luUmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgcmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgzKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDQpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIHRoaXMuTUVUQV9MRU5HVEhcbiAgICBsZXQgam9pblJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGpvaW5SZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBqb2luUmVmU2l6ZVxuICAgIGxldCByZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyByZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyByZWZTaXplXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgbGV0IHBheWxvYWQgPSB7c3RhdHVzOiBldmVudCwgcmVzcG9uc2U6IGRhdGF9XG4gICAgcmV0dXJuIHtqb2luX3JlZjogam9pblJlZiwgcmVmOiByZWYsIHRvcGljOiB0b3BpYywgZXZlbnQ6IENIQU5ORUxfRVZFTlRTLnJlcGx5LCBwYXlsb2FkOiBwYXlsb2FkfVxuICB9LFxuXG4gIGRlY29kZUJyb2FkY2FzdChidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDEpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgMlxuICAgIGxldCB0b3BpYyA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHRvcGljU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdG9waWNTaXplXG4gICAgbGV0IGV2ZW50ID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgZXZlbnRTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBldmVudFNpemVcbiAgICBsZXQgZGF0YSA9IGJ1ZmZlci5zbGljZShvZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIHtqb2luX3JlZjogbnVsbCwgcmVmOiBudWxsLCB0b3BpYzogdG9waWMsIGV2ZW50OiBldmVudCwgcGF5bG9hZDogZGF0YX1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgcGh4V2luZG93LFxuICBDSEFOTkVMX0VWRU5UUyxcbiAgREVGQVVMVF9USU1FT1VULFxuICBERUZBVUxUX1ZTTixcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUUyxcbiAgV1NfQ0xPU0VfTk9STUFMXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb3N1cmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcbmltcG9ydCBDaGFubmVsIGZyb20gXCIuL2NoYW5uZWxcIlxuaW1wb3J0IExvbmdQb2xsIGZyb20gXCIuL2xvbmdwb2xsXCJcbmltcG9ydCBTZXJpYWxpemVyIGZyb20gXCIuL3NlcmlhbGl6ZXJcIlxuaW1wb3J0IFRpbWVyIGZyb20gXCIuL3RpbWVyXCJcblxuLyoqIEluaXRpYWxpemVzIHRoZSBTb2NrZXQgKlxuICpcbiAqIEZvciBJRTggc3VwcG9ydCB1c2UgYW4gRVM1LXNoaW0gKGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzOi8vZXhhbXBsZS5jb20vc29ja2V0XCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIndzczovL2V4YW1wbGUuY29tXCJgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL3NvY2tldFwiYCAoaW5oZXJpdGVkIGhvc3QgJiBwcm90b2NvbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy50cmFuc3BvcnRdIC0gVGhlIFdlYnNvY2tldCBUcmFuc3BvcnQsIGZvciBleGFtcGxlIFdlYlNvY2tldCBvciBQaG9lbml4LkxvbmdQb2xsLlxuICpcbiAqIERlZmF1bHRzIHRvIFdlYlNvY2tldCB3aXRoIGF1dG9tYXRpYyBMb25nUG9sbCBmYWxsYmFjayBpZiBXZWJTb2NrZXQgaXMgbm90IGRlZmluZWQuXG4gKiBUbyBmYWxsYmFjayB0byBMb25nUG9sbCB3aGVuIFdlYlNvY2tldCBhdHRlbXB0cyBmYWlsLCB1c2UgYGxvbmdQb2xsRmFsbGJhY2tNczogMjUwMGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMubG9uZ1BvbGxGYWxsYmFja01zXSAtIFRoZSBtaWxsaXNlY29uZCB0aW1lIHRvIGF0dGVtcHQgdGhlIHByaW1hcnkgdHJhbnNwb3J0XG4gKiBiZWZvcmUgZmFsbGluZyBiYWNrIHRvIHRoZSBMb25nUG9sbCB0cmFuc3BvcnQuIERpc2FibGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZGVidWddIC0gV2hlbiB0cnVlLCBlbmFibGVzIGRlYnVnIGxvZ2dpbmcuIERlZmF1bHQgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnNlc3Npb25TdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFBob2VuaXggdXNlcyBzZXNzaW9uU3RvcmFnZSBmb3IgbG9uZ3BvbGwgZmFsbGJhY2sgaGlzdG9yeS4gT3ZlcnJpZGluZyB0aGUgc3RvcmUgaXNcbiAqIHVzZWZ1bCB3aGVuIFBob2VuaXggd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYHNlc3Npb25TdG9yYWdlYC4gRm9yIGV4YW1wbGUsIFRoaXMgY291bGRcbiAqIGhhcHBlbiBpZiBhIHNpdGUgbG9hZHMgYSBjcm9zcy1kb21haW4gY2hhbm5lbCBpbiBhbiBpZnJhbWUuIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICAgIGNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gKiAgICAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy5zdG9yYWdlID0ge30gfVxuICogICAgICAgZ2V0SXRlbShrZXlOYW1lKSB7IHJldHVybiB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfHwgbnVsbCB9XG4gKiAgICAgICByZW1vdmVJdGVtKGtleU5hbWUpIHsgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB9XG4gKiAgICAgICBzZXRJdGVtKGtleU5hbWUsIGtleVZhbHVlKSB7IHRoaXMuc3RvcmFnZVtrZXlOYW1lXSA9IGtleVZhbHVlIH1cbiAqICAgICB9XG4gKlxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50LCBvcHRzID0ge30pe1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MgPSB7b3BlbjogW10sIGNsb3NlOiBbXSwgZXJyb3I6IFtdLCBtZXNzYWdlOiBbXX1cbiAgICB0aGlzLmNoYW5uZWxzID0gW11cbiAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXVxuICAgIHRoaXMucmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IG9wdHMudGltZW91dCB8fCBERUZBVUxUX1RJTUVPVVRcbiAgICB0aGlzLnRyYW5zcG9ydCA9IG9wdHMudHJhbnNwb3J0IHx8IGdsb2JhbC5XZWJTb2NrZXQgfHwgTG9uZ1BvbGxcbiAgICB0aGlzLnByaW1hcnlQYXNzZWRIZWFsdGhDaGVjayA9IGZhbHNlXG4gICAgdGhpcy5sb25nUG9sbEZhbGxiYWNrTXMgPSBvcHRzLmxvbmdQb2xsRmFsbGJhY2tNc1xuICAgIHRoaXMuZmFsbGJhY2tUaW1lciA9IG51bGxcbiAgICB0aGlzLnNlc3Npb25TdG9yZSA9IG9wdHMuc2Vzc2lvblN0b3JhZ2UgfHwgZ2xvYmFsLnNlc3Npb25TdG9yYWdlXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zID0gMFxuICAgIHRoaXMuZGVmYXVsdEVuY29kZXIgPSBTZXJpYWxpemVyLmVuY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5kZWZhdWx0RGVjb2RlciA9IFNlcmlhbGl6ZXIuZGVjb2RlLmJpbmQoU2VyaWFsaXplcilcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgIHRoaXMuYmluYXJ5VHlwZSA9IG9wdHMuYmluYXJ5VHlwZSB8fCBcImFycmF5YnVmZmVyXCJcbiAgICB0aGlzLmNvbm5lY3RDbG9jayA9IDFcbiAgICBpZih0aGlzLnRyYW5zcG9ydCAhPT0gTG9uZ1BvbGwpe1xuICAgICAgdGhpcy5lbmNvZGUgPSBvcHRzLmVuY29kZSB8fCB0aGlzLmRlZmF1bHRFbmNvZGVyXG4gICAgICB0aGlzLmRlY29kZSA9IG9wdHMuZGVjb2RlIHx8IHRoaXMuZGVmYXVsdERlY29kZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmNvZGUgPSB0aGlzLmRlZmF1bHRFbmNvZGVyXG4gICAgICB0aGlzLmRlY29kZSA9IHRoaXMuZGVmYXVsdERlY29kZXJcbiAgICB9XG4gICAgbGV0IGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSBudWxsXG4gICAgaWYocGh4V2luZG93ICYmIHBoeFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXtcbiAgICAgIHBoeFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgX2UgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgICAgICAgYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9IHRoaXMuY29ubmVjdENsb2NrXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VzaG93XCIsIF9lID0+IHtcbiAgICAgICAgaWYoYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9PT0gdGhpcy5jb25uZWN0Q2xvY2spe1xuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSBudWxsXG4gICAgICAgICAgdGhpcy5jb25uZWN0KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zID0gb3B0cy5oZWFydGJlYXRJbnRlcnZhbE1zIHx8IDMwMDAwXG4gICAgdGhpcy5yZWpvaW5BZnRlck1zID0gKHRyaWVzKSA9PiB7XG4gICAgICBpZihvcHRzLnJlam9pbkFmdGVyTXMpe1xuICAgICAgICByZXR1cm4gb3B0cy5yZWpvaW5BZnRlck1zKHRyaWVzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsxMDAwLCAyMDAwLCA1MDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVjb25uZWN0QWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWNvbm5lY3RBZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVjb25uZWN0QWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAsIDUwLCAxMDAsIDE1MCwgMjAwLCAyNTAsIDUwMCwgMTAwMCwgMjAwMF1bdHJpZXMgLSAxXSB8fCA1MDAwXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyID0gb3B0cy5sb2dnZXIgfHwgbnVsbFxuICAgIGlmKCF0aGlzLmxvZ2dlciAmJiBvcHRzLmRlYnVnKXtcbiAgICAgIHRoaXMubG9nZ2VyID0gKGtpbmQsIG1zZywgZGF0YSkgPT4geyBjb25zb2xlLmxvZyhgJHtraW5kfTogJHttc2d9YCwgZGF0YSkgfVxuICAgIH1cbiAgICB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0ID0gb3B0cy5sb25ncG9sbGVyVGltZW91dCB8fCAyMDAwMFxuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLmVuZFBvaW50ID0gYCR7ZW5kUG9pbnR9LyR7VFJBTlNQT1JUUy53ZWJzb2NrZXR9YFxuICAgIHRoaXMudnNuID0gb3B0cy52c24gfHwgREVGQVVMVF9WU05cbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5jb25uZWN0KCkpXG4gICAgfSwgdGhpcy5yZWNvbm5lY3RBZnRlck1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIExvbmdQb2xsIHRyYW5zcG9ydCByZWZlcmVuY2VcbiAgICovXG4gIGdldExvbmdQb2xsVHJhbnNwb3J0KCl7IHJldHVybiBMb25nUG9sbCB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuZCByZXBsYWNlcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXdUcmFuc3BvcnQgLSBUaGUgbmV3IHRyYW5zcG9ydCBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZVRyYW5zcG9ydChuZXdUcmFuc3BvcnQpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZmFsbGJhY2tUaW1lcilcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgdGhpcy5jb25uLmNsb3NlKClcbiAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICB9XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXdUcmFuc3BvcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzb2NrZXQgcHJvdG9jb2xcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHByb3RvY29sKCl7IHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLykgPyBcIndzc1wiIDogXCJ3c1wiIH1cblxuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBzb2NrZXQgdXJsXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBlbmRQb2ludFVSTCgpe1xuICAgIGxldCB1cmkgPSBBamF4LmFwcGVuZFBhcmFtcyhcbiAgICAgIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIHRoaXMucGFyYW1zKCkpLCB7dnNuOiB0aGlzLnZzbn0pXG4gICAgaWYodXJpLmNoYXJBdCgwKSAhPT0gXCIvXCIpeyByZXR1cm4gdXJpIH1cbiAgICBpZih1cmkuY2hhckF0KDEpID09PSBcIi9cIil7IHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9OiR7dXJpfWAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06Ly8ke2xvY2F0aW9uLmhvc3R9JHt1cml9YFxuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXRcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DbG9zZUV2ZW50I1N0YXR1c19jb2RlcyBmb3IgdmFsaWQgc3RhdHVzIGNvZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBzb2NrZXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGNvZGUgLSBBIHN0YXR1cyBjb2RlIGZvciBkaXNjb25uZWN0aW9uIChPcHRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBBIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIHJlYXNvbiB0byBkaXNjb25uZWN0LiAoT3B0aW9uYWwpXG4gICAqL1xuICBkaXNjb25uZWN0KGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZmFsbGJhY2tUaW1lcilcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAgICB0aGlzLnRlYXJkb3duKGNhbGxiYWNrLCBjb2RlLCByZWFzb24pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBwYXJhbXMgdG8gc2VuZCB3aGVuIGNvbm5lY3RpbmcsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogdXNlclRva2VufWBcbiAgICpcbiAgICogUGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkOyBwYXNzIHRoZW0gaW4gdGhlIFNvY2tldCBjb25zdHJ1Y3RvciBpbnN0ZWFkOlxuICAgKiBgbmV3IFNvY2tldChcIi9zb2NrZXRcIiwge3BhcmFtczoge3VzZXJfaWQ6IHVzZXJUb2tlbn19KWAuXG4gICAqL1xuICBjb25uZWN0KHBhcmFtcyl7XG4gICAgaWYocGFyYW1zKXtcbiAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJwYXNzaW5nIHBhcmFtcyB0byBjb25uZWN0IGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQgcGFzcyA6cGFyYW1zIHRvIHRoZSBTb2NrZXQgY29uc3RydWN0b3JcIilcbiAgICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShwYXJhbXMpXG4gICAgfVxuICAgIGlmKHRoaXMuY29ubil7IHJldHVybiB9XG4gICAgaWYodGhpcy5sb25nUG9sbEZhbGxiYWNrTXMgJiYgdGhpcy50cmFuc3BvcnQgIT09IExvbmdQb2xsKXtcbiAgICAgIHRoaXMuY29ubmVjdFdpdGhGYWxsYmFjayhMb25nUG9sbCwgdGhpcy5sb25nUG9sbEZhbGxiYWNrTXMpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudHJhbnNwb3J0Q29ubmVjdCgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ3MgdGhlIG1lc3NhZ2UuIE92ZXJyaWRlIGB0aGlzLmxvZ2dlcmAgZm9yIHNwZWNpYWxpemVkIGxvZ2dpbmcuIG5vb3BzIGJ5IGRlZmF1bHRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtpbmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1zZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKi9cbiAgbG9nKGtpbmQsIG1zZywgZGF0YSl7IHRoaXMubG9nZ2VyICYmIHRoaXMubG9nZ2VyKGtpbmQsIG1zZywgZGF0YSkgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgYSBsb2dnZXIgaGFzIGJlZW4gc2V0IG9uIHRoaXMgc29ja2V0LlxuICAgKi9cbiAgaGFzTG9nZ2VyKCl7IHJldHVybiB0aGlzLmxvZ2dlciAhPT0gbnVsbCB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gb3BlbiBldmVudHNcbiAgICpcbiAgICogQGV4YW1wbGUgc29ja2V0Lm9uT3BlbihmdW5jdGlvbigpeyBjb25zb2xlLmluZm8oXCJ0aGUgc29ja2V0IHdhcyBvcGVuZWRcIikgfSlcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uT3BlbihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIGNsb3NlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25DbG9zZShjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBlcnJvciBldmVudHNcbiAgICpcbiAgICogQGV4YW1wbGUgc29ja2V0Lm9uRXJyb3IoZnVuY3Rpb24oZXJyb3IpeyBhbGVydChcIkFuIGVycm9yIG9jY3VycmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmVycm9yLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG1lc3NhZ2UgZXZlbnRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk1lc3NhZ2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUGluZ3MgdGhlIHNlcnZlciBhbmQgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCB0aGUgUlRUIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBpbmcgd2FzIHB1c2hlZCBvciBmYWxzZSBpZiB1bmFibGUgdG8gYmUgcHVzaGVkLlxuICAgKi9cbiAgcGluZyhjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiBmYWxzZSB9XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgbGV0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHJlZn0pXG4gICAgbGV0IG9uTXNnUmVmID0gdGhpcy5vbk1lc3NhZ2UobXNnID0+IHtcbiAgICAgIGlmKG1zZy5yZWYgPT09IHJlZil7XG4gICAgICAgIHRoaXMub2ZmKFtvbk1zZ1JlZl0pXG4gICAgICAgIGNhbGxiYWNrKERhdGUubm93KCkgLSBzdGFydFRpbWUpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIHRyYW5zcG9ydENvbm5lY3QoKXtcbiAgICB0aGlzLmNvbm5lY3RDbG9jaysrXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmNvbm4gPSBuZXcgdGhpcy50cmFuc3BvcnQodGhpcy5lbmRQb2ludFVSTCgpKVxuICAgIHRoaXMuY29ubi5iaW5hcnlUeXBlID0gdGhpcy5iaW5hcnlUeXBlXG4gICAgdGhpcy5jb25uLnRpbWVvdXQgPSB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0XG4gICAgdGhpcy5jb25uLm9ub3BlbiA9ICgpID0+IHRoaXMub25Db25uT3BlbigpXG4gICAgdGhpcy5jb25uLm9uZXJyb3IgPSBlcnJvciA9PiB0aGlzLm9uQ29ubkVycm9yKGVycm9yKVxuICAgIHRoaXMuY29ubi5vbm1lc3NhZ2UgPSBldmVudCA9PiB0aGlzLm9uQ29ubk1lc3NhZ2UoZXZlbnQpXG4gICAgdGhpcy5jb25uLm9uY2xvc2UgPSBldmVudCA9PiB0aGlzLm9uQ29ubkNsb3NlKGV2ZW50KVxuICB9XG5cbiAgZ2V0U2Vzc2lvbihrZXkpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmUgJiYgdGhpcy5zZXNzaW9uU3RvcmUuZ2V0SXRlbShrZXkpIH1cblxuICBzdG9yZVNlc3Npb24oa2V5LCB2YWwpeyB0aGlzLnNlc3Npb25TdG9yZSAmJiB0aGlzLnNlc3Npb25TdG9yZS5zZXRJdGVtKGtleSwgdmFsKSB9XG5cbiAgY29ubmVjdFdpdGhGYWxsYmFjayhmYWxsYmFja1RyYW5zcG9ydCwgZmFsbGJhY2tUaHJlc2hvbGQgPSAyNTAwKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5mYWxsYmFja1RpbWVyKVxuICAgIGxldCBlc3RhYmxpc2hlZCA9IGZhbHNlXG4gICAgbGV0IHByaW1hcnlUcmFuc3BvcnQgPSB0cnVlXG4gICAgbGV0IG9wZW5SZWYsIGVycm9yUmVmXG4gICAgbGV0IGZhbGxiYWNrID0gKHJlYXNvbikgPT4ge1xuICAgICAgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGZhbGxpbmcgYmFjayB0byAke2ZhbGxiYWNrVHJhbnNwb3J0Lm5hbWV9Li4uYCwgcmVhc29uKVxuICAgICAgdGhpcy5vZmYoW29wZW5SZWYsIGVycm9yUmVmXSlcbiAgICAgIHByaW1hcnlUcmFuc3BvcnQgPSBmYWxzZVxuICAgICAgdGhpcy5yZXBsYWNlVHJhbnNwb3J0KGZhbGxiYWNrVHJhbnNwb3J0KVxuICAgICAgdGhpcy50cmFuc3BvcnRDb25uZWN0KClcbiAgICB9XG4gICAgaWYodGhpcy5nZXRTZXNzaW9uKGBwaHg6ZmFsbGJhY2s6JHtmYWxsYmFja1RyYW5zcG9ydC5uYW1lfWApKXsgcmV0dXJuIGZhbGxiYWNrKFwibWVtb3JpemVkXCIpIH1cblxuICAgIHRoaXMuZmFsbGJhY2tUaW1lciA9IHNldFRpbWVvdXQoZmFsbGJhY2ssIGZhbGxiYWNrVGhyZXNob2xkKVxuXG4gICAgZXJyb3JSZWYgPSB0aGlzLm9uRXJyb3IocmVhc29uID0+IHtcbiAgICAgIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIFwiZXJyb3JcIiwgcmVhc29uKVxuICAgICAgaWYocHJpbWFyeVRyYW5zcG9ydCAmJiAhZXN0YWJsaXNoZWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmFsbGJhY2tUaW1lcilcbiAgICAgICAgZmFsbGJhY2socmVhc29uKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5vbk9wZW4oKCkgPT4ge1xuICAgICAgZXN0YWJsaXNoZWQgPSB0cnVlXG4gICAgICBpZighcHJpbWFyeVRyYW5zcG9ydCl7XG4gICAgICAgIC8vIG9ubHkgbWVtb3JpemUgTFAgaWYgd2UgbmV2ZXIgY29ubmVjdGVkIHRvIHByaW1hcnlcbiAgICAgICAgaWYoIXRoaXMucHJpbWFyeVBhc3NlZEhlYWx0aENoZWNrKXsgdGhpcy5zdG9yZVNlc3Npb24oYHBoeDpmYWxsYmFjazoke2ZhbGxiYWNrVHJhbnNwb3J0Lm5hbWV9YCwgXCJ0cnVlXCIpIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGBlc3RhYmxpc2hlZCAke2ZhbGxiYWNrVHJhbnNwb3J0Lm5hbWV9IGZhbGxiYWNrYClcbiAgICAgIH1cbiAgICAgIC8vIGlmIHdlJ3ZlIGVzdGFibGlzaGVkIHByaW1hcnksIGdpdmUgdGhlIGZhbGxiYWNrIGEgbmV3IHBlcmlvZCB0byBhdHRlbXB0IHBpbmdcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZhbGxiYWNrVGltZXIpXG4gICAgICB0aGlzLmZhbGxiYWNrVGltZXIgPSBzZXRUaW1lb3V0KGZhbGxiYWNrLCBmYWxsYmFja1RocmVzaG9sZClcbiAgICAgIHRoaXMucGluZyhydHQgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNvbm5lY3RlZCB0byBwcmltYXJ5IGFmdGVyXCIsIHJ0dClcbiAgICAgICAgdGhpcy5wcmltYXJ5UGFzc2VkSGVhbHRoQ2hlY2sgPSB0cnVlXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZhbGxiYWNrVGltZXIpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy50cmFuc3BvcnRDb25uZWN0KClcbiAgfVxuXG4gIGNsZWFySGVhcnRiZWF0cygpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhlYXJ0YmVhdFRpbWVyKVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lcilcbiAgfVxuXG4gIG9uQ29ubk9wZW4oKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBgJHt0aGlzLnRyYW5zcG9ydC5uYW1lfSBjb25uZWN0ZWQgdG8gJHt0aGlzLmVuZFBvaW50VVJMKCl9YClcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucysrXG4gICAgdGhpcy5mbHVzaFNlbmRCdWZmZXIoKVxuICAgIHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKVxuICAgIHRoaXMucmVzZXRIZWFydGJlYXQoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKCkpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgaGVhcnRiZWF0VGltZW91dCgpe1xuICAgIGlmKHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKXsgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgXCJoZWFydGJlYXQgdGltZW91dC4gQXR0ZW1wdGluZyB0byByZS1lc3RhYmxpc2ggY29ubmVjdGlvblwiKSB9XG4gICAgICB0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKVxuICAgICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5yZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSwgV1NfQ0xPU0VfTk9STUFMLCBcImhlYXJ0YmVhdCB0aW1lb3V0XCIpXG4gICAgfVxuICB9XG5cbiAgcmVzZXRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLmNvbm4gJiYgdGhpcy5jb25uLnNraXBIZWFydGJlYXQpeyByZXR1cm4gfVxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLmNsZWFySGVhcnRiZWF0cygpXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZW5kSGVhcnRiZWF0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcylcbiAgfVxuXG4gIHRlYXJkb3duKGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIGlmKCF0aGlzLmNvbm4pe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcbiAgICB9XG5cbiAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuY29ubil7XG4gICAgICAgIGlmKGNvZGUpeyB0aGlzLmNvbm4uY2xvc2UoY29kZSwgcmVhc29uIHx8IFwiXCIpIH0gZWxzZSB7IHRoaXMuY29ubi5jbG9zZSgpIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKCgpID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmNvbm4ub25vcGVuID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubi5vbmVycm9yID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uID0gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgd2FpdEZvckJ1ZmZlckRvbmUoY2FsbGJhY2ssIHRyaWVzID0gMSl7XG4gICAgaWYodHJpZXMgPT09IDUgfHwgIXRoaXMuY29ubiB8fCAhdGhpcy5jb25uLmJ1ZmZlcmVkQW1vdW50KXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgKyAxKVxuICAgIH0sIDE1MCAqIHRyaWVzKVxuICB9XG5cbiAgd2FpdEZvclNvY2tldENsb3NlZChjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8IHRoaXMuY29ubi5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNsb3NlZCl7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMud2FpdEZvclNvY2tldENsb3NlZChjYWxsYmFjaywgdHJpZXMgKyAxKVxuICAgIH0sIDE1MCAqIHRyaWVzKVxuICB9XG5cbiAgb25Db25uQ2xvc2UoZXZlbnQpe1xuICAgIGxldCBjbG9zZUNvZGUgPSBldmVudCAmJiBldmVudC5jb2RlXG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgXCJjbG9zZVwiLCBldmVudClcbiAgICB0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKVxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICBpZighdGhpcy5jbG9zZVdhc0NsZWFuICYmIGNsb3NlQ29kZSAhPT0gMTAwMCl7XG4gICAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpXG4gICAgfVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiBjYWxsYmFjayhldmVudCkpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uQ29ubkVycm9yKGVycm9yKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBlcnJvcilcbiAgICBsZXQgdHJhbnNwb3J0QmVmb3JlID0gdGhpcy50cmFuc3BvcnRcbiAgICBsZXQgZXN0YWJsaXNoZWRCZWZvcmUgPSB0aGlzLmVzdGFibGlzaGVkQ29ubmVjdGlvbnNcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmVycm9yLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4ge1xuICAgICAgY2FsbGJhY2soZXJyb3IsIHRyYW5zcG9ydEJlZm9yZSwgZXN0YWJsaXNoZWRCZWZvcmUpXG4gICAgfSlcbiAgICBpZih0cmFuc3BvcnRCZWZvcmUgPT09IHRoaXMudHJhbnNwb3J0IHx8IGVzdGFibGlzaGVkQmVmb3JlID4gMCl7XG4gICAgICB0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlckNoYW5FcnJvcigpe1xuICAgIHRoaXMuY2hhbm5lbHMuZm9yRWFjaChjaGFubmVsID0+IHtcbiAgICAgIGlmKCEoY2hhbm5lbC5pc0Vycm9yZWQoKSB8fCBjaGFubmVsLmlzTGVhdmluZygpIHx8IGNoYW5uZWwuaXNDbG9zZWQoKSkpe1xuICAgICAgICBjaGFubmVsLnRyaWdnZXIoQ0hBTk5FTF9FVkVOVFMuZXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgY29ubmVjdGlvblN0YXRlKCl7XG4gICAgc3dpdGNoKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4ucmVhZHlTdGF0ZSl7XG4gICAgICBjYXNlIFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZzogcmV0dXJuIFwiY29ubmVjdGluZ1wiXG4gICAgICBjYXNlIFNPQ0tFVF9TVEFURVMub3BlbjogcmV0dXJuIFwib3BlblwiXG4gICAgICBjYXNlIFNPQ0tFVF9TVEFURVMuY2xvc2luZzogcmV0dXJuIFwiY2xvc2luZ1wiXG4gICAgICBkZWZhdWx0OiByZXR1cm4gXCJjbG9zZWRcIlxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLmNvbm5lY3Rpb25TdGF0ZSgpID09PSBcIm9wZW5cIiB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBwYXJhbSB7Q2hhbm5lbH1cbiAgICovXG4gIHJlbW92ZShjaGFubmVsKXtcbiAgICB0aGlzLm9mZihjaGFubmVsLnN0YXRlQ2hhbmdlUmVmcylcbiAgICB0aGlzLmNoYW5uZWxzID0gdGhpcy5jaGFubmVscy5maWx0ZXIoYyA9PiBjICE9PSBjaGFubmVsKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYG9uT3BlbmAsIGBvbkNsb3NlYCwgYG9uRXJyb3IsYCBhbmQgYG9uTWVzc2FnZWAgcmVnaXN0cmF0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtyZWZzfSAtIGxpc3Qgb2YgcmVmcyByZXR1cm5lZCBieSBjYWxscyB0b1xuICAgKiAgICAgICAgICAgICAgICAgYG9uT3BlbmAsIGBvbkNsb3NlYCwgYG9uRXJyb3IsYCBhbmQgYG9uTWVzc2FnZWBcbiAgICovXG4gIG9mZihyZWZzKXtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzKXtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Nba2V5XSA9IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Nba2V5XS5maWx0ZXIoKFtyZWZdKSA9PiB7XG4gICAgICAgIHJldHVybiByZWZzLmluZGV4T2YocmVmKSA9PT0gLTFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyBhIG5ldyBjaGFubmVsIGZvciB0aGUgZ2l2ZW4gdG9waWNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFuUGFyYW1zIC0gUGFyYW1ldGVycyBmb3IgdGhlIGNoYW5uZWxcbiAgICogQHJldHVybnMge0NoYW5uZWx9XG4gICAqL1xuICBjaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zID0ge30pe1xuICAgIGxldCBjaGFuID0gbmV3IENoYW5uZWwodG9waWMsIGNoYW5QYXJhbXMsIHRoaXMpXG4gICAgdGhpcy5jaGFubmVscy5wdXNoKGNoYW4pXG4gICAgcmV0dXJuIGNoYW5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKi9cbiAgcHVzaChkYXRhKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKXtcbiAgICAgIGxldCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmfSA9IGRhdGFcbiAgICAgIHRoaXMubG9nKFwicHVzaFwiLCBgJHt0b3BpY30gJHtldmVudH0gKCR7am9pbl9yZWZ9LCAke3JlZn0pYCwgcGF5bG9hZClcbiAgICB9XG5cbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkpe1xuICAgICAgdGhpcy5lbmNvZGUoZGF0YSwgcmVzdWx0ID0+IHRoaXMuY29ubi5zZW5kKHJlc3VsdCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKCgpID0+IHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBuZXh0IG1lc3NhZ2UgcmVmLCBhY2NvdW50aW5nIGZvciBvdmVyZmxvd3NcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIG1ha2VSZWYoKXtcbiAgICBsZXQgbmV3UmVmID0gdGhpcy5yZWYgKyAxXG4gICAgaWYobmV3UmVmID09PSB0aGlzLnJlZil7IHRoaXMucmVmID0gMCB9IGVsc2UgeyB0aGlzLnJlZiA9IG5ld1JlZiB9XG5cbiAgICByZXR1cm4gdGhpcy5yZWYudG9TdHJpbmcoKVxuICB9XG5cbiAgc2VuZEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiAmJiAhdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMucHVzaCh7dG9waWM6IFwicGhvZW5peFwiLCBldmVudDogXCJoZWFydGJlYXRcIiwgcGF5bG9hZDoge30sIHJlZjogdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmfSlcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oZWFydGJlYXRUaW1lb3V0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcylcbiAgfVxuXG4gIGZsdXNoU2VuZEJ1ZmZlcigpe1xuICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoID4gMCl7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjaygpKVxuICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICB9XG4gIH1cblxuICBvbkNvbm5NZXNzYWdlKHJhd01lc3NhZ2Upe1xuICAgIHRoaXMuZGVjb2RlKHJhd01lc3NhZ2UuZGF0YSwgbXNnID0+IHtcbiAgICAgIGxldCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmfSA9IG1zZ1xuICAgICAgaWYocmVmICYmIHJlZiA9PT0gdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgICAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZEhlYXJ0YmVhdCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwicmVjZWl2ZVwiLCBgJHtwYXlsb2FkLnN0YXR1cyB8fCBcIlwifSAke3RvcGljfSAke2V2ZW50fSAke3JlZiAmJiBcIihcIiArIHJlZiArIFwiKVwiIHx8IFwiXCJ9YCwgcGF5bG9hZClcblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhbm5lbHMubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5jaGFubmVsc1tpXVxuICAgICAgICBpZighY2hhbm5lbC5pc01lbWJlcih0b3BpYywgZXZlbnQsIHBheWxvYWQsIGpvaW5fcmVmKSl7IGNvbnRpbnVlIH1cbiAgICAgICAgY2hhbm5lbC50cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmKVxuICAgICAgfVxuXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgbGV0IFssIGNhbGxiYWNrXSA9IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZVtpXVxuICAgICAgICBjYWxsYmFjayhtc2cpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGxlYXZlT3BlblRvcGljKHRvcGljKXtcbiAgICBsZXQgZHVwQ2hhbm5lbCA9IHRoaXMuY2hhbm5lbHMuZmluZChjID0+IGMudG9waWMgPT09IHRvcGljICYmIChjLmlzSm9pbmVkKCkgfHwgYy5pc0pvaW5pbmcoKSkpXG4gICAgaWYoZHVwQ2hhbm5lbCl7XG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBgbGVhdmluZyBkdXBsaWNhdGUgdG9waWMgXCIke3RvcGljfVwiYClcbiAgICAgIGR1cENoYW5uZWwubGVhdmUoKVxuICAgIH1cbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBDT05TRUNVVElWRV9SRUxPQURTID0gXCJjb25zZWN1dGl2ZS1yZWxvYWRzXCJcbmV4cG9ydCBjb25zdCBNQVhfUkVMT0FEUyA9IDEwXG5leHBvcnQgY29uc3QgUkVMT0FEX0pJVFRFUl9NSU4gPSA1MDAwXG5leHBvcnQgY29uc3QgUkVMT0FEX0pJVFRFUl9NQVggPSAxMDAwMFxuZXhwb3J0IGNvbnN0IEZBSUxTQUZFX0pJVFRFUiA9IDMwMDAwXG5leHBvcnQgY29uc3QgUEhYX0VWRU5UX0NMQVNTRVMgPSBbXG4gIFwicGh4LWNsaWNrLWxvYWRpbmdcIiwgXCJwaHgtY2hhbmdlLWxvYWRpbmdcIiwgXCJwaHgtc3VibWl0LWxvYWRpbmdcIixcbiAgXCJwaHgta2V5ZG93bi1sb2FkaW5nXCIsIFwicGh4LWtleXVwLWxvYWRpbmdcIiwgXCJwaHgtYmx1ci1sb2FkaW5nXCIsIFwicGh4LWZvY3VzLWxvYWRpbmdcIixcbiAgXCJwaHgtaG9vay1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfTUFHSUNfSUQgPSBcImRhdGEtcGh4LWlkXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MT0FESU5HX0NMQVNTID0gXCJwaHgtbG9hZGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX05PX0ZFRURCQUNLX0NMQVNTID0gXCJwaHgtbm8tZmVlZGJhY2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9FUlJPUl9DTEFTUyA9IFwicGh4LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTID0gXCJwaHgtY2xpZW50LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTID0gXCJwaHgtc2VydmVyLWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFSRU5UX0lEID0gXCJkYXRhLXBoeC1wYXJlbnQtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9NQUlOID0gXCJkYXRhLXBoeC1tYWluXCJcbmV4cG9ydCBjb25zdCBQSFhfUk9PVF9JRCA9IFwiZGF0YS1waHgtcm9vdC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX1ZJRVdQT1JUX1RPUCA9IFwidmlld3BvcnQtdG9wXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV1BPUlRfQk9UVE9NID0gXCJ2aWV3cG9ydC1ib3R0b21cIlxuZXhwb3J0IGNvbnN0IFBIWF9UUklHR0VSX0FDVElPTiA9IFwidHJpZ2dlci1hY3Rpb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9GRUVEQkFDS19GT1IgPSBcImZlZWRiYWNrLWZvclwiXG5leHBvcnQgY29uc3QgUEhYX0ZFRURCQUNLX0dST1VQID0gXCJmZWVkYmFjay1ncm91cFwiXG5leHBvcnQgY29uc3QgUEhYX0hBU19GT0NVU0VEID0gXCJwaHgtaGFzLWZvY3VzZWRcIlxuZXhwb3J0IGNvbnN0IEZPQ1VTQUJMRV9JTlBVVFMgPSBbXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcImNvbG9yXCIsIFwicmFuZ2VcIl1cbmV4cG9ydCBjb25zdCBDSEVDS0FCTEVfSU5QVVRTID0gW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXVxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfU1VCTUlUVEVEID0gXCJwaHgtaGFzLXN1Ym1pdHRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NFU1NJT04gPSBcImRhdGEtcGh4LXNlc3Npb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXX1NFTEVDVE9SID0gYFske1BIWF9TRVNTSU9OfV1gXG5leHBvcnQgY29uc3QgUEhYX1NUSUNLWSA9IFwiZGF0YS1waHgtc3RpY2t5XCJcbmV4cG9ydCBjb25zdCBQSFhfU1RBVElDID0gXCJkYXRhLXBoeC1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUFET05MWSA9IFwiZGF0YS1waHgtcmVhZG9ubHlcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFRCA9IFwiZGF0YS1waHgtZGlzYWJsZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEggPSBcImRpc2FibGUtd2l0aFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFID0gXCJkYXRhLXBoeC1kaXNhYmxlLXdpdGgtcmVzdG9yZVwiXG5leHBvcnQgY29uc3QgUEhYX0hPT0sgPSBcImhvb2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9ERUJPVU5DRSA9IFwiZGVib3VuY2VcIlxuZXhwb3J0IGNvbnN0IFBIWF9USFJPVFRMRSA9IFwidGhyb3R0bGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUERBVEUgPSBcInVwZGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTSA9IFwic3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfU1RSRUFNX1JFRiA9IFwiZGF0YS1waHgtc3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfS0VZID0gXCJrZXlcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUklWQVRFID0gXCJwaHhQcml2YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfQVVUT19SRUNPVkVSID0gXCJhdXRvLXJlY292ZXJcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9ERUJVRyA9IFwicGh4OmxpdmUtc29ja2V0OmRlYnVnXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfUFJPRklMRSA9IFwicGh4OmxpdmUtc29ja2V0OnByb2ZpbGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX0xBVEVOQ1lfU0lNID0gXCJwaHg6bGl2ZS1zb2NrZXQ6bGF0ZW5jeS1zaW1cIlxuZXhwb3J0IGNvbnN0IFBIWF9QUk9HUkVTUyA9IFwicHJvZ3Jlc3NcIlxuZXhwb3J0IGNvbnN0IFBIWF9NT1VOVEVEID0gXCJtb3VudGVkXCJcbmV4cG9ydCBjb25zdCBMT0FERVJfVElNRU9VVCA9IDFcbmV4cG9ydCBjb25zdCBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUID0gMjAwXG5leHBvcnQgY29uc3QgQklORElOR19QUkVGSVggPSBcInBoeC1cIlxuZXhwb3J0IGNvbnN0IFBVU0hfVElNRU9VVCA9IDMwMDAwXG5leHBvcnQgY29uc3QgTElOS19IRUFERVIgPSBcIngtcmVxdWVzdGVkLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFJFU1BPTlNFX1VSTF9IRUFERVIgPSBcIngtcmVzcG9uc2UtdXJsXCJcbmV4cG9ydCBjb25zdCBERUJPVU5DRV9UUklHR0VSID0gXCJkZWJvdW5jZS10cmlnZ2VyXCJcbmV4cG9ydCBjb25zdCBUSFJPVFRMRUQgPSBcInRocm90dGxlZFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfUFJFVl9LRVkgPSBcImRlYm91bmNlLXByZXYta2V5XCJcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgZGVib3VuY2U6IDMwMCxcbiAgdGhyb3R0bGU6IDMwMFxufVxuXG4vLyBSZW5kZXJlZFxuZXhwb3J0IGNvbnN0IERZTkFNSUNTID0gXCJkXCJcbmV4cG9ydCBjb25zdCBTVEFUSUMgPSBcInNcIlxuZXhwb3J0IGNvbnN0IFJPT1QgPSBcInJcIlxuZXhwb3J0IGNvbnN0IENPTVBPTkVOVFMgPSBcImNcIlxuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IFwiZVwiXG5leHBvcnQgY29uc3QgUkVQTFkgPSBcInJcIlxuZXhwb3J0IGNvbnN0IFRJVExFID0gXCJ0XCJcbmV4cG9ydCBjb25zdCBURU1QTEFURVMgPSBcInBcIlxuZXhwb3J0IGNvbnN0IFNUUkVBTSA9IFwic3RyZWFtXCIiLCAiaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRyeVVwbG9hZGVyIHtcbiAgY29uc3RydWN0b3IoZW50cnksIGNodW5rU2l6ZSwgbGl2ZVNvY2tldCl7XG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZW50cnkgPSBlbnRyeVxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMuY2h1bmtTaXplID0gY2h1bmtTaXplXG4gICAgdGhpcy5jaHVua1RpbWVyID0gbnVsbFxuICAgIHRoaXMuZXJyb3JlZCA9IGZhbHNlXG4gICAgdGhpcy51cGxvYWRDaGFubmVsID0gbGl2ZVNvY2tldC5jaGFubmVsKGBsdnU6JHtlbnRyeS5yZWZ9YCwge3Rva2VuOiBlbnRyeS5tZXRhZGF0YSgpfSlcbiAgfVxuXG4gIGVycm9yKHJlYXNvbil7XG4gICAgaWYodGhpcy5lcnJvcmVkKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwubGVhdmUoKVxuICAgIHRoaXMuZXJyb3JlZCA9IHRydWVcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jaHVua1RpbWVyKVxuICAgIHRoaXMuZW50cnkuZXJyb3IocmVhc29uKVxuICB9XG5cbiAgdXBsb2FkKCl7XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwuam9pbigpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIF9kYXRhID0+IHRoaXMucmVhZE5leHRDaHVuaygpKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZWFzb24gPT4gdGhpcy5lcnJvcihyZWFzb24pKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLm9mZnNldCA+PSB0aGlzLmVudHJ5LmZpbGUuc2l6ZSB9XG5cbiAgcmVhZE5leHRDaHVuaygpe1xuICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxuICAgIGxldCBibG9iID0gdGhpcy5lbnRyeS5maWxlLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmNodW5rU2l6ZSArIHRoaXMub2Zmc2V0KVxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgaWYoZS50YXJnZXQuZXJyb3IgPT09IG51bGwpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSBlLnRhcmdldC5yZXN1bHQuYnl0ZUxlbmd0aFxuICAgICAgICB0aGlzLnB1c2hDaHVuayhlLnRhcmdldC5yZXN1bHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9nRXJyb3IoXCJSZWFkIGVycm9yOiBcIiArIGUudGFyZ2V0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgfVxuXG4gIHB1c2hDaHVuayhjaHVuayl7XG4gICAgaWYoIXRoaXMudXBsb2FkQ2hhbm5lbC5pc0pvaW5lZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwucHVzaChcImNodW5rXCIsIGNodW5rKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZW50cnkucHJvZ3Jlc3MoKHRoaXMub2Zmc2V0IC8gdGhpcy5lbnRyeS5maWxlLnNpemUpICogMTAwKVxuICAgICAgICBpZighdGhpcy5pc0RvbmUoKSl7XG4gICAgICAgICAgdGhpcy5jaHVua1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSwgdGhpcy5saXZlU29ja2V0LmdldExhdGVuY3lTaW0oKSB8fCAwKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCAoe3JlYXNvbn0pID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9WSUVXX1NFTEVDVE9SXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBFbnRyeVVwbG9hZGVyIGZyb20gXCIuL2VudHJ5X3VwbG9hZGVyXCJcblxuZXhwb3J0IGxldCBsb2dFcnJvciA9IChtc2csIG9iaikgPT4gY29uc29sZS5lcnJvciAmJiBjb25zb2xlLmVycm9yKG1zZywgb2JqKVxuXG5leHBvcnQgbGV0IGlzQ2lkID0gKGNpZCkgPT4ge1xuICBsZXQgdHlwZSA9IHR5cGVvZihjaWQpXG4gIHJldHVybiB0eXBlID09PSBcIm51bWJlclwiIHx8ICh0eXBlID09PSBcInN0cmluZ1wiICYmIC9eKDB8WzEtOV1cXGQqKSQvLnRlc3QoY2lkKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdER1cGxpY2F0ZUlkcygpe1xuICBsZXQgaWRzID0gbmV3IFNldCgpXG4gIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2lkXVwiKVxuICBmb3IobGV0IGkgPSAwLCBsZW4gPSBlbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgaWYoaWRzLmhhcyhlbGVtc1tpXS5pZCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTXVsdGlwbGUgSURzIGRldGVjdGVkOiAke2VsZW1zW2ldLmlkfS4gRW5zdXJlIHVuaXF1ZSBlbGVtZW50IGlkcy5gKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZHMuYWRkKGVsZW1zW2ldLmlkKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgbGV0IGRlYnVnID0gKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiB7XG4gIGlmKHZpZXcubGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gIH1cbn1cblxuLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbCA6IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsIH1cblxuZXhwb3J0IGxldCBjbG9uZSA9IChvYmopID0+IHsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxuXG5leHBvcnQgbGV0IGNsb3Nlc3RQaHhCaW5kaW5nID0gKGVsLCBiaW5kaW5nLCBib3JkZXJFbCkgPT4ge1xuICBkbyB7XG4gICAgaWYoZWwubWF0Y2hlcyhgWyR7YmluZGluZ31dYCkgJiYgIWVsLmRpc2FibGVkKXsgcmV0dXJuIGVsIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZVxuICB9IHdoaWxlKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxICYmICEoKGJvcmRlckVsICYmIGJvcmRlckVsLmlzU2FtZU5vZGUoZWwpKSB8fCBlbC5tYXRjaGVzKFBIWF9WSUVXX1NFTEVDVE9SKSkpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBsZXQgaXNPYmplY3QgPSAob2JqKSA9PiB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhKG9iaiBpbnN0YW5jZW9mIEFycmF5KVxufVxuXG5leHBvcnQgbGV0IGlzRXF1YWxPYmogPSAob2JqMSwgb2JqMikgPT4gSlNPTi5zdHJpbmdpZnkob2JqMSkgPT09IEpTT04uc3RyaW5naWZ5KG9iajIpXG5cbmV4cG9ydCBsZXQgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgZm9yKGxldCB4IGluIG9iail7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBsZXQgbWF5YmUgPSAoZWwsIGNhbGxiYWNrKSA9PiBlbCAmJiBjYWxsYmFjayhlbClcblxuZXhwb3J0IGxldCBjaGFubmVsVXBsb2FkZXIgPSBmdW5jdGlvbiAoZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldCl7XG4gIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgbGV0IGVudHJ5VXBsb2FkZXIgPSBuZXcgRW50cnlVcGxvYWRlcihlbnRyeSwgcmVzcC5jb25maWcuY2h1bmtfc2l6ZSwgbGl2ZVNvY2tldClcbiAgICBlbnRyeVVwbG9hZGVyLnVwbG9hZCgpXG4gIH0pXG59XG4iLCAibGV0IEJyb3dzZXIgPSB7XG4gIGNhblB1c2hTdGF0ZSgpeyByZXR1cm4gKHR5cGVvZiAoaGlzdG9yeS5wdXNoU3RhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB9LFxuXG4gIGRyb3BMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpXG4gIH0sXG5cbiAgdXBkYXRlTG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSwgaW5pdGlhbCwgZnVuYyl7XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IGtleSA9IHRoaXMubG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IG5ld1ZhbCA9IGN1cnJlbnQgPT09IG51bGwgPyBpbml0aWFsIDogZnVuYyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgICByZXR1cm4gbmV3VmFsXG4gIH0sXG5cbiAgZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSl7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpKVxuICB9LFxuXG4gIHVwZGF0ZUN1cnJlbnRTdGF0ZShjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGNhbGxiYWNrKGhpc3Rvcnkuc3RhdGUgfHwge30pLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgfSxcblxuICBwdXNoU3RhdGUoa2luZCwgbWV0YSwgdG8pe1xuICAgIGlmKHRoaXMuY2FuUHVzaFN0YXRlKCkpe1xuICAgICAgaWYodG8gIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKXtcbiAgICAgICAgaWYobWV0YS50eXBlID09IFwicmVkaXJlY3RcIiAmJiBtZXRhLnNjcm9sbCl7XG4gICAgICAgICAgLy8gSWYgd2UncmUgcmVkaXJlY3Rpbmcgc3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsWSBmb3IgdGhlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZS5cbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gaGlzdG9yeS5zdGF0ZSB8fCB7fVxuICAgICAgICAgIGN1cnJlbnRTdGF0ZS5zY3JvbGwgPSBtZXRhLnNjcm9sbFxuICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGN1cnJlbnRTdGF0ZSwgXCJcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbWV0YS5zY3JvbGwgLy8gT25seSBzdG9yZSB0aGUgc2Nyb2xsIGluIHRoZSByZWRpcmVjdCBjYXNlLlxuICAgICAgICBoaXN0b3J5W2tpbmQgKyBcIlN0YXRlXCJdKG1ldGEsIFwiXCIsIHRvIHx8IG51bGwpIC8vIElFIHdpbGwgY29lcmNlIHVuZGVmaW5lZCB0byBzdHJpbmdcbiAgICAgICAgbGV0IGhhc2hFbCA9IHRoaXMuZ2V0SGFzaFRhcmdldEVsKHdpbmRvdy5sb2NhdGlvbi5oYXNoKVxuXG4gICAgICAgIGlmKGhhc2hFbCl7XG4gICAgICAgICAgaGFzaEVsLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgfSBlbHNlIGlmKG1ldGEudHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdCh0bylcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q29va2llKG5hbWUsIHZhbHVlKXtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfWBcbiAgfSxcblxuICBnZXRDb29raWUobmFtZSl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCg/Oig/Ol58Lio7XFxzKikke25hbWV9XFxzKlxcPVxccyooW147XSopLiokKXxeLiokYCksIFwiJDFcIilcbiAgfSxcblxuICByZWRpcmVjdCh0b1VSTCwgZmxhc2gpe1xuICAgIGlmKGZsYXNoKXsgQnJvd3Nlci5zZXRDb29raWUoXCJfX3Bob2VuaXhfZmxhc2hfX1wiLCBmbGFzaCArIFwiOyBtYXgtYWdlPTYwMDAwOyBwYXRoPS9cIikgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRvVVJMXG4gIH0sXG5cbiAgbG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpeyByZXR1cm4gYCR7bmFtZXNwYWNlfS0ke3N1YmtleX1gIH0sXG5cbiAgZ2V0SGFzaFRhcmdldEVsKG1heWJlSGFzaCl7XG4gICAgbGV0IGhhc2ggPSBtYXliZUhhc2gudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSlcbiAgICBpZihoYXNoID09PSBcIlwiKXsgcmV0dXJuIH1cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtuYW1lPVwiJHtoYXNofVwiXWApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJvd3NlclxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBmb2N1c1N0YWNrID0gbnVsbFxubGV0IGRlZmF1bHRfdHJhbnNpdGlvbl90aW1lID0gMjAwXG5cbmxldCBKUyA9IHtcbiAgZXhlYyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZGVmYXVsdHMpe1xuICAgIGxldCBbZGVmYXVsdEtpbmQsIGRlZmF1bHRBcmdzXSA9IGRlZmF1bHRzIHx8IFtudWxsLCB7Y2FsbGJhY2s6IGRlZmF1bHRzICYmIGRlZmF1bHRzLmNhbGxiYWNrfV1cbiAgICBsZXQgY29tbWFuZHMgPSBwaHhFdmVudC5jaGFyQXQoMCkgPT09IFwiW1wiID9cbiAgICAgIEpTT04ucGFyc2UocGh4RXZlbnQpIDogW1tkZWZhdWx0S2luZCwgZGVmYXVsdEFyZ3NdXVxuXG4gICAgY29tbWFuZHMuZm9yRWFjaCgoW2tpbmQsIGFyZ3NdKSA9PiB7XG4gICAgICBpZihraW5kID09PSBkZWZhdWx0S2luZCAmJiBkZWZhdWx0QXJncy5kYXRhKXtcbiAgICAgICAgYXJncy5kYXRhID0gT2JqZWN0LmFzc2lnbihhcmdzLmRhdGEgfHwge30sIGRlZmF1bHRBcmdzLmRhdGEpXG4gICAgICAgIGFyZ3MuY2FsbGJhY2sgPSBhcmdzLmNhbGxiYWNrIHx8IGRlZmF1bHRBcmdzLmNhbGxiYWNrXG4gICAgICB9XG4gICAgICB0aGlzLmZpbHRlclRvRWxzKHNvdXJjZUVsLCBhcmdzKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgdGhpc1tgZXhlY18ke2tpbmR9YF0oZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCBhcmdzKVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIGlzVmlzaWJsZShlbCl7XG4gICAgcmV0dXJuICEhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCA+IDApXG4gIH0sXG5cbiAgLy8gcmV0dXJucyB0cnVlIGlmIGFueSBwYXJ0IG9mIHRoZSBlbGVtZW50IGlzIGluc2lkZSB0aGUgdmlld3BvcnRcbiAgaXNJblZpZXdwb3J0KGVsKXtcbiAgICBjb25zdCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICAgIGNvbnN0IHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoXG5cbiAgICByZXR1cm4gKFxuICAgICAgcmVjdC5yaWdodCA+IDAgJiZcbiAgICAgIHJlY3QuYm90dG9tID4gMCAmJlxuICAgICAgcmVjdC5sZWZ0IDwgd2luZG93V2lkdGggJiZcbiAgICAgIHJlY3QudG9wIDwgd2luZG93SGVpZ2h0XG4gICAgKVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICAvLyBjb21tYW5kc1xuXG4gIGV4ZWNfZXhlYyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyLCB0b30pe1xuICAgIGxldCBub2RlcyA9IHRvID8gRE9NLmFsbChkb2N1bWVudCwgdG8pIDogW3NvdXJjZUVsXVxuICAgIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBsZXQgZW5jb2RlZEpTID0gbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cilcbiAgICAgIGlmKCFlbmNvZGVkSlMpeyB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkICR7YXR0cn0gdG8gY29udGFpbiBKUyBjb21tYW5kIG9uIFwiJHt0b31cImApIH1cbiAgICAgIHZpZXcubGl2ZVNvY2tldC5leGVjSlMobm9kZSwgZW5jb2RlZEpTLCBldmVudFR5cGUpXG4gICAgfSlcbiAgfSxcblxuICBleGVjX2Rpc3BhdGNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RvLCBldmVudCwgZGV0YWlsLCBidWJibGVzfSl7XG4gICAgZGV0YWlsID0gZGV0YWlsIHx8IHt9XG4gICAgZGV0YWlsLmRpc3BhdGNoZXIgPSBzb3VyY2VFbFxuICAgIERPTS5kaXNwYXRjaEV2ZW50KGVsLCBldmVudCwge2RldGFpbCwgYnViYmxlc30pXG4gIH0sXG5cbiAgZXhlY19wdXNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncyl7XG4gICAgbGV0IHtldmVudCwgZGF0YSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmcsIGxvYWRpbmcsIHZhbHVlLCBkaXNwYXRjaGVyLCBjYWxsYmFja30gPSBhcmdzXG4gICAgbGV0IHB1c2hPcHRzID0ge2xvYWRpbmcsIHZhbHVlLCB0YXJnZXQsIHBhZ2VfbG9hZGluZzogISFwYWdlX2xvYWRpbmd9XG4gICAgbGV0IHRhcmdldFNyYyA9IGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIiAmJiBkaXNwYXRjaGVyID8gZGlzcGF0Y2hlciA6IHNvdXJjZUVsXG4gICAgbGV0IHBoeFRhcmdldCA9IHRhcmdldCB8fCB0YXJnZXRTcmMuZ2V0QXR0cmlidXRlKHZpZXcuYmluZGluZyhcInRhcmdldFwiKSkgfHwgdGFyZ2V0U3JjXG4gICAgdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgKHRhcmdldFZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgaWYoIXRhcmdldFZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgICBpZihldmVudFR5cGUgPT09IFwiY2hhbmdlXCIpe1xuICAgICAgICBsZXQge25ld0NpZCwgX3RhcmdldH0gPSBhcmdzXG4gICAgICAgIF90YXJnZXQgPSBfdGFyZ2V0IHx8IChET00uaXNGb3JtSW5wdXQoc291cmNlRWwpID8gc291cmNlRWwubmFtZSA6IHVuZGVmaW5lZClcbiAgICAgICAgaWYoX3RhcmdldCl7IHB1c2hPcHRzLl90YXJnZXQgPSBfdGFyZ2V0IH1cbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoSW5wdXQoc291cmNlRWwsIHRhcmdldEN0eCwgbmV3Q2lkLCBldmVudCB8fCBwaHhFdmVudCwgcHVzaE9wdHMsIGNhbGxiYWNrKVxuICAgICAgfSBlbHNlIGlmKGV2ZW50VHlwZSA9PT0gXCJzdWJtaXRcIil7XG4gICAgICAgIGxldCB7c3VibWl0dGVyfSA9IGFyZ3NcbiAgICAgICAgdGFyZ2V0Vmlldy5zdWJtaXRGb3JtKHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBzdWJtaXR0ZXIsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFZpZXcucHVzaEV2ZW50KGV2ZW50VHlwZSwgc291cmNlRWwsIHRhcmdldEN0eCwgZXZlbnQgfHwgcGh4RXZlbnQsIGRhdGEsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfbmF2aWdhdGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgcmVwbGFjZSA/IFwicmVwbGFjZVwiIDogXCJwdXNoXCIpXG4gIH0sXG5cbiAgZXhlY19wYXRjaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtocmVmLCByZXBsYWNlfSl7XG4gICAgdmlldy5saXZlU29ja2V0LnB1c2hIaXN0b3J5UGF0Y2goaHJlZiwgcmVwbGFjZSA/IFwicmVwbGFjZVwiIDogXCJwdXNoXCIsIHNvdXJjZUVsKVxuICB9LFxuXG4gIGV4ZWNfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IEFSSUEuYXR0ZW1wdEZvY3VzKGVsKSlcbiAgfSxcblxuICBleGVjX2ZvY3VzX2ZpcnN0KGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCkgfHwgQVJJQS5mb2N1c0ZpcnN0KGVsKSlcbiAgfSxcblxuICBleGVjX3B1c2hfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGZvY3VzU3RhY2sgPSBlbCB8fCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX3BvcF9mb2N1cyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgaWYoZm9jdXNTdGFjayl7IGZvY3VzU3RhY2suZm9jdXMoKSB9XG4gICAgICBmb2N1c1N0YWNrID0gbnVsbFxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19hZGRfY2xhc3MoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7bmFtZXMsIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgbmFtZXMsIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfcmVtb3ZlX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBuYW1lcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3RvZ2dsZV9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHt0bywgbmFtZXMsIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLnRvZ2dsZUNsYXNzZXMoZWwsIG5hbWVzLCB0cmFuc2l0aW9uLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlX2F0dHIoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7YXR0cjogW2F0dHIsIHZhbDEsIHZhbDJdfSl7XG4gICAgaWYoZWwuaGFzQXR0cmlidXRlKGF0dHIpKXtcbiAgICAgIGlmKHZhbDIgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgIC8vIHRvZ2dsZSBiZXR3ZWVuIHZhbDEgYW5kIHZhbDJcbiAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKGF0dHIpID09PSB2YWwxKXtcbiAgICAgICAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtbYXR0ciwgdmFsMl1dLCBbXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtbYXR0ciwgdmFsMV1dLCBbXSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVtb3ZlIGF0dHJcbiAgICAgICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbXSwgW2F0dHJdKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtbYXR0ciwgdmFsMV1dLCBbXSlcbiAgICB9XG4gIH0sXG5cbiAgZXhlY190cmFuc2l0aW9uKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RpbWUsIHRyYW5zaXRpb259KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIGlucywgb3V0cywgdGltZX0pe1xuICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIGlucywgb3V0cywgdGltZSlcbiAgfSxcblxuICBleGVjX3Nob3coZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfaGlkZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5oaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19zZXRfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyOiBbYXR0ciwgdmFsXX0pe1xuICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWxdXSwgW10pXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbXSwgW2F0dHJdKVxuICB9LFxuXG4gIC8vIHV0aWxzIGZvciBjb21tYW5kc1xuXG4gIHNob3coZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYoIXRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCBudWxsLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICBoaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpe1xuICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBudWxsLCB0cmFuc2l0aW9uLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKXtcbiAgICB0aW1lID0gdGltZSB8fCBkZWZhdWx0X3RyYW5zaXRpb25fdGltZVxuICAgIGxldCBbaW5DbGFzc2VzLCBpblN0YXJ0Q2xhc3NlcywgaW5FbmRDbGFzc2VzXSA9IGlucyB8fCBbW10sIFtdLCBbXV1cbiAgICBsZXQgW291dENsYXNzZXMsIG91dFN0YXJ0Q2xhc3Nlcywgb3V0RW5kQ2xhc3Nlc10gPSBvdXRzIHx8IFtbXSwgW10sIFtdXVxuICAgIGlmKGluQ2xhc3Nlcy5sZW5ndGggPiAwIHx8IG91dENsYXNzZXMubGVuZ3RoID4gMCl7XG4gICAgICBpZih0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0U3RhcnRDbGFzc2VzLCBpbkNsYXNzZXMuY29uY2F0KGluU3RhcnRDbGFzc2VzKS5jb25jYXQoaW5FbmRDbGFzc2VzKSlcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRDbGFzc2VzLCBbXSlcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dEVuZENsYXNzZXMsIG91dFN0YXJ0Q2xhc3NlcykpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLXN0YXJ0XCIpKVxuICAgICAgICB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgb3V0Q2xhc3Nlcy5jb25jYXQob3V0RW5kQ2xhc3NlcykpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZihldmVudFR5cGUgPT09IFwicmVtb3ZlXCIpeyByZXR1cm4gfVxuICAgICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5TdGFydENsYXNzZXMsIG91dENsYXNzZXMuY29uY2F0KG91dFN0YXJ0Q2xhc3NlcykuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5DbGFzc2VzLCBbXSlcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluRW5kQ2xhc3NlcywgaW5TdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIGluQ2xhc3Nlcy5jb25jYXQoaW5FbmRDbGFzc2VzKSlcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIilcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgICAgbGV0IHN0aWNreURpc3BsYXkgPSBkaXNwbGF5IHx8IHRoaXMuZGVmYXVsdERpc3BsYXkoZWwpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gc3RpY2t5RGlzcGxheSlcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdG9nZ2xlQ2xhc3NlcyhlbCwgY2xhc3NlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldyl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBsZXQgW3ByZXZBZGRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImNsYXNzZXNcIiwgW1tdLCBbXV0pXG4gICAgICBsZXQgbmV3QWRkcyA9IGNsYXNzZXMuZmlsdGVyKG5hbWUgPT4gcHJldkFkZHMuaW5kZXhPZihuYW1lKSA8IDAgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBuZXdSZW1vdmVzID0gY2xhc3Nlcy5maWx0ZXIobmFtZSA9PiBwcmV2UmVtb3Zlcy5pbmRleE9mKG5hbWUpIDwgMCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpXG4gICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgbmV3QWRkcywgbmV3UmVtb3ZlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgICB9KVxuICB9LFxuXG4gIGFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcywgcmVtb3ZlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldyl7XG4gICAgdGltZSA9IHRpbWUgfHwgZGVmYXVsdF90cmFuc2l0aW9uX3RpbWVcbiAgICBsZXQgW3RyYW5zaXRpb25SdW4sIHRyYW5zaXRpb25TdGFydCwgdHJhbnNpdGlvbkVuZF0gPSB0cmFuc2l0aW9uIHx8IFtbXSwgW10sIFtdXVxuICAgIGlmKHRyYW5zaXRpb25SdW4ubGVuZ3RoID4gMCl7XG4gICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25TdGFydCwgW10uY29uY2F0KHRyYW5zaXRpb25SdW4pLmNvbmNhdCh0cmFuc2l0aW9uRW5kKSlcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25SdW4sIFtdKVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25TdGFydCkpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBsZXQgb25Eb25lID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMuY29uY2F0KHRyYW5zaXRpb25FbmQpLCByZW1vdmVzLmNvbmNhdCh0cmFuc2l0aW9uUnVuKS5jb25jYXQodHJhbnNpdGlvblN0YXJ0KSlcbiAgICAgIHJldHVybiB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICAgIH1cblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgbGV0IFtwcmV2QWRkcywgcHJldlJlbW92ZXNdID0gRE9NLmdldFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIFtbXSwgW11dKVxuICAgICAgbGV0IGtlZXBBZGRzID0gYWRkcy5maWx0ZXIobmFtZSA9PiBwcmV2QWRkcy5pbmRleE9mKG5hbWUpIDwgMCAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IGtlZXBSZW1vdmVzID0gcmVtb3Zlcy5maWx0ZXIobmFtZSA9PiBwcmV2UmVtb3Zlcy5pbmRleE9mKG5hbWUpIDwgMCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpXG4gICAgICBsZXQgbmV3QWRkcyA9IHByZXZBZGRzLmZpbHRlcihuYW1lID0+IHJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwQWRkcylcbiAgICAgIGxldCBuZXdSZW1vdmVzID0gcHJldlJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gYWRkcy5pbmRleE9mKG5hbWUpIDwgMCkuY29uY2F0KGtlZXBSZW1vdmVzKVxuXG4gICAgICBET00ucHV0U3RpY2t5KGVsLCBcImNsYXNzZXNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgICAgY3VycmVudEVsLmNsYXNzTGlzdC5yZW1vdmUoLi4ubmV3UmVtb3ZlcylcbiAgICAgICAgY3VycmVudEVsLmNsYXNzTGlzdC5hZGQoLi4ubmV3QWRkcylcbiAgICAgICAgcmV0dXJuIFtuZXdBZGRzLCBuZXdSZW1vdmVzXVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIHNldE9yUmVtb3ZlQXR0cnMoZWwsIHNldHMsIHJlbW92ZXMpe1xuICAgIGxldCBbcHJldlNldHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiYXR0cnNcIiwgW1tdLCBbXV0pXG5cbiAgICBsZXQgYWx0ZXJlZEF0dHJzID0gc2V0cy5tYXAoKFthdHRyLCBfdmFsXSkgPT4gYXR0cikuY29uY2F0KHJlbW92ZXMpXG4gICAgbGV0IG5ld1NldHMgPSBwcmV2U2V0cy5maWx0ZXIoKFthdHRyLCBfdmFsXSkgPT4gIWFsdGVyZWRBdHRycy5pbmNsdWRlcyhhdHRyKSkuY29uY2F0KHNldHMpXG4gICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIoKGF0dHIpID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChyZW1vdmVzKVxuXG4gICAgRE9NLnB1dFN0aWNreShlbCwgXCJhdHRyc1wiLCBjdXJyZW50RWwgPT4ge1xuICAgICAgbmV3UmVtb3Zlcy5mb3JFYWNoKGF0dHIgPT4gY3VycmVudEVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKSlcbiAgICAgIG5ld1NldHMuZm9yRWFjaCgoW2F0dHIsIHZhbF0pID0+IGN1cnJlbnRFbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsKSlcbiAgICAgIHJldHVybiBbbmV3U2V0cywgbmV3UmVtb3Zlc11cbiAgICB9KVxuICB9LFxuXG4gIGhhc0FsbENsYXNzZXMoZWwsIGNsYXNzZXMpeyByZXR1cm4gY2xhc3Nlcy5ldmVyeShuYW1lID0+IGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSkgfSxcblxuICBpc1RvZ2dsZWRPdXQoZWwsIG91dENsYXNzZXMpe1xuICAgIHJldHVybiAhdGhpcy5pc1Zpc2libGUoZWwpIHx8IHRoaXMuaGFzQWxsQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcylcbiAgfSxcblxuICBmaWx0ZXJUb0Vscyhzb3VyY2VFbCwge3RvfSl7XG4gICAgcmV0dXJuIHRvID8gRE9NLmFsbChkb2N1bWVudCwgdG8pIDogW3NvdXJjZUVsXVxuICB9LFxuXG4gIGRlZmF1bHREaXNwbGF5KGVsKXtcbiAgICByZXR1cm4ge3RyOiBcInRhYmxlLXJvd1wiLCB0ZDogXCJ0YWJsZS1jZWxsXCJ9W2VsLnRhZ05hbWUudG9Mb3dlckNhc2UoKV0gfHwgXCJibG9ja1wiXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSlMiLCAiaW1wb3J0IHtcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgREVCT1VOQ0VfUFJFVl9LRVksXG4gIERFQk9VTkNFX1RSSUdHRVIsXG4gIEZPQ1VTQUJMRV9JTlBVVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9FVkVOVF9DTEFTU0VTLFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfTUFJTixcbiAgUEhYX05PX0ZFRURCQUNLX0NMQVNTLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJJVkFURSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfU1RJQ0tZLFxuICBUSFJPVFRMRURcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxuaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5sZXQgRE9NID0ge1xuICBieUlkKGlkKXsgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSB8fCBsb2dFcnJvcihgbm8gaWQgZm91bmQgZm9yICR7aWR9YCkgfSxcblxuICByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKXtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcbiAgICBpZihlbC5jbGFzc0xpc3QubGVuZ3RoID09PSAwKXsgZWwucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIikgfVxuICB9LFxuXG4gIGFsbChub2RlLCBxdWVyeSwgY2FsbGJhY2spe1xuICAgIGlmKCFub2RlKXsgcmV0dXJuIFtdIH1cbiAgICBsZXQgYXJyYXkgPSBBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gYXJyYXkuZm9yRWFjaChjYWxsYmFjaykgOiBhcnJheVxuICB9LFxuXG4gIGNoaWxkTm9kZUxlbmd0aChodG1sKXtcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRFbGVtZW50Q291bnRcbiAgfSxcblxuICBpc1VwbG9hZElucHV0KGVsKXsgcmV0dXJuIGVsLnR5cGUgPT09IFwiZmlsZVwiICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikgIT09IG51bGwgfSxcblxuICBpc0F1dG9VcGxvYWQoaW5wdXRFbCl7IHJldHVybiBpbnB1dEVsLmhhc0F0dHJpYnV0ZShcImRhdGEtcGh4LWF1dG8tdXBsb2FkXCIpIH0sXG5cbiAgZmluZFVwbG9hZElucHV0cyhub2RlKXtcbiAgICBjb25zdCBmb3JtSWQgPSBub2RlLmlkXG4gICAgY29uc3QgaW5wdXRzT3V0c2lkZUZvcm0gPSB0aGlzLmFsbChkb2N1bWVudCwgYGlucHV0W3R5cGU9XCJmaWxlXCJdWyR7UEhYX1VQTE9BRF9SRUZ9XVtmb3JtPVwiJHtmb3JtSWR9XCJdYClcbiAgICByZXR1cm4gdGhpcy5hbGwobm9kZSwgYGlucHV0W3R5cGU9XCJmaWxlXCJdWyR7UEhYX1VQTE9BRF9SRUZ9XWApLmNvbmNhdChpbnB1dHNPdXRzaWRlRm9ybSlcbiAgfSxcblxuICBmaW5kQ29tcG9uZW50Tm9kZUxpc3Qobm9kZSwgY2lkKXtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcodGhpcy5hbGwobm9kZSwgYFske1BIWF9DT01QT05FTlR9PVwiJHtjaWR9XCJdYCksIG5vZGUpXG4gIH0sXG5cbiAgaXNQaHhEZXN0cm95ZWQobm9kZSl7XG4gICAgcmV0dXJuIG5vZGUuaWQgJiYgRE9NLnByaXZhdGUobm9kZSwgXCJkZXN0cm95ZWRcIikgPyB0cnVlIDogZmFsc2VcbiAgfSxcblxuICB3YW50c05ld1RhYihlKXtcbiAgICBsZXQgd2FudHNOZXdUYWIgPSBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLm1ldGFLZXkgfHwgKGUuYnV0dG9uICYmIGUuYnV0dG9uID09PSAxKVxuICAgIGxldCBpc0Rvd25sb2FkID0gKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgJiYgZS50YXJnZXQuaGFzQXR0cmlidXRlKFwiZG93bmxvYWRcIikpXG4gICAgbGV0IGlzVGFyZ2V0QmxhbmsgPSBlLnRhcmdldC5oYXNBdHRyaWJ1dGUoXCJ0YXJnZXRcIikgJiYgZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpLnRvTG93ZXJDYXNlKCkgPT09IFwiX2JsYW5rXCJcbiAgICByZXR1cm4gd2FudHNOZXdUYWIgfHwgaXNUYXJnZXRCbGFuayB8fCBpc0Rvd25sb2FkXG4gIH0sXG5cbiAgaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKXtcbiAgICAvLyBJZ25vcmUgZm9ybSBzdWJtaXNzaW9ucyBpbnRlbmRlZCB0byBjbG9zZSBhIG5hdGl2ZSA8ZGlhbG9nPiBlbGVtZW50XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2RpYWxvZyN1c2FnZV9ub3Rlc1xuICAgIGxldCBpc0RpYWxvZ1N1Ym1pdCA9IChlLnRhcmdldCAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIikgPT09IFwiZGlhbG9nXCIpIHx8XG4gICAgICAoZS5zdWJtaXR0ZXIgJiYgZS5zdWJtaXR0ZXIuZ2V0QXR0cmlidXRlKFwiZm9ybW1ldGhvZFwiKSA9PT0gXCJkaWFsb2dcIilcblxuICAgIGlmKGlzRGlhbG9nU3VibWl0KXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gIWUuZGVmYXVsdFByZXZlbnRlZCAmJiAhdGhpcy53YW50c05ld1RhYihlKVxuICAgIH1cbiAgfSxcblxuICBpc05ld1BhZ2VDbGljayhlLCBjdXJyZW50TG9jYXRpb24pe1xuICAgIGxldCBocmVmID0gZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCA/IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgOiBudWxsXG4gICAgbGV0IHVybFxuXG4gICAgaWYoZS5kZWZhdWx0UHJldmVudGVkIHx8IGhyZWYgPT09IG51bGwgfHwgdGhpcy53YW50c05ld1RhYihlKSl7IHJldHVybiBmYWxzZSB9XG4gICAgaWYoaHJlZi5zdGFydHNXaXRoKFwibWFpbHRvOlwiKSB8fCBocmVmLnN0YXJ0c1dpdGgoXCJ0ZWw6XCIpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICBpZihlLnRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZSl7IHJldHVybiBmYWxzZSB9XG5cbiAgICB0cnkge1xuICAgICAgdXJsID0gbmV3IFVSTChocmVmKVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsID0gbmV3IFVSTChocmVmLCBjdXJyZW50TG9jYXRpb24pXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgLy8gYmFkIFVSTCwgZmFsbGJhY2sgdG8gbGV0IGJyb3dzZXIgdHJ5IGl0IGFzIGV4dGVybmFsXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYodXJsLmhvc3QgPT09IGN1cnJlbnRMb2NhdGlvbi5ob3N0ICYmIHVybC5wcm90b2NvbCA9PT0gY3VycmVudExvY2F0aW9uLnByb3RvY29sKXtcbiAgICAgIGlmKHVybC5wYXRobmFtZSA9PT0gY3VycmVudExvY2F0aW9uLnBhdGhuYW1lICYmIHVybC5zZWFyY2ggPT09IGN1cnJlbnRMb2NhdGlvbi5zZWFyY2gpe1xuICAgICAgICByZXR1cm4gdXJsLmhhc2ggPT09IFwiXCIgJiYgIXVybC5ocmVmLmVuZHNXaXRoKFwiI1wiKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXJsLnByb3RvY29sLnN0YXJ0c1dpdGgoXCJodHRwXCIpXG4gIH0sXG5cbiAgbWFya1BoeENoaWxkRGVzdHJveWVkKGVsKXtcbiAgICBpZih0aGlzLmlzUGh4Q2hpbGQoZWwpKXsgZWwuc2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OLCBcIlwiKSB9XG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBcImRlc3Ryb3llZFwiLCB0cnVlKVxuICB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgcGFyZW50SWQpe1xuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICByZXR1cm4gdGhpcy5maW5kUGh4Q2hpbGRyZW4odGVtcGxhdGUuY29udGVudCwgcGFyZW50SWQpXG4gIH0sXG5cbiAgaXNJZ25vcmVkKGVsLCBwaHhVcGRhdGUpe1xuICAgIHJldHVybiAoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkgfHwgZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtdXBkYXRlXCIpKSA9PT0gXCJpZ25vcmVcIlxuICB9LFxuXG4gIGlzUGh4VXBkYXRlKGVsLCBwaHhVcGRhdGUsIHVwZGF0ZVR5cGVzKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIHVwZGF0ZVR5cGVzLmluZGV4T2YoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkpID49IDBcbiAgfSxcblxuICBmaW5kUGh4U3RpY2t5KGVsKXsgcmV0dXJuIHRoaXMuYWxsKGVsLCBgWyR7UEhYX1NUSUNLWX1dYCkgfSxcblxuICBmaW5kUGh4Q2hpbGRyZW4oZWwsIHBhcmVudElkKXtcbiAgICByZXR1cm4gdGhpcy5hbGwoZWwsIGAke1BIWF9WSUVXX1NFTEVDVE9SfVske1BIWF9QQVJFTlRfSUR9PVwiJHtwYXJlbnRJZH1cIl1gKVxuICB9LFxuXG4gIGZpbmRFeGlzdGluZ1BhcmVudENJRHMobm9kZSwgY2lkcyl7XG4gICAgLy8gd2Ugb25seSB3YW50IHRvIGZpbmQgcGFyZW50cyB0aGF0IGV4aXN0IG9uIHRoZSBwYWdlXG4gICAgLy8gaWYgYSBjaWQgaXMgbm90IG9uIHRoZSBwYWdlLCB0aGUgb25seSB3YXkgaXQgY2FuIGJlIGFkZGVkIGJhY2sgdG8gdGhlIHBhZ2VcbiAgICAvLyBpcyBpZiBhIHBhcmVudCBhZGRzIGl0IGJhY2ssIHRoZXJlZm9yZSBpZiBhIGNpZCBkb2VzIG5vdCBleGlzdCBvbiB0aGUgcGFnZSxcbiAgICAvLyB3ZSBzaG91bGQgbm90IHRyeSB0byByZW5kZXIgaXQgYnkgaXRzZWxmIChiZWNhdXNlIGl0IHdvdWxkIGJlIHJlbmRlcmVkIHR3aWNlLFxuICAgIC8vIG9uZSBieSB0aGUgcGFyZW50LCBhbmQgYSBzZWNvbmQgdGltZSBieSBpdHNlbGYpXG4gICAgbGV0IHBhcmVudENpZHMgPSBuZXcgU2V0KClcbiAgICBsZXQgY2hpbGRyZW5DaWRzID0gbmV3IFNldCgpXG5cbiAgICBjaWRzLmZvckVhY2goY2lkID0+IHtcbiAgICAgIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXWApLCBub2RlKS5mb3JFYWNoKHBhcmVudCA9PiB7XG4gICAgICAgIHBhcmVudENpZHMuYWRkKGNpZClcbiAgICAgICAgdGhpcy5hbGwocGFyZW50LCBgWyR7UEhYX0NPTVBPTkVOVH1dYClcbiAgICAgICAgICAubWFwKGVsID0+IHBhcnNlSW50KGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSkpXG4gICAgICAgICAgLmZvckVhY2goY2hpbGRDSUQgPT4gY2hpbGRyZW5DaWRzLmFkZChjaGlsZENJRCkpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBjaGlsZHJlbkNpZHMuZm9yRWFjaChjaGlsZENpZCA9PiBwYXJlbnRDaWRzLmRlbGV0ZShjaGlsZENpZCkpXG5cbiAgICByZXR1cm4gcGFyZW50Q2lkc1xuICB9LFxuXG4gIGZpbHRlcldpdGhpblNhbWVMaXZlVmlldyhub2RlcywgcGFyZW50KXtcbiAgICBpZihwYXJlbnQucXVlcnlTZWxlY3RvcihQSFhfVklFV19TRUxFQ1RPUikpe1xuICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihlbCA9PiB0aGlzLndpdGhpblNhbWVMaXZlVmlldyhlbCwgcGFyZW50KSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGVzXG4gICAgfVxuICB9LFxuXG4gIHdpdGhpblNhbWVMaXZlVmlldyhub2RlLCBwYXJlbnQpe1xuICAgIHdoaWxlKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpe1xuICAgICAgaWYobm9kZS5pc1NhbWVOb2RlKHBhcmVudCkpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICBpZihub2RlLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgIT09IG51bGwpeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgfSxcblxuICBwcml2YXRlKGVsLCBrZXkpeyByZXR1cm4gZWxbUEhYX1BSSVZBVEVdICYmIGVsW1BIWF9QUklWQVRFXVtrZXldIH0sXG5cbiAgZGVsZXRlUHJpdmF0ZShlbCwga2V5KXsgZWxbUEhYX1BSSVZBVEVdICYmIGRlbGV0ZSAoZWxbUEhYX1BSSVZBVEVdW2tleV0pIH0sXG5cbiAgcHV0UHJpdmF0ZShlbCwga2V5LCB2YWx1ZSl7XG4gICAgaWYoIWVsW1BIWF9QUklWQVRFXSl7IGVsW1BIWF9QUklWQVRFXSA9IHt9IH1cbiAgICBlbFtQSFhfUFJJVkFURV1ba2V5XSA9IHZhbHVlXG4gIH0sXG5cbiAgdXBkYXRlUHJpdmF0ZShlbCwga2V5LCBkZWZhdWx0VmFsLCB1cGRhdGVGdW5jKXtcbiAgICBsZXQgZXhpc3RpbmcgPSB0aGlzLnByaXZhdGUoZWwsIGtleSlcbiAgICBpZihleGlzdGluZyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGRlZmF1bHRWYWwpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdXBkYXRlRnVuYyhleGlzdGluZykpXG4gICAgfVxuICB9LFxuXG4gIGNvcHlQcml2YXRlcyh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1BIWF9QUklWQVRFXSl7XG4gICAgICB0YXJnZXRbUEhYX1BSSVZBVEVdID0gc291cmNlW1BIWF9QUklWQVRFXVxuICAgIH1cbiAgfSxcblxuICBwdXRUaXRsZShzdHIpe1xuICAgIGxldCB0aXRsZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpXG4gICAgaWYodGl0bGVFbCl7XG4gICAgICBsZXQge3ByZWZpeCwgc3VmZml4fSA9IHRpdGxlRWwuZGF0YXNldFxuICAgICAgZG9jdW1lbnQudGl0bGUgPSBgJHtwcmVmaXggfHwgXCJcIn0ke3N0cn0ke3N1ZmZpeCB8fCBcIlwifWBcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQudGl0bGUgPSBzdHJcbiAgICB9XG4gIH0sXG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgY2FsbGJhY2spe1xuICAgIGxldCBkZWJvdW5jZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhEZWJvdW5jZSlcbiAgICBsZXQgdGhyb3R0bGUgPSBlbC5nZXRBdHRyaWJ1dGUocGh4VGhyb3R0bGUpXG5cbiAgICBpZihkZWJvdW5jZSA9PT0gXCJcIil7IGRlYm91bmNlID0gZGVmYXVsdERlYm91bmNlIH1cbiAgICBpZih0aHJvdHRsZSA9PT0gXCJcIil7IHRocm90dGxlID0gZGVmYXVsdFRocm90dGxlIH1cbiAgICBsZXQgdmFsdWUgPSBkZWJvdW5jZSB8fCB0aHJvdHRsZVxuICAgIHN3aXRjaCh2YWx1ZSl7XG4gICAgICBjYXNlIG51bGw6IHJldHVybiBjYWxsYmFjaygpXG5cbiAgICAgIGNhc2UgXCJibHVyXCI6XG4gICAgICAgIGlmKHRoaXMub25jZShlbCwgXCJkZWJvdW5jZS1ibHVyXCIpKXtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiBjYWxsYmFjaygpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsZXQgdGltZW91dCA9IHBhcnNlSW50KHZhbHVlKVxuICAgICAgICBsZXQgdHJpZ2dlciA9ICgpID0+IHRocm90dGxlID8gdGhpcy5kZWxldGVQcml2YXRlKGVsLCBUSFJPVFRMRUQpIDogY2FsbGJhY2soKVxuICAgICAgICBsZXQgY3VycmVudEN5Y2xlID0gdGhpcy5pbmNDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUiwgdHJpZ2dlcilcbiAgICAgICAgaWYoaXNOYU4odGltZW91dCkpeyByZXR1cm4gbG9nRXJyb3IoYGludmFsaWQgdGhyb3R0bGUvZGVib3VuY2UgdmFsdWU6ICR7dmFsdWV9YCkgfVxuICAgICAgICBpZih0aHJvdHRsZSl7XG4gICAgICAgICAgbGV0IG5ld0tleURvd24gPSBmYWxzZVxuICAgICAgICAgIGlmKGV2ZW50LnR5cGUgPT09IFwia2V5ZG93blwiKXtcbiAgICAgICAgICAgIGxldCBwcmV2S2V5ID0gdGhpcy5wcml2YXRlKGVsLCBERUJPVU5DRV9QUkVWX0tFWSlcbiAgICAgICAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVksIGV2ZW50LmtleSlcbiAgICAgICAgICAgIG5ld0tleURvd24gPSBwcmV2S2V5ICE9PSBldmVudC5rZXlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZighbmV3S2V5RG93biAmJiB0aGlzLnByaXZhdGUoZWwsIFRIUk9UVExFRCkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSB9XG4gICAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBUSFJPVFRMRUQsIHQpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCBjdXJyZW50Q3ljbGUpIH1cbiAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvcm0gPSBlbC5mb3JtXG4gICAgICAgIGlmKGZvcm0gJiYgdGhpcy5vbmNlKGZvcm0sIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oKG5ldyBGb3JtRGF0YShmb3JtKSkuZW50cmllcygpLCAoW25hbWVdKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBpbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9XCIke25hbWV9XCJdYClcbiAgICAgICAgICAgICAgdGhpcy5pbmNDeWNsZShpbnB1dCwgREVCT1VOQ0VfVFJJR0dFUilcbiAgICAgICAgICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBUSFJPVFRMRUQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugd2UgdHJpZ2dlciB0aGUgY2FsbGJhY2sgaGVyZSxcbiAgICAgICAgICAgIC8vIHdlIGFsc28gY2xlYXIgdGhlIHRocm90dGxlIHRpbWVvdXQgdG8gcHJldmVudCB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIC8vIGZyb20gYmVpbmcgY2FsbGVkIGFnYWluIGFmdGVyIHRoZSB0aW1lb3V0IGZpcmVzXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wcml2YXRlKGVsLCBUSFJPVFRMRUQpKVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0cmlnZ2VyQ3ljbGUoZWwsIGtleSwgY3VycmVudEN5Y2xlKXtcbiAgICBsZXQgW2N5Y2xlLCB0cmlnZ2VyXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKCFjdXJyZW50Q3ljbGUpeyBjdXJyZW50Q3ljbGUgPSBjeWNsZSB9XG4gICAgaWYoY3VycmVudEN5Y2xlID09PSBjeWNsZSl7XG4gICAgICB0aGlzLmluY0N5Y2xlKGVsLCBrZXkpXG4gICAgICB0cmlnZ2VyKClcbiAgICB9XG4gIH0sXG5cbiAgb25jZShlbCwga2V5KXtcbiAgICBpZih0aGlzLnByaXZhdGUoZWwsIGtleSkgPT09IHRydWUpeyByZXR1cm4gZmFsc2UgfVxuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB0cnVlKVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgaW5jQ3ljbGUoZWwsIGtleSwgdHJpZ2dlciA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBsZXQgW2N1cnJlbnRDeWNsZV0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSkgfHwgWzAsIHRyaWdnZXJdXG4gICAgY3VycmVudEN5Y2xlKytcbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgW2N1cnJlbnRDeWNsZSwgdHJpZ2dlcl0pXG4gICAgcmV0dXJuIGN1cnJlbnRDeWNsZVxuICB9LFxuXG4gIG1heWJlQWRkUHJpdmF0ZUhvb2tzKGVsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pe1xuICAgIGlmKGVsLmhhc0F0dHJpYnV0ZSAmJiAoZWwuaGFzQXR0cmlidXRlKHBoeFZpZXdwb3J0VG9wKSB8fCBlbC5oYXNBdHRyaWJ1dGUocGh4Vmlld3BvcnRCb3R0b20pKSl7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1ob29rXCIsIFwiUGhvZW5peC5JbmZpbml0ZVNjcm9sbFwiKVxuICAgIH1cbiAgfSxcblxuICBpc0ZlZWRiYWNrQ29udGFpbmVyKGVsLCBwaHhGZWVkYmFja0Zvcil7XG4gICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSAmJiBlbC5oYXNBdHRyaWJ1dGUocGh4RmVlZGJhY2tGb3IpXG4gIH0sXG5cbiAgbWF5YmVIaWRlRmVlZGJhY2soY29udGFpbmVyLCBmZWVkYmFja0NvbnRhaW5lcnMsIHBoeEZlZWRiYWNrRm9yLCBwaHhGZWVkYmFja0dyb3VwKXtcbiAgICAvLyBiZWNhdXNlIHdlIGNhbiBoYXZlIG11bHRpcGxlIGNvbnRhaW5lcnMgd2l0aCB0aGUgc2FtZSBwaHhGZWVkYmFja0ZvciB2YWx1ZVxuICAgIC8vIHdlIHBlcmZvcm0gdGhlIGNoZWNrIG9ubHkgb25jZSBhbmQgc3RvcmUgdGhlIHJlc3VsdDtcbiAgICAvLyB3ZSBvZnRlbiBoYXZlIG11bHRpcGxlIGNvbnRhaW5lcnMsIGJlY2F1c2Ugd2UgcHVzaCBib3RoIGZyb21FbCBhbmQgdG9FbCBpbiBkb21wYXRjaFxuICAgIC8vIHdoZW4gYSBjb250YWluZXIgaXMgdXBkYXRlZFxuICAgIGNvbnN0IGZlZWRiYWNrUmVzdWx0cyA9IHt9XG4gICAgZmVlZGJhY2tDb250YWluZXJzLmZvckVhY2goZWwgPT4ge1xuICAgICAgLy8gc2tpcCBlbGVtZW50cyB0aGF0IGFyZSBub3QgaW4gdGhlIERPTVxuICAgICAgaWYoIWNvbnRhaW5lci5jb250YWlucyhlbCkpIHJldHVyblxuICAgICAgY29uc3QgZmVlZGJhY2sgPSBlbC5nZXRBdHRyaWJ1dGUocGh4RmVlZGJhY2tGb3IpXG4gICAgICBpZighZmVlZGJhY2spe1xuICAgICAgICAvLyB0aGUgY29udGFpbmVyIHByZXZpb3VzbHkgaGFkIHBoeC1mZWVkYmFjay1mb3IsIGJ1dCBub3cgaXQgZG9lc24ndFxuICAgICAgICAvLyByZW1vdmUgdGhlIGNsYXNzIGZyb20gdGhlIGNvbnRhaW5lciAoaWYgaXQgZXhpc3RzKVxuICAgICAgICBKUy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBbUEhYX05PX0ZFRURCQUNLX0NMQVNTXSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZihmZWVkYmFja1Jlc3VsdHNbZmVlZGJhY2tdID09PSB0cnVlKXtcbiAgICAgICAgdGhpcy5oaWRlRmVlZGJhY2soZWwpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZmVlZGJhY2tSZXN1bHRzW2ZlZWRiYWNrXSA9IHRoaXMuc2hvdWxkSGlkZUZlZWRiYWNrKGNvbnRhaW5lciwgZmVlZGJhY2ssIHBoeEZlZWRiYWNrR3JvdXApXG4gICAgICBpZihmZWVkYmFja1Jlc3VsdHNbZmVlZGJhY2tdID09PSB0cnVlKXtcbiAgICAgICAgdGhpcy5oaWRlRmVlZGJhY2soZWwpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBoaWRlRmVlZGJhY2soY29udGFpbmVyKXtcbiAgICBKUy5hZGRPclJlbW92ZUNsYXNzZXMoY29udGFpbmVyLCBbUEhYX05PX0ZFRURCQUNLX0NMQVNTXSwgW10pXG4gIH0sXG5cbiAgc2hvdWxkSGlkZUZlZWRiYWNrKGNvbnRhaW5lciwgbmFtZU9yR3JvdXAsIHBoeEZlZWRiYWNrR3JvdXApe1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFtuYW1lPVwiJHtuYW1lT3JHcm91cH1cIl0sXG4gICAgICAgICAgICAgICAgICAgW25hbWU9XCIke25hbWVPckdyb3VwfVtdXCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrR3JvdXB9PVwiJHtuYW1lT3JHcm91cH1cIl1gXG4gICAgbGV0IGZvY3VzZWQgPSBmYWxzZVxuICAgIERPTS5hbGwoY29udGFpbmVyLCBxdWVyeSwgKGlucHV0KSA9PiB7XG4gICAgICBpZih0aGlzLnByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCkgfHwgdGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCkpe1xuICAgICAgICBmb2N1c2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuICFmb2N1c2VkXG4gIH0sXG5cbiAgZmVlZGJhY2tTZWxlY3RvcihpbnB1dCwgcGh4RmVlZGJhY2tGb3IsIHBoeEZlZWRiYWNrR3JvdXApe1xuICAgIGxldCBxdWVyeSA9IGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWV9XCJdLFxuICAgICAgICAgICAgICAgICBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWUucmVwbGFjZSgvXFxbXFxdJC8sIFwiXCIpfVwiXWBcbiAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUocGh4RmVlZGJhY2tHcm91cCkpe1xuICAgICAgcXVlcnkgKz0gYCxbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0LmdldEF0dHJpYnV0ZShwaHhGZWVkYmFja0dyb3VwKX1cIl1gXG4gICAgfVxuICAgIHJldHVybiBxdWVyeVxuICB9LFxuXG4gIHJlc2V0Rm9ybShmb3JtLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cCl7XG4gICAgQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGxldCBxdWVyeSA9IHRoaXMuZmVlZGJhY2tTZWxlY3RvcihpbnB1dCwgcGh4RmVlZGJhY2tGb3IsIHBoeEZlZWRiYWNrR3JvdXApXG4gICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRClcbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpXG4gICAgICB0aGlzLmFsbChkb2N1bWVudCwgcXVlcnksIGZlZWRiYWNrRWwgPT4ge1xuICAgICAgICBKUy5hZGRPclJlbW92ZUNsYXNzZXMoZmVlZGJhY2tFbCwgW1BIWF9OT19GRUVEQkFDS19DTEFTU10sIFtdKVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIHNob3dFcnJvcihpbnB1dEVsLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cCl7XG4gICAgaWYoaW5wdXRFbC5uYW1lKXtcbiAgICAgIGxldCBxdWVyeSA9IHRoaXMuZmVlZGJhY2tTZWxlY3RvcihpbnB1dEVsLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cClcbiAgICAgIHRoaXMuYWxsKGRvY3VtZW50LCBxdWVyeSwgKGVsKSA9PiB7XG4gICAgICAgIEpTLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtQSFhfTk9fRkVFREJBQ0tfQ0xBU1NdKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgaXNQaHhDaGlsZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRClcbiAgfSxcblxuICBpc1BoeFN0aWNreShub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NUSUNLWSkgIT09IG51bGxcbiAgfSxcblxuICBpc0NoaWxkT2ZBbnkoZWwsIHBhcmVudHMpe1xuICAgIHJldHVybiAhIXBhcmVudHMuZmluZChwYXJlbnQgPT4gcGFyZW50LmNvbnRhaW5zKGVsKSlcbiAgfSxcblxuICBmaXJzdFBoeENoaWxkKGVsKXtcbiAgICByZXR1cm4gdGhpcy5pc1BoeENoaWxkKGVsKSA/IGVsIDogdGhpcy5hbGwoZWwsIGBbJHtQSFhfUEFSRU5UX0lEfV1gKVswXVxuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBuYW1lLCBvcHRzID0ge30pe1xuICAgIGxldCBkZWZhdWx0QnViYmxlID0gdHJ1ZVxuICAgIGxldCBpc1VwbG9hZFRhcmdldCA9IHRhcmdldC5ub2RlTmFtZSA9PT0gXCJJTlBVVFwiICYmIHRhcmdldC50eXBlID09PSBcImZpbGVcIlxuICAgIGlmKGlzVXBsb2FkVGFyZ2V0ICYmIG5hbWUgPT09IFwiY2xpY2tcIil7XG4gICAgICBkZWZhdWx0QnViYmxlID0gZmFsc2VcbiAgICB9XG4gICAgbGV0IGJ1YmJsZXMgPSBvcHRzLmJ1YmJsZXMgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRCdWJibGUgOiAhIW9wdHMuYnViYmxlc1xuICAgIGxldCBldmVudE9wdHMgPSB7YnViYmxlczogYnViYmxlcywgY2FuY2VsYWJsZTogdHJ1ZSwgZGV0YWlsOiBvcHRzLmRldGFpbCB8fCB7fX1cbiAgICBsZXQgZXZlbnQgPSBuYW1lID09PSBcImNsaWNrXCIgPyBuZXcgTW91c2VFdmVudChcImNsaWNrXCIsIGV2ZW50T3B0cykgOiBuZXcgQ3VzdG9tRXZlbnQobmFtZSwgZXZlbnRPcHRzKVxuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9LFxuXG4gIGNsb25lTm9kZShub2RlLCBodG1sKXtcbiAgICBpZih0eXBlb2YgKGh0bWwpID09PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZSh0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY2xvbmVkID0gbm9kZS5jbG9uZU5vZGUoZmFsc2UpXG4gICAgICBjbG9uZWQuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgcmV0dXJuIGNsb25lZFxuICAgIH1cbiAgfSxcblxuICAvLyBtZXJnZSBhdHRyaWJ1dGVzIGZyb20gc291cmNlIHRvIHRhcmdldFxuICAvLyBpZiBhbiBlbGVtZW50IGlzIGlnbm9yZWQsIHdlIG9ubHkgbWVyZ2UgZGF0YSBhdHRyaWJ1dGVzXG4gIC8vIGluY2x1ZGluZyByZW1vdmluZyBkYXRhIGF0dHJpYnV0ZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBzb3VyY2VcbiAgbWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXhjbHVkZSA9IG5ldyBTZXQob3B0cy5leGNsdWRlIHx8IFtdKVxuICAgIGxldCBpc0lnbm9yZWQgPSBvcHRzLmlzSWdub3JlZFxuICAgIGxldCBzb3VyY2VBdHRycyA9IHNvdXJjZS5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gc291cmNlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSBzb3VyY2VBdHRyc1tpXS5uYW1lXG4gICAgICBpZighZXhjbHVkZS5oYXMobmFtZSkpe1xuICAgICAgICBjb25zdCBzb3VyY2VWYWx1ZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUobmFtZSlcbiAgICAgICAgaWYodGFyZ2V0LmdldEF0dHJpYnV0ZShuYW1lKSAhPT0gc291cmNlVmFsdWUgJiYgKCFpc0lnbm9yZWQgfHwgKGlzSWdub3JlZCAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJkYXRhLVwiKSkpKXtcbiAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKG5hbWUsIHNvdXJjZVZhbHVlKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZSBleGNsdWRlIHRoZSB2YWx1ZSBmcm9tIGJlaW5nIG1lcmdlZCBvbiBmb2N1c2VkIGlucHV0cywgYmVjYXVzZSB0aGVcbiAgICAgICAgLy8gdXNlcidzIGlucHV0IHNob3VsZCBhbHdheXMgd2luLlxuICAgICAgICAvLyBXZSBjYW4gc3RpbGwgYXNzaWduIGl0IGFzIGxvbmcgYXMgdGhlIHZhbHVlIHByb3BlcnR5IGlzIHRoZSBzYW1lLCB0aG91Z2guXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgYSBzaXR1YXRpb24gd2hlcmUgdGhlIHVwZGF0ZWQgaG9vayBpcyBub3QgYmVpbmcgdHJpZ2dlcmVkXG4gICAgICAgIC8vIHdoZW4gYW4gaW5wdXQgaXMgYmFjayBpbiBpdHMgXCJvcmlnaW5hbCBzdGF0ZVwiLCBiZWNhdXNlIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgLy8gd2FzIG5ldmVyIGNoYW5nZWQsIHNlZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Bob2VuaXhmcmFtZXdvcmsvcGhvZW5peF9saXZlX3ZpZXcvaXNzdWVzLzIxNjNcbiAgICAgICAgaWYobmFtZSA9PT0gXCJ2YWx1ZVwiICYmIHRhcmdldC52YWx1ZSA9PT0gc291cmNlLnZhbHVlKXtcbiAgICAgICAgICAvLyBhY3R1YWxseSBzZXQgdGhlIHZhbHVlIGF0dHJpYnV0ZSB0byBzeW5jIGl0IHdpdGggdGhlIHZhbHVlIHByb3BlcnR5XG4gICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHNvdXJjZS5nZXRBdHRyaWJ1dGUobmFtZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0QXR0cnMgPSB0YXJnZXQuYXR0cmlidXRlc1xuICAgIGZvcihsZXQgaSA9IHRhcmdldEF0dHJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGxldCBuYW1lID0gdGFyZ2V0QXR0cnNbaV0ubmFtZVxuICAgICAgaWYoaXNJZ25vcmVkKXtcbiAgICAgICAgaWYobmFtZS5zdGFydHNXaXRoKFwiZGF0YS1cIikgJiYgIXNvdXJjZS5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIVtQSFhfUkVGLCBQSFhfUkVGX1NSQ10uaW5jbHVkZXMobmFtZSkpeyB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKG5hbWUpIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKCFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1lcmdlRm9jdXNlZElucHV0KHRhcmdldCwgc291cmNlKXtcbiAgICAvLyBza2lwIHNlbGVjdHMgYmVjYXVzZSBGRiB3aWxsIHJlc2V0IGhpZ2hsaWdodGVkIGluZGV4IGZvciBhbnkgc2V0QXR0cmlidXRlXG4gICAgaWYoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkpeyBET00ubWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwge2V4Y2x1ZGU6IFtcInZhbHVlXCJdfSkgfVxuXG4gICAgaWYoc291cmNlLnJlYWRPbmx5KXtcbiAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCB0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIilcbiAgICB9XG4gIH0sXG5cbiAgaGFzU2VsZWN0aW9uUmFuZ2UoZWwpe1xuICAgIHJldHVybiBlbC5zZXRTZWxlY3Rpb25SYW5nZSAmJiAoZWwudHlwZSA9PT0gXCJ0ZXh0XCIgfHwgZWwudHlwZSA9PT0gXCJ0ZXh0YXJlYVwiKVxuICB9LFxuXG4gIHJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKXtcbiAgICBpZihmb2N1c2VkIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpeyBmb2N1c2VkLmZvY3VzKCkgfVxuICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoZm9jdXNlZCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IHdhc0ZvY3VzZWQgPSBmb2N1c2VkLm1hdGNoZXMoXCI6Zm9jdXNcIilcbiAgICBpZihmb2N1c2VkLnJlYWRPbmx5KXsgZm9jdXNlZC5ibHVyKCkgfVxuICAgIGlmKCF3YXNGb2N1c2VkKXsgZm9jdXNlZC5mb2N1cygpIH1cbiAgICBpZih0aGlzLmhhc1NlbGVjdGlvblJhbmdlKGZvY3VzZWQpKXtcbiAgICAgIGZvY3VzZWQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZClcbiAgICB9XG4gIH0sXG5cbiAgaXNGb3JtSW5wdXQoZWwpeyByZXR1cm4gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLnRlc3QoZWwudGFnTmFtZSkgJiYgZWwudHlwZSAhPT0gXCJidXR0b25cIiB9LFxuXG4gIHN5bmNBdHRyc1RvUHJvcHMoZWwpe1xuICAgIGlmKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJiBDSEVDS0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgIGVsLmNoZWNrZWQgPSBlbC5nZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIpICE9PSBudWxsXG4gICAgfVxuICB9LFxuXG4gIGlzVGV4dHVhbElucHV0KGVsKXsgcmV0dXJuIEZPQ1VTQUJMRV9JTlBVVFMuaW5kZXhPZihlbC50eXBlKSA+PSAwIH0sXG5cbiAgaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKHBoeFRyaWdnZXJFeHRlcm5hbCkgIT09IG51bGxcbiAgfSxcblxuICBzeW5jUGVuZGluZ1JlZihmcm9tRWwsIHRvRWwsIGRpc2FibGVXaXRoKXtcbiAgICBsZXQgcmVmID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfUkVGKVxuICAgIGlmKHJlZiA9PT0gbnVsbCl7IHJldHVybiB0cnVlIH1cbiAgICBsZXQgcmVmU3JjID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfUkVGX1NSQylcblxuICAgIGlmKERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpIHx8IGZyb21FbC5nZXRBdHRyaWJ1dGUoZGlzYWJsZVdpdGgpICE9PSBudWxsKXtcbiAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpeyBET00ubWVyZ2VBdHRycyhmcm9tRWwsIHRvRWwsIHtpc0lnbm9yZWQ6IHRydWV9KSB9XG4gICAgICBET00ucHV0UHJpdmF0ZShmcm9tRWwsIFBIWF9SRUYsIHRvRWwpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgUEhYX0VWRU5UX0NMQVNTRVMuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBmcm9tRWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgJiYgdG9FbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSlcbiAgICAgIH0pXG4gICAgICB0b0VsLnNldEF0dHJpYnV0ZShQSFhfUkVGLCByZWYpXG4gICAgICB0b0VsLnNldEF0dHJpYnV0ZShQSFhfUkVGX1NSQywgcmVmU3JjKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0sXG5cbiAgY2xlYW5DaGlsZE5vZGVzKGNvbnRhaW5lciwgcGh4VXBkYXRlKXtcbiAgICBpZihET00uaXNQaHhVcGRhdGUoY29udGFpbmVyLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgIGxldCB0b1JlbW92ZSA9IFtdXG4gICAgICBjb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkTm9kZSA9PiB7XG4gICAgICAgIGlmKCFjaGlsZE5vZGUuaWQpe1xuICAgICAgICAgIC8vIFNraXAgd2FybmluZyBpZiBpdCdzIGFuIGVtcHR5IHRleHQgbm9kZSAoZS5nLiBhIG5ldy1saW5lKVxuICAgICAgICAgIGxldCBpc0VtcHR5VGV4dE5vZGUgPSBjaGlsZE5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIGNoaWxkTm9kZS5ub2RlVmFsdWUudHJpbSgpID09PSBcIlwiXG4gICAgICAgICAgaWYoIWlzRW1wdHlUZXh0Tm9kZSl7XG4gICAgICAgICAgICBsb2dFcnJvcihcIm9ubHkgSFRNTCBlbGVtZW50IHRhZ3Mgd2l0aCBhbiBpZCBhcmUgYWxsb3dlZCBpbnNpZGUgY29udGFpbmVycyB3aXRoIHBoeC11cGRhdGUuXFxuXFxuXCIgK1xuICAgICAgICAgICAgICBgcmVtb3ZpbmcgaWxsZWdhbCBub2RlOiBcIiR7KGNoaWxkTm9kZS5vdXRlckhUTUwgfHwgY2hpbGROb2RlLm5vZGVWYWx1ZSkudHJpbSgpfVwiXFxuXFxuYClcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9SZW1vdmUucHVzaChjaGlsZE5vZGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICB0b1JlbW92ZS5mb3JFYWNoKGNoaWxkTm9kZSA9PiBjaGlsZE5vZGUucmVtb3ZlKCkpXG4gICAgfVxuICB9LFxuXG4gIHJlcGxhY2VSb290Q29udGFpbmVyKGNvbnRhaW5lciwgdGFnTmFtZSwgYXR0cnMpe1xuICAgIGxldCByZXRhaW5lZEF0dHJzID0gbmV3IFNldChbXCJpZFwiLCBQSFhfU0VTU0lPTiwgUEhYX1NUQVRJQywgUEhYX01BSU4sIFBIWF9ST09UX0lEXSlcbiAgICBpZihjb250YWluZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0YWdOYW1lLnRvTG93ZXJDYXNlKCkpe1xuICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuYXR0cmlidXRlcylcbiAgICAgICAgLmZpbHRlcihhdHRyID0+ICFyZXRhaW5lZEF0dHJzLmhhcyhhdHRyLm5hbWUudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgIC5mb3JFYWNoKGF0dHIgPT4gY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpKVxuXG4gICAgICBPYmplY3Qua2V5cyhhdHRycylcbiAgICAgICAgLmZpbHRlcihuYW1lID0+ICFyZXRhaW5lZEF0dHJzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuXG4gICAgICByZXR1cm4gY29udGFpbmVyXG5cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSlcbiAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSkpXG4gICAgICByZXRhaW5lZEF0dHJzLmZvckVhY2goYXR0ciA9PiBuZXdDb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoYXR0cikpKVxuICAgICAgbmV3Q29udGFpbmVyLmlubmVySFRNTCA9IGNvbnRhaW5lci5pbm5lckhUTUxcbiAgICAgIGNvbnRhaW5lci5yZXBsYWNlV2l0aChuZXdDb250YWluZXIpXG4gICAgICByZXR1cm4gbmV3Q29udGFpbmVyXG4gICAgfVxuICB9LFxuXG4gIGdldFN0aWNreShlbCwgbmFtZSwgZGVmYXVsdFZhbCl7XG4gICAgbGV0IG9wID0gKERPTS5wcml2YXRlKGVsLCBcInN0aWNreVwiKSB8fCBbXSkuZmluZCgoW2V4aXN0aW5nTmFtZSwgXSkgPT4gbmFtZSA9PT0gZXhpc3RpbmdOYW1lKVxuICAgIGlmKG9wKXtcbiAgICAgIGxldCBbX25hbWUsIF9vcCwgc3Rhc2hlZFJlc3VsdF0gPSBvcFxuICAgICAgcmV0dXJuIHN0YXNoZWRSZXN1bHRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHR5cGVvZihkZWZhdWx0VmFsKSA9PT0gXCJmdW5jdGlvblwiID8gZGVmYXVsdFZhbCgpIDogZGVmYXVsdFZhbFxuICAgIH1cbiAgfSxcblxuICBkZWxldGVTdGlja3koZWwsIG5hbWUpe1xuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICByZXR1cm4gb3BzLmZpbHRlcigoW2V4aXN0aW5nTmFtZSwgX10pID0+IGV4aXN0aW5nTmFtZSAhPT0gbmFtZSlcbiAgICB9KVxuICB9LFxuXG4gIHB1dFN0aWNreShlbCwgbmFtZSwgb3Ape1xuICAgIGxldCBzdGFzaGVkUmVzdWx0ID0gb3AoZWwpXG4gICAgdGhpcy51cGRhdGVQcml2YXRlKGVsLCBcInN0aWNreVwiLCBbXSwgb3BzID0+IHtcbiAgICAgIGxldCBleGlzdGluZ0luZGV4ID0gb3BzLmZpbmRJbmRleCgoW2V4aXN0aW5nTmFtZSwgXSkgPT4gbmFtZSA9PT0gZXhpc3RpbmdOYW1lKVxuICAgICAgaWYoZXhpc3RpbmdJbmRleCA+PSAwKXtcbiAgICAgICAgb3BzW2V4aXN0aW5nSW5kZXhdID0gW25hbWUsIG9wLCBzdGFzaGVkUmVzdWx0XVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BzLnB1c2goW25hbWUsIG9wLCBzdGFzaGVkUmVzdWx0XSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcHNcbiAgICB9KVxuICB9LFxuXG4gIGFwcGx5U3RpY2t5T3BlcmF0aW9ucyhlbCl7XG4gICAgbGV0IG9wcyA9IERPTS5wcml2YXRlKGVsLCBcInN0aWNreVwiKVxuICAgIGlmKCFvcHMpeyByZXR1cm4gfVxuXG4gICAgb3BzLmZvckVhY2goKFtuYW1lLCBvcCwgX3N0YXNoZWRdKSA9PiB0aGlzLnB1dFN0aWNreShlbCwgbmFtZSwgb3ApKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERPTVxuIiwgImltcG9ydCB7XG4gIFBIWF9BQ1RJVkVfRU5UUllfUkVGUyxcbiAgUEhYX0xJVkVfRklMRV9VUERBVEVELFxuICBQSFhfUFJFRkxJR0hURURfUkVGU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBjaGFubmVsVXBsb2FkZXIsXG4gIGxvZ0Vycm9yXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXBsb2FkRW50cnkge1xuICBzdGF0aWMgaXNBY3RpdmUoZmlsZUVsLCBmaWxlKXtcbiAgICBsZXQgaXNOZXcgPSBmaWxlLl9waHhSZWYgPT09IHVuZGVmaW5lZFxuICAgIGxldCBhY3RpdmVSZWZzID0gZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpLnNwbGl0KFwiLFwiKVxuICAgIGxldCBpc0FjdGl2ZSA9IGFjdGl2ZVJlZnMuaW5kZXhPZihMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKSkgPj0gMFxuICAgIHJldHVybiBmaWxlLnNpemUgPiAwICYmIChpc05ldyB8fCBpc0FjdGl2ZSlcbiAgfVxuXG4gIHN0YXRpYyBpc1ByZWZsaWdodGVkKGZpbGVFbCwgZmlsZSl7XG4gICAgbGV0IHByZWZsaWdodGVkUmVmcyA9IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX1BSRUZMSUdIVEVEX1JFRlMpLnNwbGl0KFwiLFwiKVxuICAgIGxldCBpc1ByZWZsaWdodGVkID0gcHJlZmxpZ2h0ZWRSZWZzLmluZGV4T2YoTGl2ZVVwbG9hZGVyLmdlbkZpbGVSZWYoZmlsZSkpID49IDBcbiAgICByZXR1cm4gaXNQcmVmbGlnaHRlZCAmJiB0aGlzLmlzQWN0aXZlKGZpbGVFbCwgZmlsZSlcbiAgfVxuXG4gIHN0YXRpYyBpc1ByZWZsaWdodEluUHJvZ3Jlc3MoZmlsZSl7XG4gICAgcmV0dXJuIGZpbGUuX3ByZWZsaWdodEluUHJvZ3Jlc3MgPT09IHRydWVcbiAgfVxuXG4gIHN0YXRpYyBtYXJrUHJlZmxpZ2h0SW5Qcm9ncmVzcyhmaWxlKXtcbiAgICBmaWxlLl9wcmVmbGlnaHRJblByb2dyZXNzID0gdHJ1ZVxuICB9XG5cbiAgY29uc3RydWN0b3IoZmlsZUVsLCBmaWxlLCB2aWV3LCBhdXRvVXBsb2FkKXtcbiAgICB0aGlzLnJlZiA9IExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpXG4gICAgdGhpcy5maWxlRWwgPSBmaWxlRWxcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubWV0YSA9IG51bGxcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2VcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDBcbiAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gLTFcbiAgICB0aGlzLl9vbkRvbmUgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5fb25FbFVwZGF0ZWQgPSB0aGlzLm9uRWxVcGRhdGVkLmJpbmQodGhpcylcbiAgICB0aGlzLmZpbGVFbC5hZGRFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gICAgdGhpcy5hdXRvVXBsb2FkID0gYXV0b1VwbG9hZFxuICB9XG5cbiAgbWV0YWRhdGEoKXsgcmV0dXJuIHRoaXMubWV0YSB9XG5cbiAgcHJvZ3Jlc3MocHJvZ3Jlc3Mpe1xuICAgIHRoaXMuX3Byb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzcylcbiAgICBpZih0aGlzLl9wcm9ncmVzcyA+IHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQpe1xuICAgICAgaWYodGhpcy5fcHJvZ3Jlc3MgPj0gMTAwKXtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IDEwMFxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgMTAwLCAoKSA9PiB7XG4gICAgICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICAgICAgdGhpcy5fb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSB0aGlzLl9wcm9ncmVzc1xuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHRoaXMuX3Byb2dyZXNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlzQ2FuY2VsbGVkKCl7IHJldHVybiB0aGlzLl9pc0NhbmNlbGxlZCB9XG5cbiAgY2FuY2VsKCl7XG4gICAgdGhpcy5maWxlLl9wcmVmbGlnaHRJblByb2dyZXNzID0gZmFsc2VcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IHRydWVcbiAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgdGhpcy5fb25Eb25lKClcbiAgfVxuXG4gIGlzRG9uZSgpeyByZXR1cm4gdGhpcy5faXNEb25lIH1cblxuICBlcnJvcihyZWFzb24gPSBcImZhaWxlZFwiKXtcbiAgICB0aGlzLmZpbGVFbC5yZW1vdmVFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gICAgdGhpcy52aWV3LnB1c2hGaWxlUHJvZ3Jlc3ModGhpcy5maWxlRWwsIHRoaXMucmVmLCB7ZXJyb3I6IHJlYXNvbn0pXG4gICAgaWYoIXRoaXMuaXNBdXRvVXBsb2FkKCkpeyBMaXZlVXBsb2FkZXIuY2xlYXJGaWxlcyh0aGlzLmZpbGVFbCkgfVxuICB9XG5cbiAgaXNBdXRvVXBsb2FkKCl7IHJldHVybiB0aGlzLmF1dG9VcGxvYWQgfVxuXG4gIC8vcHJpdmF0ZVxuXG4gIG9uRG9uZShjYWxsYmFjayl7XG4gICAgdGhpcy5fb25Eb25lID0gKCkgPT4ge1xuICAgICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIG9uRWxVcGRhdGVkKCl7XG4gICAgbGV0IGFjdGl2ZVJlZnMgPSB0aGlzLmZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBpZihhY3RpdmVSZWZzLmluZGV4T2YodGhpcy5yZWYpID09PSAtMSl7XG4gICAgICBMaXZlVXBsb2FkZXIudW50cmFja0ZpbGUodGhpcy5maWxlRWwsIHRoaXMuZmlsZSlcbiAgICAgIHRoaXMuY2FuY2VsKClcbiAgICB9XG4gIH1cblxuICB0b1ByZWZsaWdodFBheWxvYWQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgbGFzdF9tb2RpZmllZDogdGhpcy5maWxlLmxhc3RNb2RpZmllZCxcbiAgICAgIG5hbWU6IHRoaXMuZmlsZS5uYW1lLFxuICAgICAgcmVsYXRpdmVfcGF0aDogdGhpcy5maWxlLndlYmtpdFJlbGF0aXZlUGF0aCxcbiAgICAgIHNpemU6IHRoaXMuZmlsZS5zaXplLFxuICAgICAgdHlwZTogdGhpcy5maWxlLnR5cGUsXG4gICAgICByZWY6IHRoaXMucmVmLFxuICAgICAgbWV0YTogdHlwZW9mKHRoaXMuZmlsZS5tZXRhKSA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5maWxlLm1ldGEoKSA6IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZGVyKHVwbG9hZGVycyl7XG4gICAgaWYodGhpcy5tZXRhLnVwbG9hZGVyKXtcbiAgICAgIGxldCBjYWxsYmFjayA9IHVwbG9hZGVyc1t0aGlzLm1ldGEudXBsb2FkZXJdIHx8IGxvZ0Vycm9yKGBubyB1cGxvYWRlciBjb25maWd1cmVkIGZvciAke3RoaXMubWV0YS51cGxvYWRlcn1gKVxuICAgICAgcmV0dXJuIHtuYW1lOiB0aGlzLm1ldGEudXBsb2FkZXIsIGNhbGxiYWNrOiBjYWxsYmFja31cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtuYW1lOiBcImNoYW5uZWxcIiwgY2FsbGJhY2s6IGNoYW5uZWxVcGxvYWRlcn1cbiAgICB9XG4gIH1cblxuICB6aXBQb3N0RmxpZ2h0KHJlc3Ape1xuICAgIHRoaXMubWV0YSA9IHJlc3AuZW50cmllc1t0aGlzLnJlZl1cbiAgICBpZighdGhpcy5tZXRhKXsgbG9nRXJyb3IoYG5vIHByZWZsaWdodCB1cGxvYWQgcmVzcG9uc2UgcmV0dXJuZWQgd2l0aCByZWYgJHt0aGlzLnJlZn1gLCB7aW5wdXQ6IHRoaXMuZmlsZUVsLCByZXNwb25zZTogcmVzcH0pIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9ET05FX1JFRlMsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBVcGxvYWRFbnRyeSBmcm9tIFwiLi91cGxvYWRfZW50cnlcIlxuXG5sZXQgbGl2ZVVwbG9hZGVyRmlsZVJlZiA9IDBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVVwbG9hZGVyIHtcbiAgc3RhdGljIGdlbkZpbGVSZWYoZmlsZSl7XG4gICAgbGV0IHJlZiA9IGZpbGUuX3BoeFJlZlxuICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiByZWZcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZS5fcGh4UmVmID0gKGxpdmVVcGxvYWRlckZpbGVSZWYrKykudG9TdHJpbmcoKVxuICAgICAgcmV0dXJuIGZpbGUuX3BoeFJlZlxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRFbnRyeURhdGFVUkwoaW5wdXRFbCwgcmVmLCBjYWxsYmFjayl7XG4gICAgbGV0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZmlsZSA9PiB0aGlzLmdlbkZpbGVSZWYoZmlsZSkgPT09IHJlZilcbiAgICBjYWxsYmFjayhVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICB9XG5cbiAgc3RhdGljIGhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCl7XG4gICAgbGV0IGFjdGl2ZSA9IDBcbiAgICBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9ET05FX1JFRlMpKXtcbiAgICAgICAgYWN0aXZlKytcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBhY3RpdmUgPiAwXG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKXtcbiAgICBsZXQgZmlsZXMgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpXG4gICAgbGV0IGZpbGVEYXRhID0ge31cbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0ge3BhdGg6IGlucHV0RWwubmFtZX1cbiAgICAgIGxldCB1cGxvYWRSZWYgPSBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRilcbiAgICAgIGZpbGVEYXRhW3VwbG9hZFJlZl0gPSBmaWxlRGF0YVt1cGxvYWRSZWZdIHx8IFtdXG4gICAgICBlbnRyeS5yZWYgPSB0aGlzLmdlbkZpbGVSZWYoZmlsZSlcbiAgICAgIGVudHJ5Lmxhc3RfbW9kaWZpZWQgPSBmaWxlLmxhc3RNb2RpZmllZFxuICAgICAgZW50cnkubmFtZSA9IGZpbGUubmFtZSB8fCBlbnRyeS5yZWZcbiAgICAgIGVudHJ5LnJlbGF0aXZlX3BhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgZW50cnkudHlwZSA9IGZpbGUudHlwZVxuICAgICAgZW50cnkuc2l6ZSA9IGZpbGUuc2l6ZVxuICAgICAgaWYodHlwZW9mKGZpbGUubWV0YSkgPT09IFwiZnVuY3Rpb25cIil7IGVudHJ5Lm1ldGEgPSBmaWxlLm1ldGEoKSB9XG4gICAgICBmaWxlRGF0YVt1cGxvYWRSZWZdLnB1c2goZW50cnkpXG4gICAgfSlcbiAgICByZXR1cm4gZmlsZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBjbGVhckZpbGVzKGlucHV0RWwpe1xuICAgIGlucHV0RWwudmFsdWUgPSBudWxsXG4gICAgaW5wdXRFbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpXG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBbXSlcbiAgfVxuXG4gIHN0YXRpYyB1bnRyYWNrRmlsZShpbnB1dEVsLCBmaWxlKXtcbiAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIERPTS5wcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIikuZmlsdGVyKGYgPT4gIU9iamVjdC5pcyhmLCBmaWxlKSkpXG4gIH1cblxuICBzdGF0aWMgdHJhY2tGaWxlcyhpbnB1dEVsLCBmaWxlcywgZGF0YVRyYW5zZmVyKXtcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpICE9PSBudWxsKXtcbiAgICAgIGxldCBuZXdGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+ICF0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZiA9PiBPYmplY3QuaXMoZiwgZmlsZSkpKVxuICAgICAgRE9NLnVwZGF0ZVByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBbXSwgKGV4aXN0aW5nKSA9PiBleGlzdGluZy5jb25jYXQobmV3RmlsZXMpKVxuICAgICAgaW5wdXRFbC52YWx1ZSA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVzZXQgaW5wdXRFbCBmaWxlcyB0byBhbGlnbiBvdXRwdXQgd2l0aCBwcm9ncmFtbWF0aWMgY2hhbmdlcyAoaS5lLiBkcmFnIGFuZCBkcm9wKVxuICAgICAgaWYoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKXsgaW5wdXRFbC5maWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcyB9XG4gICAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlSW5wdXRzKGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGVsID0+IGVsLmZpbGVzICYmIHRoaXMuYWN0aXZlRmlsZXMoZWwpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgYWN0aXZlRmlsZXMoaW5wdXQpe1xuICAgIHJldHVybiAoRE9NLnByaXZhdGUoaW5wdXQsIFwiZmlsZXNcIikgfHwgW10pLmZpbHRlcihmID0+IFVwbG9hZEVudHJ5LmlzQWN0aXZlKGlucHV0LCBmKSlcbiAgfVxuXG4gIHN0YXRpYyBpbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpe1xuICAgIGxldCBmaWxlSW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKVxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpbGVJbnB1dHMpLmZpbHRlcihpbnB1dCA9PiB0aGlzLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXQpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCl7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRmlsZXMoaW5wdXQpLmZpbHRlcihmID0+ICFVcGxvYWRFbnRyeS5pc1ByZWZsaWdodGVkKGlucHV0LCBmKSAmJiAhVXBsb2FkRW50cnkuaXNQcmVmbGlnaHRJblByb2dyZXNzKGYpKVxuICB9XG5cbiAgc3RhdGljIG1hcmtQcmVmbGlnaHRJblByb2dyZXNzKGVudHJpZXMpe1xuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiBVcGxvYWRFbnRyeS5tYXJrUHJlZmxpZ2h0SW5Qcm9ncmVzcyhlbnRyeS5maWxlKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGlucHV0RWwsIHZpZXcsIG9uQ29tcGxldGUpe1xuICAgIHRoaXMuYXV0b1VwbG9hZCA9IERPTS5pc0F1dG9VcGxvYWQoaW5wdXRFbClcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5vbkNvbXBsZXRlID0gb25Db21wbGV0ZVxuICAgIHRoaXMuX2VudHJpZXMgPVxuICAgICAgQXJyYXkuZnJvbShMaXZlVXBsb2FkZXIuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dEVsKSB8fCBbXSlcbiAgICAgICAgLm1hcChmaWxlID0+IG5ldyBVcGxvYWRFbnRyeShpbnB1dEVsLCBmaWxlLCB2aWV3LCB0aGlzLmF1dG9VcGxvYWQpKVxuXG4gICAgLy8gcHJldmVudCBzZW5kaW5nIGR1cGxpY2F0ZSBwcmVmbGlnaHQgcmVxdWVzdHNcbiAgICBMaXZlVXBsb2FkZXIubWFya1ByZWZsaWdodEluUHJvZ3Jlc3ModGhpcy5fZW50cmllcylcblxuICAgIHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MgPSB0aGlzLl9lbnRyaWVzLmxlbmd0aFxuICB9XG5cbiAgaXNBdXRvVXBsb2FkKCl7IHJldHVybiB0aGlzLmF1dG9VcGxvYWQgfVxuXG4gIGVudHJpZXMoKXsgcmV0dXJuIHRoaXMuX2VudHJpZXMgfVxuXG4gIGluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIGxpdmVTb2NrZXQpe1xuICAgIHRoaXMuX2VudHJpZXMgPVxuICAgICAgdGhpcy5fZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICBpZihlbnRyeS5pc0NhbmNlbGxlZCgpKXtcbiAgICAgICAgICB0aGlzLm51bUVudHJpZXNJblByb2dyZXNzLS1cbiAgICAgICAgICBpZih0aGlzLm51bUVudHJpZXNJblByb2dyZXNzID09PSAwKXsgdGhpcy5vbkNvbXBsZXRlKCkgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudHJ5LnppcFBvc3RGbGlnaHQocmVzcClcbiAgICAgICAgICBlbnRyeS5vbkRvbmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcy0tXG4gICAgICAgICAgICBpZih0aGlzLm51bUVudHJpZXNJblByb2dyZXNzID09PSAwKXsgdGhpcy5vbkNvbXBsZXRlKCkgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudHJ5XG4gICAgICB9KVxuXG4gICAgbGV0IGdyb3VwZWRFbnRyaWVzID0gdGhpcy5fZW50cmllcy5yZWR1Y2UoKGFjYywgZW50cnkpID0+IHtcbiAgICAgIGlmKCFlbnRyeS5tZXRhKXsgcmV0dXJuIGFjYyB9XG4gICAgICBsZXQge25hbWUsIGNhbGxiYWNrfSA9IGVudHJ5LnVwbG9hZGVyKGxpdmVTb2NrZXQudXBsb2FkZXJzKVxuICAgICAgYWNjW25hbWVdID0gYWNjW25hbWVdIHx8IHtjYWxsYmFjazogY2FsbGJhY2ssIGVudHJpZXM6IFtdfVxuICAgICAgYWNjW25hbWVdLmVudHJpZXMucHVzaChlbnRyeSlcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSlcblxuICAgIGZvcihsZXQgbmFtZSBpbiBncm91cGVkRW50cmllcyl7XG4gICAgICBsZXQge2NhbGxiYWNrLCBlbnRyaWVzfSA9IGdyb3VwZWRFbnRyaWVzW25hbWVdXG4gICAgICBjYWxsYmFjayhlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9BQ1RJVkVfRU5UUllfUkVGUyxcbiAgUEhYX0xJVkVfRklMRV9VUERBVEVELFxuICBQSFhfUFJFRkxJR0hURURfUkVGUyxcbiAgUEhYX1VQTE9BRF9SRUZcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBBUklBIGZyb20gXCIuL2FyaWFcIlxuXG5sZXQgSG9va3MgPSB7XG4gIExpdmVGaWxlVXBsb2FkOiB7XG4gICAgYWN0aXZlUmVmcygpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKSB9LFxuXG4gICAgcHJlZmxpZ2h0ZWRSZWZzKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykgfSxcblxuICAgIG1vdW50ZWQoKXsgdGhpcy5wcmVmbGlnaHRlZFdhcyA9IHRoaXMucHJlZmxpZ2h0ZWRSZWZzKCkgfSxcblxuICAgIHVwZGF0ZWQoKXtcbiAgICAgIGxldCBuZXdQcmVmbGlnaHRzID0gdGhpcy5wcmVmbGlnaHRlZFJlZnMoKVxuICAgICAgaWYodGhpcy5wcmVmbGlnaHRlZFdhcyAhPT0gbmV3UHJlZmxpZ2h0cyl7XG4gICAgICAgIHRoaXMucHJlZmxpZ2h0ZWRXYXMgPSBuZXdQcmVmbGlnaHRzXG4gICAgICAgIGlmKG5ld1ByZWZsaWdodHMgPT09IFwiXCIpe1xuICAgICAgICAgIHRoaXMuX192aWV3LmNhbmNlbFN1Ym1pdCh0aGlzLmVsLmZvcm0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYodGhpcy5hY3RpdmVSZWZzKCkgPT09IFwiXCIpeyB0aGlzLmVsLnZhbHVlID0gbnVsbCB9XG4gICAgICB0aGlzLmVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCkpXG4gICAgfVxuICB9LFxuXG4gIExpdmVJbWdQcmV2aWV3OiB7XG4gICAgbW91bnRlZCgpe1xuICAgICAgdGhpcy5yZWYgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShcImRhdGEtcGh4LWVudHJ5LXJlZlwiKVxuICAgICAgdGhpcy5pbnB1dEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpKVxuICAgICAgTGl2ZVVwbG9hZGVyLmdldEVudHJ5RGF0YVVSTCh0aGlzLmlucHV0RWwsIHRoaXMucmVmLCB1cmwgPT4ge1xuICAgICAgICB0aGlzLnVybCA9IHVybFxuICAgICAgICB0aGlzLmVsLnNyYyA9IHVybFxuICAgICAgfSlcbiAgICB9LFxuICAgIGRlc3Ryb3llZCgpe1xuICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnVybClcbiAgICB9XG4gIH0sXG4gIEZvY3VzV3JhcDoge1xuICAgIG1vdW50ZWQoKXtcbiAgICAgIHRoaXMuZm9jdXNTdGFydCA9IHRoaXMuZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICAgIHRoaXMuZm9jdXNFbmQgPSB0aGlzLmVsLmxhc3RFbGVtZW50Q2hpbGRcbiAgICAgIHRoaXMuZm9jdXNTdGFydC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4gQVJJQS5mb2N1c0xhc3QodGhpcy5lbCkpXG4gICAgICB0aGlzLmZvY3VzRW5kLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiBBUklBLmZvY3VzRmlyc3QodGhpcy5lbCkpXG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6c2hvdy1lbmRcIiwgKCkgPT4gdGhpcy5lbC5mb2N1cygpKVxuICAgICAgaWYod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCkuZGlzcGxheSAhPT0gXCJub25lXCIpe1xuICAgICAgICBBUklBLmZvY3VzRmlyc3QodGhpcy5lbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubGV0IGZpbmRTY3JvbGxDb250YWluZXIgPSAoZWwpID0+IHtcbiAgaWYoW1wic2Nyb2xsXCIsIFwiYXV0b1wiXS5pbmRleE9mKGdldENvbXB1dGVkU3R5bGUoZWwpLm92ZXJmbG93WSkgPj0gMCkgcmV0dXJuIGVsXG4gIGlmKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA9PT0gZWwpIHJldHVybiBudWxsXG4gIHJldHVybiBmaW5kU2Nyb2xsQ29udGFpbmVyKGVsLnBhcmVudEVsZW1lbnQpXG59XG5cbmxldCBzY3JvbGxUb3AgPSAoc2Nyb2xsQ29udGFpbmVyKSA9PiB7XG4gIGlmKHNjcm9sbENvbnRhaW5lcil7XG4gICAgcmV0dXJuIHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3BcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxuICB9XG59XG5cbmxldCBib3R0b20gPSAoc2Nyb2xsQ29udGFpbmVyKSA9PiB7XG4gIGlmKHNjcm9sbENvbnRhaW5lcil7XG4gICAgcmV0dXJuIHNjcm9sbENvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b21cbiAgfSBlbHNlIHtcbiAgICAvLyB3aGVuIHdlIGhhdmUgbm8gY29udGFpbmVyLCB0aGUgd2hvbGUgcGFnZSBzY3JvbGxzLFxuICAgIC8vIHRoZXJlZm9yZSB0aGUgYm90dG9tIGNvb3JkaW5hdGUgaXMgdGhlIHZpZXdwb3J0IGhlaWdodFxuICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICB9XG59XG5cbmxldCB0b3AgPSAoc2Nyb2xsQ29udGFpbmVyKSA9PiB7XG4gIGlmKHNjcm9sbENvbnRhaW5lcil7XG4gICAgcmV0dXJuIHNjcm9sbENvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3BcbiAgfSBlbHNlIHtcbiAgICAvLyB3aGVuIHdlIGhhdmUgbm8gY29udGFpbmVyIHRoZSB3aG9sZSBwYWdlIHNjcm9sbHMsXG4gICAgLy8gdGhlcmVmb3JlIHRoZSB0b3AgY29vcmRpbmF0ZSBpcyAwXG4gICAgcmV0dXJuIDBcbiAgfVxufVxuXG5sZXQgaXNBdFZpZXdwb3J0VG9wID0gKGVsLCBzY3JvbGxDb250YWluZXIpID0+IHtcbiAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gcmVjdC50b3AgPj0gdG9wKHNjcm9sbENvbnRhaW5lcikgJiYgcmVjdC5sZWZ0ID49IDAgJiYgcmVjdC50b3AgPD0gYm90dG9tKHNjcm9sbENvbnRhaW5lcilcbn1cblxubGV0IGlzQXRWaWV3cG9ydEJvdHRvbSA9IChlbCwgc2Nyb2xsQ29udGFpbmVyKSA9PiB7XG4gIGxldCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHJlY3QucmlnaHQgPj0gdG9wKHNjcm9sbENvbnRhaW5lcikgJiYgcmVjdC5sZWZ0ID49IDAgJiYgcmVjdC5ib3R0b20gPD0gYm90dG9tKHNjcm9sbENvbnRhaW5lcilcbn1cblxubGV0IGlzV2l0aGluVmlld3BvcnQgPSAoZWwsIHNjcm9sbENvbnRhaW5lcikgPT4ge1xuICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiByZWN0LnRvcCA+PSB0b3Aoc2Nyb2xsQ29udGFpbmVyKSAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LnRvcCA8PSBib3R0b20oc2Nyb2xsQ29udGFpbmVyKVxufVxuXG5Ib29rcy5JbmZpbml0ZVNjcm9sbCA9IHtcbiAgbW91bnRlZCgpe1xuICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyID0gZmluZFNjcm9sbENvbnRhaW5lcih0aGlzLmVsKVxuICAgIGxldCBzY3JvbGxCZWZvcmUgPSBzY3JvbGxUb3AodGhpcy5zY3JvbGxDb250YWluZXIpXG4gICAgbGV0IHRvcE92ZXJyYW4gPSBmYWxzZVxuICAgIGxldCB0aHJvdHRsZUludGVydmFsID0gNTAwXG4gICAgbGV0IHBlbmRpbmdPcCA9IG51bGxcblxuICAgIGxldCBvblRvcE92ZXJydW4gPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gdHJ1ZVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIHRvcEV2ZW50LCB7aWQ6IGZpcnN0Q2hpbGQuaWQsIF9vdmVycmFuOiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25GaXJzdENoaWxkQXRUb3AgPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gZmlyc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwic3RhcnRcIn0pXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgdG9wRXZlbnQsIHtpZDogZmlyc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgRE9NIGlzIHBhdGNoZWQgYnkgd2FpdGluZyBmb3IgdGhlIG5leHQgdGlja1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChmaXJzdENoaWxkLCB0aGlzLnNjcm9sbENvbnRhaW5lcikpe1xuICAgICAgICAgICAgZmlyc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwic3RhcnRcIn0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgbGV0IG9uTGFzdENoaWxkQXRCb3R0b20gPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsIChib3R0b21FdmVudCwgbGFzdENoaWxkKSA9PiB7XG4gICAgICBwZW5kaW5nT3AgPSAoKSA9PiBsYXN0Q2hpbGQuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBcImVuZFwifSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlNIb29rUHVzaCh0aGlzLmVsLCBib3R0b21FdmVudCwge2lkOiBsYXN0Q2hpbGQuaWR9LCAoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdPcCA9IG51bGxcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIERPTSBpcyBwYXRjaGVkIGJ5IHdhaXRpbmcgZm9yIHRoZSBuZXh0IHRpY2tcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgaWYoIWlzV2l0aGluVmlld3BvcnQobGFzdENoaWxkLCB0aGlzLnNjcm9sbENvbnRhaW5lcikpe1xuICAgICAgICAgICAgbGFzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJlbmRcIn0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy5vblNjcm9sbCA9IChfZSkgPT4ge1xuICAgICAgbGV0IHNjcm9sbE5vdyA9IHNjcm9sbFRvcCh0aGlzLnNjcm9sbENvbnRhaW5lcilcblxuICAgICAgaWYocGVuZGluZ09wKXtcbiAgICAgICAgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsTm93XG4gICAgICAgIHJldHVybiBwZW5kaW5nT3AoKVxuICAgICAgfVxuICAgICAgbGV0IHJlY3QgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBsZXQgdG9wRXZlbnQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSh0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInZpZXdwb3J0LXRvcFwiKSlcbiAgICAgIGxldCBib3R0b21FdmVudCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFwidmlld3BvcnQtYm90dG9tXCIpKVxuICAgICAgbGV0IGxhc3RDaGlsZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgbGV0IGZpcnN0Q2hpbGQgPSB0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgICBsZXQgaXNTY3JvbGxpbmdVcCA9IHNjcm9sbE5vdyA8IHNjcm9sbEJlZm9yZVxuICAgICAgbGV0IGlzU2Nyb2xsaW5nRG93biA9IHNjcm9sbE5vdyA+IHNjcm9sbEJlZm9yZVxuXG4gICAgICAvLyBlbCBvdmVycmFuIHdoaWxlIHNjcm9sbGluZyB1cFxuICAgICAgaWYoaXNTY3JvbGxpbmdVcCAmJiB0b3BFdmVudCAmJiAhdG9wT3ZlcnJhbiAmJiByZWN0LnRvcCA+PSAwKXtcbiAgICAgICAgdG9wT3ZlcnJhbiA9IHRydWVcbiAgICAgICAgb25Ub3BPdmVycnVuKHRvcEV2ZW50LCBmaXJzdENoaWxkKVxuICAgICAgfSBlbHNlIGlmKGlzU2Nyb2xsaW5nRG93biAmJiB0b3BPdmVycmFuICYmIHJlY3QudG9wIDw9IDApe1xuICAgICAgICB0b3BPdmVycmFuID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYodG9wRXZlbnQgJiYgaXNTY3JvbGxpbmdVcCAmJiBpc0F0Vmlld3BvcnRUb3AoZmlyc3RDaGlsZCwgdGhpcy5zY3JvbGxDb250YWluZXIpKXtcbiAgICAgICAgb25GaXJzdENoaWxkQXRUb3AodG9wRXZlbnQsIGZpcnN0Q2hpbGQpXG4gICAgICB9IGVsc2UgaWYoYm90dG9tRXZlbnQgJiYgaXNTY3JvbGxpbmdEb3duICYmIGlzQXRWaWV3cG9ydEJvdHRvbShsYXN0Q2hpbGQsIHRoaXMuc2Nyb2xsQ29udGFpbmVyKSl7XG4gICAgICAgIG9uTGFzdENoaWxkQXRCb3R0b20oYm90dG9tRXZlbnQsIGxhc3RDaGlsZClcbiAgICAgIH1cbiAgICAgIHNjcm9sbEJlZm9yZSA9IHNjcm9sbE5vd1xuICAgIH1cblxuICAgIGlmKHRoaXMuc2Nyb2xsQ29udGFpbmVyKXtcbiAgICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbClcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbClcbiAgICB9XG4gIH0sXG4gIFxuICBkZXN0cm95ZWQoKXtcbiAgICBpZih0aGlzLnNjcm9sbENvbnRhaW5lcil7XG4gICAgICB0aGlzLnNjcm9sbENvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpXG4gICAgfVxuICB9LFxuXG4gIHRocm90dGxlKGludGVydmFsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxhc3RDYWxsQXQgPSAwXG4gICAgbGV0IHRpbWVyXG5cbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBsZXQgcmVtYWluaW5nVGltZSA9IGludGVydmFsIC0gKG5vdyAtIGxhc3RDYWxsQXQpXG5cbiAgICAgIGlmKHJlbWFpbmluZ1RpbWUgPD0gMCB8fCByZW1haW5pbmdUaW1lID4gaW50ZXJ2YWwpe1xuICAgICAgICBpZih0aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgICAgICB0aW1lciA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBsYXN0Q2FsbEF0ID0gbm93XG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICB9IGVsc2UgaWYoIXRpbWVyKXtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBsYXN0Q2FsbEF0ID0gRGF0ZS5ub3coKVxuICAgICAgICAgIHRpbWVyID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICAgIH0sIHJlbWFpbmluZ1RpbWUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBIb29rc1xuIiwgImltcG9ydCB7XG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01Qb3N0TW9ycGhSZXN0b3JlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJlZm9yZSwgY29udGFpbmVyQWZ0ZXIsIHVwZGF0ZVR5cGUpe1xuICAgIGxldCBpZHNCZWZvcmUgPSBuZXcgU2V0KClcbiAgICBsZXQgaWRzQWZ0ZXIgPSBuZXcgU2V0KFsuLi5jb250YWluZXJBZnRlci5jaGlsZHJlbl0ubWFwKGNoaWxkID0+IGNoaWxkLmlkKSlcblxuICAgIGxldCBlbGVtZW50c1RvTW9kaWZ5ID0gW11cblxuICAgIEFycmF5LmZyb20oY29udGFpbmVyQmVmb3JlLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmKGNoaWxkLmlkKXsgLy8gYWxsIG9mIG91ciBjaGlsZHJlbiBzaG91bGQgYmUgZWxlbWVudHMgd2l0aCBpZHNcbiAgICAgICAgaWRzQmVmb3JlLmFkZChjaGlsZC5pZClcbiAgICAgICAgaWYoaWRzQWZ0ZXIuaGFzKGNoaWxkLmlkKSl7XG4gICAgICAgICAgbGV0IHByZXZpb3VzRWxlbWVudElkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgZWxlbWVudHNUb01vZGlmeS5wdXNoKHtlbGVtZW50SWQ6IGNoaWxkLmlkLCBwcmV2aW91c0VsZW1lbnRJZDogcHJldmlvdXNFbGVtZW50SWR9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJBZnRlci5pZFxuICAgIHRoaXMudXBkYXRlVHlwZSA9IHVwZGF0ZVR5cGVcbiAgICB0aGlzLmVsZW1lbnRzVG9Nb2RpZnkgPSBlbGVtZW50c1RvTW9kaWZ5XG4gICAgdGhpcy5lbGVtZW50SWRzVG9BZGQgPSBbLi4uaWRzQWZ0ZXJdLmZpbHRlcihpZCA9PiAhaWRzQmVmb3JlLmhhcyhpZCkpXG4gIH1cblxuICAvLyBXZSBkbyB0aGUgZm9sbG93aW5nIHRvIG9wdGltaXplIGFwcGVuZC9wcmVwZW5kIG9wZXJhdGlvbnM6XG4gIC8vICAgMSkgVHJhY2sgaWRzIG9mIG1vZGlmaWVkIGVsZW1lbnRzICYgb2YgbmV3IGVsZW1lbnRzXG4gIC8vICAgMikgQWxsIHRoZSBtb2RpZmllZCBlbGVtZW50cyBhcmUgcHV0IGJhY2sgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIERPTSB0cmVlXG4gIC8vICAgICAgYnkgc3RvcmluZyB0aGUgaWQgb2YgdGhlaXIgcHJldmlvdXMgc2libGluZ1xuICAvLyAgIDMpIE5ldyBlbGVtZW50cyBhcmUgZ29pbmcgdG8gYmUgcHV0IGluIHRoZSByaWdodCBwbGFjZSBieSBtb3JwaGRvbSBkdXJpbmcgYXBwZW5kLlxuICAvLyAgICAgIEZvciBwcmVwZW5kLCB3ZSBtb3ZlIHRoZW0gdG8gdGhlIGZpcnN0IHBvc2l0aW9uIGluIHRoZSBjb250YWluZXJcbiAgcGVyZm9ybSgpe1xuICAgIGxldCBjb250YWluZXIgPSBET00uYnlJZCh0aGlzLmNvbnRhaW5lcklkKVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeS5mb3JFYWNoKGVsZW1lbnRUb01vZGlmeSA9PiB7XG4gICAgICBpZihlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpe1xuICAgICAgICBtYXliZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpLCBwcmV2aW91c0VsZW0gPT4ge1xuICAgICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQgPT0gcHJldmlvdXNFbGVtLmlkXG4gICAgICAgICAgICBpZighaXNJblJpZ2h0UGxhY2Upe1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyXG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICBsZXQgaXNJblJpZ2h0UGxhY2UgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT0gbnVsbFxuICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYodGhpcy51cGRhdGVUeXBlID09IFwicHJlcGVuZFwiKXtcbiAgICAgIHRoaXMuZWxlbWVudElkc1RvQWRkLnJldmVyc2UoKS5mb3JFYWNoKGVsZW1JZCA9PiB7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1JZCksIGVsZW0gPT4gY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgZWxlbSkpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgInZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFID0gMTE7XG5cbmZ1bmN0aW9uIG1vcnBoQXR0cnMoZnJvbU5vZGUsIHRvTm9kZSkge1xuICAgIHZhciB0b05vZGVBdHRycyA9IHRvTm9kZS5hdHRyaWJ1dGVzO1xuICAgIHZhciBhdHRyO1xuICAgIHZhciBhdHRyTmFtZTtcbiAgICB2YXIgYXR0ck5hbWVzcGFjZVVSSTtcbiAgICB2YXIgYXR0clZhbHVlO1xuICAgIHZhciBmcm9tVmFsdWU7XG5cbiAgICAvLyBkb2N1bWVudC1mcmFnbWVudHMgZG9udCBoYXZlIGF0dHJpYnV0ZXMgc28gbGV0cyBub3QgZG8gYW55dGhpbmdcbiAgICBpZiAodG9Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IGZyb21Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZXMgb24gb3JpZ2luYWwgRE9NIGVsZW1lbnRcbiAgICBmb3IgKHZhciBpID0gdG9Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgYXR0ciA9IHRvTm9kZUF0dHJzW2ldO1xuICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgYXR0ck5hbWVzcGFjZVVSSSA9IGF0dHIubmFtZXNwYWNlVVJJO1xuICAgICAgICBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubG9jYWxOYW1lIHx8IGF0dHJOYW1lO1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5wcmVmaXggPT09ICd4bWxucycpe1xuICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTsgLy8gSXQncyBub3QgYWxsb3dlZCB0byBzZXQgYW4gYXR0cmlidXRlIHdpdGggdGhlIFhNTE5TIG5hbWVzcGFjZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGB4bWxuc2AgcHJlZml4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnNldEF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgaWYgKGZyb21WYWx1ZSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBET00gZWxlbWVudCB0aGF0XG4gICAgLy8gd2VyZW4ndCBmb3VuZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gICAgdmFyIGZyb21Ob2RlQXR0cnMgPSBmcm9tTm9kZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgZCA9IGZyb21Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgYXR0ciA9IGZyb21Ob2RlQXR0cnNbZF07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcmFuZ2U7IC8vIENyZWF0ZSBhIHJhbmdlIG9iamVjdCBmb3IgZWZmaWNlbnRseSByZW5kZXJpbmcgc3RyaW5ncyB0byBlbGVtZW50cy5cbnZhciBOU19YSFRNTCA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBkb2N1bWVudDtcbnZhciBIQVNfVEVNUExBVEVfU1VQUE9SVCA9ICEhZG9jICYmICdjb250ZW50JyBpbiBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnZhciBIQVNfUkFOR0VfU1VQUE9SVCA9ICEhZG9jICYmIGRvYy5jcmVhdGVSYW5nZSAmJiAnY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JyBpbiBkb2MuY3JlYXRlUmFuZ2UoKTtcblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gc3RyO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVJhbmdlKHN0cikge1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShkb2MuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIGZyYWdtZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVdyYXAoc3RyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbi8qKlxuICogVGhpcyBpcyBhYm91dCB0aGUgc2FtZVxuICogdmFyIGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQvaHRtbCcpO1xuICogcmV0dXJuIGh0bWwuYm9keS5maXJzdENoaWxkO1xuICpcbiAqIEBtZXRob2QgdG9FbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIHRvRWxlbWVudChzdHIpIHtcbiAgICBzdHIgPSBzdHIudHJpbSgpO1xuICAgIGlmIChIQVNfVEVNUExBVEVfU1VQUE9SVCkge1xuICAgICAgLy8gYXZvaWQgcmVzdHJpY3Rpb25zIG9uIGNvbnRlbnQgZm9yIHRoaW5ncyBsaWtlIGA8dHI+PHRoPkhpPC90aD48L3RyPmAgd2hpY2hcbiAgICAgIC8vIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCBkb2Vzbid0IHN1cHBvcnRcbiAgICAgIC8vIDx0ZW1wbGF0ZT4gc3VwcG9ydCBub3QgYXZhaWxhYmxlIGluIElFXG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKTtcbiAgICB9IGVsc2UgaWYgKEhBU19SQU5HRV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0d28gbm9kZSdzIG5hbWVzIGFyZSB0aGUgc2FtZS5cbiAqXG4gKiBOT1RFOiBXZSBkb24ndCBib3RoZXIgY2hlY2tpbmcgYG5hbWVzcGFjZVVSSWAgYmVjYXVzZSB5b3Ugd2lsbCBuZXZlciBmaW5kIHR3byBIVE1MIGVsZW1lbnRzIHdpdGggdGhlIHNhbWVcbiAqICAgICAgIG5vZGVOYW1lIGFuZCBkaWZmZXJlbnQgbmFtZXNwYWNlIFVSSXMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGIgVGhlIHRhcmdldCBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBjb21wYXJlTm9kZU5hbWVzKGZyb21FbCwgdG9FbCkge1xuICAgIHZhciBmcm9tTm9kZU5hbWUgPSBmcm9tRWwubm9kZU5hbWU7XG4gICAgdmFyIHRvTm9kZU5hbWUgPSB0b0VsLm5vZGVOYW1lO1xuICAgIHZhciBmcm9tQ29kZVN0YXJ0LCB0b0NvZGVTdGFydDtcblxuICAgIGlmIChmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbUNvZGVTdGFydCA9IGZyb21Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuICAgIHRvQ29kZVN0YXJ0ID0gdG9Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgdmlydHVhbCBET00gbm9kZSBvciBTVkcgbm9kZSB0aGVuIHdlIG1heVxuICAgIC8vIG5lZWQgdG8gbm9ybWFsaXplIHRoZSB0YWcgbmFtZSBiZWZvcmUgY29tcGFyaW5nLiBOb3JtYWwgSFRNTCBlbGVtZW50cyB0aGF0IGFyZVxuICAgIC8vIGluIHRoZSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuICAgIC8vIGFyZSBjb252ZXJ0ZWQgdG8gdXBwZXIgY2FzZVxuICAgIGlmIChmcm9tQ29kZVN0YXJ0IDw9IDkwICYmIHRvQ29kZVN0YXJ0ID49IDk3KSB7IC8vIGZyb20gaXMgdXBwZXIgYW5kIHRvIGlzIGxvd2VyXG4gICAgICAgIHJldHVybiBmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRvQ29kZVN0YXJ0IDw9IDkwICYmIGZyb21Db2RlU3RhcnQgPj0gOTcpIHsgLy8gdG8gaXMgdXBwZXIgYW5kIGZyb20gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIHRvTm9kZU5hbWUgPT09IGZyb21Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQsIG9wdGlvbmFsbHkgd2l0aCBhIGtub3duIG5hbWVzcGFjZSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGVsZW1lbnQgbmFtZSwgZS5nLiAnZGl2JyBvciAnc3ZnJ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lc3BhY2VVUkldIHRoZSBlbGVtZW50J3MgbmFtZXNwYWNlIFVSSSwgaS5lLiB0aGUgdmFsdWUgb2ZcbiAqIGl0cyBgeG1sbnNgIGF0dHJpYnV0ZSBvciBpdHMgaW5mZXJyZWQgbmFtZXNwYWNlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lLCBuYW1lc3BhY2VVUkkpIHtcbiAgICByZXR1cm4gIW5hbWVzcGFjZVVSSSB8fCBuYW1lc3BhY2VVUkkgPT09IE5TX1hIVE1MID9cbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQobmFtZSkgOlxuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgbmFtZSk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSBjaGlsZHJlbiBvZiBvbmUgRE9NIGVsZW1lbnQgdG8gYW5vdGhlciBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgdG9FbC5hcHBlbmRDaGlsZChjdXJDaGlsZCk7XG4gICAgICAgIGN1ckNoaWxkID0gbmV4dENoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gdG9FbDtcbn1cblxuZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsIG5hbWUpIHtcbiAgICBpZiAoZnJvbUVsW25hbWVdICE9PSB0b0VsW25hbWVdKSB7XG4gICAgICAgIGZyb21FbFtuYW1lXSA9IHRvRWxbbmFtZV07XG4gICAgICAgIGlmIChmcm9tRWxbbmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIHNwZWNpYWxFbEhhbmRsZXJzID0ge1xuICAgIE9QVElPTjogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZnJvbUVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1NFTEVDVCcgJiYgIXBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21FbC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgJiYgIXRvRWwuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgTVMgRWRnZSBidWcgd2hlcmUgdGhlICdzZWxlY3RlZCcgYXR0cmlidXRlIGNhbiBvbmx5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgc2V0IHRvIGEgbm9uLWVtcHR5IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjA4NzY3OS9cbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byByZXNldCBzZWxlY3QgZWxlbWVudCdzIHNlbGVjdGVkSW5kZXggdG8gLTEsIG90aGVyd2lzZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gZnJvbUVsLnNlbGVjdGVkIHVzaW5nIHRoZSBzeW5jQm9vbGVhbkF0dHJQcm9wIGJlbG93IGhhcyBubyBlZmZlY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvcnJlY3Qgc2VsZWN0ZWRJbmRleCB3aWxsIGJlIHNldCBpbiB0aGUgU0VMRUNUIHNwZWNpYWwgaGFuZGxlciBiZWxvdy5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ3NlbGVjdGVkJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBpcyBzcGVjaWFsIGZvciB0aGUgPGlucHV0PiBlbGVtZW50IHNpbmNlIGl0IHNldHNcbiAgICAgKiB0aGUgaW5pdGlhbCB2YWx1ZS4gQ2hhbmdpbmcgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGUgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgKiBcInZhbHVlXCIgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdCBzaW5jZSBpdCBpcyBvbmx5IHVzZWQgdG8gdGhlIHNldCB0aGVcbiAgICAgKiBpbml0aWFsIHZhbHVlLiAgU2ltaWxhciBmb3IgdGhlIFwiY2hlY2tlZFwiIGF0dHJpYnV0ZSwgYW5kIFwiZGlzYWJsZWRcIi5cbiAgICAgKi9cbiAgICBJTlBVVDogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnY2hlY2tlZCcpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGZyb21FbC52YWx1ZSAhPT0gdG9FbC52YWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gdG9FbC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9FbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIGZyb21FbC5yZW1vdmVBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgVEVYVEFSRUE6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBJRS4gQXBwYXJlbnRseSBJRSBzZXRzIHRoZSBwbGFjZWhvbGRlciBhcyB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdmFsdWUgYW5kIHZpc2UgdmVyc2EuIFRoaXMgaWdub3JlcyBhbiBlbXB0eSB1cGRhdGUuXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IG5ld1ZhbHVlIHx8ICghbmV3VmFsdWUgJiYgb2xkVmFsdWUgPT0gZnJvbUVsLnBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgU0VMRUNUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gbG9vcCB0aHJvdWdoIGNoaWxkcmVuIG9mIGZyb21FbCwgbm90IHRvRWwgc2luY2Ugbm9kZXMgY2FuIGJlIG1vdmVkXG4gICAgICAgICAgICAvLyBmcm9tIHRvRWwgdG8gZnJvbUVsIGRpcmVjdGx5IHdoZW4gbW9ycGhpbmcuXG4gICAgICAgICAgICAvLyBBdCB0aGUgdGltZSB0aGlzIHNwZWNpYWwgaGFuZGxlciBpcyBpbnZva2VkLCBhbGwgY2hpbGRyZW4gaGF2ZSBhbHJlYWR5IGJlZW4gbW9ycGhlZFxuICAgICAgICAgICAgLy8gYW5kIGFwcGVuZGVkIHRvIC8gcmVtb3ZlZCBmcm9tIGZyb21FbCwgc28gdXNpbmcgZnJvbUVsIGhlcmUgaXMgc2FmZSBhbmQgY29ycmVjdC5cbiAgICAgICAgICAgIHZhciBjdXJDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIG9wdGdyb3VwO1xuICAgICAgICAgICAgdmFyIG5vZGVOYW1lO1xuICAgICAgICAgICAgd2hpbGUoY3VyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBub2RlTmFtZSA9IGN1ckNoaWxkLm5vZGVOYW1lICYmIGN1ckNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNoaWxkID0gb3B0Z3JvdXAuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ2hpbGQuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJDaGlsZCAmJiBvcHRncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJvbUVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEVMRU1FTlRfTk9ERSA9IDE7XG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxID0gMTE7XG52YXIgVEVYVF9OT0RFID0gMztcbnZhciBDT01NRU5UX05PREUgPSA4O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZGVmYXVsdEdldE5vZGVLZXkobm9kZSkge1xuICBpZiAobm9kZSkge1xuICAgIHJldHVybiAobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHx8IG5vZGUuaWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpIHtcblxuICByZXR1cm4gZnVuY3Rpb24gbW9ycGhkb20oZnJvbU5vZGUsIHRvTm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9Ob2RlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGZyb21Ob2RlLm5vZGVOYW1lID09PSAnI2RvY3VtZW50JyB8fCBmcm9tTm9kZS5ub2RlTmFtZSA9PT0gJ0hUTUwnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIHRvTm9kZUh0bWwgPSB0b05vZGU7XG4gICAgICAgIHRvTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgIHRvTm9kZS5pbm5lckhUTUwgPSB0b05vZGVIdG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9Ob2RlID0gdG9FbGVtZW50KHRvTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgdG9Ob2RlID0gdG9Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIHZhciBnZXROb2RlS2V5ID0gb3B0aW9ucy5nZXROb2RlS2V5IHx8IGRlZmF1bHRHZXROb2RlS2V5O1xuICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZCA9IG9wdGlvbnMub25CZWZvcmVOb2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlQWRkZWQgPSBvcHRpb25zLm9uTm9kZUFkZGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uQmVmb3JlRWxVcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkVsVXBkYXRlZCA9IG9wdGlvbnMub25FbFVwZGF0ZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVOb2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbk5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCA9IG9wdGlvbnMub25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBza2lwRnJvbUNoaWxkcmVuID0gb3B0aW9ucy5za2lwRnJvbUNoaWxkcmVuIHx8IG5vb3A7XG4gICAgdmFyIGFkZENoaWxkID0gb3B0aW9ucy5hZGRDaGlsZCB8fCBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7IH07XG4gICAgdmFyIGNoaWxkcmVuT25seSA9IG9wdGlvbnMuY2hpbGRyZW5Pbmx5ID09PSB0cnVlO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGxvb2t1cCB0byBxdWlja2x5IGZpbmQgYWxsIGtleWVkIGVsZW1lbnRzIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICB2YXIgZnJvbU5vZGVzTG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIga2V5ZWRSZW1vdmFsTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkS2V5ZWRSZW1vdmFsKGtleSkge1xuICAgICAga2V5ZWRSZW1vdmFsTGlzdC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgdmFyIGN1ckNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcblxuICAgICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoc2tpcEtleWVkTm9kZXMgJiYgKGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNraXBwaW5nIGtleWVkIG5vZGVzIHRoZW4gd2UgYWRkIHRoZSBrZXlcbiAgICAgICAgICAgIC8vIHRvIGEgbGlzdCBzbyB0aGF0IGl0IGNhbiBiZSBoYW5kbGVkIGF0IHRoZSB2ZXJ5IGVuZC5cbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlcG9ydCB0aGUgbm9kZSBhcyBkaXNjYXJkZWQgaWYgaXQgaXMgbm90IGtleWVkLiBXZSBkbyB0aGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGF0IHRoZSBlbmQgd2UgbG9vcCB0aHJvdWdoIGFsbCBrZXllZCBlbGVtZW50cyB0aGF0IHdlcmUgdW5tYXRjaGVkXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiBkaXNjYXJkIHRoZW0gaW4gb25lIGZpbmFsIHBhc3MuXG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoY3VyQ2hpbGQpO1xuICAgICAgICAgICAgaWYgKGN1ckNoaWxkLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMoY3VyQ2hpbGQsIHNraXBLZXllZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZW1vdmVzIGEgRE9NIG5vZGUgb3V0IG9mIHRoZSBvcmlnaW5hbCBET01cbiAgICAqXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICogQHBhcmFtICB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgbm9kZXMgcGFyZW50XG4gICAgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwS2V5ZWROb2RlcyBJZiB0cnVlIHRoZW4gZWxlbWVudHMgd2l0aCBrZXlzIHdpbGwgYmUgc2tpcHBlZCBhbmQgbm90IGRpc2NhcmRlZC5cbiAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSwgcGFyZW50Tm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChvbkJlZm9yZU5vZGVEaXNjYXJkZWQobm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgb25Ob2RlRGlzY2FyZGVkKG5vZGUpO1xuICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpO1xuICAgIH1cblxuICAgIC8vIC8vIFRyZWVXYWxrZXIgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKHJvb3QpIHtcbiAgICAvLyAgICAgdmFyIHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIC8vICAgICAgICAgcm9vdCxcbiAgICAvLyAgICAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZWw7XG4gICAgLy8gICAgIHdoaWxlKChlbCA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gTm9kZUl0ZXJhdG9yIGltcGxlbWVudGF0aW9uIGlzIG5vIGZhc3RlciwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmQgaW4gY2FzZSB0aGlzIGNoYW5nZXMgaW4gdGhlIGZ1dHVyZVxuICAgIC8vXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGVJdGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihub2RlLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCk7XG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpKSB7XG4gICAgLy8gICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShlbCk7XG4gICAgLy8gICAgICAgICBpZiAoa2V5KSB7XG4gICAgLy8gICAgICAgICAgICAgZnJvbU5vZGVzTG9va3VwW2tleV0gPSBlbDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIGZ1bmN0aW9uIGluZGV4VHJlZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGN1ckNoaWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdhbGsgcmVjdXJzaXZlbHlcbiAgICAgICAgICBpbmRleFRyZWUoY3VyQ2hpbGQpO1xuXG4gICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGluZGV4VHJlZShmcm9tTm9kZSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOb2RlQWRkZWQoZWwpIHtcbiAgICAgIG9uTm9kZUFkZGVkKGVsKTtcblxuICAgICAgdmFyIGN1ckNoaWxkID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjdXJDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB2YXIgdW5tYXRjaGVkRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2tleV07XG4gICAgICAgICAgLy8gaWYgd2UgZmluZCBhIGR1cGxpY2F0ZSAjaWQgbm9kZSBpbiBjYWNoZSwgcmVwbGFjZSBgZWxgIHdpdGggY2FjaGUgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgbW9ycGggaXQgdG8gdGhlIGNoaWxkIG5vZGUuXG4gICAgICAgICAgaWYgKHVubWF0Y2hlZEZyb21FbCAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckNoaWxkLCB1bm1hdGNoZWRGcm9tRWwpKSB7XG4gICAgICAgICAgICBjdXJDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICAgIG1vcnBoRWwodW5tYXRjaGVkRnJvbUVsLCBjdXJDaGlsZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZm9yIGN1ckNoaWxkIGFuZCBpdCdzIGNoaWxkcmVuIHRvIHNlZSBpZiB3ZSBmaW5kIHNvbWV0aGluZyBpblxuICAgICAgICAgIC8vIGZyb21Ob2Rlc0xvb2t1cFxuICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJDaGlsZCA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSkge1xuICAgICAgLy8gV2UgaGF2ZSBwcm9jZXNzZWQgYWxsIG9mIHRoZSBcInRvIG5vZGVzXCIuIElmIGN1ckZyb21Ob2RlQ2hpbGQgaXNcbiAgICAgIC8vIG5vbi1udWxsIHRoZW4gd2Ugc3RpbGwgaGF2ZSBzb21lIGZyb20gbm9kZXMgbGVmdCBvdmVyIHRoYXQgbmVlZFxuICAgICAgLy8gdG8gYmUgcmVtb3ZlZFxuICAgICAgd2hpbGUgKGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgdmFyIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICgoY3VyRnJvbU5vZGVLZXkgPSBnZXROb2RlS2V5KGN1ckZyb21Ob2RlQ2hpbGQpKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3JwaEVsKGZyb21FbCwgdG9FbCwgY2hpbGRyZW5Pbmx5KSB7XG4gICAgICB2YXIgdG9FbEtleSA9IGdldE5vZGVLZXkodG9FbCk7XG5cbiAgICAgIGlmICh0b0VsS2V5KSB7XG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBpcyBiZWluZyBtb3JwaGVkIHRoZW4gaXQgd2lsbCBiZSBpbiB0aGUgZmluYWxcbiAgICAgICAgLy8gRE9NIHNvIGNsZWFyIGl0IG91dCBvZiB0aGUgc2F2ZWQgZWxlbWVudHMgY29sbGVjdGlvblxuICAgICAgICBkZWxldGUgZnJvbU5vZGVzTG9va3VwW3RvRWxLZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgICAvLyBvcHRpb25hbFxuICAgICAgICBpZiAob25CZWZvcmVFbFVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudCBmaXJzdFxuICAgICAgICBtb3JwaEF0dHJzKGZyb21FbCwgdG9FbCk7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIG9uRWxVcGRhdGVkKGZyb21FbCk7XG5cbiAgICAgICAgaWYgKG9uQmVmb3JlRWxDaGlsZHJlblVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZyb21FbC5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBtb3JwaENoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVycy5URVhUQVJFQShmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgICB2YXIgc2tpcEZyb20gPSBza2lwRnJvbUNoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB2YXIgY3VyVG9Ob2RlQ2hpbGQgPSB0b0VsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgdmFyIGN1clRvTm9kZUtleTtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUtleTtcblxuICAgICAgdmFyIGZyb21OZXh0U2libGluZztcbiAgICAgIHZhciB0b05leHRTaWJsaW5nO1xuICAgICAgdmFyIG1hdGNoaW5nRnJvbUVsO1xuXG4gICAgICAvLyB3YWxrIHRoZSBjaGlsZHJlblxuICAgICAgb3V0ZXI6IHdoaWxlIChjdXJUb05vZGVDaGlsZCkge1xuICAgICAgICB0b05leHRTaWJsaW5nID0gY3VyVG9Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGN1clRvTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyVG9Ob2RlQ2hpbGQpO1xuXG4gICAgICAgIC8vIHdhbGsgdGhlIGZyb21Ob2RlIGNoaWxkcmVuIGFsbCB0aGUgd2F5IHRocm91Z2hcbiAgICAgICAgd2hpbGUgKCFza2lwRnJvbSAmJiBjdXJGcm9tTm9kZUNoaWxkKSB7XG4gICAgICAgICAgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5pc1NhbWVOb2RlICYmIGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCkpIHtcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICB2YXIgY3VyRnJvbU5vZGVUeXBlID0gY3VyRnJvbU5vZGVDaGlsZC5ub2RlVHlwZTtcblxuICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaWYgdGhlIGN1ckZyb21Ob2RlQ2hpbGQgZG9lc250IGhhdmUgYSBtYXRjaCB3aXRoIHRoZSBjdXJUb05vZGVDaGlsZFxuICAgICAgICAgIHZhciBpc0NvbXBhdGlibGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBjdXJUb05vZGVDaGlsZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIEVsZW1lbnQgbm9kZXNcblxuICAgICAgICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRhcmdldCBub2RlIGhhcyBhIGtleSBzbyB3ZSB3YW50IHRvIG1hdGNoIGl0IHVwIHdpdGggdGhlIGNvcnJlY3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZVxuICAgICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkgIT09IGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBET00gdHJlZSBkb2VzIG5vdCBoYXZlIGEgbWF0Y2hpbmcga2V5IHNvXG4gICAgICAgICAgICAgICAgICAvLyBsZXQncyBjaGVjayBvdXIgbG9va3VwIHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAvLyBET00gdHJlZVxuICAgICAgICAgICAgICAgICAgaWYgKChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbU5leHRTaWJsaW5nID09PSBtYXRjaGluZ0Zyb21FbCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2luZ2xlIGVsZW1lbnQgcmVtb3ZhbHMuIFRvIGF2b2lkIHJlbW92aW5nIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIERPTSBub2RlIG91dCBvZiB0aGUgdHJlZSAoc2luY2UgdGhhdCBjYW4gYnJlYWsgQ1NTIHRyYW5zaXRpb25zLCBldGMuKSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGluc3RlYWQgZGlzY2FyZCB0aGUgY3VycmVudCBub2RlIGFuZCB3YWl0IHVudGlsIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIHRvIHByb3Blcmx5IG1hdGNoIHVwIHRoZSBrZXllZCB0YXJnZXQgZWxlbWVudCB3aXRoIGl0cyBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoaW5nIGtleWVkIGVsZW1lbnQgc29tZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyBtb3ZlIHRoZSBvcmlnaW5hbCBET00gbm9kZSBpbnRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBtb3JwaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0LlxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgdXNlIGluc2VydEJlZm9yZSBpbnN0ZWFkIG9mIHJlcGxhY2VDaGlsZCBiZWNhdXNlIHdlIHdhbnQgdG8gZ28gdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgcmVtb3ZlTm9kZSgpYCBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgdGhhdCBpcyBiZWluZyBkaXNjYXJkZWQgc28gdGhhdFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBsaWZlY3ljbGUgaG9va3MgYXJlIGNvcnJlY3RseSBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUVsLmluc2VydEJlZm9yZShtYXRjaGluZ0Zyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBtYXRjaGluZ0Zyb21FbDtcbiAgICAgICAgICAgICAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBub2RlcyBhcmUgbm90IGNvbXBhdGlibGUgc2luY2UgdGhlIFwidG9cIiBub2RlIGhhcyBhIGtleSBhbmQgdGhlcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgbm8gbWF0Y2hpbmcga2V5ZWQgbm9kZSBpbiB0aGUgc291cmNlIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIGhhcyBhIGtleVxuICAgICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gaXNDb21wYXRpYmxlICE9PSBmYWxzZSAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckZyb21Ob2RlQ2hpbGQsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICAgICAgaWYgKGlzQ29tcGF0aWJsZSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGZvdW5kIGNvbXBhdGlibGUgRE9NIGVsZW1lbnRzIHNvIHRyYW5zZm9ybVxuICAgICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IFwiZnJvbVwiIG5vZGUgdG8gbWF0Y2ggdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAvLyB0YXJnZXQgRE9NIG5vZGUuXG4gICAgICAgICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICAgICAgICBtb3JwaEVsKGN1ckZyb21Ob2RlQ2hpbGQsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IGN1ckZyb21Ob2RlVHlwZSA9PSBDT01NRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgLy8gQm90aCBub2RlcyBiZWluZyBjb21wYXJlZCBhcmUgVGV4dCBvciBDb21tZW50IG5vZGVzXG4gICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgIC8vIFNpbXBseSB1cGRhdGUgbm9kZVZhbHVlIG9uIHRoZSBvcmlnaW5hbCBub2RlIHRvXG4gICAgICAgICAgICAgIC8vIGNoYW5nZSB0aGUgdGV4dCB2YWx1ZVxuICAgICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgIT09IGN1clRvTm9kZUNoaWxkLm5vZGVWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQubm9kZVZhbHVlID0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAvLyBBZHZhbmNlIGJvdGggdGhlIFwidG9cIiBjaGlsZCBhbmQgdGhlIFwiZnJvbVwiIGNoaWxkIHNpbmNlIHdlIGZvdW5kIGEgbWF0Y2hcbiAgICAgICAgICAgIC8vIE5vdGhpbmcgZWxzZSB0byBkbyBhcyB3ZSBhbHJlYWR5IHJlY3Vyc2l2ZWx5IGNhbGxlZCBtb3JwaENoaWxkcmVuIGFib3ZlXG4gICAgICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbU5leHRTaWJsaW5nO1xuICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTm8gY29tcGF0aWJsZSBtYXRjaCBzbyByZW1vdmUgdGhlIG9sZCBub2RlIGZyb20gdGhlIERPTSBhbmQgY29udGludWUgdHJ5aW5nIHRvIGZpbmQgYVxuICAgICAgICAgIC8vIG1hdGNoIGluIHRoZSBvcmlnaW5hbCBET00uIEhvd2V2ZXIsIHdlIG9ubHkgZG8gdGhpcyBpZiB0aGUgZnJvbSBub2RlIGlzIG5vdCBrZXllZFxuICAgICAgICAgIC8vIHNpbmNlIGl0IGlzIHBvc3NpYmxlIHRoYXQgYSBrZXllZCBub2RlIG1pZ2h0IG1hdGNoIHVwIHdpdGggYSBub2RlIHNvbWV3aGVyZSBlbHNlIGluIHRoZVxuICAgICAgICAgIC8vIHRhcmdldCB0cmVlIGFuZCB3ZSBkb24ndCB3YW50IHRvIGRpc2NhcmQgaXQganVzdCB5ZXQgc2luY2UgaXQgc3RpbGwgbWlnaHQgZmluZCBhXG4gICAgICAgICAgLy8gaG9tZSBpbiB0aGUgZmluYWwgRE9NIHRyZWUuIEFmdGVyIGV2ZXJ5dGhpbmcgaXMgZG9uZSB3ZSB3aWxsIHJlbW92ZSBhbnkga2V5ZWQgbm9kZXNcbiAgICAgICAgICAvLyB0aGF0IGRpZG4ndCBmaW5kIGEgaG9tZVxuICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUtleSkge1xuICAgICAgICAgICAgLy8gU2luY2UgdGhlIG5vZGUgaXMga2V5ZWQgaXQgbWlnaHQgYmUgbWF0Y2hlZCB1cCBsYXRlciBzbyB3ZSBkZWZlclxuICAgICAgICAgICAgLy8gdGhlIGFjdHVhbCByZW1vdmFsIHRvIGxhdGVyXG4gICAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBOT1RFOiB3ZSBza2lwIG5lc3RlZCBrZXllZCBub2RlcyBmcm9tIGJlaW5nIHJlbW92ZWQgc2luY2UgdGhlcmUgaXNcbiAgICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgICByZW1vdmVOb2RlKGN1ckZyb21Ob2RlQ2hpbGQsIGZyb21FbCwgdHJ1ZSAvKiBza2lwIGtleWVkIG5vZGVzICovKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbU5leHRTaWJsaW5nO1xuICAgICAgICB9IC8vIEVORDogd2hpbGUoY3VyRnJvbU5vZGVDaGlsZCkge31cblxuICAgICAgICAvLyBJZiB3ZSBnb3QgdGhpcyBmYXIgdGhlbiB3ZSBkaWQgbm90IGZpbmQgYSBjYW5kaWRhdGUgbWF0Y2ggZm9yXG4gICAgICAgIC8vIG91ciBcInRvIG5vZGVcIiBhbmQgd2UgZXhoYXVzdGVkIGFsbCBvZiB0aGUgY2hpbGRyZW4gXCJmcm9tXCJcbiAgICAgICAgLy8gbm9kZXMuIFRoZXJlZm9yZSwgd2Ugd2lsbCBqdXN0IGFwcGVuZCB0aGUgY3VycmVudCBcInRvXCIgbm9kZVxuICAgICAgICAvLyB0byB0aGUgZW5kXG4gICAgICAgIGlmIChjdXJUb05vZGVLZXkgJiYgKG1hdGNoaW5nRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2N1clRvTm9kZUtleV0pICYmIGNvbXBhcmVOb2RlTmFtZXMobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKSkge1xuICAgICAgICAgIC8vIE1PUlBIXG4gICAgICAgICAgaWYoIXNraXBGcm9tKXsgYWRkQ2hpbGQoZnJvbUVsLCBtYXRjaGluZ0Zyb21FbCk7IH1cbiAgICAgICAgICBtb3JwaEVsKG1hdGNoaW5nRnJvbUVsLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ID0gb25CZWZvcmVOb2RlQWRkZWQoY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgIGlmIChvbkJlZm9yZU5vZGVBZGRlZFJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmIChvbkJlZm9yZU5vZGVBZGRlZFJlc3VsdCkge1xuICAgICAgICAgICAgICBjdXJUb05vZGVDaGlsZCA9IG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3VyVG9Ob2RlQ2hpbGQuYWN0dWFsaXplKSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gY3VyVG9Ob2RlQ2hpbGQuYWN0dWFsaXplKGZyb21FbC5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRDaGlsZChmcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSB0b05leHRTaWJsaW5nO1xuICAgICAgICBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbU5leHRTaWJsaW5nO1xuICAgICAgfVxuXG4gICAgICBjbGVhbnVwRnJvbUVsKGZyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCwgY3VyRnJvbU5vZGVLZXkpO1xuXG4gICAgICB2YXIgc3BlY2lhbEVsSGFuZGxlciA9IHNwZWNpYWxFbEhhbmRsZXJzW2Zyb21FbC5ub2RlTmFtZV07XG4gICAgICBpZiAoc3BlY2lhbEVsSGFuZGxlcikge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVyKGZyb21FbCwgdG9FbCk7XG4gICAgICB9XG4gICAgfSAvLyBFTkQ6IG1vcnBoQ2hpbGRyZW4oLi4uKVxuXG4gICAgdmFyIG1vcnBoZWROb2RlID0gZnJvbU5vZGU7XG4gICAgdmFyIG1vcnBoZWROb2RlVHlwZSA9IG1vcnBoZWROb2RlLm5vZGVUeXBlO1xuICAgIHZhciB0b05vZGVUeXBlID0gdG9Ob2RlLm5vZGVUeXBlO1xuXG4gICAgaWYgKCFjaGlsZHJlbk9ubHkpIHtcbiAgICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSB3ZSBhcmUgZ2l2ZW4gdHdvIERPTSBub2RlcyB0aGF0IGFyZSBub3RcbiAgICAgIC8vIGNvbXBhdGlibGUgKGUuZy4gPGRpdj4gLS0+IDxzcGFuPiBvciA8ZGl2PiAtLT4gVEVYVClcbiAgICAgIGlmIChtb3JwaGVkTm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgICBpZiAodG9Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgaWYgKCFjb21wYXJlTm9kZU5hbWVzKGZyb21Ob2RlLCB0b05vZGUpKSB7XG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoZnJvbU5vZGUpO1xuICAgICAgICAgICAgbW9ycGhlZE5vZGUgPSBtb3ZlQ2hpbGRyZW4oZnJvbU5vZGUsIGNyZWF0ZUVsZW1lbnROUyh0b05vZGUubm9kZU5hbWUsIHRvTm9kZS5uYW1lc3BhY2VVUkkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gR29pbmcgZnJvbSBhbiBlbGVtZW50IG5vZGUgdG8gYSB0ZXh0IG5vZGVcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChtb3JwaGVkTm9kZVR5cGUgPT09IFRFWFRfTk9ERSB8fCBtb3JwaGVkTm9kZVR5cGUgPT09IENPTU1FTlRfTk9ERSkgeyAvLyBUZXh0IG9yIGNvbW1lbnQgbm9kZVxuICAgICAgICBpZiAodG9Ob2RlVHlwZSA9PT0gbW9ycGhlZE5vZGVUeXBlKSB7XG4gICAgICAgICAgaWYgKG1vcnBoZWROb2RlLm5vZGVWYWx1ZSAhPT0gdG9Ob2RlLm5vZGVWYWx1ZSkge1xuICAgICAgICAgICAgbW9ycGhlZE5vZGUubm9kZVZhbHVlID0gdG9Ob2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbW9ycGhlZE5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGV4dCBub2RlIHRvIHNvbWV0aGluZyBlbHNlXG4gICAgICAgICAgbW9ycGhlZE5vZGUgPSB0b05vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobW9ycGhlZE5vZGUgPT09IHRvTm9kZSkge1xuICAgICAgLy8gVGhlIFwidG8gbm9kZVwiIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBcImZyb20gbm9kZVwiIHNvIHdlIGhhZCB0b1xuICAgICAgLy8gdG9zcyBvdXQgdGhlIFwiZnJvbSBub2RlXCIgYW5kIHVzZSB0aGUgXCJ0byBub2RlXCJcbiAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0b05vZGUuaXNTYW1lTm9kZSAmJiB0b05vZGUuaXNTYW1lTm9kZShtb3JwaGVkTm9kZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtb3JwaEVsKG1vcnBoZWROb2RlLCB0b05vZGUsIGNoaWxkcmVuT25seSk7XG5cbiAgICAgIC8vIFdlIG5vdyBuZWVkIHRvIGxvb3Agb3ZlciBhbnkga2V5ZWQgbm9kZXMgdGhhdCBtaWdodCBuZWVkIHRvIGJlXG4gICAgICAvLyByZW1vdmVkLiBXZSBvbmx5IGRvIHRoZSByZW1vdmFsIGlmIHdlIGtub3cgdGhhdCB0aGUga2V5ZWQgbm9kZVxuICAgICAgLy8gbmV2ZXIgZm91bmQgYSBtYXRjaC4gV2hlbiBhIGtleWVkIG5vZGUgaXMgbWF0Y2hlZCB1cCB3ZSByZW1vdmVcbiAgICAgIC8vIGl0IG91dCBvZiBmcm9tTm9kZXNMb29rdXAgYW5kIHdlIHVzZSBmcm9tTm9kZXNMb29rdXAgdG8gZGV0ZXJtaW5lXG4gICAgICAvLyBpZiBhIGtleWVkIG5vZGUgaGFzIGJlZW4gbWF0Y2hlZCB1cCBvciBub3RcbiAgICAgIGlmIChrZXllZFJlbW92YWxMaXN0KSB7XG4gICAgICAgIGZvciAodmFyIGk9MCwgbGVuPWtleWVkUmVtb3ZhbExpc3QubGVuZ3RoOyBpPGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIGVsVG9SZW1vdmUgPSBmcm9tTm9kZXNMb29rdXBba2V5ZWRSZW1vdmFsTGlzdFtpXV07XG4gICAgICAgICAgaWYgKGVsVG9SZW1vdmUpIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoZWxUb1JlbW92ZSwgZWxUb1JlbW92ZS5wYXJlbnROb2RlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaGlsZHJlbk9ubHkgJiYgbW9ycGhlZE5vZGUgIT09IGZyb21Ob2RlICYmIGZyb21Ob2RlLnBhcmVudE5vZGUpIHtcbiAgICAgIGlmIChtb3JwaGVkTm9kZS5hY3R1YWxpemUpIHtcbiAgICAgICAgbW9ycGhlZE5vZGUgPSBtb3JwaGVkTm9kZS5hY3R1YWxpemUoZnJvbU5vZGUub3duZXJEb2N1bWVudCB8fCBkb2MpO1xuICAgICAgfVxuICAgICAgLy8gSWYgd2UgaGFkIHRvIHN3YXAgb3V0IHRoZSBmcm9tIG5vZGUgd2l0aCBhIG5ldyBub2RlIGJlY2F1c2UgdGhlIG9sZFxuICAgICAgLy8gbm9kZSB3YXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdGFyZ2V0IG5vZGUgdGhlbiB3ZSBuZWVkIHRvXG4gICAgICAvLyByZXBsYWNlIHRoZSBvbGQgRE9NIG5vZGUgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLiBUaGlzIGlzIG9ubHlcbiAgICAgIC8vIHBvc3NpYmxlIGlmIHRoZSBvcmlnaW5hbCBET00gbm9kZSB3YXMgcGFydCBvZiBhIERPTSB0cmVlIHdoaWNoXG4gICAgICAvLyB3ZSBrbm93IGlzIHRoZSBjYXNlIGlmIGl0IGhhcyBhIHBhcmVudCBub2RlLlxuICAgICAgZnJvbU5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobW9ycGhlZE5vZGUsIGZyb21Ob2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbW9ycGhlZE5vZGU7XG4gIH07XG59XG5cbnZhciBtb3JwaGRvbSA9IG1vcnBoZG9tRmFjdG9yeShtb3JwaEF0dHJzKTtcblxuZXhwb3J0IGRlZmF1bHQgbW9ycGhkb207XG4iLCAiaW1wb3J0IHtcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0ZFRURCQUNLX0ZPUixcbiAgUEhYX0ZFRURCQUNLX0dST1VQLFxuICBQSFhfUFJVTkUsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NLSVAsXG4gIFBIWF9NQUdJQ19JRCxcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1RSSUdHRVJfQUNUSU9OLFxuICBQSFhfVVBEQVRFLFxuICBQSFhfU1RSRUFNLFxuICBQSFhfU1RSRUFNX1JFRixcbiAgUEhYX1ZJRVdQT1JUX1RPUCxcbiAgUEhYX1ZJRVdQT1JUX0JPVFRPTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgZGV0ZWN0RHVwbGljYXRlSWRzLFxuICBpc0NpZFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01Qb3N0TW9ycGhSZXN0b3JlciBmcm9tIFwiLi9kb21fcG9zdF9tb3JwaF9yZXN0b3JlclwiXG5pbXBvcnQgbW9ycGhkb20gZnJvbSBcIm1vcnBoZG9tXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRE9NUGF0Y2gge1xuICBzdGF0aWMgcGF0Y2hFbChmcm9tRWwsIHRvRWwsIGFjdGl2ZUVsZW1lbnQpe1xuICAgIG1vcnBoZG9tKGZyb21FbCwgdG9FbCwge1xuICAgICAgY2hpbGRyZW5Pbmx5OiBmYWxzZSxcbiAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgIGlmKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGZyb21FbCkgJiYgRE9NLmlzRm9ybUlucHV0KGZyb21FbCkpe1xuICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3RydWN0b3IodmlldywgY29udGFpbmVyLCBpZCwgaHRtbCwgc3RyZWFtcywgdGFyZ2V0Q0lEKXtcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5saXZlU29ja2V0ID0gdmlldy5saXZlU29ja2V0XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXJcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnJvb3RJRCA9IHZpZXcucm9vdC5pZFxuICAgIHRoaXMuaHRtbCA9IGh0bWxcbiAgICB0aGlzLnN0cmVhbXMgPSBzdHJlYW1zXG4gICAgdGhpcy5zdHJlYW1JbnNlcnRzID0ge31cbiAgICB0aGlzLnN0cmVhbUNvbXBvbmVudFJlc3RvcmUgPSB7fVxuICAgIHRoaXMudGFyZ2V0Q0lEID0gdGFyZ2V0Q0lEXG4gICAgdGhpcy5jaWRQYXRjaCA9IGlzQ2lkKHRoaXMudGFyZ2V0Q0lEKVxuICAgIHRoaXMucGVuZGluZ1JlbW92ZXMgPSBbXVxuICAgIHRoaXMucGh4UmVtb3ZlID0gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoXCJyZW1vdmVcIilcbiAgICB0aGlzLmNhbGxiYWNrcyA9IHtcbiAgICAgIGJlZm9yZWFkZGVkOiBbXSwgYmVmb3JldXBkYXRlZDogW10sIGJlZm9yZXBoeENoaWxkQWRkZWQ6IFtdLFxuICAgICAgYWZ0ZXJhZGRlZDogW10sIGFmdGVydXBkYXRlZDogW10sIGFmdGVyZGlzY2FyZGVkOiBbXSwgYWZ0ZXJwaHhDaGlsZEFkZGVkOiBbXSxcbiAgICAgIGFmdGVydHJhbnNpdGlvbnNEaXNjYXJkZWQ6IFtdXG4gICAgfVxuICB9XG5cbiAgYmVmb3JlKGtpbmQsIGNhbGxiYWNrKXsgdGhpcy5jYWxsYmFja3NbYGJlZm9yZSR7a2luZH1gXS5wdXNoKGNhbGxiYWNrKSB9XG4gIGFmdGVyKGtpbmQsIGNhbGxiYWNrKXsgdGhpcy5jYWxsYmFja3NbYGFmdGVyJHtraW5kfWBdLnB1c2goY2FsbGJhY2spIH1cblxuICB0cmFja0JlZm9yZShraW5kLCAuLi5hcmdzKXtcbiAgICB0aGlzLmNhbGxiYWNrc1tgYmVmb3JlJHtraW5kfWBdLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soLi4uYXJncykpXG4gIH1cblxuICB0cmFja0FmdGVyKGtpbmQsIC4uLmFyZ3Mpe1xuICAgIHRoaXMuY2FsbGJhY2tzW2BhZnRlciR7a2luZH1gXS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLmFyZ3MpKVxuICB9XG5cbiAgbWFya1BydW5hYmxlQ29udGVudEZvclJlbW92YWwoKXtcbiAgICBsZXQgcGh4VXBkYXRlID0gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX1VQREFURSlcbiAgICBET00uYWxsKHRoaXMuY29udGFpbmVyLCBgWyR7cGh4VXBkYXRlfT1hcHBlbmRdID4gKiwgWyR7cGh4VXBkYXRlfT1wcmVwZW5kXSA+ICpgLCBlbCA9PiB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1BSVU5FLCBcIlwiKVxuICAgIH0pXG4gIH1cblxuICBwZXJmb3JtKGlzSm9pblBhdGNoKXtcbiAgICBsZXQge3ZpZXcsIGxpdmVTb2NrZXQsIGNvbnRhaW5lciwgaHRtbH0gPSB0aGlzXG4gICAgbGV0IHRhcmdldENvbnRhaW5lciA9IHRoaXMuaXNDSURQYXRjaCgpID8gdGhpcy50YXJnZXRDSURDb250YWluZXIoaHRtbCkgOiBjb250YWluZXJcbiAgICBpZih0aGlzLmlzQ0lEUGF0Y2goKSAmJiAhdGFyZ2V0Q29udGFpbmVyKXsgcmV0dXJuIH1cblxuICAgIGxldCBmb2N1c2VkID0gbGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KClcbiAgICBsZXQge3NlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmR9ID0gZm9jdXNlZCAmJiBET00uaGFzU2VsZWN0aW9uUmFuZ2UoZm9jdXNlZCkgPyBmb2N1c2VkIDoge31cbiAgICBsZXQgcGh4VXBkYXRlID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgbGV0IHBoeEZlZWRiYWNrRm9yID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpXG4gICAgbGV0IHBoeEZlZWRiYWNrR3JvdXAgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0dST1VQKVxuICAgIGxldCBkaXNhYmxlV2l0aCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgIGxldCBwaHhWaWV3cG9ydEJvdHRvbSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfQk9UVE9NKVxuICAgIGxldCBwaHhUcmlnZ2VyRXh0ZXJuYWwgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX1RSSUdHRVJfQUNUSU9OKVxuICAgIGxldCBhZGRlZCA9IFtdXG4gICAgbGV0IGZlZWRiYWNrQ29udGFpbmVycyA9IFtdXG4gICAgbGV0IHVwZGF0ZXMgPSBbXVxuICAgIGxldCBhcHBlbmRQcmVwZW5kVXBkYXRlcyA9IFtdXG5cbiAgICBsZXQgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gbnVsbFxuXG4gICAgZnVuY3Rpb24gbW9ycGgodGFyZ2V0Q29udGFpbmVyLCBzb3VyY2Upe1xuICAgICAgbW9ycGhkb20odGFyZ2V0Q29udGFpbmVyLCBzb3VyY2UsIHtcbiAgICAgICAgY2hpbGRyZW5Pbmx5OiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSBudWxsLFxuICAgICAgICBnZXROb2RlS2V5OiAobm9kZSkgPT4ge1xuICAgICAgICAgIGlmKERPTS5pc1BoeERlc3Ryb3llZChub2RlKSl7IHJldHVybiBudWxsIH1cbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgam9pbiBwYXRjaCwgdGhlbiBieSBkZWZpbml0aW9uIHRoZXJlIHdhcyBubyBQSFhfTUFHSUNfSUQuXG4gICAgICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgdG8gcmVkdWNlIHRoZSBhbW91bnQgb2YgZWxlbWVudHMgbW9ycGhkb20gZGlzY2FyZHMuXG4gICAgICAgICAgaWYoaXNKb2luUGF0Y2gpeyByZXR1cm4gbm9kZS5pZCB9XG4gICAgICAgICAgcmV0dXJuIG5vZGUuaWQgfHwgKG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9NQUdJQ19JRCkpXG4gICAgICAgIH0sXG4gICAgICAgIC8vIHNraXAgaW5kZXhpbmcgZnJvbSBjaGlsZHJlbiB3aGVuIGNvbnRhaW5lciBpcyBzdHJlYW1cbiAgICAgICAgc2tpcEZyb21DaGlsZHJlbjogKGZyb20pID0+IHsgcmV0dXJuIGZyb20uZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkgPT09IFBIWF9TVFJFQU0gfSxcbiAgICAgICAgLy8gdGVsbCBtb3JwaGRvbSBob3cgdG8gYWRkIGEgY2hpbGRcbiAgICAgICAgYWRkQ2hpbGQ6IChwYXJlbnQsIGNoaWxkKSA9PiB7XG4gICAgICAgICAgbGV0IHtyZWYsIHN0cmVhbUF0fSA9IHRoaXMuZ2V0U3RyZWFtSW5zZXJ0KGNoaWxkKVxuICAgICAgICAgIGlmKHJlZiA9PT0gdW5kZWZpbmVkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCkgfVxuXG4gICAgICAgICAgdGhpcy5zZXRTdHJlYW1SZWYoY2hpbGQsIHJlZilcblxuICAgICAgICAgIC8vIHN0cmVhbWluZ1xuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA9PT0gLTEpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilbc3RyZWFtQXRdXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVOb2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyhlbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKVxuICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBlbClcblxuICAgICAgICAgIGxldCBtb3JwaGVkRWwgPSBlbFxuICAgICAgICAgIC8vIHRoaXMgaXMgYSBzdHJlYW0gaXRlbSB0aGF0IHdhcyBrZXB0IG9uIHJlc2V0LCByZWN1cnNpdmVseSBtb3JwaCBpdFxuICAgICAgICAgIGlmKCFpc0pvaW5QYXRjaCAmJiB0aGlzLnN0cmVhbUNvbXBvbmVudFJlc3RvcmVbZWwuaWRdKXtcbiAgICAgICAgICAgIG1vcnBoZWRFbCA9IHRoaXMuc3RyZWFtQ29tcG9uZW50UmVzdG9yZVtlbC5pZF1cbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN0cmVhbUNvbXBvbmVudFJlc3RvcmVbZWwuaWRdXG4gICAgICAgICAgICBtb3JwaC5iaW5kKHRoaXMpKG1vcnBoZWRFbCwgZWwpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG1vcnBoZWRFbFxuICAgICAgICB9LFxuICAgICAgICBvbk5vZGVBZGRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKXsgdGhpcy5tYXliZVJlT3JkZXJTdHJlYW0oZWwsIHRydWUpIH1cbiAgICAgICAgICBpZihET00uaXNGZWVkYmFja0NvbnRhaW5lcihlbCwgcGh4RmVlZGJhY2tGb3IpKSBmZWVkYmFja0NvbnRhaW5lcnMucHVzaChlbClcblxuICAgICAgICAgIC8vIGhhY2sgdG8gZml4IFNhZmFyaSBoYW5kbGluZyBvZiBpbWcgc3Jjc2V0IGFuZCB2aWRlbyB0YWdzXG4gICAgICAgICAgaWYoZWwgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ICYmIGVsLnNyY3NldCl7XG4gICAgICAgICAgICBlbC5zcmNzZXQgPSBlbC5zcmNzZXRcbiAgICAgICAgICB9IGVsc2UgaWYoZWwgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50ICYmIGVsLmF1dG9wbGF5KXtcbiAgICAgICAgICAgIGVsLnBsYXkoKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihET00uaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpKXtcbiAgICAgICAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IGVsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZigoRE9NLmlzUGh4Q2hpbGQoZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwpKSB8fCBET00uaXNQaHhTdGlja3koZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwucGFyZW50Tm9kZSkpe1xuICAgICAgICAgICAgdGhpcy50cmFja0FmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkZWQucHVzaChlbClcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlRGlzY2FyZGVkOiAoZWwpID0+IHRoaXMub25Ob2RlRGlzY2FyZGVkKGVsKSxcbiAgICAgICAgb25CZWZvcmVOb2RlRGlzY2FyZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9QUlVORSkgIT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgICAgaWYoZWwucGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiBlbC5pZCAmJlxuICAgICAgICAgICAgRE9NLmlzUGh4VXBkYXRlKGVsLnBhcmVudEVsZW1lbnQsIHBoeFVwZGF0ZSwgW1BIWF9TVFJFQU0sIFwiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHRoaXMubWF5YmVQZW5kaW5nUmVtb3ZlKGVsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyhlbCkpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb25FbFVwZGF0ZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlcy5wdXNoKGVsKVxuICAgICAgICAgIHRoaXMubWF5YmVSZU9yZGVyU3RyZWFtKGVsLCBmYWxzZSlcbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVFbFVwZGF0ZWQ6IChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3ModG9FbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKVxuICAgICAgICAgIC8vIG1hcmsgYm90aCBmcm9tIGFuZCB0byBlbHMgYXMgZmVlZGJhY2sgY29udGFpbmVycywgYXMgd2UgZG9uJ3Qga25vdyB5ZXQgd2hpY2ggb25lIHdpbGwgYmUgdXNlZFxuICAgICAgICAgIC8vIGFuZCB3ZSBhbHNvIG5lZWQgdG8gcmVtb3ZlIHRoZSBwaHgtbm8tZmVlZGJhY2sgY2xhc3Mgd2hlbiB0aGUgcGh4LWZlZWRiYWNrLWZvciBhdHRyaWJ1dGUgaXMgcmVtb3ZlZFxuICAgICAgICAgIGlmKERPTS5pc0ZlZWRiYWNrQ29udGFpbmVyKGZyb21FbCwgcGh4RmVlZGJhY2tGb3IpIHx8IERPTS5pc0ZlZWRiYWNrQ29udGFpbmVyKHRvRWwsIHBoeEZlZWRiYWNrRm9yKSl7XG4gICAgICAgICAgICBmZWVkYmFja0NvbnRhaW5lcnMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICBmZWVkYmFja0NvbnRhaW5lcnMucHVzaCh0b0VsKVxuICAgICAgICAgIH1cbiAgICAgICAgICBET00uY2xlYW5DaGlsZE5vZGVzKHRvRWwsIHBoeFVwZGF0ZSlcbiAgICAgICAgICBpZih0aGlzLnNraXBDSURTaWJsaW5nKHRvRWwpKXtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBsaXZlIGNvbXBvbmVudCB1c2VkIGluIGEgc3RyZWFtLCB3ZSBtYXkgbmVlZCB0byByZW9yZGVyIGl0XG4gICAgICAgICAgICB0aGlzLm1heWJlUmVPcmRlclN0cmVhbShmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGZyb21FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpIHx8IChmcm9tRWwuZm9ybSAmJiBmcm9tRWwuZm9ybS5pc1NhbWVOb2RlKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZnJvbUVsLnR5cGUgPT09IFwibnVtYmVyXCIgJiYgKGZyb21FbC52YWxpZGl0eSAmJiBmcm9tRWwudmFsaWRpdHkuYmFkSW5wdXQpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZighRE9NLnN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpKXtcbiAgICAgICAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpe1xuICAgICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoRE9NLmlzUGh4Q2hpbGQodG9FbCkpe1xuICAgICAgICAgICAgbGV0IHByZXZTZXNzaW9uID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTilcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2V4Y2x1ZGU6IFtQSFhfU1RBVElDXX0pXG4gICAgICAgICAgICBpZihwcmV2U2Vzc2lvbiAhPT0gXCJcIil7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHByZXZTZXNzaW9uKSB9XG4gICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3RJRClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uY29weVByaXZhdGVzKHRvRWwsIGZyb21FbClcblxuICAgICAgICAgIGxldCBpc0ZvY3VzZWRGb3JtRWwgPSBmb2N1c2VkICYmIGZyb21FbC5pc1NhbWVOb2RlKGZvY3VzZWQpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpXG4gICAgICAgICAgLy8gc2tpcCBwYXRjaGluZyBmb2N1c2VkIGlucHV0cyB1bmxlc3MgZm9jdXMgaXMgYSBzZWxlY3QgdGhhdCBoYXMgY2hhbmdlZCBvcHRpb25zXG4gICAgICAgICAgbGV0IGZvY3VzZWRTZWxlY3RDaGFuZ2VkID0gaXNGb2N1c2VkRm9ybUVsICYmIHRoaXMuaXNDaGFuZ2VkU2VsZWN0KGZyb21FbCwgdG9FbClcbiAgICAgICAgICBpZihpc0ZvY3VzZWRGb3JtRWwgJiYgZnJvbUVsLnR5cGUgIT09IFwiaGlkZGVuXCIgJiYgIWZvY3VzZWRTZWxlY3RDaGFuZ2VkKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00uc3luY0F0dHJzVG9Qcm9wcyhmcm9tRWwpXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYmx1ciBmb2N1c2VkIHNlbGVjdCBpZiBpdCBjaGFuZ2VkIHNvIG5hdGl2ZSBVSSBpcyB1cGRhdGVkIChpZSBzYWZhcmkgd29uJ3QgdXBkYXRlIHZpc2libGUgb3B0aW9ucylcbiAgICAgICAgICAgIGlmKGZvY3VzZWRTZWxlY3RDaGFuZ2VkKXsgZnJvbUVsLmJsdXIoKSB9XG4gICAgICAgICAgICBpZihET00uaXNQaHhVcGRhdGUodG9FbCwgcGh4VXBkYXRlLCBbXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICAgICAgICAgIGFwcGVuZFByZXBlbmRVcGRhdGVzLnB1c2gobmV3IERPTVBvc3RNb3JwaFJlc3RvcmVyKGZyb21FbCwgdG9FbCwgdG9FbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIERPTS5zeW5jQXR0cnNUb1Byb3BzKHRvRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKHRvRWwpXG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLnRyYWNrQmVmb3JlKFwiYWRkZWRcIiwgY29udGFpbmVyKVxuICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGNvbnRhaW5lciwgY29udGFpbmVyKVxuXG4gICAgbGl2ZVNvY2tldC50aW1lKFwibW9ycGhkb21cIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdHJlYW1zLmZvckVhY2goKFtyZWYsIGluc2VydHMsIGRlbGV0ZUlkcywgcmVzZXRdKSA9PiB7XG4gICAgICAgIGluc2VydHMuZm9yRWFjaCgoW2tleSwgc3RyZWFtQXQsIGxpbWl0XSkgPT4ge1xuICAgICAgICAgIHRoaXMuc3RyZWFtSW5zZXJ0c1trZXldID0ge3JlZiwgc3RyZWFtQXQsIGxpbWl0LCByZXNldH1cbiAgICAgICAgfSlcbiAgICAgICAgaWYocmVzZXQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgRE9NLmFsbChjb250YWluZXIsIGBbJHtQSFhfU1RSRUFNX1JFRn09XCIke3JlZn1cIl1gLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZUlkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtpZH1cIl1gKVxuICAgICAgICAgIGlmKGNoaWxkKXsgdGhpcy5yZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIGNsZWFyIHN0cmVhbSBpdGVtcyBmcm9tIHRoZSBkZWFkIHJlbmRlciBpZiB0aGV5IGFyZSBub3QgaW5zZXJ0ZWQgYWdhaW5cbiAgICAgIGlmKGlzSm9pblBhdGNoKXtcbiAgICAgICAgRE9NLmFsbCh0aGlzLmNvbnRhaW5lciwgYFske3BoeFVwZGF0ZX09JHtQSFhfU1RSRUFNfV1gLCBlbCA9PiB7XG4gICAgICAgICAgLy8gbWFrZSBzdXJlIHRvIG9ubHkgcmVtb3ZlIGVsZW1lbnRzIG93bmVkIGJ5IHRoZSBjdXJyZW50IHZpZXdcbiAgICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Bob2VuaXhmcmFtZXdvcmsvcGhvZW5peF9saXZlX3ZpZXcvaXNzdWVzLzMwNDdcbiAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQub3duZXIoZWwsICh2aWV3KSA9PiB7XG4gICAgICAgICAgICBpZih2aWV3ID09PSB0aGlzLnZpZXcpe1xuICAgICAgICAgICAgICBBcnJheS5mcm9tKGVsLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBtb3JwaC5iaW5kKHRoaXMpKHRhcmdldENvbnRhaW5lciwgaHRtbClcbiAgICB9KVxuXG4gICAgaWYobGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXsgZGV0ZWN0RHVwbGljYXRlSWRzKCkgfVxuXG4gICAgaWYoYXBwZW5kUHJlcGVuZFVwZGF0ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRpbWUoXCJwb3N0LW1vcnBoIGFwcGVuZC9wcmVwZW5kIHJlc3RvcmF0aW9uXCIsICgpID0+IHtcbiAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMuZm9yRWFjaCh1cGRhdGUgPT4gdXBkYXRlLnBlcmZvcm0oKSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgRE9NLm1heWJlSGlkZUZlZWRiYWNrKHRhcmdldENvbnRhaW5lciwgZmVlZGJhY2tDb250YWluZXJzLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cClcblxuICAgIGxpdmVTb2NrZXQuc2lsZW5jZUV2ZW50cygoKSA9PiBET00ucmVzdG9yZUZvY3VzKGZvY3VzZWQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpKVxuICAgIERPTS5kaXNwYXRjaEV2ZW50KGRvY3VtZW50LCBcInBoeDp1cGRhdGVcIilcbiAgICBhZGRlZC5mb3JFYWNoKGVsID0+IHRoaXMudHJhY2tBZnRlcihcImFkZGVkXCIsIGVsKSlcbiAgICB1cGRhdGVzLmZvckVhY2goZWwgPT4gdGhpcy50cmFja0FmdGVyKFwidXBkYXRlZFwiLCBlbCkpXG5cbiAgICB0aGlzLnRyYW5zaXRpb25QZW5kaW5nUmVtb3ZlcygpXG5cbiAgICBpZihleHRlcm5hbEZvcm1UcmlnZ2VyZWQpe1xuICAgICAgbGl2ZVNvY2tldC51bmxvYWQoKVxuICAgICAgLy8gdXNlIHByb3RvdHlwZSdzIHN1Ym1pdCBpbiBjYXNlIHRoZXJlJ3MgYSBmb3JtIGNvbnRyb2wgd2l0aCBuYW1lIG9yIGlkIG9mIFwic3VibWl0XCJcbiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MRm9ybUVsZW1lbnQvc3VibWl0XG4gICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKS5zdWJtaXQuY2FsbChleHRlcm5hbEZvcm1UcmlnZ2VyZWQpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBvbk5vZGVEaXNjYXJkZWQoZWwpe1xuICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgaWYoRE9NLmlzUGh4Q2hpbGQoZWwpIHx8IERPTS5pc1BoeFN0aWNreShlbCkpeyB0aGlzLmxpdmVTb2NrZXQuZGVzdHJveVZpZXdCeUVsKGVsKSB9XG4gICAgdGhpcy50cmFja0FmdGVyKFwiZGlzY2FyZGVkXCIsIGVsKVxuICB9XG5cbiAgbWF5YmVQZW5kaW5nUmVtb3ZlKG5vZGUpe1xuICAgIGlmKG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKHRoaXMucGh4UmVtb3ZlKSAhPT0gbnVsbCl7XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmVzLnB1c2gobm9kZSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCl7XG4gICAgLy8gd2UgbmVlZCB0byBzdG9yZSB0aGUgbm9kZSBpZiBpdCBpcyBhY3R1YWxseSByZS1hZGRlZCBpbiB0aGUgc2FtZSBwYXRjaFxuICAgIC8vIHdlIGRvIE5PVCB3YW50IHRvIGV4ZWN1dGUgcGh4LXJlbW92ZSwgd2UgZG8gTk9UIHdhbnQgdG8gY2FsbCBvbk5vZGVEaXNjYXJkZWRcbiAgICBpZih0aGlzLnN0cmVhbUluc2VydHNbY2hpbGQuaWRdKXtcbiAgICAgIHRoaXMuc3RyZWFtQ29tcG9uZW50UmVzdG9yZVtjaGlsZC5pZF0gPSBjaGlsZFxuICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb25seSByZW1vdmUgdGhlIGVsZW1lbnQgbm93IGlmIGl0IGhhcyBubyBwaHgtcmVtb3ZlIGJpbmRpbmdcbiAgICAgIGlmKCF0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShjaGlsZCkpe1xuICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICB0aGlzLm9uTm9kZURpc2NhcmRlZChjaGlsZClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRTdHJlYW1JbnNlcnQoZWwpe1xuICAgIGxldCBpbnNlcnQgPSBlbC5pZCA/IHRoaXMuc3RyZWFtSW5zZXJ0c1tlbC5pZF0gOiB7fVxuICAgIHJldHVybiBpbnNlcnQgfHwge31cbiAgfVxuXG4gIHNldFN0cmVhbVJlZihlbCwgcmVmKXtcbiAgICBET00ucHV0U3RpY2t5KGVsLCBQSFhfU1RSRUFNX1JFRiwgZWwgPT4gZWwuc2V0QXR0cmlidXRlKFBIWF9TVFJFQU1fUkVGLCByZWYpKVxuICB9XG5cbiAgbWF5YmVSZU9yZGVyU3RyZWFtKGVsLCBpc05ldyl7XG4gICAgbGV0IHtyZWYsIHN0cmVhbUF0LCByZXNldH0gPSB0aGlzLmdldFN0cmVhbUluc2VydChlbClcbiAgICBpZihzdHJlYW1BdCA9PT0gdW5kZWZpbmVkKXsgcmV0dXJuIH1cblxuICAgIC8vIHdlIG5lZWQgdG8gc2V0IHRoZSBQSFhfU1RSRUFNX1JFRiBoZXJlIGFzIHdlbGwgYXMgYWRkQ2hpbGQgaXMgaW52b2tlZCBvbmx5IGZvciBwYXJlbnRzXG4gICAgdGhpcy5zZXRTdHJlYW1SZWYoZWwsIHJlZilcblxuICAgIGlmKCFyZXNldCAmJiAhaXNOZXcpe1xuICAgICAgLy8gd2Ugb25seSByZW9yZGVyIGlmIHRoZSBlbGVtZW50IGlzIG5ldyBvciBpdCdzIGEgc3RyZWFtIHJlc2V0XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjaGVjayBpZiB0aGUgZWxlbWVudCBoYXMgYSBwYXJlbnQgZWxlbWVudDtcbiAgICAvLyBpdCBkb2Vzbid0IGlmIHdlIGFyZSBjdXJyZW50bHkgcmVjdXJzaXZlbHkgbW9ycGhpbmcgKHJlc3RvcmluZyBhIHNhdmVkIHN0cmVhbSBjaGlsZClcbiAgICAvLyBiZWNhdXNlIHRoZSBlbGVtZW50IGlzIG5vdCB5ZXQgYWRkZWQgdG8gdGhlIHJlYWwgZG9tO1xuICAgIC8vIHJlb3JkZXJpbmcgZG9lcyBub3QgbWFrZSBzZW5zZSBpbiB0aGF0IGNhc2UgYW55d2F5XG4gICAgaWYoIWVsLnBhcmVudEVsZW1lbnQpeyByZXR1cm4gfVxuXG4gICAgaWYoc3RyZWFtQXQgPT09IDApe1xuICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIGVsLnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpXG4gICAgfSBlbHNlIGlmKHN0cmVhbUF0ID4gMCl7XG4gICAgICBsZXQgY2hpbGRyZW4gPSBBcnJheS5mcm9tKGVsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pXG4gICAgICBsZXQgb2xkSW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKGVsKVxuICAgICAgaWYoc3RyZWFtQXQgPj0gY2hpbGRyZW4ubGVuZ3RoIC0gMSl7XG4gICAgICAgIGVsLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgc2libGluZyA9IGNoaWxkcmVuW3N0cmVhbUF0XVxuICAgICAgICBpZihvbGRJbmRleCA+IHN0cmVhbUF0KXtcbiAgICAgICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgc2libGluZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgc2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1heWJlTGltaXRTdHJlYW0oZWwpXG4gIH1cblxuICBtYXliZUxpbWl0U3RyZWFtKGVsKXtcbiAgICBsZXQge2xpbWl0fSA9IHRoaXMuZ2V0U3RyZWFtSW5zZXJ0KGVsKVxuICAgIGxldCBjaGlsZHJlbiA9IGxpbWl0ICE9PSBudWxsICYmIEFycmF5LmZyb20oZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbilcbiAgICBpZihsaW1pdCAmJiBsaW1pdCA8IDAgJiYgY2hpbGRyZW4ubGVuZ3RoID4gbGltaXQgKiAtMSl7XG4gICAgICBjaGlsZHJlbi5zbGljZSgwLCBjaGlsZHJlbi5sZW5ndGggKyBsaW1pdCkuZm9yRWFjaChjaGlsZCA9PiB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCkpXG4gICAgfSBlbHNlIGlmKGxpbWl0ICYmIGxpbWl0ID49IDAgJiYgY2hpbGRyZW4ubGVuZ3RoID4gbGltaXQpe1xuICAgICAgY2hpbGRyZW4uc2xpY2UobGltaXQpLmZvckVhY2goY2hpbGQgPT4gdGhpcy5yZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpKVxuICAgIH1cbiAgfVxuXG4gIHRyYW5zaXRpb25QZW5kaW5nUmVtb3Zlcygpe1xuICAgIGxldCB7cGVuZGluZ1JlbW92ZXMsIGxpdmVTb2NrZXR9ID0gdGhpc1xuICAgIGlmKHBlbmRpbmdSZW1vdmVzLmxlbmd0aCA+IDApe1xuICAgICAgbGl2ZVNvY2tldC50cmFuc2l0aW9uUmVtb3ZlcyhwZW5kaW5nUmVtb3ZlcylcbiAgICAgIGxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmVzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IERPTS5maXJzdFBoeENoaWxkKGVsKVxuICAgICAgICAgIGlmKGNoaWxkKXsgbGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoY2hpbGQpIH1cbiAgICAgICAgICBlbC5yZW1vdmUoKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBwZW5kaW5nUmVtb3ZlcylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaXNDaGFuZ2VkU2VsZWN0KGZyb21FbCwgdG9FbCl7XG4gICAgaWYoIShmcm9tRWwgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkgfHwgZnJvbUVsLm11bHRpcGxlKXsgcmV0dXJuIGZhbHNlIH1cbiAgICBpZihmcm9tRWwub3B0aW9ucy5sZW5ndGggIT09IHRvRWwub3B0aW9ucy5sZW5ndGgpeyByZXR1cm4gdHJ1ZSB9XG5cbiAgICBsZXQgZnJvbVNlbGVjdGVkID0gZnJvbUVsLnNlbGVjdGVkT3B0aW9uc1swXVxuICAgIGxldCB0b1NlbGVjdGVkID0gdG9FbC5zZWxlY3RlZE9wdGlvbnNbMF1cbiAgICBpZihmcm9tU2VsZWN0ZWQgJiYgZnJvbVNlbGVjdGVkLmhhc0F0dHJpYnV0ZShcInNlbGVjdGVkXCIpKXtcbiAgICAgIHRvU2VsZWN0ZWQuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIiwgZnJvbVNlbGVjdGVkLmdldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIpKVxuICAgIH1cblxuICAgIC8vIGluIGdlbmVyYWwgd2UgaGF2ZSB0byBiZSB2ZXJ5IGNhcmVmdWwgd2l0aCB1c2luZyBpc0VxdWFsTm9kZSBhcyBpdCBkb2VzIG5vdCBhIHJlbGlhYmxlXG4gICAgLy8gRE9NIHRyZWUgZXF1YWxpdHkgY2hlY2ssIGJ1dCBmb3Igc2VsZWN0aW9uIGF0dHJpYnV0ZXMgYW5kIG9wdGlvbnMgaXQgd29ya3MgZmluZVxuICAgIHJldHVybiAhZnJvbUVsLmlzRXF1YWxOb2RlKHRvRWwpXG4gIH1cblxuICBpc0NJRFBhdGNoKCl7IHJldHVybiB0aGlzLmNpZFBhdGNoIH1cblxuICBza2lwQ0lEU2libGluZyhlbCl7XG4gICAgcmV0dXJuIGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiBlbC5oYXNBdHRyaWJ1dGUoUEhYX1NLSVApXG4gIH1cblxuICB0YXJnZXRDSURDb250YWluZXIoaHRtbCl7XG4gICAgaWYoIXRoaXMuaXNDSURQYXRjaCgpKXsgcmV0dXJuIH1cbiAgICBsZXQgW2ZpcnN0LCAuLi5yZXN0XSA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5jb250YWluZXIsIHRoaXMudGFyZ2V0Q0lEKVxuICAgIGlmKHJlc3QubGVuZ3RoID09PSAwICYmIERPTS5jaGlsZE5vZGVMZW5ndGgoaHRtbCkgPT09IDEpe1xuICAgICAgcmV0dXJuIGZpcnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaXJzdCAmJiBmaXJzdC5wYXJlbnROb2RlXG4gICAgfVxuICB9XG5cbiAgaW5kZXhPZihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKS5pbmRleE9mKGNoaWxkKSB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQ09NUE9ORU5UUyxcbiAgRFlOQU1JQ1MsXG4gIFRFTVBMQVRFUyxcbiAgRVZFTlRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfU0tJUCxcbiAgUEhYX01BR0lDX0lELFxuICBSRVBMWSxcbiAgU1RBVElDLFxuICBUSVRMRSxcbiAgU1RSRUFNLFxuICBST09ULFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBpc09iamVjdCxcbiAgbG9nRXJyb3IsXG4gIGlzQ2lkLFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmNvbnN0IFZPSURfVEFHUyA9IG5ldyBTZXQoW1xuICBcImFyZWFcIixcbiAgXCJiYXNlXCIsXG4gIFwiYnJcIixcbiAgXCJjb2xcIixcbiAgXCJjb21tYW5kXCIsXG4gIFwiZW1iZWRcIixcbiAgXCJoclwiLFxuICBcImltZ1wiLFxuICBcImlucHV0XCIsXG4gIFwia2V5Z2VuXCIsXG4gIFwibGlua1wiLFxuICBcIm1ldGFcIixcbiAgXCJwYXJhbVwiLFxuICBcInNvdXJjZVwiLFxuICBcInRyYWNrXCIsXG4gIFwid2JyXCJcbl0pXG5jb25zdCBxdW90ZUNoYXJzID0gbmV3IFNldChbXCInXCIsICdcIiddKVxuXG5leHBvcnQgbGV0IG1vZGlmeVJvb3QgPSAoaHRtbCwgYXR0cnMsIGNsZWFySW5uZXJIVE1MKSA9PiB7XG4gIGxldCBpID0gMFxuICBsZXQgaW5zaWRlQ29tbWVudCA9IGZhbHNlXG4gIGxldCBiZWZvcmVUYWcsIGFmdGVyVGFnLCB0YWcsIHRhZ05hbWVFbmRzQXQsIGlkLCBuZXdIVE1MXG5cbiAgbGV0IGxvb2thaGVhZCA9IGh0bWwubWF0Y2goL14oXFxzKig/OjwhLS0uKj8tLT5cXHMqKSopPChbXlxcc1xcLz5dKykvKVxuICBpZihsb29rYWhlYWQgPT09IG51bGwpIHsgdGhyb3cgbmV3IEVycm9yKGBtYWxmb3JtZWQgaHRtbCAke2h0bWx9YCkgfVxuXG4gIGkgPSBsb29rYWhlYWRbMF0ubGVuZ3RoXG4gIGJlZm9yZVRhZyA9IGxvb2thaGVhZFsxXVxuICB0YWcgPSBsb29rYWhlYWRbMl1cbiAgdGFnTmFtZUVuZHNBdCA9IGlcblxuICAvLyBTY2FuIHRoZSBvcGVuaW5nIHRhZyBmb3IgaWQsIGlmIHRoZXJlIGlzIGFueVxuICBmb3IoaTsgaSA8IGh0bWwubGVuZ3RoOyBpKyspe1xuICAgIGlmKGh0bWwuY2hhckF0KGkpID09PSBcIj5cIiApeyBicmVhayB9XG4gICAgaWYoaHRtbC5jaGFyQXQoaSkgPT09IFwiPVwiKXtcbiAgICAgIGxldCBpc0lkID0gaHRtbC5zbGljZShpIC0gMywgaSkgPT09IFwiIGlkXCJcbiAgICAgIGkrKztcbiAgICAgIGxldCBjaGFyID0gaHRtbC5jaGFyQXQoaSlcbiAgICAgIGlmIChxdW90ZUNoYXJzLmhhcyhjaGFyKSkge1xuICAgICAgICBsZXQgYXR0clN0YXJ0c0F0ID0gaVxuICAgICAgICBpKytcbiAgICAgICAgZm9yKGk7IGkgPCBodG1sLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICBpZihodG1sLmNoYXJBdChpKSA9PT0gY2hhcil7IGJyZWFrIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJZCkge1xuICAgICAgICAgIGlkID0gaHRtbC5zbGljZShhdHRyU3RhcnRzQXQgKyAxLCBpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsZXQgY2xvc2VBdCA9IGh0bWwubGVuZ3RoIC0gMVxuICBpbnNpZGVDb21tZW50ID0gZmFsc2VcbiAgd2hpbGUoY2xvc2VBdCA+PSBiZWZvcmVUYWcubGVuZ3RoICsgdGFnLmxlbmd0aCl7XG4gICAgbGV0IGNoYXIgPSBodG1sLmNoYXJBdChjbG9zZUF0KVxuICAgIGlmKGluc2lkZUNvbW1lbnQpe1xuICAgICAgaWYoY2hhciA9PT0gXCItXCIgJiYgaHRtbC5zbGljZShjbG9zZUF0IC0gMywgY2xvc2VBdCkgPT09IFwiPCEtXCIpe1xuICAgICAgICBpbnNpZGVDb21tZW50ID0gZmFsc2VcbiAgICAgICAgY2xvc2VBdCAtPSA0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9zZUF0IC09IDFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoY2hhciA9PT0gXCI+XCIgJiYgaHRtbC5zbGljZShjbG9zZUF0IC0gMiwgY2xvc2VBdCkgPT09IFwiLS1cIil7XG4gICAgICBpbnNpZGVDb21tZW50ID0gdHJ1ZVxuICAgICAgY2xvc2VBdCAtPSAzXG4gICAgfSBlbHNlIGlmKGNoYXIgPT09IFwiPlwiKXtcbiAgICAgIGJyZWFrXG4gICAgfSBlbHNlIHtcbiAgICAgIGNsb3NlQXQgLT0gMVxuICAgIH1cbiAgfVxuICBhZnRlclRhZyA9IGh0bWwuc2xpY2UoY2xvc2VBdCArIDEsIGh0bWwubGVuZ3RoKVxuXG4gIGxldCBhdHRyc1N0ciA9XG4gICAgT2JqZWN0LmtleXMoYXR0cnMpXG4gICAgLm1hcChhdHRyID0+IGF0dHJzW2F0dHJdID09PSB0cnVlID8gYXR0ciA6IGAke2F0dHJ9PVwiJHthdHRyc1thdHRyXX1cImApXG4gICAgLmpvaW4oXCIgXCIpXG5cbiAgaWYoY2xlYXJJbm5lckhUTUwpe1xuICAgIC8vIEtlZXAgdGhlIGlkIGlmIGFueVxuICAgIGxldCBpZEF0dHJTdHIgPSBpZCA/IGAgaWQ9XCIke2lkfVwiYCA6IFwiXCI7XG4gICAgaWYoVk9JRF9UQUdTLmhhcyh0YWcpKXtcbiAgICAgIG5ld0hUTUwgPSBgPCR7dGFnfSR7aWRBdHRyU3RyfSR7YXR0cnNTdHIgPT09IFwiXCIgPyBcIlwiIDogXCIgXCJ9JHthdHRyc1N0cn0vPmBcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3SFRNTCA9IGA8JHt0YWd9JHtpZEF0dHJTdHJ9JHthdHRyc1N0ciA9PT0gXCJcIiA/IFwiXCIgOiBcIiBcIn0ke2F0dHJzU3RyfT48LyR7dGFnfT5gXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCByZXN0ID0gaHRtbC5zbGljZSh0YWdOYW1lRW5kc0F0LCBjbG9zZUF0ICsgMSlcbiAgICBuZXdIVE1MID0gYDwke3RhZ30ke2F0dHJzU3RyID09PSBcIlwiID8gXCJcIiA6IFwiIFwifSR7YXR0cnNTdHJ9JHtyZXN0fWBcbiAgfVxuXG4gIHJldHVybiBbbmV3SFRNTCwgYmVmb3JlVGFnLCBhZnRlclRhZ11cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZWQge1xuICBzdGF0aWMgZXh0cmFjdChkaWZmKXtcbiAgICBsZXQge1tSRVBMWV06IHJlcGx5LCBbRVZFTlRTXTogZXZlbnRzLCBbVElUTEVdOiB0aXRsZX0gPSBkaWZmXG4gICAgZGVsZXRlIGRpZmZbUkVQTFldXG4gICAgZGVsZXRlIGRpZmZbRVZFTlRTXVxuICAgIGRlbGV0ZSBkaWZmW1RJVExFXVxuICAgIHJldHVybiB7ZGlmZiwgdGl0bGUsIHJlcGx5OiByZXBseSB8fCBudWxsLCBldmVudHM6IGV2ZW50cyB8fCBbXX1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXdJZCwgcmVuZGVyZWQpe1xuICAgIHRoaXMudmlld0lkID0gdmlld0lkXG4gICAgdGhpcy5yZW5kZXJlZCA9IHt9XG4gICAgdGhpcy5tYWdpY0lkID0gMFxuICAgIHRoaXMubWVyZ2VEaWZmKHJlbmRlcmVkKVxuICB9XG5cbiAgcGFyZW50Vmlld0lkKCl7IHJldHVybiB0aGlzLnZpZXdJZCB9XG5cbiAgdG9TdHJpbmcob25seUNpZHMpe1xuICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcodGhpcy5yZW5kZXJlZCwgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMsIHRydWUsIHt9KVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcmVjdXJzaXZlVG9TdHJpbmcocmVuZGVyZWQsIGNvbXBvbmVudHMgPSByZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMsIGNoYW5nZVRyYWNraW5nLCByb290QXR0cnMpe1xuICAgIG9ubHlDaWRzID0gb25seUNpZHMgPyBuZXcgU2V0KG9ubHlDaWRzKSA6IG51bGxcbiAgICBsZXQgb3V0cHV0ID0ge2J1ZmZlcjogXCJcIiwgY29tcG9uZW50czogY29tcG9uZW50cywgb25seUNpZHM6IG9ubHlDaWRzLCBzdHJlYW1zOiBuZXcgU2V0KCl9XG4gICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgbnVsbCwgb3V0cHV0LCBjaGFuZ2VUcmFja2luZywgcm9vdEF0dHJzKVxuICAgIHJldHVybiBbb3V0cHV0LmJ1ZmZlciwgb3V0cHV0LnN0cmVhbXNdXG4gIH1cblxuICBjb21wb25lbnRDSURzKGRpZmYpeyByZXR1cm4gT2JqZWN0LmtleXMoZGlmZltDT01QT05FTlRTXSB8fCB7fSkubWFwKGkgPT4gcGFyc2VJbnQoaSkpIH1cblxuICBpc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpe1xuICAgIGlmKCFkaWZmW0NPTVBPTkVOVFNdKXsgcmV0dXJuIGZhbHNlIH1cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZGlmZikubGVuZ3RoID09PSAxXG4gIH1cblxuICBnZXRDb21wb25lbnQoZGlmZiwgY2lkKXsgcmV0dXJuIGRpZmZbQ09NUE9ORU5UU11bY2lkXSB9XG5cbiAgcmVzZXRSZW5kZXIoY2lkKXtcbiAgICAvLyB3ZSBhcmUgcmFjaW5nIGEgY29tcG9uZW50IGRlc3Ryb3ksIGl0IGNvdWxkIG5vdCBleGlzdCwgc29cbiAgICAvLyBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCB0cnkgdG8gc2V0IHJlc2V0IG9uIHVuZGVmaW5lZFxuICAgIGlmKHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11bY2lkXSl7XG4gICAgICB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdW2NpZF0ucmVzZXQgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgbWVyZ2VEaWZmKGRpZmYpe1xuICAgIGxldCBuZXdjID0gZGlmZltDT01QT05FTlRTXVxuICAgIGxldCBjYWNoZSA9IHt9XG4gICAgZGVsZXRlIGRpZmZbQ09NUE9ORU5UU11cbiAgICB0aGlzLnJlbmRlcmVkID0gdGhpcy5tdXRhYmxlTWVyZ2UodGhpcy5yZW5kZXJlZCwgZGlmZilcbiAgICB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSB8fCB7fVxuXG4gICAgaWYobmV3Yyl7XG4gICAgICBsZXQgb2xkYyA9IHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7XG4gICAgICAgIG5ld2NbY2lkXSA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChjaWQsIG5ld2NbY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgY2lkIGluIG5ld2MpeyBvbGRjW2NpZF0gPSBuZXdjW2NpZF0gfVxuICAgICAgZGlmZltDT01QT05FTlRTXSA9IG5ld2NcbiAgICB9XG4gIH1cblxuICBjYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgY2RpZmYsIG9sZGMsIG5ld2MsIGNhY2hlKXtcbiAgICBpZihjYWNoZVtjaWRdKXtcbiAgICAgIHJldHVybiBjYWNoZVtjaWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZGlmZiwgc3RhdCwgc2NpZCA9IGNkaWZmW1NUQVRJQ11cblxuICAgICAgaWYoaXNDaWQoc2NpZCkpe1xuICAgICAgICBsZXQgdGRpZmZcblxuICAgICAgICBpZihzY2lkID4gMCl7XG4gICAgICAgICAgdGRpZmYgPSB0aGlzLmNhY2hlZEZpbmRDb21wb25lbnQoc2NpZCwgbmV3Y1tzY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGRpZmYgPSBvbGRjWy1zY2lkXVxuICAgICAgICB9XG5cbiAgICAgICAgc3RhdCA9IHRkaWZmW1NUQVRJQ11cbiAgICAgICAgbmRpZmYgPSB0aGlzLmNsb25lTWVyZ2UodGRpZmYsIGNkaWZmLCB0cnVlKVxuICAgICAgICBuZGlmZltTVEFUSUNdID0gc3RhdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmRpZmYgPSBjZGlmZltTVEFUSUNdICE9PSB1bmRlZmluZWQgfHwgb2xkY1tjaWRdID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgIGNkaWZmIDogdGhpcy5jbG9uZU1lcmdlKG9sZGNbY2lkXSwgY2RpZmYsIGZhbHNlKVxuICAgICAgfVxuXG4gICAgICBjYWNoZVtjaWRdID0gbmRpZmZcbiAgICAgIHJldHVybiBuZGlmZlxuICAgIH1cbiAgfVxuXG4gIG11dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1NUQVRJQ10gIT09IHVuZGVmaW5lZCl7XG4gICAgICByZXR1cm4gc291cmNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2UpXG4gICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfVxuICB9XG5cbiAgZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGZvcihsZXQga2V5IGluIHNvdXJjZSl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgbGV0IGlzT2JqVmFsID0gaXNPYmplY3QodmFsKVxuICAgICAgaWYoaXNPYmpWYWwgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXRWYWwsIHZhbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gdmFsXG4gICAgICB9XG4gICAgfVxuICAgIGlmKHRhcmdldFtST09UXSl7XG4gICAgICB0YXJnZXQubmV3UmVuZGVyID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8vIE1lcmdlcyBjaWQgdHJlZXMgdG9nZXRoZXIsIGNvcHlpbmcgc3RhdGljcyBmcm9tIHNvdXJjZSB0cmVlLlxuICAvL1xuICAvLyBUaGUgYHBydW5lTWFnaWNJZGAgaXMgcGFzc2VkIHRvIGNvbnRyb2wgcHJ1bmluZyB0aGUgbWFnaWNJZCBvZiB0aGVcbiAgLy8gdGFyZ2V0LiBXZSBtdXN0IGFsd2F5cyBwcnVuZSB0aGUgbWFnaWNJZCB3aGVuIHdlIGFyZSBzaGFyaW5nIHN0YXRpY3NcbiAgLy8gZnJvbSBhbm90aGVyIGNvbXBvbmVudC4gSWYgbm90IHBydW5pbmcsIHdlIHJlcGxpY2F0ZSB0aGUgbG9naWMgZnJvbVxuICAvLyBtdXRhYmxlTWVyZ2UsIHdoZXJlIHdlIHNldCBuZXdSZW5kZXIgdG8gdHJ1ZSBpZiB0aGVyZSBpcyBhIHJvb3RcbiAgLy8gKGVmZmVjdGl2ZWx5IGZvcmNpbmcgdGhlIG5ldyB2ZXJzaW9uIHRvIGJlIHJlbmRlcmVkIGluc3RlYWQgb2Ygc2tpcHBlZClcbiAgLy9cbiAgY2xvbmVNZXJnZSh0YXJnZXQsIHNvdXJjZSwgcHJ1bmVNYWdpY0lkKXtcbiAgICBsZXQgbWVyZ2VkID0gey4uLnRhcmdldCwgLi4uc291cmNlfVxuICAgIGZvcihsZXQga2V5IGluIG1lcmdlZCl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgaWYoaXNPYmplY3QodmFsKSAmJiB2YWxbU1RBVElDXSA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICBtZXJnZWRba2V5XSA9IHRoaXMuY2xvbmVNZXJnZSh0YXJnZXRWYWwsIHZhbCwgcHJ1bmVNYWdpY0lkKVxuICAgICAgfSBlbHNlIGlmKHZhbCA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICBtZXJnZWRba2V5XSA9IHRoaXMuY2xvbmVNZXJnZSh0YXJnZXRWYWwsIHt9LCBwcnVuZU1hZ2ljSWQpXG4gICAgICB9XG4gICAgfVxuICAgIGlmKHBydW5lTWFnaWNJZCl7XG4gICAgICBkZWxldGUgbWVyZ2VkLm1hZ2ljSWRcbiAgICAgIGRlbGV0ZSBtZXJnZWQubmV3UmVuZGVyXG4gICAgfSBlbHNlIGlmKHRhcmdldFtST09UXSl7XG4gICAgICBtZXJnZWQubmV3UmVuZGVyID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkXG4gIH1cblxuICBjb21wb25lbnRUb1N0cmluZyhjaWQpe1xuICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcodGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSwgY2lkLCBudWxsKVxuICAgIGxldCBbc3RyaXBwZWRIVE1MLCBfYmVmb3JlLCBfYWZ0ZXJdID0gbW9kaWZ5Um9vdChzdHIsIHt9KVxuICAgIHJldHVybiBbc3RyaXBwZWRIVE1MLCBzdHJlYW1zXVxuICB9XG5cbiAgcHJ1bmVDSURzKGNpZHMpe1xuICAgIGNpZHMuZm9yRWFjaChjaWQgPT4gZGVsZXRlIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11bY2lkXSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBnZXQoKXsgcmV0dXJuIHRoaXMucmVuZGVyZWQgfVxuXG4gIGlzTmV3RmluZ2VycHJpbnQoZGlmZiA9IHt9KXsgcmV0dXJuICEhZGlmZltTVEFUSUNdIH1cblxuICB0ZW1wbGF0ZVN0YXRpYyhwYXJ0LCB0ZW1wbGF0ZXMpe1xuICAgIGlmKHR5cGVvZiAocGFydCkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZXNbcGFydF1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnRcbiAgICB9XG4gIH1cblxuICBuZXh0TWFnaWNJRCgpe1xuICAgIHRoaXMubWFnaWNJZCsrXG4gICAgcmV0dXJuIGBtJHt0aGlzLm1hZ2ljSWR9LSR7dGhpcy5wYXJlbnRWaWV3SWQoKX1gXG4gIH1cblxuICAvLyBDb252ZXJ0cyByZW5kZXJlZCB0cmVlIHRvIG91dHB1dCBidWZmZXIuXG4gIC8vXG4gIC8vIGNoYW5nZVRyYWNraW5nIGNvbnRyb2xzIGlmIHdlIGNhbiBhcHBseSB0aGUgUEhYX1NLSVAgb3B0aW1pemF0aW9uLlxuICAvLyBJdCBpcyBkaXNhYmxlZCBmb3IgY29tcHJlaGVuc2lvbnMgc2luY2Ugd2UgbXVzdCByZS1yZW5kZXIgdGhlIGVudGlyZSBjb2xsZWN0aW9uXG4gIC8vIGFuZCBubyBpbmRpdmlkdWFsIGVsZW1lbnQgaXMgdHJhY2tlZCBpbnNpZGUgdGhlIGNvbXByZWhlbnNpb24uXG4gIHRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCwgY2hhbmdlVHJhY2tpbmcsIHJvb3RBdHRycyA9IHt9KXtcbiAgICBpZihyZW5kZXJlZFtEWU5BTUlDU10peyByZXR1cm4gdGhpcy5jb21wcmVoZW5zaW9uVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KSB9XG4gICAgbGV0IHtbU1RBVElDXTogc3RhdGljc30gPSByZW5kZXJlZFxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcbiAgICBsZXQgaXNSb290ID0gcmVuZGVyZWRbUk9PVF1cbiAgICBsZXQgcHJldkJ1ZmZlciA9IG91dHB1dC5idWZmZXJcbiAgICBpZihpc1Jvb3QpeyBvdXRwdXQuYnVmZmVyID0gXCJcIiB9XG5cbiAgICAvLyB0aGlzIGNvbmRpdGlvbiBpcyBjYWxsZWQgd2hlbiBmaXJzdCByZW5kZXJpbmcgYW4gb3B0aW1pemFibGUgZnVuY3Rpb24gY29tcG9uZW50LlxuICAgIC8vIExDIGhhdmUgdGhlaXIgbWFnaWNJZCBwcmV2aW91c2x5IHNldFxuICAgIGlmKGNoYW5nZVRyYWNraW5nICYmIGlzUm9vdCAmJiAhcmVuZGVyZWQubWFnaWNJZCl7XG4gICAgICByZW5kZXJlZC5uZXdSZW5kZXIgPSB0cnVlXG4gICAgICByZW5kZXJlZC5tYWdpY0lkID0gdGhpcy5uZXh0TWFnaWNJRCgpXG4gICAgfVxuXG4gICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzWzBdXG4gICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIocmVuZGVyZWRbaSAtIDFdLCB0ZW1wbGF0ZXMsIG91dHB1dCwgY2hhbmdlVHJhY2tpbmcpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbaV1cbiAgICB9XG5cbiAgICAvLyBBcHBsaWVzIHRoZSByb290IHRhZyBcInNraXBcIiBvcHRpbWl6YXRpb24gaWYgc3VwcG9ydGVkLCB3aGljaCBjbGVhcnNcbiAgICAvLyB0aGUgcm9vdCB0YWcgYXR0cmlidXRlcyBhbmQgaW5uZXJIVE1MLCBhbmQgb25seSBtYWludGFpbnMgdGhlIG1hZ2ljSWQuXG4gICAgLy8gV2UgY2FuIG9ubHkgc2tpcCB3aGVuIGNoYW5nZVRyYWNraW5nIGlzIHN1cHBvcnRlZCAob3V0c2lkZSBvZiBhIGNvbXByZWhlbnNpb24pLFxuICAgIC8vIGFuZCB3aGVuIHRoZSByb290IGVsZW1lbnQgaGFzbid0IGV4cGVyaWVuY2VkIGFuIHVucmVuZGVyZWQgbWVyZ2UgKG5ld1JlbmRlciB0cnVlKS5cbiAgICBpZihpc1Jvb3Qpe1xuICAgICAgbGV0IHNraXAgPSBmYWxzZVxuICAgICAgbGV0IGF0dHJzXG4gICAgICAvLyBXaGVuIGEgTEMgaXMgcmUtYWRkZWQgdG8gdGhlIHBhZ2UsIHdlIG5lZWQgdG8gcmUtcmVuZGVyIHRoZSBlbnRpcmUgTEMgdHJlZSxcbiAgICAgIC8vIHRoZXJlZm9yZSBjaGFuZ2VUcmFja2luZyBpcyBmYWxzZTsgaG93ZXZlciwgd2UgbmVlZCB0byBrZWVwIGFsbCB0aGUgbWFnaWNJZHNcbiAgICAgIC8vIGZyb20gYW55IGZ1bmN0aW9uIGNvbXBvbmVudCBzbyB0aGUgbmV4dCB0aW1lIHRoZSBMQyBpcyB1cGRhdGVkLCB3ZSBjYW4gYXBwbHlcbiAgICAgIC8vIHRoZSBza2lwIG9wdGltaXphdGlvblxuICAgICAgaWYoY2hhbmdlVHJhY2tpbmcgfHwgcmVuZGVyZWQubWFnaWNJZCl7XG4gICAgICAgIHNraXAgPSBjaGFuZ2VUcmFja2luZyAmJiAhcmVuZGVyZWQubmV3UmVuZGVyXG4gICAgICAgIGF0dHJzID0ge1tQSFhfTUFHSUNfSURdOiByZW5kZXJlZC5tYWdpY0lkLCAuLi5yb290QXR0cnN9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdHRycyA9IHJvb3RBdHRyc1xuICAgICAgfVxuICAgICAgaWYoc2tpcCl7IGF0dHJzW1BIWF9TS0lQXSA9IHRydWUgfVxuICAgICAgbGV0IFtuZXdSb290LCBjb21tZW50QmVmb3JlLCBjb21tZW50QWZ0ZXJdID0gbW9kaWZ5Um9vdChvdXRwdXQuYnVmZmVyLCBhdHRycywgc2tpcClcbiAgICAgIHJlbmRlcmVkLm5ld1JlbmRlciA9IGZhbHNlXG4gICAgICBvdXRwdXQuYnVmZmVyID0gcHJldkJ1ZmZlciArIGNvbW1lbnRCZWZvcmUgKyBuZXdSb290ICsgY29tbWVudEFmdGVyXG4gICAgfVxuICB9XG5cbiAgY29tcHJlaGVuc2lvblRvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCl7XG4gICAgbGV0IHtbRFlOQU1JQ1NdOiBkeW5hbWljcywgW1NUQVRJQ106IHN0YXRpY3MsIFtTVFJFQU1dOiBzdHJlYW19ID0gcmVuZGVyZWRcbiAgICBsZXQgW19yZWYsIF9pbnNlcnRzLCBkZWxldGVJZHMsIHJlc2V0XSA9IHN0cmVhbSB8fCBbbnVsbCwge30sIFtdLCBudWxsXVxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcbiAgICBsZXQgY29tcFRlbXBsYXRlcyA9IHRlbXBsYXRlcyB8fCByZW5kZXJlZFtURU1QTEFURVNdXG4gICAgZm9yKGxldCBkID0gMDsgZCA8IGR5bmFtaWNzLmxlbmd0aDsgZCsrKXtcbiAgICAgIGxldCBkeW5hbWljID0gZHluYW1pY3NbZF1cbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1swXVxuICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgICAvLyBJbnNpZGUgYSBjb21wcmVoZW5zaW9uLCB3ZSBkb24ndCB0cmFjayBob3cgZHluYW1pY3MgY2hhbmdlXG4gICAgICAgIC8vIG92ZXIgdGltZSAoYW5kIGZlYXR1cmVzIGxpa2Ugc3RyZWFtcyB3b3VsZCBtYWtlIHRoYXQgaW1wb3NzaWJsZVxuICAgICAgICAvLyB1bmxlc3Mgd2UgbW92ZSB0aGUgc3RyZWFtIGRpZmZpbmcgYXdheSBmcm9tIG1vcnBoZG9tKSxcbiAgICAgICAgLy8gc28gd2UgY2FuJ3QgcGVyZm9ybSByb290IGNoYW5nZSB0cmFja2luZy5cbiAgICAgICAgbGV0IGNoYW5nZVRyYWNraW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIoZHluYW1pY1tpIC0gMV0sIGNvbXBUZW1wbGF0ZXMsIG91dHB1dCwgY2hhbmdlVHJhY2tpbmcpXG4gICAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1tpXVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKHN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIChyZW5kZXJlZFtEWU5BTUlDU10ubGVuZ3RoID4gMCB8fCBkZWxldGVJZHMubGVuZ3RoID4gMCB8fCByZXNldCkpe1xuICAgICAgZGVsZXRlIHJlbmRlcmVkW1NUUkVBTV1cbiAgICAgIHJlbmRlcmVkW0RZTkFNSUNTXSA9IFtdXG4gICAgICBvdXRwdXQuc3RyZWFtcy5hZGQoc3RyZWFtKVxuICAgIH1cbiAgfVxuXG4gIGR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQsIGNoYW5nZVRyYWNraW5nKXtcbiAgICBpZih0eXBlb2YgKHJlbmRlcmVkKSA9PT0gXCJudW1iZXJcIil7XG4gICAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZUNJRFRvU3RyaW5nKG91dHB1dC5jb21wb25lbnRzLCByZW5kZXJlZCwgb3V0cHV0Lm9ubHlDaWRzKVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdHJcbiAgICAgIG91dHB1dC5zdHJlYW1zID0gbmV3IFNldChbLi4ub3V0cHV0LnN0cmVhbXMsIC4uLnN0cmVhbXNdKVxuICAgIH0gZWxzZSBpZihpc09iamVjdChyZW5kZXJlZCkpe1xuICAgICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQsIGNoYW5nZVRyYWNraW5nLCB7fSlcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LmJ1ZmZlciArPSByZW5kZXJlZFxuICAgIH1cbiAgfVxuXG4gIHJlY3Vyc2l2ZUNJRFRvU3RyaW5nKGNvbXBvbmVudHMsIGNpZCwgb25seUNpZHMpe1xuICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW2NpZF0gfHwgbG9nRXJyb3IoYG5vIGNvbXBvbmVudCBmb3IgQ0lEICR7Y2lkfWAsIGNvbXBvbmVudHMpXG4gICAgbGV0IGF0dHJzID0ge1tQSFhfQ09NUE9ORU5UXTogY2lkfVxuICAgIGxldCBza2lwID0gb25seUNpZHMgJiYgIW9ubHlDaWRzLmhhcyhjaWQpXG4gICAgLy8gVHdvIG9wdGltaXphdGlvbiBwYXRocyBhcHBseSBoZXJlOlxuICAgIC8vXG4gICAgLy8gICAxLiBUaGUgb25seUNpZHMgb3B0aW1pemF0aW9uIHdvcmtzIGJ5IHRoZSBzZXJ2ZXIgZGlmZiB0ZWxsaW5nIHVzIG9ubHkgc3BlY2lmaWNcbiAgICAvLyAgICAgY2lkJ3MgaGF2ZSBjaGFuZ2VkLiBUaGlzIGFsbG93cyB1cyB0byBza2lwIHJlbmRlcmluZyBhbnkgY29tcG9uZW50IHRoYXQgaGFzbid0IGNoYW5nZWQsXG4gICAgLy8gICAgIHdoaWNoIHVsdGltYXRlbHkgc2V0cyBQSFhfU0tJUCByb290IGF0dHJpYnV0ZSBhbmQgYXZvaWRzIHJlbmRlcmluZyB0aGUgaW5uZXJIVE1MLlxuICAgIC8vXG4gICAgLy8gICAyLiBUaGUgcm9vdCBQSFhfU0tJUCBvcHRpbWl6YXRpb24gZ2VuZXJhbGl6ZXMgdG8gYWxsIEhFRXggZnVuY3Rpb24gY29tcG9uZW50cywgYW5kXG4gICAgLy8gICAgIHdvcmtzIGluIHRoZSBzYW1lIFBIWF9TS0lQIGF0dHJpYnV0ZSBmYXNoaW9uIGFzIDEsIGJ1dCB0aGUgbmV3UmVuZGVyIHRyYWNraW5nIGlzIGRvbmVcbiAgICAvLyAgICAgYXQgdGhlIGdlbmVyYWwgZGlmZiBtZXJnZSBsZXZlbC4gSWYgd2UgbWVyZ2UgYSBkaWZmIHdpdGggbmV3IGR5bmFtaWNzLCB3ZSBuZWNlc3NhcmlseSBoYXZlXG4gICAgLy8gICAgIGV4cGVyaWVuY2VkIGEgY2hhbmdlIHdoaWNoIG11c3QgYmUgYSBuZXdSZW5kZXIsIGFuZCB0aHVzIHdlIGNhbid0IHNraXAgdGhlIHJlbmRlci5cbiAgICAvL1xuICAgIC8vIEJvdGggb3B0aW1pemF0aW9uIGZsb3dzIGFwcGx5IGhlcmUuIG5ld1JlbmRlciBpcyBzZXQgYmFzZWQgb24gdGhlIG9ubHlDaWRzIG9wdGltaXphdGlvbiwgYW5kXG4gICAgLy8gd2UgdHJhY2sgYSBkZXRlcm1pbmlzdGljIG1hZ2ljSWQgYmFzZWQgb24gdGhlIGNpZC5cbiAgICAvL1xuICAgIC8vIGNoYW5nZVRyYWNraW5nIGlzIGFib3V0IHRoZSBlbnRpcmUgdHJlZVxuICAgIC8vIG5ld1JlbmRlciBpcyBhYm91dCB0aGUgY3VycmVudCByb290IGluIHRoZSB0cmVlXG4gICAgLy9cbiAgICAvLyBCeSBkZWZhdWx0IGNoYW5nZVRyYWNraW5nIGlzIGVuYWJsZWQsIGJ1dCB3ZSBzcGVjaWFsIGNhc2UgdGhlIGZsb3cgd2hlcmUgdGhlIGNsaWVudCBpcyBwcnVuaW5nXG4gICAgLy8gY2lkcyBhbmQgdGhlIHNlcnZlciBhZGRzIHRoZSBjb21wb25lbnQgYmFjay4gSW4gc3VjaCBjYXNlcywgd2UgZXhwbGljaXRseSBkaXNhYmxlIGNoYW5nZVRyYWNraW5nXG4gICAgLy8gd2l0aCByZXNldFJlbmRlciBmb3IgdGhpcyBjaWQsIHRoZW4gcmUtZW5hYmxlIGl0IGFmdGVyIHRoZSByZWN1cnNpdmUgY2FsbCB0byBza2lwIHRoZSBvcHRpbWl6YXRpb25cbiAgICAvLyBmb3IgdGhlIGVudGlyZSBjb21wb25lbnQgdHJlZS5cbiAgICBjb21wb25lbnQubmV3UmVuZGVyID0gIXNraXBcbiAgICBjb21wb25lbnQubWFnaWNJZCA9IGBjJHtjaWR9LSR7dGhpcy5wYXJlbnRWaWV3SWQoKX1gXG4gICAgLy8gZW5hYmxlIGNoYW5nZSB0cmFja2luZyBhcyBsb25nIGFzIHRoZSBjb21wb25lbnQgaGFzbid0IGJlZW4gcmVzZXRcbiAgICBsZXQgY2hhbmdlVHJhY2tpbmcgPSAhY29tcG9uZW50LnJlc2V0XG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcoY29tcG9uZW50LCBjb21wb25lbnRzLCBvbmx5Q2lkcywgY2hhbmdlVHJhY2tpbmcsIGF0dHJzKVxuICAgIC8vIGRpc2FibGUgcmVzZXQgYWZ0ZXIgd2UndmUgcmVuZGVyZWRcbiAgICBkZWxldGUgY29tcG9uZW50LnJlc2V0XG5cbiAgICByZXR1cm4gW2h0bWwsIHN0cmVhbXNdXG4gIH1cbn1cbiIsICJsZXQgdmlld0hvb2tJRCA9IDFcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdIb29rIHtcbiAgc3RhdGljIG1ha2VJRCgpeyByZXR1cm4gdmlld0hvb2tJRCsrIH1cbiAgc3RhdGljIGVsZW1lbnRJRChlbCl7IHJldHVybiBlbC5waHhIb29rSWQgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGVsLCBjYWxsYmFja3Mpe1xuICAgIHRoaXMuX192aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuX19jYWxsYmFja3MgPSBjYWxsYmFja3NcbiAgICB0aGlzLl9fbGlzdGVuZXJzID0gbmV3IFNldCgpXG4gICAgdGhpcy5fX2lzRGlzY29ubmVjdGVkID0gZmFsc2VcbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLmVsLnBoeEhvb2tJZCA9IHRoaXMuY29uc3RydWN0b3IubWFrZUlEKClcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLl9fY2FsbGJhY2tzKXsgdGhpc1trZXldID0gdGhpcy5fX2NhbGxiYWNrc1trZXldIH1cbiAgfVxuXG4gIF9fbW91bnRlZCgpeyB0aGlzLm1vdW50ZWQgJiYgdGhpcy5tb3VudGVkKCkgfVxuICBfX3VwZGF0ZWQoKXsgdGhpcy51cGRhdGVkICYmIHRoaXMudXBkYXRlZCgpIH1cbiAgX19iZWZvcmVVcGRhdGUoKXsgdGhpcy5iZWZvcmVVcGRhdGUgJiYgdGhpcy5iZWZvcmVVcGRhdGUoKSB9XG4gIF9fZGVzdHJveWVkKCl7IHRoaXMuZGVzdHJveWVkICYmIHRoaXMuZGVzdHJveWVkKCkgfVxuICBfX3JlY29ubmVjdGVkKCl7XG4gICAgaWYodGhpcy5fX2lzRGlzY29ubmVjdGVkKXtcbiAgICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgICB0aGlzLnJlY29ubmVjdGVkICYmIHRoaXMucmVjb25uZWN0ZWQoKVxuICAgIH1cbiAgfVxuICBfX2Rpc2Nvbm5lY3RlZCgpe1xuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IHRydWVcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCAmJiB0aGlzLmRpc2Nvbm5lY3RlZCgpXG4gIH1cblxuICBwdXNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcucHVzaEhvb2tFdmVudCh0aGlzLmVsLCBudWxsLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgfVxuXG4gIHB1c2hFdmVudFRvKHBoeFRhcmdldCwgZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHJldHVybiB2aWV3LnB1c2hIb29rRXZlbnQodGhpcy5lbCwgdGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgY2FsbGJhY2tSZWYgPSAoY3VzdG9tRXZlbnQsIGJ5cGFzcykgPT4gYnlwYXNzID8gZXZlbnQgOiBjYWxsYmFjayhjdXN0b21FdmVudC5kZXRhaWwpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuYWRkKGNhbGxiYWNrUmVmKVxuICAgIHJldHVybiBjYWxsYmFja1JlZlxuICB9XG5cbiAgcmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpe1xuICAgIGxldCBldmVudCA9IGNhbGxiYWNrUmVmKG51bGwsIHRydWUpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrUmVmKVxuICB9XG5cbiAgdXBsb2FkKG5hbWUsIGZpbGVzKXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcuZGlzcGF0Y2hVcGxvYWRzKG51bGwsIG5hbWUsIGZpbGVzKVxuICB9XG5cbiAgdXBsb2FkVG8ocGh4VGFyZ2V0LCBuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICB2aWV3LmRpc3BhdGNoVXBsb2Fkcyh0YXJnZXRDdHgsIG5hbWUsIGZpbGVzKVxuICAgIH0pXG4gIH1cblxuICBfX2NsZWFudXBfXygpe1xuICAgIHRoaXMuX19saXN0ZW5lcnMuZm9yRWFjaChjYWxsYmFja1JlZiA9PiB0aGlzLnJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIEJFRk9SRV9VTkxPQURfTE9BREVSX1RJTUVPVVQsXG4gIENIRUNLQUJMRV9JTlBVVFMsXG4gIENPTlNFQ1VUSVZFX1JFTE9BRFMsXG4gIFBIWF9BVVRPX1JFQ09WRVIsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gIFBIWF9ESVNBQkxFX1dJVEgsXG4gIFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSxcbiAgUEhYX0RJU0FCTEVELFxuICBQSFhfTE9BRElOR19DTEFTUyxcbiAgUEhYX0VWRU5UX0NMQVNTRVMsXG4gIFBIWF9FUlJPUl9DTEFTUyxcbiAgUEhYX0NMSUVOVF9FUlJPUl9DTEFTUyxcbiAgUEhYX1NFUlZFUl9FUlJPUl9DTEFTUyxcbiAgUEhYX0ZFRURCQUNLX0ZPUixcbiAgUEhYX0ZFRURCQUNLX0dST1VQLFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfSE9PSyxcbiAgUEhYX1BBR0VfTE9BRElORyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BST0dSRVNTLFxuICBQSFhfUkVBRE9OTFksXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUkFDS19TVEFUSUMsXG4gIFBIWF9UUkFDS19VUExPQURTLFxuICBQSFhfVVBEQVRFLFxuICBQSFhfVVBMT0FEX1JFRixcbiAgUEhYX1ZJRVdfU0VMRUNUT1IsXG4gIFBIWF9NQUlOLFxuICBQSFhfTU9VTlRFRCxcbiAgUFVTSF9USU1FT1VULFxuICBQSFhfVklFV1BPUlRfVE9QLFxuICBQSFhfVklFV1BPUlRfQk9UVE9NLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBjbG9uZSxcbiAgY2xvc2VzdFBoeEJpbmRpbmcsXG4gIGlzRW1wdHksXG4gIGlzRXF1YWxPYmosXG4gIGxvZ0Vycm9yLFxuICBtYXliZSxcbiAgaXNDaWQsXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgRE9NUGF0Y2ggZnJvbSBcIi4vZG9tX3BhdGNoXCJcbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgUmVuZGVyZWQgZnJvbSBcIi4vcmVuZGVyZWRcIlxuaW1wb3J0IFZpZXdIb29rIGZyb20gXCIuL3ZpZXdfaG9va1wiXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5sZXQgc2VyaWFsaXplRm9ybSA9IChmb3JtLCBtZXRhZGF0YSwgb25seU5hbWVzID0gW10pID0+IHtcbiAgY29uc3Qge3N1Ym1pdHRlciwgLi4ubWV0YX0gPSBtZXRhZGF0YVxuXG4gIC8vIFdlIG11c3QgaW5qZWN0IHRoZSBzdWJtaXR0ZXIgaW4gdGhlIG9yZGVyIHRoYXQgaXQgZXhpc3RzIGluIHRoZSBET01cbiAgLy8gcmVsZWF0aXZlIHRvIG90aGVyIGlucHV0cy4gRm9yIGV4YW1wbGUsIGZvciBjaGVja2JveCBncm91cHMsIHRoZSBvcmRlciBtdXN0IGJlIG1haW50YWluZWQuXG4gIGxldCBpbmplY3RlZEVsZW1lbnRcbiAgaWYoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5uYW1lKXtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiXG4gICAgLy8gc2V0IHRoZSBmb3JtIGF0dHJpYnV0ZSBpZiB0aGUgc3VibWl0dGVyIGhhcyBvbmU7XG4gICAgLy8gdGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBlbGVtZW50IGlzIG91dHNpZGUgdGhlIGFjdHVhbCBmb3JtIGVsZW1lbnRcbiAgICBjb25zdCBmb3JtSWQgPSBzdWJtaXR0ZXIuZ2V0QXR0cmlidXRlKFwiZm9ybVwiKVxuICAgIGlmKGZvcm1JZCl7XG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJmb3JtXCIsIGZvcm1JZClcbiAgICB9XG4gICAgaW5wdXQubmFtZSA9IHN1Ym1pdHRlci5uYW1lXG4gICAgaW5wdXQudmFsdWUgPSBzdWJtaXR0ZXIudmFsdWVcbiAgICBzdWJtaXR0ZXIucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQsIHN1Ym1pdHRlcilcbiAgICBpbmplY3RlZEVsZW1lbnQgPSBpbnB1dFxuICB9XG5cbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSlcbiAgY29uc3QgdG9SZW1vdmUgPSBbXVxuXG4gIGZvcm1EYXRhLmZvckVhY2goKHZhbCwga2V5LCBfaW5kZXgpID0+IHtcbiAgICBpZih2YWwgaW5zdGFuY2VvZiBGaWxlKXsgdG9SZW1vdmUucHVzaChrZXkpIH1cbiAgfSlcblxuICAvLyBDbGVhbnVwIGFmdGVyIGJ1aWxkaW5nIGZpbGVEYXRhXG4gIHRvUmVtb3ZlLmZvckVhY2goa2V5ID0+IGZvcm1EYXRhLmRlbGV0ZShrZXkpKVxuXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuXG4gIGZvcihsZXQgW2tleSwgdmFsXSBvZiBmb3JtRGF0YS5lbnRyaWVzKCkpe1xuICAgIGlmKG9ubHlOYW1lcy5sZW5ndGggPT09IDAgfHwgb25seU5hbWVzLmluZGV4T2Yoa2V5KSA+PSAwKXtcbiAgICAgIHBhcmFtcy5hcHBlbmQoa2V5LCB2YWwpXG4gICAgfVxuICB9XG5cbiAgLy8gcmVtb3ZlIHRoZSBpbmplY3RlZCBlbGVtZW50IGFnYWluXG4gIC8vIChpdCB3b3VsZCBiZSByZW1vdmVkIGJ5IHRoZSBuZXh0IGRvbSBwYXRjaCBhbnl3YXksIGJ1dCB0aGlzIGlzIGNsZWFuZXIpXG4gIGlmKHN1Ym1pdHRlciAmJiBpbmplY3RlZEVsZW1lbnQpe1xuICAgIHN1Ym1pdHRlci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGluamVjdGVkRWxlbWVudClcbiAgfVxuXG4gIGZvcihsZXQgbWV0YUtleSBpbiBtZXRhKXsgcGFyYW1zLmFwcGVuZChtZXRhS2V5LCBtZXRhW21ldGFLZXldKSB9XG5cbiAgcmV0dXJuIHBhcmFtcy50b1N0cmluZygpXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xuICBjb25zdHJ1Y3RvcihlbCwgbGl2ZVNvY2tldCwgcGFyZW50VmlldywgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICB0aGlzLmlzRGVhZCA9IGZhbHNlXG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZmxhc2ggPSBmbGFzaFxuICAgIHRoaXMucGFyZW50ID0gcGFyZW50Vmlld1xuICAgIHRoaXMucm9vdCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LnJvb3QgOiB0aGlzXG4gICAgdGhpcy5lbCA9IGVsXG4gICAgdGhpcy5pZCA9IHRoaXMuZWwuaWRcbiAgICB0aGlzLnJlZiA9IDBcbiAgICB0aGlzLmNoaWxkSm9pbnMgPSAwXG4gICAgdGhpcy5sb2FkZXJUaW1lciA9IG51bGxcbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5wZW5kaW5nRm9ybXMgPSBuZXcgU2V0KClcbiAgICB0aGlzLnJlZGlyZWN0ID0gZmFsc2VcbiAgICB0aGlzLmhyZWYgPSBudWxsXG4gICAgdGhpcy5qb2luQ291bnQgPSB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmpvaW5Db3VudCAtIDEgOiAwXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IHRydWVcbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlXG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSBmdW5jdGlvbihvbkRvbmUpeyBvbkRvbmUgJiYgb25Eb25lKCkgfVxuICAgIHRoaXMuc3RvcENhbGxiYWNrID0gZnVuY3Rpb24oKXsgfVxuICAgIHRoaXMucGVuZGluZ0pvaW5PcHMgPSB0aGlzLnBhcmVudCA/IG51bGwgOiBbXVxuICAgIHRoaXMudmlld0hvb2tzID0ge31cbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gW11cbiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5wYXJlbnQgPyBudWxsIDoge31cbiAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gPSB7fVxuICAgIHRoaXMuY2hhbm5lbCA9IHRoaXMubGl2ZVNvY2tldC5jaGFubmVsKGBsdjoke3RoaXMuaWR9YCwgKCkgPT4ge1xuICAgICAgbGV0IHVybCA9IHRoaXMuaHJlZiAmJiB0aGlzLmV4cGFuZFVSTCh0aGlzLmhyZWYpXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWRpcmVjdDogdGhpcy5yZWRpcmVjdCA/IHVybCA6IHVuZGVmaW5lZCxcbiAgICAgICAgdXJsOiB0aGlzLnJlZGlyZWN0ID8gdW5kZWZpbmVkIDogdXJsIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcGFyYW1zOiB0aGlzLmNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpLFxuICAgICAgICBzZXNzaW9uOiB0aGlzLmdldFNlc3Npb24oKSxcbiAgICAgICAgc3RhdGljOiB0aGlzLmdldFN0YXRpYygpLFxuICAgICAgICBmbGFzaDogdGhpcy5mbGFzaCxcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc2V0SHJlZihocmVmKXsgdGhpcy5ocmVmID0gaHJlZiB9XG5cbiAgc2V0UmVkaXJlY3QoaHJlZil7XG4gICAgdGhpcy5yZWRpcmVjdCA9IHRydWVcbiAgICB0aGlzLmhyZWYgPSBocmVmXG4gIH1cblxuICBpc01haW4oKXsgcmV0dXJuIHRoaXMuZWwuaGFzQXR0cmlidXRlKFBIWF9NQUlOKSB9XG5cbiAgY29ubmVjdFBhcmFtcyhsaXZlUmVmZXJlcil7XG4gICAgbGV0IHBhcmFtcyA9IHRoaXMubGl2ZVNvY2tldC5wYXJhbXModGhpcy5lbClcbiAgICBsZXQgbWFuaWZlc3QgPVxuICAgICAgRE9NLmFsbChkb2N1bWVudCwgYFske3RoaXMuYmluZGluZyhQSFhfVFJBQ0tfU1RBVElDKX1dYClcbiAgICAgICAgLm1hcChub2RlID0+IG5vZGUuc3JjIHx8IG5vZGUuaHJlZikuZmlsdGVyKHVybCA9PiB0eXBlb2YgKHVybCkgPT09IFwic3RyaW5nXCIpXG5cbiAgICBpZihtYW5pZmVzdC5sZW5ndGggPiAwKXsgcGFyYW1zW1wiX3RyYWNrX3N0YXRpY1wiXSA9IG1hbmlmZXN0IH1cbiAgICBwYXJhbXNbXCJfbW91bnRzXCJdID0gdGhpcy5qb2luQ291bnRcbiAgICBwYXJhbXNbXCJfbGl2ZV9yZWZlcmVyXCJdID0gbGl2ZVJlZmVyZXJcblxuICAgIHJldHVybiBwYXJhbXNcbiAgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLmNoYW5uZWwuY2FuUHVzaCgpIH1cblxuICBnZXRTZXNzaW9uKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgfVxuXG4gIGdldFN0YXRpYygpe1xuICAgIGxldCB2YWwgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfU1RBVElDKVxuICAgIHJldHVybiB2YWwgPT09IFwiXCIgPyBudWxsIDogdmFsXG4gIH1cblxuICBkZXN0cm95KGNhbGxiYWNrID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMuZGVzdHJveUFsbENoaWxkcmVuKClcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWVcbiAgICBkZWxldGUgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdXG4gICAgaWYodGhpcy5wYXJlbnQpeyBkZWxldGUgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMucGFyZW50LmlkXVt0aGlzLmlkXSB9XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMubG9hZGVyVGltZXIpXG4gICAgbGV0IG9uRmluaXNoZWQgPSAoKSA9PiB7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXtcbiAgICAgICAgdGhpcy5kZXN0cm95SG9vayh0aGlzLnZpZXdIb29rc1tpZF0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgRE9NLm1hcmtQaHhDaGlsZERlc3Ryb3llZCh0aGlzLmVsKVxuXG4gICAgdGhpcy5sb2coXCJkZXN0cm95ZWRcIiwgKCkgPT4gW1widGhlIGNoaWxkIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgcGFyZW50XCJdKVxuICAgIHRoaXMuY2hhbm5lbC5sZWF2ZSgpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIG9uRmluaXNoZWQpXG4gICAgICAucmVjZWl2ZShcImVycm9yXCIsIG9uRmluaXNoZWQpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgb25GaW5pc2hlZClcbiAgfVxuXG4gIHNldENvbnRhaW5lckNsYXNzZXMoLi4uY2xhc3Nlcyl7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgICAgIFBIWF9MT0FESU5HX0NMQVNTLFxuICAgICAgUEhYX0VSUk9SX0NMQVNTLFxuICAgICAgUEhYX0NMSUVOVF9FUlJPUl9DTEFTUyxcbiAgICAgIFBIWF9TRVJWRVJfRVJST1JfQ0xBU1NcbiAgICApXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpXG4gIH1cblxuICBzaG93TG9hZGVyKHRpbWVvdXQpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGlmKHRpbWVvdXQpe1xuICAgICAgdGhpcy5sb2FkZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zaG93TG9hZGVyKCksIHRpbWVvdXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy52aWV3SG9va3MpeyB0aGlzLnZpZXdIb29rc1tpZF0uX19kaXNjb25uZWN0ZWQoKSB9XG4gICAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoUEhYX0xPQURJTkdfQ0xBU1MpXG4gICAgfVxuICB9XG5cbiAgZXhlY0FsbChiaW5kaW5nKXtcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtiaW5kaW5nfV1gLCBlbCA9PiB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBlbC5nZXRBdHRyaWJ1dGUoYmluZGluZykpKVxuICB9XG5cbiAgaGlkZUxvYWRlcigpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfQ09OTkVDVEVEX0NMQVNTKVxuICAgIHRoaXMuZXhlY0FsbCh0aGlzLmJpbmRpbmcoXCJjb25uZWN0ZWRcIikpXG4gIH1cblxuICB0cmlnZ2VyUmVjb25uZWN0ZWQoKXtcbiAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fcmVjb25uZWN0ZWQoKSB9XG4gIH1cblxuICBsb2coa2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIHRoaXMubGl2ZVNvY2tldC5sb2codGhpcywga2luZCwgbXNnQ2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgd2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsIGNhbGxiYWNrKXtcbiAgICBpZihwaHhUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBwaHhUYXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQub3duZXIocGh4VGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHBoeFRhcmdldCkpXG4gICAgfVxuXG4gICAgaWYoaXNDaWQocGh4VGFyZ2V0KSl7XG4gICAgICBsZXQgdGFyZ2V0cyA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgcGh4VGFyZ2V0KVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApe1xuICAgICAgICBsb2dFcnJvcihgbm8gY29tcG9uZW50IGZvdW5kIG1hdGNoaW5nIHBoeC10YXJnZXQgb2YgJHtwaHhUYXJnZXR9YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMsIHBhcnNlSW50KHBoeFRhcmdldCkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0YXJnZXRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBoeFRhcmdldCkpXG4gICAgICBpZih0YXJnZXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBub3RoaW5nIGZvdW5kIG1hdGNoaW5nIHRoZSBwaHgtdGFyZ2V0IHNlbGVjdG9yIFwiJHtwaHhUYXJnZXR9XCJgKSB9XG4gICAgICB0YXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHRoaXMubGl2ZVNvY2tldC5vd25lcih0YXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgdGFyZ2V0KSkpXG4gICAgfVxuICB9XG5cbiAgYXBwbHlEaWZmKHR5cGUsIHJhd0RpZmYsIGNhbGxiYWNrKXtcbiAgICB0aGlzLmxvZyh0eXBlLCAoKSA9PiBbXCJcIiwgY2xvbmUocmF3RGlmZildKVxuICAgIGxldCB7ZGlmZiwgcmVwbHksIGV2ZW50cywgdGl0bGV9ID0gUmVuZGVyZWQuZXh0cmFjdChyYXdEaWZmKVxuICAgIGNhbGxiYWNrKHtkaWZmLCByZXBseSwgZXZlbnRzfSlcbiAgICBpZih0aXRsZSl7IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gRE9NLnB1dFRpdGxlKHRpdGxlKSkgfVxuICB9XG5cbiAgb25Kb2luKHJlc3Ape1xuICAgIGxldCB7cmVuZGVyZWQsIGNvbnRhaW5lcn0gPSByZXNwXG4gICAgaWYoY29udGFpbmVyKXtcbiAgICAgIGxldCBbdGFnLCBhdHRyc10gPSBjb250YWluZXJcbiAgICAgIHRoaXMuZWwgPSBET00ucmVwbGFjZVJvb3RDb250YWluZXIodGhpcy5lbCwgdGFnLCBhdHRycylcbiAgICB9XG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMuam9pblBlbmRpbmcgPSB0cnVlXG4gICAgdGhpcy5mbGFzaCA9IG51bGxcblxuICAgIEJyb3dzZXIuZHJvcExvY2FsKHRoaXMubGl2ZVNvY2tldC5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUylcbiAgICB0aGlzLmFwcGx5RGlmZihcIm1vdW50XCIsIHJlbmRlcmVkLCAoe2RpZmYsIGV2ZW50c30pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZWQgPSBuZXcgUmVuZGVyZWQodGhpcy5pZCwgZGlmZilcbiAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlckNvbnRhaW5lcihudWxsLCBcImpvaW5cIilcbiAgICAgIHRoaXMuZHJvcFBlbmRpbmdSZWZzKClcbiAgICAgIGxldCBmb3JtcyA9IHRoaXMuZm9ybXNGb3JSZWNvdmVyeShodG1sKS5maWx0ZXIoKFtmb3JtLCBuZXdGb3JtLCBuZXdDaWRdKSA9PiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5wZW5kaW5nRm9ybXMuaGFzKGZvcm0uaWQpXG4gICAgICB9KVxuICAgICAgdGhpcy5qb2luQ291bnQrK1xuXG4gICAgICBpZihmb3Jtcy5sZW5ndGggPiAwKXtcbiAgICAgICAgZm9ybXMuZm9yRWFjaCgoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0sIGkpID0+IHtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdGb3Jtcy5hZGQoZm9ybS5pZClcbiAgICAgICAgICB0aGlzLnB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCByZXNwID0+IHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0Zvcm1zLmRlbGV0ZShmb3JtLmlkKVxuICAgICAgICAgICAgaWYoaSA9PT0gZm9ybXMubGVuZ3RoIC0gMSl7XG4gICAgICAgICAgICAgIHRoaXMub25Kb2luQ29tcGxldGUocmVzcCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uSm9pbkNvbXBsZXRlKHJlc3AsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZHJvcFBlbmRpbmdSZWZzKCl7XG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske1BIWF9SRUZfU1JDfT1cIiR7dGhpcy5pZH1cIl1bJHtQSFhfUkVGfV1gLCBlbCA9PiB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGX1NSQylcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luQ29tcGxldGUoe2xpdmVfcGF0Y2h9LCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIC8vIHdlIGNhbiBjbGVhciBwZW5kaW5nIGZvcm0gcmVjb3ZlcmllcyBub3cgdGhhdCB3ZSd2ZSBqb2luZWQuXG4gICAgLy8gVGhleSBlaXRoZXIgYWxsIHJlc29sdmVkIG9yIHdlcmUgYWJhbmRvbmVkXG4gICAgdGhpcy5wZW5kaW5nRm9ybXMuY2xlYXIoKVxuICAgIC8vIEluIG9yZGVyIHRvIHByb3ZpZGUgYSBiZXR0ZXIgZXhwZXJpZW5jZSwgd2Ugd2FudCB0byBqb2luXG4gICAgLy8gYWxsIExpdmVWaWV3cyBmaXJzdCBhbmQgb25seSB0aGVuIGFwcGx5IHRoZWlyIHBhdGNoZXMuXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxIHx8ICh0aGlzLnBhcmVudCAmJiAhdGhpcy5wYXJlbnQuaXNKb2luUGVuZGluZygpKSl7XG4gICAgICByZXR1cm4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgfVxuXG4gICAgLy8gT25lIGRvd25zaWRlIG9mIHRoaXMgYXBwcm9hY2ggaXMgdGhhdCB3ZSBuZWVkIHRvIGZpbmQgcGh4Q2hpbGRyZW5cbiAgICAvLyBpbiB0aGUgaHRtbCBmcmFnbWVudCwgaW5zdGVhZCBvZiBkaXJlY3RseSBvbiB0aGUgRE9NLiBUaGUgZnJhZ21lbnRcbiAgICAvLyBhbHNvIGRvZXMgbm90IGluY2x1ZGUgUEhYX1NUQVRJQywgc28gd2UgbmVlZCB0byBjb3B5IGl0IG92ZXIgZnJvbVxuICAgIC8vIHRoZSBET00uXG4gICAgbGV0IG5ld0NoaWxkcmVuID0gRE9NLmZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgdGhpcy5pZCkuZmlsdGVyKHRvRWwgPT4ge1xuICAgICAgbGV0IGZyb21FbCA9IHRvRWwuaWQgJiYgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke3RvRWwuaWR9XCJdYClcbiAgICAgIGxldCBwaHhTdGF0aWMgPSBmcm9tRWwgJiYgZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU1RBVElDKVxuICAgICAgaWYocGh4U3RhdGljKXsgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQywgcGh4U3RhdGljKSB9XG4gICAgICAvLyBzZXQgUEhYX1JPT1RfSUQgdG8gcHJldmVudCBldmVudHMgZnJvbSBiZWluZyBkaXNwYXRjaGVkIHRvIHRoZSByb290IHZpZXdcbiAgICAgIC8vIHdoaWxlIHRoZSBjaGlsZCBqb2luIGlzIHN0aWxsIHBlbmRpbmdcbiAgICAgIGlmKGZyb21FbCl7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQsIHRoaXMucm9vdC5pZCkgfVxuICAgICAgcmV0dXJuIHRoaXMuam9pbkNoaWxkKHRvRWwpXG4gICAgfSlcblxuICAgIGlmKG5ld0NoaWxkcmVuLmxlbmd0aCA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgICAgICB0aGlzLnBhcmVudC5hY2tKb2luKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKClcbiAgICAgICAgdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgIH1cbiAgfVxuXG4gIGF0dGFjaFRydWVEb2NFbCgpe1xuICAgIHRoaXMuZWwgPSBET00uYnlJZCh0aGlzLmlkKVxuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3QuaWQpXG4gIH1cblxuICBleGVjTmV3TW91bnRlZCgpe1xuICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IHRoaXMuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgIGxldCBwaHhWaWV3cG9ydEJvdHRvbSA9IHRoaXMuYmluZGluZyhQSFhfVklFV1BPUlRfQk9UVE9NKVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3BoeFZpZXdwb3J0VG9wfV0sIFske3BoeFZpZXdwb3J0Qm90dG9tfV1gLCBob29rRWwgPT4ge1xuICAgICAgRE9NLm1heWJlQWRkUHJpdmF0ZUhvb2tzKGhvb2tFbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKVxuICAgICAgdGhpcy5tYXliZUFkZE5ld0hvb2soaG9va0VsKVxuICAgIH0pXG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dLCBbZGF0YS1waHgtJHtQSFhfSE9PS31dYCwgaG9va0VsID0+IHtcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGhvb2tFbClcbiAgICB9KVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfTU9VTlRFRCl9XWAsIGVsID0+IHRoaXMubWF5YmVNb3VudGVkKGVsKSlcbiAgfVxuXG4gIGFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgdGhpcy5hdHRhY2hUcnVlRG9jRWwoKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgIHBhdGNoLm1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKClcbiAgICB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgZmFsc2UsIHRydWUpXG4gICAgdGhpcy5qb2luTmV3Q2hpbGRyZW4oKVxuICAgIHRoaXMuZXhlY05ld01vdW50ZWQoKVxuXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IGZhbHNlXG4gICAgdGhpcy5saXZlU29ja2V0LmRpc3BhdGNoRXZlbnRzKGV2ZW50cylcbiAgICB0aGlzLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKVxuXG4gICAgaWYobGl2ZV9wYXRjaCl7XG4gICAgICBsZXQge2tpbmQsIHRvfSA9IGxpdmVfcGF0Y2hcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gICAgfVxuICAgIHRoaXMuaGlkZUxvYWRlcigpXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxKXsgdGhpcy50cmlnZ2VyUmVjb25uZWN0ZWQoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2soKVxuICB9XG5cbiAgdHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uQmVmb3JlRWxVcGRhdGVkXCIsIFtmcm9tRWwsIHRvRWxdKVxuICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGZyb21FbClcbiAgICBsZXQgaXNJZ25vcmVkID0gaG9vayAmJiBET00uaXNJZ25vcmVkKGZyb21FbCwgdGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpKVxuICAgIGlmKGhvb2sgJiYgIWZyb21FbC5pc0VxdWFsTm9kZSh0b0VsKSAmJiAhKGlzSWdub3JlZCAmJiBpc0VxdWFsT2JqKGZyb21FbC5kYXRhc2V0LCB0b0VsLmRhdGFzZXQpKSl7XG4gICAgICBob29rLl9fYmVmb3JlVXBkYXRlKClcbiAgICAgIHJldHVybiBob29rXG4gICAgfVxuICB9XG5cbiAgbWF5YmVNb3VudGVkKGVsKXtcbiAgICBsZXQgcGh4TW91bnRlZCA9IGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpKVxuICAgIGxldCBoYXNCZWVuSW52b2tlZCA9IHBoeE1vdW50ZWQgJiYgRE9NLnByaXZhdGUoZWwsIFwibW91bnRlZFwiKVxuICAgIGlmKHBoeE1vdW50ZWQgJiYgIWhhc0JlZW5JbnZva2VkKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlMoZWwsIHBoeE1vdW50ZWQpXG4gICAgICBET00ucHV0UHJpdmF0ZShlbCwgXCJtb3VudGVkXCIsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgbWF5YmVBZGROZXdIb29rKGVsLCBmb3JjZSl7XG4gICAgbGV0IG5ld0hvb2sgPSB0aGlzLmFkZEhvb2soZWwpXG4gICAgaWYobmV3SG9vayl7IG5ld0hvb2suX19tb3VudGVkKCkgfVxuICB9XG5cbiAgcGVyZm9ybVBhdGNoKHBhdGNoLCBwcnVuZUNpZHMsIGlzSm9pblBhdGNoID0gZmFsc2Upe1xuICAgIGxldCByZW1vdmVkRWxzID0gW11cbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG4gICAgbGV0IHVwZGF0ZWRIb29rSWRzID0gbmV3IFNldCgpXG5cbiAgICBwYXRjaC5hZnRlcihcImFkZGVkXCIsIGVsID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50cmlnZ2VyRE9NKFwib25Ob2RlQWRkZWRcIiwgW2VsXSlcbiAgICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IHRoaXMuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgICAgbGV0IHBoeFZpZXdwb3J0Qm90dG9tID0gdGhpcy5iaW5kaW5nKFBIWF9WSUVXUE9SVF9CT1RUT00pXG4gICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3MoZWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGVsKVxuICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKXsgdGhpcy5tYXliZU1vdW50ZWQoZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJwaHhDaGlsZEFkZGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKERPTS5pc1BoeFN0aWNreShlbCkpe1xuICAgICAgICB0aGlzLmxpdmVTb2NrZXQuam9pblJvb3RWaWV3cygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5iZWZvcmUoXCJ1cGRhdGVkXCIsIChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhmcm9tRWwsIHRvRWwpXG4gICAgICBpZihob29rKXsgdXBkYXRlZEhvb2tJZHMuYWRkKGZyb21FbC5pZCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInVwZGF0ZWRcIiwgZWwgPT4ge1xuICAgICAgaWYodXBkYXRlZEhvb2tJZHMuaGFzKGVsLmlkKSl7IHRoaXMuZ2V0SG9vayhlbCkuX191cGRhdGVkKCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcImRpc2NhcmRlZFwiLCAoZWwpID0+IHtcbiAgICAgIGlmKGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7IHJlbW92ZWRFbHMucHVzaChlbCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIGVscyA9PiB0aGlzLmFmdGVyRWxlbWVudHNSZW1vdmVkKGVscywgcHJ1bmVDaWRzKSlcbiAgICBwYXRjaC5wZXJmb3JtKGlzSm9pblBhdGNoKVxuICAgIHRoaXMuYWZ0ZXJFbGVtZW50c1JlbW92ZWQocmVtb3ZlZEVscywgcHJ1bmVDaWRzKVxuXG4gICAgcmV0dXJuIHBoeENoaWxkcmVuQWRkZWRcbiAgfVxuXG4gIGFmdGVyRWxlbWVudHNSZW1vdmVkKGVsZW1lbnRzLCBwcnVuZUNpZHMpe1xuICAgIGxldCBkZXN0cm95ZWRDSURzID0gW11cbiAgICBlbGVtZW50cy5mb3JFYWNoKHBhcmVudCA9PiB7XG4gICAgICBsZXQgY29tcG9uZW50cyA9IERPTS5hbGwocGFyZW50LCBgWyR7UEhYX0NPTVBPTkVOVH1dYClcbiAgICAgIGxldCBob29rcyA9IERPTS5hbGwocGFyZW50LCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dYClcbiAgICAgIGNvbXBvbmVudHMuY29uY2F0KHBhcmVudCkuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGxldCBjaWQgPSB0aGlzLmNvbXBvbmVudElEKGVsKVxuICAgICAgICBpZihpc0NpZChjaWQpICYmIGRlc3Ryb3llZENJRHMuaW5kZXhPZihjaWQpID09PSAtMSl7IGRlc3Ryb3llZENJRHMucHVzaChjaWQpIH1cbiAgICAgIH0pXG4gICAgICBob29rcy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGhvb2tFbCA9PiB7XG4gICAgICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGhvb2tFbClcbiAgICAgICAgaG9vayAmJiB0aGlzLmRlc3Ryb3lIb29rKGhvb2spXG4gICAgICB9KVxuICAgIH0pXG4gICAgLy8gV2Ugc2hvdWxkIG5vdCBwcnVuZUNpZHMgb24gam9pbnMuIE90aGVyd2lzZSwgaW4gY2FzZSBvZlxuICAgIC8vIHJlam9pbnMsIHdlIG1heSBub3RpZnkgY2lkcyB0aGF0IG5vIGxvbmdlciBiZWxvbmcgdG8gdGhlXG4gICAgLy8gY3VycmVudCBMaXZlVmlldyB0byBiZSByZW1vdmVkLlxuICAgIGlmKHBydW5lQ2lkcyl7XG4gICAgICB0aGlzLm1heWJlUHVzaENvbXBvbmVudHNEZXN0cm95ZWQoZGVzdHJveWVkQ0lEcylcbiAgICB9XG4gIH1cblxuICBqb2luTmV3Q2hpbGRyZW4oKXtcbiAgICBET00uZmluZFBoeENoaWxkcmVuKHRoaXMuZWwsIHRoaXMuaWQpLmZvckVhY2goZWwgPT4gdGhpcy5qb2luQ2hpbGQoZWwpKVxuICB9XG5cbiAgZ2V0Q2hpbGRCeUlkKGlkKXsgcmV0dXJuIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVtpZF0gfVxuXG4gIGdldERlc2NlbmRlbnRCeUVsKGVsKXtcbiAgICBpZihlbC5pZCA9PT0gdGhpcy5pZCl7XG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltlbC5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRCldW2VsLmlkXVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lEZXNjZW5kZW50KGlkKXtcbiAgICBmb3IobGV0IHBhcmVudElkIGluIHRoaXMucm9vdC5jaGlsZHJlbil7XG4gICAgICBmb3IobGV0IGNoaWxkSWQgaW4gdGhpcy5yb290LmNoaWxkcmVuW3BhcmVudElkXSl7XG4gICAgICAgIGlmKGNoaWxkSWQgPT09IGlkKXsgcmV0dXJuIHRoaXMucm9vdC5jaGlsZHJlbltwYXJlbnRJZF1bY2hpbGRJZF0uZGVzdHJveSgpIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBqb2luQ2hpbGQoZWwpe1xuICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGRCeUlkKGVsLmlkKVxuICAgIGlmKCFjaGlsZCl7XG4gICAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLmxpdmVTb2NrZXQsIHRoaXMpXG4gICAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF1bdmlldy5pZF0gPSB2aWV3XG4gICAgICB2aWV3LmpvaW4oKVxuICAgICAgdGhpcy5jaGlsZEpvaW5zKytcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgaXNKb2luUGVuZGluZygpeyByZXR1cm4gdGhpcy5qb2luUGVuZGluZyB9XG5cbiAgYWNrSm9pbihfY2hpbGQpe1xuICAgIHRoaXMuY2hpbGRKb2lucy0tXG5cbiAgICBpZih0aGlzLmNoaWxkSm9pbnMgPT09IDApe1xuICAgICAgaWYodGhpcy5wYXJlbnQpe1xuICAgICAgICB0aGlzLnBhcmVudC5hY2tKb2luKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpe1xuICAgIHRoaXMuam9pbkNhbGxiYWNrKCgpID0+IHtcbiAgICAgIHRoaXMucGVuZGluZ0pvaW5PcHMuZm9yRWFjaCgoW3ZpZXcsIG9wXSkgPT4ge1xuICAgICAgICBpZighdmlldy5pc0Rlc3Ryb3llZCgpKXsgb3AoKSB9XG4gICAgICB9KVxuICAgICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IFtdXG4gICAgfSlcbiAgfVxuXG4gIHVwZGF0ZShkaWZmLCBldmVudHMpe1xuICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpIHx8ICh0aGlzLmxpdmVTb2NrZXQuaGFzUGVuZGluZ0xpbmsoKSAmJiB0aGlzLnJvb3QuaXNNYWluKCkpKXtcbiAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdEaWZmcy5wdXNoKHtkaWZmLCBldmVudHN9KVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyZWQubWVyZ2VEaWZmKGRpZmYpXG4gICAgbGV0IHBoeENoaWxkcmVuQWRkZWQgPSBmYWxzZVxuXG4gICAgLy8gV2hlbiB0aGUgZGlmZiBvbmx5IGNvbnRhaW5zIGNvbXBvbmVudCBkaWZmcywgdGhlbiB3YWxrIGNvbXBvbmVudHNcbiAgICAvLyBhbmQgcGF0Y2ggb25seSB0aGUgcGFyZW50IGNvbXBvbmVudCBjb250YWluZXJzIGZvdW5kIGluIHRoZSBkaWZmLlxuICAgIC8vIE90aGVyd2lzZSwgcGF0Y2ggZW50aXJlIExWIGNvbnRhaW5lci5cbiAgICBpZih0aGlzLnJlbmRlcmVkLmlzQ29tcG9uZW50T25seURpZmYoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJjb21wb25lbnQgcGF0Y2ggY29tcGxldGVcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgcGFyZW50Q2lkcyA9IERPTS5maW5kRXhpc3RpbmdQYXJlbnRDSURzKHRoaXMuZWwsIHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKSlcbiAgICAgICAgcGFyZW50Q2lkcy5mb3JFYWNoKHBhcmVudENJRCA9PiB7XG4gICAgICAgICAgaWYodGhpcy5jb21wb25lbnRQYXRjaCh0aGlzLnJlbmRlcmVkLmdldENvbXBvbmVudChkaWZmLCBwYXJlbnRDSUQpLCBwYXJlbnRDSUQpKXsgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWUgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIWlzRW1wdHkoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJmdWxsIHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKGRpZmYsIFwidXBkYXRlXCIpXG4gICAgICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIHRydWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgaWYocGh4Q2hpbGRyZW5BZGRlZCl7IHRoaXMuam9pbk5ld0NoaWxkcmVuKCkgfVxuICB9XG5cbiAgcmVuZGVyQ29udGFpbmVyKGRpZmYsIGtpbmQpe1xuICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQudGltZShgdG9TdHJpbmcgZGlmZiAoJHtraW5kfSlgLCAoKSA9PiB7XG4gICAgICBsZXQgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgICAvLyBEb24ndCBza2lwIGFueSBjb21wb25lbnQgaW4gdGhlIGRpZmYgbm9yIGFueSBtYXJrZWQgYXMgcHJ1bmVkXG4gICAgICAvLyAoYXMgdGhleSBtYXkgaGF2ZSBiZWVuIGFkZGVkIGJhY2spXG4gICAgICBsZXQgY2lkcyA9IGRpZmYgPyB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikgOiBudWxsXG4gICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJlZC50b1N0cmluZyhjaWRzKVxuICAgICAgcmV0dXJuIFtgPCR7dGFnfT4ke2h0bWx9PC8ke3RhZ30+YCwgc3RyZWFtc11cbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50UGF0Y2goZGlmZiwgY2lkKXtcbiAgICBpZihpc0VtcHR5KGRpZmYpKSByZXR1cm4gZmFsc2VcbiAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJlZC5jb21wb25lbnRUb1N0cmluZyhjaWQpXG4gICAgbGV0IHBhdGNoID0gbmV3IERPTVBhdGNoKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWQsIGh0bWwsIHN0cmVhbXMsIGNpZClcbiAgICBsZXQgY2hpbGRyZW5BZGRlZCA9IHRoaXMucGVyZm9ybVBhdGNoKHBhdGNoLCB0cnVlKVxuICAgIHJldHVybiBjaGlsZHJlbkFkZGVkXG4gIH1cblxuICBnZXRIb29rKGVsKXsgcmV0dXJuIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChlbCldIH1cblxuICBhZGRIb29rKGVsKXtcbiAgICBpZihWaWV3SG9vay5lbGVtZW50SUQoZWwpIHx8ICFlbC5nZXRBdHRyaWJ1dGUpeyByZXR1cm4gfVxuICAgIGxldCBob29rTmFtZSA9IGVsLmdldEF0dHJpYnV0ZShgZGF0YS1waHgtJHtQSFhfSE9PS31gKSB8fCBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9IT09LKSlcbiAgICBpZihob29rTmFtZSAmJiAhdGhpcy5vd25zRWxlbWVudChlbCkpeyByZXR1cm4gfVxuICAgIGxldCBjYWxsYmFja3MgPSB0aGlzLmxpdmVTb2NrZXQuZ2V0SG9va0NhbGxiYWNrcyhob29rTmFtZSlcblxuICAgIGlmKGNhbGxiYWNrcyl7XG4gICAgICBpZighZWwuaWQpeyBsb2dFcnJvcihgbm8gRE9NIElEIGZvciBob29rIFwiJHtob29rTmFtZX1cIi4gSG9va3MgcmVxdWlyZSBhIHVuaXF1ZSBJRCBvbiBlYWNoIGVsZW1lbnQuYCwgZWwpIH1cbiAgICAgIGxldCBob29rID0gbmV3IFZpZXdIb29rKHRoaXMsIGVsLCBjYWxsYmFja3MpXG4gICAgICB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldID0gaG9va1xuICAgICAgcmV0dXJuIGhvb2tcbiAgICB9IGVsc2UgaWYoaG9va05hbWUgIT09IG51bGwpe1xuICAgICAgbG9nRXJyb3IoYHVua25vd24gaG9vayBmb3VuZCBmb3IgXCIke2hvb2tOYW1lfVwiYCwgZWwpXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveUhvb2soaG9vayl7XG4gICAgaG9vay5fX2Rlc3Ryb3llZCgpXG4gICAgaG9vay5fX2NsZWFudXBfXygpXG4gICAgZGVsZXRlIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChob29rLmVsKV1cbiAgfVxuXG4gIGFwcGx5UGVuZGluZ1VwZGF0ZXMoKXtcbiAgICB0aGlzLnBlbmRpbmdEaWZmcy5mb3JFYWNoKCh7ZGlmZiwgZXZlbnRzfSkgPT4gdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKSlcbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5lYWNoQ2hpbGQoY2hpbGQgPT4gY2hpbGQuYXBwbHlQZW5kaW5nVXBkYXRlcygpKVxuICB9XG5cbiAgZWFjaENoaWxkKGNhbGxiYWNrKXtcbiAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gfHwge31cbiAgICBmb3IobGV0IGlkIGluIGNoaWxkcmVuKXsgY2FsbGJhY2sodGhpcy5nZXRDaGlsZEJ5SWQoaWQpKSB9XG4gIH1cblxuICBvbkNoYW5uZWwoZXZlbnQsIGNiKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQub25DaGFubmVsKHRoaXMuY2hhbm5lbCwgZXZlbnQsIHJlc3AgPT4ge1xuICAgICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkpe1xuICAgICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gY2IocmVzcCldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4gY2IocmVzcCkpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmRDaGFubmVsKCl7XG4gICAgLy8gVGhlIGRpZmYgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHJlZ3VsYXIgdXBkYXRlIG9wZXJhdGlvbnMuXG4gICAgLy8gQWxsIG90aGVyIG9wZXJhdGlvbnMgYXJlIHF1ZXVlZCB0byBiZSBhcHBsaWVkIG9ubHkgYWZ0ZXIgam9pbi5cbiAgICB0aGlzLmxpdmVTb2NrZXQub25DaGFubmVsKHRoaXMuY2hhbm5lbCwgXCJkaWZmXCIsIChyYXdEaWZmKSA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJhd0RpZmYsICh7ZGlmZiwgZXZlbnRzfSkgPT4gdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcInJlZGlyZWN0XCIsICh7dG8sIGZsYXNofSkgPT4gdGhpcy5vblJlZGlyZWN0KHt0bywgZmxhc2h9KSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcImxpdmVfcGF0Y2hcIiwgKHJlZGlyKSA9PiB0aGlzLm9uTGl2ZVBhdGNoKHJlZGlyKSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcImxpdmVfcmVkaXJlY3RcIiwgKHJlZGlyKSA9PiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlZGlyKSlcbiAgICB0aGlzLmNoYW5uZWwub25FcnJvcihyZWFzb24gPT4gdGhpcy5vbkVycm9yKHJlYXNvbikpXG4gICAgdGhpcy5jaGFubmVsLm9uQ2xvc2UocmVhc29uID0+IHRoaXMub25DbG9zZShyZWFzb24pKVxuICB9XG5cbiAgZGVzdHJveUFsbENoaWxkcmVuKCl7IHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmRlc3Ryb3koKSkgfVxuXG4gIG9uTGl2ZVJlZGlyZWN0KHJlZGlyKXtcbiAgICBsZXQge3RvLCBraW5kLCBmbGFzaH0gPSByZWRpclxuICAgIGxldCB1cmwgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KHVybCwga2luZCwgZmxhc2gpXG4gIH1cblxuICBvbkxpdmVQYXRjaChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZH0gPSByZWRpclxuICAgIHRoaXMuaHJlZiA9IHRoaXMuZXhwYW5kVVJMKHRvKVxuICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gIH1cblxuICBleHBhbmRVUkwodG8pe1xuICAgIHJldHVybiB0by5zdGFydHNXaXRoKFwiL1wiKSA/IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9JHt0b31gIDogdG9cbiAgfVxuXG4gIG9uUmVkaXJlY3Qoe3RvLCBmbGFzaH0peyB0aGlzLmxpdmVTb2NrZXQucmVkaXJlY3QodG8sIGZsYXNoKSB9XG5cbiAgaXNEZXN0cm95ZWQoKXsgcmV0dXJuIHRoaXMuZGVzdHJveWVkIH1cblxuICBqb2luRGVhZCgpeyB0aGlzLmlzRGVhZCA9IHRydWUgfVxuXG4gIGpvaW4oY2FsbGJhY2spe1xuICAgIHRoaXMuc2hvd0xvYWRlcih0aGlzLmxpdmVTb2NrZXQubG9hZGVyVGltZW91dClcbiAgICB0aGlzLmJpbmRDaGFubmVsKClcbiAgICBpZih0aGlzLmlzTWFpbigpKXtcbiAgICAgIHRoaXMuc3RvcENhbGxiYWNrID0gdGhpcy5saXZlU29ja2V0LndpdGhQYWdlTG9hZGluZyh7dG86IHRoaXMuaHJlZiwga2luZDogXCJpbml0aWFsXCJ9KVxuICAgIH1cbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IChvbkRvbmUpID0+IHtcbiAgICAgIG9uRG9uZSA9IG9uRG9uZSB8fCBmdW5jdGlvbigpe31cbiAgICAgIGNhbGxiYWNrID8gY2FsbGJhY2sodGhpcy5qb2luQ291bnQsIG9uRG9uZSkgOiBvbkRvbmUoKVxuICAgIH1cbiAgICB0aGlzLmxpdmVTb2NrZXQud3JhcFB1c2godGhpcywge3RpbWVvdXQ6IGZhbHNlfSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5qb2luKClcbiAgICAgICAgLnJlY2VpdmUoXCJva1wiLCBkYXRhID0+IHtcbiAgICAgICAgICBpZighdGhpcy5pc0Rlc3Ryb3llZCgpKXtcbiAgICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHRoaXMub25Kb2luKGRhdGEpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZXNwID0+ICF0aGlzLmlzRGVzdHJveWVkKCkgJiYgdGhpcy5vbkpvaW5FcnJvcihyZXNwKSlcbiAgICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+ICF0aGlzLmlzRGVzdHJveWVkKCkgJiYgdGhpcy5vbkpvaW5FcnJvcih7cmVhc29uOiBcInRpbWVvdXRcIn0pKVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW5FcnJvcihyZXNwKXtcbiAgICBpZihyZXNwLnJlYXNvbiA9PT0gXCJyZWxvYWRcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtgZmFpbGVkIG1vdW50IHdpdGggJHtyZXNwLnN0YXR1c30uIEZhbGxpbmcgYmFjayB0byBwYWdlIHJlcXVlc3RgLCByZXNwXSlcbiAgICAgIGlmKHRoaXMuaXNNYWluKCkpeyB0aGlzLm9uUmVkaXJlY3Qoe3RvOiB0aGlzLmhyZWZ9KSB9XG4gICAgICByZXR1cm5cbiAgICB9IGVsc2UgaWYocmVzcC5yZWFzb24gPT09IFwidW5hdXRob3JpemVkXCIgfHwgcmVzcC5yZWFzb24gPT09IFwic3RhbGVcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYXV0aG9yaXplZCBsaXZlX3JlZGlyZWN0LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0XCIsIHJlc3BdKVxuICAgICAgaWYodGhpcy5pc01haW4oKSl7IHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pIH1cbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZihyZXNwLnJlZGlyZWN0IHx8IHJlc3AubGl2ZV9yZWRpcmVjdCl7XG4gICAgICB0aGlzLmpvaW5QZW5kaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuY2hhbm5lbC5sZWF2ZSgpXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QpeyByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHJlc3AucmVkaXJlY3QpIH1cbiAgICBpZihyZXNwLmxpdmVfcmVkaXJlY3QpeyByZXR1cm4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICB0aGlzLmRpc3BsYXlFcnJvcihbUEhYX0xPQURJTkdfQ0xBU1MsIFBIWF9FUlJPUl9DTEFTUywgUEhYX1NFUlZFUl9FUlJPUl9DTEFTU10pXG4gICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ1bmFibGUgdG8gam9pblwiLCByZXNwXSlcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubGl2ZVNvY2tldC5yZWxvYWRXaXRoSml0dGVyKHRoaXMpIH1cbiAgfVxuXG4gIG9uQ2xvc2UocmVhc29uKXtcbiAgICBpZih0aGlzLmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHJlYXNvbiAhPT0gXCJsZWF2ZVwiKXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKVxuICAgIH1cbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5saXZlU29ja2V0LmRyb3BBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgbnVsbCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMVxuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpeyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSB9XG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICB0aGlzLnNob3dMb2FkZXIoQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVClcbiAgICB9XG4gIH1cblxuICBvbkVycm9yKHJlYXNvbil7XG4gICAgdGhpcy5vbkNsb3NlKHJlYXNvbilcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widmlldyBjcmFzaGVkXCIsIHJlYXNvbl0pIH1cbiAgICBpZighdGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkaXNwbGF5RXJyb3IoY2xhc3Nlcyl7XG4gICAgaWYodGhpcy5pc01haW4oKSl7IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsIHtkZXRhaWw6IHt0bzogdGhpcy5ocmVmLCBraW5kOiBcImVycm9yXCJ9fSkgfVxuICAgIHRoaXMuc2hvd0xvYWRlcigpXG4gICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImRpc2Nvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCBbcmVmLCBbZWxdLCBvcHRzXSA9IHJlZkdlbmVyYXRvciA/IHJlZkdlbmVyYXRvcigpIDogW251bGwsIFtdLCB7fV1cbiAgICBsZXQgb25Mb2FkaW5nRG9uZSA9IGZ1bmN0aW9uKCl7IH1cbiAgICBpZihvcHRzLnBhZ2VfbG9hZGluZyB8fCAoZWwgJiYgKGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORykpICE9PSBudWxsKSkpe1xuICAgICAgb25Mb2FkaW5nRG9uZSA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe2tpbmQ6IFwiZWxlbWVudFwiLCB0YXJnZXQ6IGVsfSlcbiAgICB9XG5cbiAgICBpZih0eXBlb2YgKHBheWxvYWQuY2lkKSAhPT0gXCJudW1iZXJcIil7IGRlbGV0ZSBwYXlsb2FkLmNpZCB9XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubGl2ZVNvY2tldC53cmFwUHVzaCh0aGlzLCB7dGltZW91dDogdHJ1ZX0sICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5wdXNoKGV2ZW50LCBwYXlsb2FkLCBQVVNIX1RJTUVPVVQpLnJlY2VpdmUoXCJva1wiLCByZXNwID0+IHtcbiAgICAgICAgICBsZXQgZmluaXNoID0gKGhvb2tSZXBseSkgPT4ge1xuICAgICAgICAgICAgaWYocmVzcC5yZWRpcmVjdCl7IHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcGF0Y2gpeyB0aGlzLm9uTGl2ZVBhdGNoKHJlc3AubGl2ZV9wYXRjaCkgfVxuICAgICAgICAgICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICAgICAgICAgIG9uTG9hZGluZ0RvbmUoKVxuICAgICAgICAgICAgb25SZXBseShyZXNwLCBob29rUmVwbHkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHJlc3AuZGlmZil7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJlc3AuZGlmZiwgKHtkaWZmLCByZXBseSwgZXZlbnRzfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKVxuICAgICAgICAgICAgICAgIGZpbmlzaChyZXBseSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICBmaW5pc2gobnVsbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHVuZG9SZWZzKHJlZil7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9IC8vIGV4aXQgaWYgZXh0ZXJuYWwgZm9ybSB0cmlnZ2VyZWRcblxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn09XCIke3JlZn1cIl1gLCBlbCA9PiB7XG4gICAgICBsZXQgZGlzYWJsZWRWYWwgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgbGV0IHJlYWRPbmx5VmFsID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9SRUFET05MWSlcbiAgICAgIC8vIHJlbW92ZSByZWZzXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGX1NSQylcbiAgICAgIC8vIHJlc3RvcmUgaW5wdXRzXG4gICAgICBpZihyZWFkT25seVZhbCAhPT0gbnVsbCl7XG4gICAgICAgIGVsLnJlYWRPbmx5ID0gcmVhZE9ubHlWYWwgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVBRE9OTFkpXG4gICAgICB9XG4gICAgICBpZihkaXNhYmxlZFZhbCAhPT0gbnVsbCl7XG4gICAgICAgIGVsLmRpc2FibGVkID0gZGlzYWJsZWRWYWwgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfRElTQUJMRUQpXG4gICAgICB9XG4gICAgICAvLyByZW1vdmUgY2xhc3Nlc1xuICAgICAgUEhYX0VWRU5UX0NMQVNTRVMuZm9yRWFjaChjbGFzc05hbWUgPT4gRE9NLnJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpKVxuICAgICAgLy8gcmVzdG9yZSBkaXNhYmxlc1xuICAgICAgbGV0IGRpc2FibGVSZXN0b3JlID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSlcbiAgICAgIGlmKGRpc2FibGVSZXN0b3JlICE9PSBudWxsKXtcbiAgICAgICAgZWwuaW5uZXJUZXh0ID0gZGlzYWJsZVJlc3RvcmVcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSlcbiAgICAgIH1cbiAgICAgIGxldCB0b0VsID0gRE9NLnByaXZhdGUoZWwsIFBIWF9SRUYpXG4gICAgICBpZih0b0VsKXtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLnRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGVsLCB0b0VsKVxuICAgICAgICBET01QYXRjaC5wYXRjaEVsKGVsLCB0b0VsLCB0aGlzLmxpdmVTb2NrZXQuZ2V0QWN0aXZlRWxlbWVudCgpKVxuICAgICAgICBpZihob29rKXsgaG9vay5fX3VwZGF0ZWQoKSB9XG4gICAgICAgIERPTS5kZWxldGVQcml2YXRlKGVsLCBQSFhfUkVGKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwdXRSZWYoZWxlbWVudHMsIGV2ZW50LCBvcHRzID0ge30pe1xuICAgIGxldCBuZXdSZWYgPSB0aGlzLnJlZisrXG4gICAgbGV0IGRpc2FibGVXaXRoID0gdGhpcy5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgaWYob3B0cy5sb2FkaW5nKXsgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoRE9NLmFsbChkb2N1bWVudCwgb3B0cy5sb2FkaW5nKSl9XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoYHBoeC0ke2V2ZW50fS1sb2FkaW5nYClcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUkVGLCBuZXdSZWYpXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHRoaXMuZWwuaWQpXG4gICAgICBsZXQgZGlzYWJsZVRleHQgPSBlbC5nZXRBdHRyaWJ1dGUoZGlzYWJsZVdpdGgpXG4gICAgICBpZihkaXNhYmxlVGV4dCAhPT0gbnVsbCl7XG4gICAgICAgIGlmKCFlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKSl7XG4gICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSwgZWwuaW5uZXJUZXh0KVxuICAgICAgICB9XG4gICAgICAgIGlmKGRpc2FibGVUZXh0ICE9PSBcIlwiKXsgZWwuaW5uZXJUZXh0ID0gZGlzYWJsZVRleHQgfVxuICAgICAgICAvLyBQSFhfRElTQUJMRUQgY291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0IGluIGRpc2FibGVGb3JtXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQpIHx8IGVsLmRpc2FibGVkKVxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIFtuZXdSZWYsIGVsZW1lbnRzLCBvcHRzXVxuICB9XG5cbiAgY29tcG9uZW50SUQoZWwpe1xuICAgIGxldCBjaWQgPSBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpXG4gICAgcmV0dXJuIGNpZCA/IHBhcnNlSW50KGNpZCkgOiBudWxsXG4gIH1cblxuICB0YXJnZXRDb21wb25lbnRJRCh0YXJnZXQsIHRhcmdldEN0eCwgb3B0cyA9IHt9KXtcbiAgICBpZihpc0NpZCh0YXJnZXRDdHgpKXsgcmV0dXJuIHRhcmdldEN0eCB9XG5cbiAgICBsZXQgY2lkT3JTZWxlY3RvciA9IG9wdHMudGFyZ2V0IHx8IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwidGFyZ2V0XCIpKVxuICAgIGlmKGlzQ2lkKGNpZE9yU2VsZWN0b3IpKXtcbiAgICAgIHJldHVybiBwYXJzZUludChjaWRPclNlbGVjdG9yKVxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHggJiYgKGNpZE9yU2VsZWN0b3IgIT09IG51bGwgfHwgb3B0cy50YXJnZXQpKXtcbiAgICAgIHJldHVybiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eCl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7XG4gICAgICByZXR1cm4gdGFyZ2V0Q3R4XG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCl7XG4gICAgICByZXR1cm4gbWF5YmUodGFyZ2V0Q3R4LmNsb3Nlc3QoYFske1BIWF9DT01QT05FTlR9XWApLCBlbCA9PiB0aGlzLm93bnNFbGVtZW50KGVsKSAmJiB0aGlzLmNvbXBvbmVudElEKGVsKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBwdXNoSG9va0V2ZW50KGVsLCB0YXJnZXRDdHgsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMubG9nKFwiaG9va1wiLCAoKSA9PiBbXCJ1bmFibGUgdG8gcHVzaCBob29rIGV2ZW50LiBMaXZlVmlldyBub3QgY29ubmVjdGVkXCIsIGV2ZW50LCBwYXlsb2FkXSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBsZXQgW3JlZiwgZWxzLCBvcHRzXSA9IHRoaXMucHV0UmVmKFtlbF0sIFwiaG9va1wiKVxuICAgIHRoaXMucHVzaFdpdGhSZXBseSgoKSA9PiBbcmVmLCBlbHMsIG9wdHNdLCBcImV2ZW50XCIsIHtcbiAgICAgIHR5cGU6IFwiaG9va1wiLFxuICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgdmFsdWU6IHBheWxvYWQsXG4gICAgICBjaWQ6IHRoaXMuY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eClcbiAgICB9LCAocmVzcCwgcmVwbHkpID0+IG9uUmVwbHkocmVwbHksIHJlZikpXG5cbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICBleHRyYWN0TWV0YShlbCwgbWV0YSwgdmFsdWUpe1xuICAgIGxldCBwcmVmaXggPSB0aGlzLmJpbmRpbmcoXCJ2YWx1ZS1cIilcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZWwuYXR0cmlidXRlcy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBsZXQgbmFtZSA9IGVsLmF0dHJpYnV0ZXNbaV0ubmFtZVxuICAgICAgaWYobmFtZS5zdGFydHNXaXRoKHByZWZpeCkpeyBtZXRhW25hbWUucmVwbGFjZShwcmVmaXgsIFwiXCIpXSA9IGVsLmdldEF0dHJpYnV0ZShuYW1lKSB9XG4gICAgfVxuICAgIGlmKGVsLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgIShlbCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkpe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbWV0YS52YWx1ZSA9IGVsLnZhbHVlXG5cbiAgICAgIGlmKGVsLnRhZ05hbWUgPT09IFwiSU5QVVRcIiAmJiBDSEVDS0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCAmJiAhZWwuY2hlY2tlZCl7XG4gICAgICAgIGRlbGV0ZSBtZXRhLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmKHZhbHVlKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIGZvcihsZXQga2V5IGluIHZhbHVlKXsgbWV0YVtrZXldID0gdmFsdWVba2V5XSB9XG4gICAgfVxuICAgIHJldHVybiBtZXRhXG4gIH1cblxuXG4gIHB1c2hFdmVudCh0eXBlLCBlbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgbWV0YSwgb3B0cyA9IHt9LCBvblJlcGx5KXtcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gdGhpcy5wdXRSZWYoW2VsXSwgdHlwZSwgb3B0cyksIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiB0aGlzLmV4dHJhY3RNZXRhKGVsLCBtZXRhLCBvcHRzLnZhbHVlKSxcbiAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChlbCwgdGFyZ2V0Q3R4LCBvcHRzKVxuICAgIH0sIChyZXNwLCByZXBseSkgPT4gb25SZXBseSAmJiBvblJlcGx5KHJlcGx5KSlcbiAgfVxuXG4gIHB1c2hGaWxlUHJvZ3Jlc3MoZmlsZUVsLCBlbnRyeVJlZiwgcHJvZ3Jlc3MsIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmaWxlRWwuZm9ybSwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgdmlldy5wdXNoV2l0aFJlcGx5KG51bGwsIFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICBldmVudDogZmlsZUVsLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoUEhYX1BST0dSRVNTKSksXG4gICAgICAgIHJlZjogZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJ5X3JlZjogZW50cnlSZWYsXG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzcyxcbiAgICAgICAgY2lkOiB2aWV3LnRhcmdldENvbXBvbmVudElEKGZpbGVFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9LCBvblJlcGx5KVxuICAgIH0pXG4gIH1cblxuICBwdXNoSW5wdXQoaW5wdXRFbCwgdGFyZ2V0Q3R4LCBmb3JjZUNpZCwgcGh4RXZlbnQsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBsZXQgdXBsb2Fkc1xuICAgIGxldCBjaWQgPSBpc0NpZChmb3JjZUNpZCkgPyBmb3JjZUNpZCA6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgsIG9wdHMpXG4gICAgbGV0IHJlZkdlbmVyYXRvciA9ICgpID0+IHRoaXMucHV0UmVmKFtpbnB1dEVsLCBpbnB1dEVsLmZvcm1dLCBcImNoYW5nZVwiLCBvcHRzKVxuICAgIGxldCBmb3JtRGF0YVxuICAgIGxldCBtZXRhICA9IHRoaXMuZXh0cmFjdE1ldGEoaW5wdXRFbC5mb3JtKVxuICAgIGlmKGlucHV0RWwgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCl7IG1ldGEuc3VibWl0dGVyID0gaW5wdXRFbCB9XG4gICAgaWYoaW5wdXRFbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKSl7XG4gICAgICBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oaW5wdXRFbC5mb3JtLCB7X3RhcmdldDogb3B0cy5fdGFyZ2V0LCAuLi5tZXRhfSwgW2lucHV0RWwubmFtZV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShpbnB1dEVsLmZvcm0sIHtfdGFyZ2V0OiBvcHRzLl90YXJnZXQsIC4uLm1ldGF9KVxuICAgIH1cbiAgICBpZihET00uaXNVcGxvYWRJbnB1dChpbnB1dEVsKSAmJiBpbnB1dEVsLmZpbGVzICYmIGlucHV0RWwuZmlsZXMubGVuZ3RoID4gMCl7XG4gICAgICBMaXZlVXBsb2FkZXIudHJhY2tGaWxlcyhpbnB1dEVsLCBBcnJheS5mcm9tKGlucHV0RWwuZmlsZXMpKVxuICAgIH1cbiAgICB1cGxvYWRzID0gTGl2ZVVwbG9hZGVyLnNlcmlhbGl6ZVVwbG9hZHMoaW5wdXRFbClcblxuICAgIGxldCBldmVudCA9IHtcbiAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgdXBsb2FkczogdXBsb2FkcyxcbiAgICAgIGNpZDogY2lkXG4gICAgfVxuICAgIHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIFwiZXZlbnRcIiwgZXZlbnQsIHJlc3AgPT4ge1xuICAgICAgRE9NLnNob3dFcnJvcihpbnB1dEVsLCB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSwgdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0dST1VQKSlcbiAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIERPTS5pc0F1dG9VcGxvYWQoaW5wdXRFbCkpe1xuICAgICAgICBpZihMaXZlVXBsb2FkZXIuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dEVsKS5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZXQgW3JlZiwgX2Vsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXMoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAoX3VwbG9hZHMpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3ApXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJBd2FpdGluZ1N1Ym1pdChpbnB1dEVsLmZvcm0pXG4gICAgICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmlnZ2VyQXdhaXRpbmdTdWJtaXQoZm9ybUVsKXtcbiAgICBsZXQgYXdhaXRpbmdTdWJtaXQgPSB0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpXG4gICAgaWYoYXdhaXRpbmdTdWJtaXQpe1xuICAgICAgbGV0IFtfZWwsIF9yZWYsIF9vcHRzLCBjYWxsYmFja10gPSBhd2FpdGluZ1N1Ym1pdFxuICAgICAgdGhpcy5jYW5jZWxTdWJtaXQoZm9ybUVsKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIGdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpe1xuICAgIHJldHVybiB0aGlzLmZvcm1TdWJtaXRzLmZpbmQoKFtlbCwgX3JlZiwgX29wdHMsIF9jYWxsYmFja10pID0+IGVsLmlzU2FtZU5vZGUoZm9ybUVsKSlcbiAgfVxuXG4gIHNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFjayl7XG4gICAgaWYodGhpcy5nZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKSl7IHJldHVybiB0cnVlIH1cbiAgICB0aGlzLmZvcm1TdWJtaXRzLnB1c2goW2Zvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFja10pXG4gIH1cblxuICBjYW5jZWxTdWJtaXQoZm9ybUVsKXtcbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gdGhpcy5mb3JtU3VibWl0cy5maWx0ZXIoKFtlbCwgcmVmLCBfY2FsbGJhY2tdKSA9PiB7XG4gICAgICBpZihlbC5pc1NhbWVOb2RlKGZvcm1FbCkpe1xuICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGZpbHRlcklnbm9yZWQgPSBlbCA9PiB7XG4gICAgICBsZXQgdXNlcklnbm9yZWQgPSBjbG9zZXN0UGh4QmluZGluZyhlbCwgYCR7dGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpfT1pZ25vcmVgLCBlbC5mb3JtKVxuICAgICAgcmV0dXJuICEodXNlcklnbm9yZWQgfHwgY2xvc2VzdFBoeEJpbmRpbmcoZWwsIFwiZGF0YS1waHgtdXBkYXRlPWlnbm9yZVwiLCBlbC5mb3JtKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckRpc2FibGVzID0gZWwgPT4ge1xuICAgICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSCkpXG4gICAgfVxuICAgIGxldCBmaWx0ZXJCdXR0b24gPSBlbCA9PiBlbC50YWdOYW1lID09IFwiQlVUVE9OXCJcblxuICAgIGxldCBmaWx0ZXJJbnB1dCA9IGVsID0+IFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5jbHVkZXMoZWwudGFnTmFtZSlcblxuICAgIGxldCBmb3JtRWxlbWVudHMgPSBBcnJheS5mcm9tKGZvcm1FbC5lbGVtZW50cylcbiAgICBsZXQgZGlzYWJsZXMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckRpc2FibGVzKVxuICAgIGxldCBidXR0b25zID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJCdXR0b24pLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuICAgIGxldCBpbnB1dHMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlcklucHV0KS5maWx0ZXIoZmlsdGVySWdub3JlZClcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGJ1dHRvbi5kaXNhYmxlZClcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICB9KVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFksIGlucHV0LnJlYWRPbmx5KVxuICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlXG4gICAgICBpZihpbnB1dC5maWxlcyl7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGlucHV0LmRpc2FibGVkKVxuICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIGZvcm1FbC5zZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9QQUdFX0xPQURJTkcpLCBcIlwiKVxuICAgIHJldHVybiB0aGlzLnB1dFJlZihbZm9ybUVsXS5jb25jYXQoZGlzYWJsZXMpLmNvbmNhdChidXR0b25zKS5jb25jYXQoaW5wdXRzKSwgXCJzdWJtaXRcIiwgb3B0cylcbiAgfVxuXG4gIHB1c2hGb3JtU3VibWl0KGZvcm1FbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgc3VibWl0dGVyLCBvcHRzLCBvblJlcGx5KXtcbiAgICBsZXQgcmVmR2VuZXJhdG9yID0gKCkgPT4gdGhpcy5kaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMpXG4gICAgbGV0IGNpZCA9IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZm9ybUVsLCB0YXJnZXRDdHgpXG4gICAgaWYoTGl2ZVVwbG9hZGVyLmhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCkpe1xuICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwdXNoID0gKCkgPT4gdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtRWwsIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgb25SZXBseSlcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBwdXNoKVxuICAgIH0gZWxzZSBpZihMaXZlVXBsb2FkZXIuaW5wdXRzQXdhaXRpbmdQcmVmbGlnaHQoZm9ybUVsKS5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBbcmVmLCBlbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwcm94eVJlZkdlbiA9ICgpID0+IFtyZWYsIGVscywgb3B0c11cbiAgICAgIHRoaXMudXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAodXBsb2FkcykgPT4ge1xuICAgICAgICAvLyBpZiB3ZSBzdGlsbCBoYXZpbmcgcGVuZGluZyBwcmVmbGlnaHRzIGl0IG1lYW5zIHdlIGhhdmUgaW52YWxpZCBlbnRyaWVzXG4gICAgICAgIC8vIGFuZCB0aGUgcGh4LXN1Ym1pdCBjYW5ub3QgYmUgY29tcGxldGVkXG4gICAgICAgIGlmKExpdmVVcGxvYWRlci5pbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpLmxlbmd0aCA+IDApe1xuICAgICAgICAgIHJldHVybiB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWV0YSA9IHRoaXMuZXh0cmFjdE1ldGEoZm9ybUVsKVxuICAgICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlciwgLi4ubWV0YX0pXG4gICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShwcm94eVJlZkdlbiwgXCJldmVudFwiLCB7XG4gICAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgICAgICBjaWQ6IGNpZFxuICAgICAgICB9LCBvblJlcGx5KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIShmb3JtRWwuaGFzQXR0cmlidXRlKFBIWF9SRUYpICYmIGZvcm1FbC5jbGFzc0xpc3QuY29udGFpbnMoXCJwaHgtc3VibWl0LWxvYWRpbmdcIikpKXtcbiAgICAgIGxldCBtZXRhID0gdGhpcy5leHRyYWN0TWV0YShmb3JtRWwpXG4gICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlciwgLi4ubWV0YX0pXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIHtcbiAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICBjaWQ6IGNpZFxuICAgICAgfSwgb25SZXBseSlcbiAgICB9XG4gIH1cblxuICB1cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIG9uQ29tcGxldGUpe1xuICAgIGxldCBqb2luQ291bnRBdFVwbG9hZCA9IHRoaXMuam9pbkNvdW50XG4gICAgbGV0IGlucHV0RWxzID0gTGl2ZVVwbG9hZGVyLmFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKVxuICAgIGxldCBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9IGlucHV0RWxzLmxlbmd0aFxuXG4gICAgLy8gZ2V0IGVhY2ggZmlsZSBpbnB1dFxuICAgIGlucHV0RWxzLmZvckVhY2goaW5wdXRFbCA9PiB7XG4gICAgICBsZXQgdXBsb2FkZXIgPSBuZXcgTGl2ZVVwbG9hZGVyKGlucHV0RWwsIHRoaXMsICgpID0+IHtcbiAgICAgICAgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MtLVxuICAgICAgICBpZihudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9PT0gMCl7IG9uQ29tcGxldGUoKSB9XG4gICAgICB9KTtcblxuICAgICAgbGV0IGVudHJpZXMgPSB1cGxvYWRlci5lbnRyaWVzKCkubWFwKGVudHJ5ID0+IGVudHJ5LnRvUHJlZmxpZ2h0UGF5bG9hZCgpKVxuXG4gICAgICBpZihlbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcy0tXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcbiAgICAgICAgcmVmOiBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChpbnB1dEVsLmZvcm0sIHRhcmdldEN0eClcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wic2VuZGluZyBwcmVmbGlnaHQgcmVxdWVzdFwiLCBwYXlsb2FkXSlcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiYWxsb3dfdXBsb2FkXCIsIHBheWxvYWQsIHJlc3AgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbXCJnb3QgcHJlZmxpZ2h0IHJlc3BvbnNlXCIsIHJlc3BdKVxuICAgICAgICAvLyB0aGUgcHJlZmxpZ2h0IHdpbGwgcmVqZWN0IGVudHJpZXMgYmV5b25kIHRoZSBtYXggZW50cmllc1xuICAgICAgICAvLyBzbyB3ZSBlcnJvciBhbmQgY2FuY2VsIGVudHJpZXMgb24gdGhlIGNsaWVudCB0aGF0IGFyZSBtaXNzaW5nIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICAgIHVwbG9hZGVyLmVudHJpZXMoKS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICBpZihyZXNwLmVudHJpZXMgJiYgIXJlc3AuZW50cmllc1tlbnRyeS5yZWZdKXtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRmFpbGVkRW50cnlQcmVmbGlnaHQoZW50cnkucmVmLCBcImZhaWxlZCBwcmVmbGlnaHRcIiwgdXBsb2FkZXIpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAvLyBmb3IgYXV0byB1cGxvYWRzLCB3ZSBtYXkgaGF2ZSBhbiBlbXB0eSBlbnRyaWVzIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICAgICAgICAvLyBmb3IgZm9ybSBzdWJtaXRzIHRoYXQgY29udGFpbiBpbnZhbGlkIGVudHJpZXNcbiAgICAgICAgaWYocmVzcC5lcnJvciB8fCBPYmplY3Qua2V5cyhyZXNwLmVudHJpZXMpLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgICAgdGhpcy51bmRvUmVmcyhyZWYpXG4gICAgICAgICAgbGV0IGVycm9ycyA9IHJlc3AuZXJyb3IgfHwgW11cbiAgICAgICAgICBlcnJvcnMubWFwKChbZW50cnlfcmVmLCByZWFzb25dKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZhaWxlZEVudHJ5UHJlZmxpZ2h0KGVudHJ5X3JlZiwgcmVhc29uLCB1cGxvYWRlcilcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBvbkVycm9yID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWwub25FcnJvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSBqb2luQ291bnRBdFVwbG9hZCl7IGNhbGxiYWNrKCkgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBsb2FkZXIuaW5pdEFkYXB0ZXJVcGxvYWQocmVzcCwgb25FcnJvciwgdGhpcy5saXZlU29ja2V0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVGYWlsZWRFbnRyeVByZWZsaWdodCh1cGxvYWRSZWYsIHJlYXNvbiwgdXBsb2FkZXIpe1xuICAgIGlmKHVwbG9hZGVyLmlzQXV0b1VwbG9hZCgpKXtcbiAgICAgIC8vIHVwbG9hZFJlZiBtYXkgYmUgdG9wIGxldmVsIHVwbG9hZCBjb25maWcgcmVmIG9yIGVudHJ5IHJlZlxuICAgICAgbGV0IGVudHJ5ID0gdXBsb2FkZXIuZW50cmllcygpLmZpbmQoZW50cnkgPT4gZW50cnkucmVmID09PSB1cGxvYWRSZWYudG9TdHJpbmcoKSlcbiAgICAgIGlmKGVudHJ5KXsgZW50cnkuY2FuY2VsKCkgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1cGxvYWRlci5lbnRyaWVzKCkubWFwKGVudHJ5ID0+IGVudHJ5LmNhbmNlbCgpKVxuICAgIH1cbiAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbYGVycm9yIGZvciBlbnRyeSAke3VwbG9hZFJlZn1gLCByZWFzb25dKVxuICB9XG5cbiAgZGlzcGF0Y2hVcGxvYWRzKHRhcmdldEN0eCwgbmFtZSwgZmlsZXNPckJsb2JzKXtcbiAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IHRoaXMudGFyZ2V0Q3R4RWxlbWVudCh0YXJnZXRDdHgpIHx8IHRoaXMuZWxcbiAgICBsZXQgaW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHModGFyZ2V0RWxlbWVudCkuZmlsdGVyKGVsID0+IGVsLm5hbWUgPT09IG5hbWUpXG4gICAgaWYoaW5wdXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBubyBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgaWYoaW5wdXRzLmxlbmd0aCA+IDEpeyBsb2dFcnJvcihgZHVwbGljYXRlIGxpdmUgZmlsZSBpbnB1dHMgZm91bmQgbWF0Y2hpbmcgdGhlIG5hbWUgXCIke25hbWV9XCJgKSB9XG4gICAgZWxzZSB7IERPTS5kaXNwYXRjaEV2ZW50KGlucHV0c1swXSwgUEhYX1RSQUNLX1VQTE9BRFMsIHtkZXRhaWw6IHtmaWxlczogZmlsZXNPckJsb2JzfX0pIH1cbiAgfVxuXG4gIHRhcmdldEN0eEVsZW1lbnQodGFyZ2V0Q3R4KSB7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7XG4gICAgICBsZXQgW3RhcmdldF0gPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIHRhcmdldEN0eClcbiAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4KSB7XG4gICAgICByZXR1cm4gdGFyZ2V0Q3R4XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgcHVzaEZvcm1SZWNvdmVyeShmb3JtLCBuZXdDaWQsIGNhbGxiYWNrKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQud2l0aGluT3duZXJzKGZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICAgIGxldCBpbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbHRlcihlbCA9PiBET00uaXNGb3JtSW5wdXQoZWwpICYmIGVsLm5hbWUgJiYgIWVsLmhhc0F0dHJpYnV0ZShwaHhDaGFuZ2UpKVxuICAgICAgaWYoaW5wdXRzLmxlbmd0aCA9PT0gMCl7IHJldHVybiB9XG5cbiAgICAgIC8vIHdlIG11c3QgY2xlYXIgdHJhY2tlZCB1cGxvYWRzIGJlZm9yZSByZWNvdmVyeSBhcyB0aGV5IG5vIGxvbmdlciBoYXZlIHZhbGlkIHJlZnNcbiAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IGlucHV0Lmhhc0F0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikgJiYgTGl2ZVVwbG9hZGVyLmNsZWFyRmlsZXMoaW5wdXQpKVxuICAgICAgbGV0IGlucHV0ID0gaW5wdXRzLmZpbmQoZWwgPT4gZWwudHlwZSAhPT0gXCJoaWRkZW5cIikgfHwgaW5wdXRzWzBdXG5cbiAgICAgIGxldCBwaHhFdmVudCA9IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgfHwgZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuICAgICAgSlMuZXhlYyhcImNoYW5nZVwiLCBwaHhFdmVudCwgdmlldywgaW5wdXQsIFtcInB1c2hcIiwge190YXJnZXQ6IGlucHV0Lm5hbWUsIG5ld0NpZDogbmV3Q2lkLCBjYWxsYmFjazogY2FsbGJhY2t9XSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaExpbmtQYXRjaChocmVmLCB0YXJnZXRFbCwgY2FsbGJhY2spe1xuICAgIGxldCBsaW5rUmVmID0gdGhpcy5saXZlU29ja2V0LnNldFBlbmRpbmdMaW5rKGhyZWYpXG4gICAgbGV0IHJlZkdlbiA9IHRhcmdldEVsID8gKCkgPT4gdGhpcy5wdXRSZWYoW3RhcmdldEVsXSwgXCJjbGlja1wiKSA6IG51bGxcbiAgICBsZXQgZmFsbGJhY2sgPSAoKSA9PiB0aGlzLmxpdmVTb2NrZXQucmVkaXJlY3Qod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgbGV0IHVybCA9IGhyZWYuc3RhcnRzV2l0aChcIi9cIikgPyBgJHtsb2NhdGlvbi5wcm90b2NvbH0vLyR7bG9jYXRpb24uaG9zdH0ke2hyZWZ9YCA6IGhyZWZcblxuICAgIGxldCBwdXNoID0gdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbiwgXCJsaXZlX3BhdGNoXCIsIHt1cmx9LCByZXNwID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYocmVzcC5saW5rX3JlZGlyZWN0KXtcbiAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgY2FsbGJhY2ssIGxpbmtSZWYpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYodGhpcy5saXZlU29ja2V0LmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXtcbiAgICAgICAgICAgIHRoaXMuaHJlZiA9IGhyZWZcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcbiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhsaW5rUmVmKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihwdXNoKXtcbiAgICAgIHB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwgZmFsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGZhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBmb3Jtc0ZvclJlY292ZXJ5KGh0bWwpe1xuICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSAwKXsgcmV0dXJuIFtdIH1cblxuICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG5cbiAgICByZXR1cm4gKFxuICAgICAgRE9NLmFsbCh0aGlzLmVsLCBgZm9ybVske3BoeENoYW5nZX1dYClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uaWQgJiYgdGhpcy5vd25zRWxlbWVudChmb3JtKSlcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgIT09IFwiaWdub3JlXCIpXG4gICAgICAgIC5tYXAoZm9ybSA9PiB7XG4gICAgICAgICAgLy8gYXR0cmlidXRlIGdpdmVuIHZpYSBKUyBtb2R1bGUgbmVlZHMgdG8gYmUgZXNjYXBlZCBhcyBpdCBjb250YWlucyB0aGUgc3ltYm9scyBbXVwiLFxuICAgICAgICAgIC8vIHdoaWNoIHJlc3VsdCBpbiBhbiBpbnZhbGlkIGNzcyBzZWxlY3RvciBvdGhlcndpc2UuXG4gICAgICAgICAgY29uc3QgcGh4Q2hhbmdlVmFsdWUgPSBDU1MuZXNjYXBlKGZvcm0uZ2V0QXR0cmlidXRlKHBoeENoYW5nZSkpXG4gICAgICAgICAgbGV0IG5ld0Zvcm0gPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1baWQ9XCIke2Zvcm0uaWR9XCJdWyR7cGh4Q2hhbmdlfT1cIiR7cGh4Q2hhbmdlVmFsdWV9XCJdYClcbiAgICAgICAgICBpZihuZXdGb3JtKXtcbiAgICAgICAgICAgIHJldHVybiBbZm9ybSwgbmV3Rm9ybSwgdGhpcy50YXJnZXRDb21wb25lbnRJRChuZXdGb3JtKV1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBmb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKGZvcm0pXVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0pID0+IG5ld0Zvcm0pXG4gICAgKVxuICB9XG5cbiAgbWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKXtcbiAgICBsZXQgd2lsbERlc3Ryb3lDSURzID0gZGVzdHJveWVkQ0lEcy5maWx0ZXIoY2lkID0+IHtcbiAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgfSlcblxuICAgIGlmKHdpbGxEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgIC8vIHdlIG11c3QgcmVzZXQgdGhlIHJlbmRlciBjaGFuZ2UgdHJhY2tpbmcgZm9yIGNpZHMgdGhhdFxuICAgICAgLy8gY291bGQgYmUgYWRkZWQgYmFjayBmcm9tIHRoZSBzZXJ2ZXIgc28gd2UgZG9uJ3Qgc2tpcCB0aGVtXG4gICAgICB3aWxsRGVzdHJveUNJRHMuZm9yRWFjaChjaWQgPT4gdGhpcy5yZW5kZXJlZC5yZXNldFJlbmRlcihjaWQpKVxuXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX3dpbGxfZGVzdHJveVwiLCB7Y2lkczogd2lsbERlc3Ryb3lDSURzfSwgKCkgPT4ge1xuICAgICAgICAvLyBTZWUgaWYgYW55IG9mIHRoZSBjaWRzIHdlIHdhbnRlZCB0byBkZXN0cm95IHdlcmUgYWRkZWQgYmFjayxcbiAgICAgICAgLy8gaWYgdGhleSB3ZXJlIGFkZGVkIGJhY2ssIHdlIGRvbid0IGFjdHVhbGx5IGRlc3Ryb3kgdGhlbS5cbiAgICAgICAgbGV0IGNvbXBsZXRlbHlEZXN0cm95Q0lEcyA9IHdpbGxEZXN0cm95Q0lEcy5maWx0ZXIoY2lkID0+IHtcbiAgICAgICAgICByZXR1cm4gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBjaWQpLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGNvbXBsZXRlbHlEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX2Rlc3Ryb3llZFwiLCB7Y2lkczogY29tcGxldGVseURlc3Ryb3lDSURzfSwgKHJlc3ApID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWQucHJ1bmVDSURzKHJlc3AuY2lkcylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG93bnNFbGVtZW50KGVsKXtcbiAgICBsZXQgcGFyZW50Vmlld0VsID0gZWwuY2xvc2VzdChQSFhfVklFV19TRUxFQ1RPUilcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpID09PSB0aGlzLmlkIHx8XG4gICAgICAocGFyZW50Vmlld0VsICYmIHBhcmVudFZpZXdFbC5pZCA9PT0gdGhpcy5pZCkgfHxcbiAgICAgICghcGFyZW50Vmlld0VsICYmIHRoaXMuaXNEZWFkKVxuICB9XG5cbiAgc3VibWl0Rm9ybShmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMgPSB7fSl7XG4gICAgRE9NLnB1dFByaXZhdGUoZm9ybSwgUEhYX0hBU19TVUJNSVRURUQsIHRydWUpXG4gICAgY29uc3QgcGh4RmVlZGJhY2tGb3IgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGNvbnN0IHBoeEZlZWRiYWNrR3JvdXAgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfR1JPVVApXG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5wdXRQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSkpXG4gICAgdGhpcy5saXZlU29ja2V0LmJsdXJBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsICgpID0+IHtcbiAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5zaG93RXJyb3IoaW5wdXQsIHBoeEZlZWRiYWNrRm9yLCBwaHhGZWVkYmFja0dyb3VwKSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXN0b3JlUHJldmlvdXNseUFjdGl2ZUZvY3VzKClcbiAgICB9KVxuICB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKGtpbmQpIH1cbn1cbiIsICIvKiogSW5pdGlhbGl6ZXMgdGhlIExpdmVTb2NrZXRcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVuZFBvaW50IC0gVGhlIHN0cmluZyBXZWJTb2NrZXQgZW5kcG9pbnQsIGllLCBgXCJ3c3M6Ly9leGFtcGxlLmNvbS9saXZlXCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIi9saXZlXCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtQaG9lbml4LlNvY2tldH0gc29ja2V0IC0gdGhlIHJlcXVpcmVkIFBob2VuaXggU29ja2V0IGNsYXNzIGltcG9ydGVkIGZyb20gXCJwaG9lbml4XCIuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuICogICAgIGltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbiAqICAgICBsZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7Li4ufSlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvbi4gT3V0c2lkZSBvZiBrZXlzIGxpc3RlZCBiZWxvdywgYWxsXG4gKiBjb25maWd1cmF0aW9uIGlzIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgUGhvZW5peCBTb2NrZXQgY29uc3RydWN0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuZGVmYXVsdHNdIC0gVGhlIG9wdGlvbmFsIGRlZmF1bHRzIHRvIHVzZSBmb3IgdmFyaW91cyBiaW5kaW5ncyxcbiAqIHN1Y2ggYXMgYHBoeC1kZWJvdW5jZWAuIFN1cHBvcnRzIHRoZSBmb2xsb3dpbmcga2V5czpcbiAqXG4gKiAgIC0gZGVib3VuY2UgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LWRlYm91bmNlIHRpbWUuIERlZmF1bHRzIDMwMFxuICogICAtIHRocm90dGxlIC0gdGhlIG1pbGxpc2Vjb25kIHBoeC10aHJvdHRsZSB0aW1lLiBEZWZhdWx0cyAzMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5wYXJhbXNdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBwYXNzaW5nIGNvbm5lY3QgcGFyYW1zLlxuICogVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIExpdmVWaWV3LiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgKGVsKSA9PiB7dmlldzogZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1teS12aWV3LW5hbWVcIiwgdG9rZW46IHdpbmRvdy5teVRva2VufVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iaW5kaW5nUHJlZml4XSAtIFRoZSBvcHRpb25hbCBwcmVmaXggdG8gdXNlIGZvciBhbGwgcGh4IERPTSBhbm5vdGF0aW9ucy5cbiAqIERlZmF1bHRzIHRvIFwicGh4LVwiLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmhvb2tzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IGhvb2sgY2FsbGJhY2tzLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVwbG9hZGVyc10gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IGZvciByZWZlcmVuY2luZyBMaXZlVmlldyB1cGxvYWRlciBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmxvYWRlclRpbWVvdXRdIC0gVGhlIG9wdGlvbmFsIGRlbGF5IGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhcHBseVxuICogbG9hZGluZyBzdGF0ZXMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLm1heFJlbG9hZHNdIC0gVGhlIG1heGltdW0gcmVsb2FkcyBiZWZvcmUgZW50ZXJpbmcgZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMucmVsb2FkSml0dGVyTWluXSAtIFRoZSBtaW5pbXVtIHRpbWUgYmV0d2VlbiBub3JtYWwgcmVsb2FkIGF0dGVtcHRzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNYXhdIC0gVGhlIG1heGltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmZhaWxzYWZlSml0dGVyXSAtIFRoZSB0aW1lIGJldHdlZW4gcmVsb2FkIGF0dGVtcHRzIGluIGZhaWxzYWZlIG1vZGUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy52aWV3TG9nZ2VyXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0byBsb2cgZGVidWcgaW5mb3JtYXRpb24uIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAodmlldywga2luZCwgbXNnLCBvYmopID0+IGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubWV0YWRhdGFdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGZ1bmN0aW9ucyBmb3JcbiAqIHBvcHVsYXRpbmcgZXZlbnQgbWV0YWRhdGEuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBtZXRhZGF0YToge1xuICogICAgICAgY2xpY2s6IChlLCBlbCkgPT4ge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgZGV0YWlsOiBlLmRldGFpbCB8fCAxLFxuICogICAgICAgICB9XG4gKiAgICAgICB9LFxuICogICAgICAga2V5ZG93bjogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAga2V5OiBlLmtleSxcbiAqICAgICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXG4gKiAgICAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxuICogICAgICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuc2Vzc2lvblN0b3JhZ2VdIC0gQW4gb3B0aW9uYWwgU3RvcmFnZSBjb21wYXRpYmxlIG9iamVjdFxuICogVXNlZnVsIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYHNlc3Npb25TdG9yYWdlYC4gIEZvciBleGFtcGxlLCBUaGlzIGNvdWxkXG4gKiBoYXBwZW4gaWYgYSBzaXRlIGxvYWRzIGEgY3Jvc3MtZG9tYWluIExpdmVWaWV3IGluIGFuIGlmcmFtZS4gIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICAgIGNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gKiAgICAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy5zdG9yYWdlID0ge30gfVxuICogICAgICAgZ2V0SXRlbShrZXlOYW1lKSB7IHJldHVybiB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfHwgbnVsbCB9XG4gKiAgICAgICByZW1vdmVJdGVtKGtleU5hbWUpIHsgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB9XG4gKiAgICAgICBzZXRJdGVtKGtleU5hbWUsIGtleVZhbHVlKSB7IHRoaXMuc3RvcmFnZVtrZXlOYW1lXSA9IGtleVZhbHVlIH1cbiAqICAgICB9XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmxvY2FsU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgZm9yIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYGxvY2FsU3RvcmFnZWAuXG4gKiBTZWUgYG9wdHMuc2Vzc2lvblN0b3JhZ2VgIGZvciBleGFtcGxlcy5cbiovXG5cbmltcG9ydCB7XG4gIEJJTkRJTkdfUFJFRklYLFxuICBDT05TRUNVVElWRV9SRUxPQURTLFxuICBERUZBVUxUUyxcbiAgRkFJTFNBRkVfSklUVEVSLFxuICBMT0FERVJfVElNRU9VVCxcbiAgTUFYX1JFTE9BRFMsXG4gIFBIWF9ERUJPVU5DRSxcbiAgUEhYX0RST1BfVEFSR0VULFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9LRVksXG4gIFBIWF9MSU5LX1NUQVRFLFxuICBQSFhfTElWRV9MSU5LLFxuICBQSFhfTFZfREVCVUcsXG4gIFBIWF9MVl9MQVRFTkNZX1NJTSxcbiAgUEhYX0xWX1BST0ZJTEUsXG4gIFBIWF9NQUlOLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9USFJPVFRMRSxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfRkVFREJBQ0tfR1JPVVAsXG4gIFJFTE9BRF9KSVRURVJfTUlOLFxuICBSRUxPQURfSklUVEVSX01BWCxcbiAgUEhYX1JFRixcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBjbG9zdXJlLFxuICBkZWJ1ZyxcbiAgbWF5YmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQnJvd3NlciBmcm9tIFwiLi9icm93c2VyXCJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBIb29rcyBmcm9tIFwiLi9ob29rc1wiXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IFZpZXcgZnJvbSBcIi4vdmlld1wiXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlU29ja2V0IHtcbiAgY29uc3RydWN0b3IodXJsLCBwaHhTb2NrZXQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy51bmxvYWRlZCA9IGZhbHNlXG4gICAgaWYoIXBoeFNvY2tldCB8fCBwaHhTb2NrZXQuY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIil7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFxuICAgICAgYSBwaG9lbml4IFNvY2tldCBtdXN0IGJlIHByb3ZpZGVkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gdGhlIExpdmVTb2NrZXQgY29uc3RydWN0b3IuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgaW1wb3J0IHtTb2NrZXR9IGZyb20gXCJwaG9lbml4XCJcbiAgICAgICAgICBpbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG4gICAgICAgICAgbGV0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChcIi9saXZlXCIsIFNvY2tldCwgey4uLn0pXG4gICAgICBgKVxuICAgIH1cbiAgICB0aGlzLnNvY2tldCA9IG5ldyBwaHhTb2NrZXQodXJsLCBvcHRzKVxuICAgIHRoaXMuYmluZGluZ1ByZWZpeCA9IG9wdHMuYmluZGluZ1ByZWZpeCB8fCBCSU5ESU5HX1BSRUZJWFxuICAgIHRoaXMub3B0cyA9IG9wdHNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUob3B0cy5wYXJhbXMgfHwge30pXG4gICAgdGhpcy52aWV3TG9nZ2VyID0gb3B0cy52aWV3TG9nZ2VyXG4gICAgdGhpcy5tZXRhZGF0YUNhbGxiYWNrcyA9IG9wdHMubWV0YWRhdGEgfHwge31cbiAgICB0aGlzLmRlZmF1bHRzID0gT2JqZWN0LmFzc2lnbihjbG9uZShERUZBVUxUUyksIG9wdHMuZGVmYXVsdHMgfHwge30pXG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbFxuICAgIHRoaXMucHJldkFjdGl2ZSA9IG51bGxcbiAgICB0aGlzLnNpbGVuY2VkID0gZmFsc2VcbiAgICB0aGlzLm1haW4gPSBudWxsXG4gICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgIHRoaXMubGlua1JlZiA9IDFcbiAgICB0aGlzLnJvb3RzID0ge31cbiAgICB0aGlzLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgIHRoaXMucGVuZGluZ0xpbmsgPSBudWxsXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZSh3aW5kb3cubG9jYXRpb24pXG4gICAgdGhpcy5ob29rcyA9IG9wdHMuaG9va3MgfHwge31cbiAgICB0aGlzLnVwbG9hZGVycyA9IG9wdHMudXBsb2FkZXJzIHx8IHt9XG4gICAgdGhpcy5sb2FkZXJUaW1lb3V0ID0gb3B0cy5sb2FkZXJUaW1lb3V0IHx8IExPQURFUl9USU1FT1VUXG4gICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5tYXhSZWxvYWRzID0gb3B0cy5tYXhSZWxvYWRzIHx8IE1BWF9SRUxPQURTXG4gICAgdGhpcy5yZWxvYWRKaXR0ZXJNaW4gPSBvcHRzLnJlbG9hZEppdHRlck1pbiB8fCBSRUxPQURfSklUVEVSX01JTlxuICAgIHRoaXMucmVsb2FkSml0dGVyTWF4ID0gb3B0cy5yZWxvYWRKaXR0ZXJNYXggfHwgUkVMT0FEX0pJVFRFUl9NQVhcbiAgICB0aGlzLmZhaWxzYWZlSml0dGVyID0gb3B0cy5mYWlsc2FmZUppdHRlciB8fCBGQUlMU0FGRV9KSVRURVJcbiAgICB0aGlzLmxvY2FsU3RvcmFnZSA9IG9wdHMubG9jYWxTdG9yYWdlIHx8IHdpbmRvdy5sb2NhbFN0b3JhZ2VcbiAgICB0aGlzLnNlc3Npb25TdG9yYWdlID0gb3B0cy5zZXNzaW9uU3RvcmFnZSB8fCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2VcbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSBmYWxzZVxuICAgIHRoaXMuZG9tQ2FsbGJhY2tzID0gT2JqZWN0LmFzc2lnbih7b25Ob2RlQWRkZWQ6IGNsb3N1cmUoKSwgb25CZWZvcmVFbFVwZGF0ZWQ6IGNsb3N1cmUoKX0sIG9wdHMuZG9tIHx8IHt9KVxuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgVHJhbnNpdGlvblNldCgpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBfZSA9PiB7XG4gICAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5zb2NrZXQub25PcGVuKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuaXNVbmxvYWRlZCgpKXtcbiAgICAgICAgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGUgYW5kIGJyb3dzZXIgZG9lcyBub3QgZW1pdCBcInBhZ2VzaG93XCJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHB1YmxpY1xuXG4gIGlzUHJvZmlsZUVuYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfUFJPRklMRSkgPT09IFwidHJ1ZVwiIH1cblxuICBpc0RlYnVnRW5hYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9ERUJVRykgPT09IFwidHJ1ZVwiIH1cblxuICBpc0RlYnVnRGlzYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfREVCVUcpID09PSBcImZhbHNlXCIgfVxuXG4gIGVuYWJsZURlYnVnKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfREVCVUcsIFwidHJ1ZVwiKSB9XG5cbiAgZW5hYmxlUHJvZmlsaW5nKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfUFJPRklMRSwgXCJ0cnVlXCIpIH1cblxuICBkaXNhYmxlRGVidWcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9ERUJVRywgXCJmYWxzZVwiKSB9XG5cbiAgZGlzYWJsZVByb2ZpbGluZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oUEhYX0xWX1BST0ZJTEUpIH1cblxuICBlbmFibGVMYXRlbmN5U2ltKHVwcGVyQm91bmRNcyl7XG4gICAgdGhpcy5lbmFibGVEZWJ1ZygpXG4gICAgY29uc29sZS5sb2coXCJsYXRlbmN5IHNpbXVsYXRvciBlbmFibGVkIGZvciB0aGUgZHVyYXRpb24gb2YgdGhpcyBicm93c2VyIHNlc3Npb24uIENhbGwgZGlzYWJsZUxhdGVuY3lTaW0oKSB0byBkaXNhYmxlXCIpXG4gICAgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9MQVRFTkNZX1NJTSwgdXBwZXJCb3VuZE1zKVxuICB9XG5cbiAgZGlzYWJsZUxhdGVuY3lTaW0oKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFBIWF9MVl9MQVRFTkNZX1NJTSkgfVxuXG4gIGdldExhdGVuY3lTaW0oKXtcbiAgICBsZXQgc3RyID0gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9MQVRFTkNZX1NJTSlcbiAgICByZXR1cm4gc3RyID8gcGFyc2VJbnQoc3RyKSA6IG51bGxcbiAgfVxuXG4gIGdldFNvY2tldCgpeyByZXR1cm4gdGhpcy5zb2NrZXQgfVxuXG4gIGNvbm5lY3QoKXtcbiAgICAvLyBlbmFibGUgZGVidWcgYnkgZGVmYXVsdCBpZiBvbiBsb2NhbGhvc3QgYW5kIG5vdCBleHBsaWNpdGx5IGRpc2FibGVkXG4gICAgaWYod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSBcImxvY2FsaG9zdFwiICYmICF0aGlzLmlzRGVidWdEaXNhYmxlZCgpKXsgdGhpcy5lbmFibGVEZWJ1ZygpIH1cbiAgICBsZXQgZG9Db25uZWN0ID0gKCkgPT4ge1xuICAgICAgaWYodGhpcy5qb2luUm9vdFZpZXdzKCkpe1xuICAgICAgICB0aGlzLmJpbmRUb3BMZXZlbEV2ZW50cygpXG4gICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QoKVxuICAgICAgfSBlbHNlIGlmKHRoaXMubWFpbil7XG4gICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5iaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWQ6IHRydWV9KVxuICAgICAgfVxuICAgICAgdGhpcy5qb2luRGVhZFZpZXcoKVxuICAgIH1cbiAgICBpZihbXCJjb21wbGV0ZVwiLCBcImxvYWRlZFwiLCBcImludGVyYWN0aXZlXCJdLmluZGV4T2YoZG9jdW1lbnQucmVhZHlTdGF0ZSkgPj0gMCl7XG4gICAgICBkb0Nvbm5lY3QoKVxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiBkb0Nvbm5lY3QoKSlcbiAgICB9XG4gIH1cblxuICBkaXNjb25uZWN0KGNhbGxiYWNrKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdChjYWxsYmFjaylcbiAgfVxuXG4gIHJlcGxhY2VUcmFuc3BvcnQodHJhbnNwb3J0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5zb2NrZXQucmVwbGFjZVRyYW5zcG9ydCh0cmFuc3BvcnQpXG4gICAgdGhpcy5jb25uZWN0KClcbiAgfVxuXG4gIGV4ZWNKUyhlbCwgZW5jb2RlZEpTLCBldmVudFR5cGUgPSBudWxsKXtcbiAgICB0aGlzLm93bmVyKGVsLCB2aWV3ID0+IEpTLmV4ZWMoZXZlbnRUeXBlLCBlbmNvZGVkSlMsIHZpZXcsIGVsKSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBleGVjSlNIb29rUHVzaChlbCwgcGh4RXZlbnQsIGRhdGEsIGNhbGxiYWNrKXtcbiAgICB0aGlzLndpdGhpbk93bmVycyhlbCwgdmlldyA9PiB7XG4gICAgICBKUy5leGVjKFwiaG9va1wiLCBwaHhFdmVudCwgdmlldywgZWwsIFtcInB1c2hcIiwge2RhdGEsIGNhbGxiYWNrfV0pXG4gICAgfSlcbiAgfVxuXG4gIHVubG9hZCgpe1xuICAgIGlmKHRoaXMudW5sb2FkZWQpeyByZXR1cm4gfVxuICAgIGlmKHRoaXMubWFpbiAmJiB0aGlzLmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxvZyh0aGlzLm1haW4sIFwic29ja2V0XCIsICgpID0+IFtcImRpc2Nvbm5lY3QgZm9yIHBhZ2UgbmF2XCJdKSB9XG4gICAgdGhpcy51bmxvYWRlZCA9IHRydWVcbiAgICB0aGlzLmRlc3Ryb3lBbGxWaWV3cygpXG4gICAgdGhpcy5kaXNjb25uZWN0KClcbiAgfVxuXG4gIHRyaWdnZXJET00oa2luZCwgYXJncyl7IHRoaXMuZG9tQ2FsbGJhY2tzW2tpbmRdKC4uLmFyZ3MpIH1cblxuICB0aW1lKG5hbWUsIGZ1bmMpe1xuICAgIGlmKCF0aGlzLmlzUHJvZmlsZUVuYWJsZWQoKSB8fCAhY29uc29sZS50aW1lKXsgcmV0dXJuIGZ1bmMoKSB9XG4gICAgY29uc29sZS50aW1lKG5hbWUpXG4gICAgbGV0IHJlc3VsdCA9IGZ1bmMoKVxuICAgIGNvbnNvbGUudGltZUVuZChuYW1lKVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGxvZyh2aWV3LCBraW5kLCBtc2dDYWxsYmFjayl7XG4gICAgaWYodGhpcy52aWV3TG9nZ2VyKXtcbiAgICAgIGxldCBbbXNnLCBvYmpdID0gbXNnQ2FsbGJhY2soKVxuICAgICAgdGhpcy52aWV3TG9nZ2VyKHZpZXcsIGtpbmQsIG1zZywgb2JqKVxuICAgIH0gZWxzZSBpZih0aGlzLmlzRGVidWdFbmFibGVkKCkpe1xuICAgICAgbGV0IFttc2csIG9ial0gPSBtc2dDYWxsYmFjaygpXG4gICAgICBkZWJ1Zyh2aWV3LCBraW5kLCBtc2csIG9iailcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0RE9NVXBkYXRlKGNhbGxiYWNrKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmFmdGVyKGNhbGxiYWNrKVxuICB9XG5cbiAgdHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUgPSBmdW5jdGlvbigpe30pe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuYWRkVHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpXG4gIH1cblxuICBvbkNoYW5uZWwoY2hhbm5lbCwgZXZlbnQsIGNiKXtcbiAgICBjaGFubmVsLm9uKGV2ZW50LCBkYXRhID0+IHtcbiAgICAgIGxldCBsYXRlbmN5ID0gdGhpcy5nZXRMYXRlbmN5U2ltKClcbiAgICAgIGlmKCFsYXRlbmN5KXtcbiAgICAgICAgY2IoZGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gY2IoZGF0YSksIGxhdGVuY3kpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHdyYXBQdXNoKHZpZXcsIG9wdHMsIHB1c2gpe1xuICAgIGxldCBsYXRlbmN5ID0gdGhpcy5nZXRMYXRlbmN5U2ltKClcbiAgICBsZXQgb2xkSm9pbkNvdW50ID0gdmlldy5qb2luQ291bnRcbiAgICBpZighbGF0ZW5jeSl7XG4gICAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkgJiYgb3B0cy50aW1lb3V0KXtcbiAgICAgICAgcmV0dXJuIHB1c2goKS5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiB7XG4gICAgICAgICAgaWYodmlldy5qb2luQ291bnQgPT09IG9sZEpvaW5Db3VudCAmJiAhdmlldy5pc0Rlc3Ryb3llZCgpKXtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkV2l0aEppdHRlcih2aWV3LCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nKHZpZXcsIFwidGltZW91dFwiLCAoKSA9PiBbXCJyZWNlaXZlZCB0aW1lb3V0IHdoaWxlIGNvbW11bmljYXRpbmcgd2l0aCBzZXJ2ZXIuIEZhbGxpbmcgYmFjayB0byBoYXJkIHJlZnJlc2ggZm9yIHJlY292ZXJ5XCJdKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcHVzaCgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGZha2VQdXNoID0ge1xuICAgICAgcmVjZWl2ZXM6IFtdLFxuICAgICAgcmVjZWl2ZShraW5kLCBjYil7IHRoaXMucmVjZWl2ZXMucHVzaChba2luZCwgY2JdKSB9XG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYodmlldy5pc0Rlc3Ryb3llZCgpKXsgcmV0dXJuIH1cbiAgICAgIGZha2VQdXNoLnJlY2VpdmVzLnJlZHVjZSgoYWNjLCBba2luZCwgY2JdKSA9PiBhY2MucmVjZWl2ZShraW5kLCBjYiksIHB1c2goKSlcbiAgICB9LCBsYXRlbmN5KVxuICAgIHJldHVybiBmYWtlUHVzaFxuICB9XG5cbiAgcmVsb2FkV2l0aEppdHRlcih2aWV3LCBsb2cpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICAgIGxldCBtaW5NcyA9IHRoaXMucmVsb2FkSml0dGVyTWluXG4gICAgbGV0IG1heE1zID0gdGhpcy5yZWxvYWRKaXR0ZXJNYXhcbiAgICBsZXQgYWZ0ZXJNcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXhNcyAtIG1pbk1zICsgMSkpICsgbWluTXNcbiAgICBsZXQgdHJpZXMgPSBCcm93c2VyLnVwZGF0ZUxvY2FsKHRoaXMubG9jYWxTdG9yYWdlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsIENPTlNFQ1VUSVZFX1JFTE9BRFMsIDAsIGNvdW50ID0+IGNvdW50ICsgMSlcbiAgICBpZih0cmllcyA+IHRoaXMubWF4UmVsb2Fkcyl7XG4gICAgICBhZnRlck1zID0gdGhpcy5mYWlsc2FmZUppdHRlclxuICAgIH1cbiAgICB0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gaWYgdmlldyBoYXMgcmVjb3ZlcmVkLCBzdWNoIGFzIHRyYW5zcG9ydCByZXBsYWNlZCwgdGhlbiBjYW5jZWxcbiAgICAgIGlmKHZpZXcuaXNEZXN0cm95ZWQoKSB8fCB2aWV3LmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuICAgICAgdmlldy5kZXN0cm95KClcbiAgICAgIGxvZyA/IGxvZygpIDogdGhpcy5sb2codmlldywgXCJqb2luXCIsICgpID0+IFtgZW5jb3VudGVyZWQgJHt0cmllc30gY29uc2VjdXRpdmUgcmVsb2Fkc2BdKVxuICAgICAgaWYodHJpZXMgPiB0aGlzLm1heFJlbG9hZHMpe1xuICAgICAgICB0aGlzLmxvZyh2aWV3LCBcImpvaW5cIiwgKCkgPT4gW2BleGNlZWRlZCAke3RoaXMubWF4UmVsb2Fkc30gY29uc2VjdXRpdmUgcmVsb2Fkcy4gRW50ZXJpbmcgZmFpbHNhZmUgbW9kZWBdKVxuICAgICAgfVxuICAgICAgaWYodGhpcy5oYXNQZW5kaW5nTGluaygpKXtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSwgYWZ0ZXJNcylcbiAgfVxuXG4gIGdldEhvb2tDYWxsYmFja3MobmFtZSl7XG4gICAgcmV0dXJuIG5hbWUgJiYgbmFtZS5zdGFydHNXaXRoKFwiUGhvZW5peC5cIikgPyBIb29rc1tuYW1lLnNwbGl0KFwiLlwiKVsxXV0gOiB0aGlzLmhvb2tzW25hbWVdXG4gIH1cblxuICBpc1VubG9hZGVkKCl7IHJldHVybiB0aGlzLnVubG9hZGVkIH1cblxuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSB9XG5cbiAgZ2V0QmluZGluZ1ByZWZpeCgpeyByZXR1cm4gdGhpcy5iaW5kaW5nUHJlZml4IH1cblxuICBiaW5kaW5nKGtpbmQpeyByZXR1cm4gYCR7dGhpcy5nZXRCaW5kaW5nUHJlZml4KCl9JHtraW5kfWAgfVxuXG4gIGNoYW5uZWwodG9waWMsIHBhcmFtcyl7IHJldHVybiB0aGlzLnNvY2tldC5jaGFubmVsKHRvcGljLCBwYXJhbXMpIH1cblxuICBqb2luRGVhZFZpZXcoKXtcbiAgICBsZXQgYm9keSA9IGRvY3VtZW50LmJvZHlcbiAgICBpZihib2R5ICYmICF0aGlzLmlzUGh4Vmlldyhib2R5KSAmJiAhdGhpcy5pc1BoeFZpZXcoZG9jdW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpKXtcbiAgICAgIGxldCB2aWV3ID0gdGhpcy5uZXdSb290Vmlldyhib2R5KVxuICAgICAgdmlldy5zZXRIcmVmKHRoaXMuZ2V0SHJlZigpKVxuICAgICAgdmlldy5qb2luRGVhZCgpXG4gICAgICBpZighdGhpcy5tYWluKXsgdGhpcy5tYWluID0gdmlldyB9XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHZpZXcuZXhlY05ld01vdW50ZWQoKSlcbiAgICB9XG4gIH1cblxuICBqb2luUm9vdFZpZXdzKCl7XG4gICAgbGV0IHJvb3RzRm91bmQgPSBmYWxzZVxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGAke1BIWF9WSUVXX1NFTEVDVE9SfTpub3QoWyR7UEhYX1BBUkVOVF9JRH1dKWAsIHJvb3RFbCA9PiB7XG4gICAgICBpZighdGhpcy5nZXRSb290QnlJZChyb290RWwuaWQpKXtcbiAgICAgICAgbGV0IHZpZXcgPSB0aGlzLm5ld1Jvb3RWaWV3KHJvb3RFbClcbiAgICAgICAgdmlldy5zZXRIcmVmKHRoaXMuZ2V0SHJlZigpKVxuICAgICAgICB2aWV3LmpvaW4oKVxuICAgICAgICBpZihyb290RWwuaGFzQXR0cmlidXRlKFBIWF9NQUlOKSl7IHRoaXMubWFpbiA9IHZpZXcgfVxuICAgICAgfVxuICAgICAgcm9vdHNGb3VuZCA9IHRydWVcbiAgICB9KVxuICAgIHJldHVybiByb290c0ZvdW5kXG4gIH1cblxuICByZWRpcmVjdCh0bywgZmxhc2gpe1xuICAgIHRoaXMudW5sb2FkKClcbiAgICBCcm93c2VyLnJlZGlyZWN0KHRvLCBmbGFzaClcbiAgfVxuXG4gIHJlcGxhY2VNYWluKGhyZWYsIGZsYXNoLCBjYWxsYmFjayA9IG51bGwsIGxpbmtSZWYgPSB0aGlzLnNldFBlbmRpbmdMaW5rKGhyZWYpKXtcbiAgICBsZXQgbGl2ZVJlZmVyZXIgPSB0aGlzLmN1cnJlbnRMb2NhdGlvbi5ocmVmXG4gICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IHRoaXMub3V0Z29pbmdNYWluRWwgfHwgdGhpcy5tYWluLmVsXG4gICAgbGV0IG5ld01haW5FbCA9IERPTS5jbG9uZU5vZGUodGhpcy5vdXRnb2luZ01haW5FbCwgXCJcIilcbiAgICB0aGlzLm1haW4uc2hvd0xvYWRlcih0aGlzLmxvYWRlclRpbWVvdXQpXG4gICAgdGhpcy5tYWluLmRlc3Ryb3koKVxuXG4gICAgdGhpcy5tYWluID0gdGhpcy5uZXdSb290VmlldyhuZXdNYWluRWwsIGZsYXNoLCBsaXZlUmVmZXJlcilcbiAgICB0aGlzLm1haW4uc2V0UmVkaXJlY3QoaHJlZilcbiAgICB0aGlzLnRyYW5zaXRpb25SZW1vdmVzKG51bGwsIHRydWUpXG4gICAgdGhpcy5tYWluLmpvaW4oKGpvaW5Db3VudCwgb25Eb25lKSA9PiB7XG4gICAgICBpZihqb2luQ291bnQgPT09IDEgJiYgdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgRE9NLmZpbmRQaHhTdGlja3koZG9jdW1lbnQpLmZvckVhY2goZWwgPT4gbmV3TWFpbkVsLmFwcGVuZENoaWxkKGVsKSlcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsLnJlcGxhY2VXaXRoKG5ld01haW5FbClcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGxpbmtSZWYpXG4gICAgICAgICAgb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJhbnNpdGlvblJlbW92ZXMoZWxlbWVudHMsIHNraXBTdGlja3kpe1xuICAgIGxldCByZW1vdmVBdHRyID0gdGhpcy5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgZWxlbWVudHMgPSBlbGVtZW50cyB8fCBET00uYWxsKGRvY3VtZW50LCBgWyR7cmVtb3ZlQXR0cn1dYClcblxuICAgIGlmKHNraXBTdGlja3kpe1xuICAgICAgY29uc3Qgc3RpY2tpZXMgPSBET00uZmluZFBoeFN0aWNreShkb2N1bWVudCkgfHwgW11cbiAgICAgIGVsZW1lbnRzID0gZWxlbWVudHMuZmlsdGVyKGVsID0+ICFET00uaXNDaGlsZE9mQW55KGVsLCBzdGlja2llcykpXG4gICAgfVxuICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgdGhpcy5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShyZW1vdmVBdHRyKSwgXCJyZW1vdmVcIilcbiAgICB9KVxuICB9XG5cbiAgaXNQaHhWaWV3KGVsKXsgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pICE9PSBudWxsIH1cblxuICBuZXdSb290VmlldyhlbCwgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLCBudWxsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5yb290c1t2aWV3LmlkXSA9IHZpZXdcbiAgICByZXR1cm4gdmlld1xuICB9XG5cbiAgb3duZXIoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIGxldCB2aWV3ID0gbWF5YmUoY2hpbGRFbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKSwgZWwgPT4gdGhpcy5nZXRWaWV3QnlFbChlbCkpIHx8IHRoaXMubWFpblxuICAgIGlmKHZpZXcpeyBjYWxsYmFjayh2aWV3KSB9XG4gIH1cblxuICB3aXRoaW5Pd25lcnMoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIHRoaXMub3duZXIoY2hpbGRFbCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBjaGlsZEVsKSlcbiAgfVxuXG4gIGdldFZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdElkID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKVxuICAgIHJldHVybiBtYXliZSh0aGlzLmdldFJvb3RCeUlkKHJvb3RJZCksIHJvb3QgPT4gcm9vdC5nZXREZXNjZW5kZW50QnlFbChlbCkpXG4gIH1cblxuICBnZXRSb290QnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3RzW2lkXSB9XG5cbiAgZGVzdHJveUFsbFZpZXdzKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnJvb3RzKXtcbiAgICAgIHRoaXMucm9vdHNbaWRdLmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbaWRdXG4gICAgfVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgfVxuXG4gIGRlc3Ryb3lWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3QgPSB0aGlzLmdldFJvb3RCeUlkKGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCkpXG4gICAgaWYocm9vdCAmJiByb290LmlkID09PSBlbC5pZCl7XG4gICAgICByb290LmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbcm9vdC5pZF1cbiAgICB9IGVsc2UgaWYocm9vdCl7XG4gICAgICByb290LmRlc3Ryb3lEZXNjZW5kZW50KGVsLmlkKVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUVsZW1lbnQodGFyZ2V0KXtcbiAgICBpZih0aGlzLmFjdGl2ZUVsZW1lbnQgPT09IHRhcmdldCl7IHJldHVybiB9XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gdGFyZ2V0XG4gICAgbGV0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIGlmKHRhcmdldCA9PT0gdGhpcy5hY3RpdmVFbGVtZW50KXsgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbCB9XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcylcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcylcbiAgICB9XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNhbmNlbClcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGNhbmNlbClcbiAgfVxuXG4gIGdldEFjdGl2ZUVsZW1lbnQoKXtcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XG4gICAgfVxuICB9XG5cbiAgZHJvcEFjdGl2ZUVsZW1lbnQodmlldyl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHZpZXcub3duc0VsZW1lbnQodGhpcy5wcmV2QWN0aXZlKSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgcmVzdG9yZVByZXZpb3VzbHlBY3RpdmVGb2N1cygpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlLmZvY3VzKClcbiAgICB9XG4gIH1cblxuICBibHVyQWN0aXZlRWxlbWVudCgpe1xuICAgIHRoaXMucHJldkFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXsgdGhpcy5wcmV2QWN0aXZlLmJsdXIoKSB9XG4gIH1cblxuICBiaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWR9ID0ge30pe1xuICAgIGlmKHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyl7IHJldHVybiB9XG5cbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSB0cnVlXG4gICAgLy8gZW50ZXIgZmFpbHNhZmUgcmVsb2FkIGlmIHNlcnZlciBoYXMgZ29uZSBhd2F5IGludGVudGlvbmFsbHksIHN1Y2ggYXMgXCJkaXNjb25uZWN0XCIgYnJvYWRjYXN0XG4gICAgdGhpcy5zb2NrZXQub25DbG9zZShldmVudCA9PiB7XG4gICAgICAvLyBmYWlsc2FmZSByZWxvYWQgaWYgbm9ybWFsIGNsb3N1cmUgYW5kIHdlIHN0aWxsIGhhdmUgYSBtYWluIExWXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAwICYmIHRoaXMubWFpbil7IHJldHVybiB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodGhpcy5tYWluKSB9XG4gICAgfSlcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXsgfSkgLy8gZW5zdXJlIGFsbCBjbGljayBldmVudHMgYnViYmxlIGZvciBtb2JpbGUgU2FmYXJpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBlID0+IHtcbiAgICAgIGlmKGUucGVyc2lzdGVkKXsgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGVcbiAgICAgICAgdGhpcy5nZXRTb2NrZXQoKS5kaXNjb25uZWN0KClcbiAgICAgICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiB3aW5kb3cubG9jYXRpb24uaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSlcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSwgdHJ1ZSlcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZE5hdigpIH1cbiAgICB0aGlzLmJpbmRDbGlja3MoKVxuICAgIGlmKCFkZWFkKXsgdGhpcy5iaW5kRm9ybXMoKSB9XG4gICAgdGhpcy5iaW5kKHtrZXl1cDogXCJrZXl1cFwiLCBrZXlkb3duOiBcImtleWRvd25cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIHBoeFRhcmdldCkgPT4ge1xuICAgICAgbGV0IG1hdGNoS2V5ID0gdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfS0VZKSlcbiAgICAgIGxldCBwcmVzc2VkS2V5ID0gZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSAvLyBjaHJvbWUgY2xpY2tlZCBhdXRvY29tcGxldGVzIHNlbmQgYSBrZXlkb3duIHdpdGhvdXQga2V5XG4gICAgICBpZihtYXRjaEtleSAmJiBtYXRjaEtleS50b0xvd2VyQ2FzZSgpICE9PSBwcmVzc2VkS2V5KXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICB9KVxuICAgIHRoaXMuYmluZCh7Ymx1cjogXCJmb2N1c291dFwiLCBmb2N1czogXCJmb2N1c2luXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBwaHhUYXJnZXQpID0+IHtcbiAgICAgIGlmKCFwaHhUYXJnZXQpe1xuICAgICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLmJpbmQoe2JsdXI6IFwiYmx1clwiLCBmb2N1czogXCJmb2N1c1wifSwgKGUsIHR5cGUsIHZpZXcsIHRhcmdldEVsLCBwaHhFdmVudCwgcGh4VGFyZ2V0KSA9PiB7XG4gICAgICAvLyBibHVyIGFuZCBmb2N1cyBhcmUgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGFuZCB3aW5kb3cuIERpc2NhcmQgb25lIHRvIGF2b2lkIGR1cHNcbiAgICAgIGlmKHBoeFRhcmdldCA9PT0gXCJ3aW5kb3dcIil7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpXG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IGRyb3BUYXJnZXRJZCA9IG1heWJlKGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCB0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSksIHRydWVUYXJnZXQgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZVRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9EUk9QX1RBUkdFVCkpXG4gICAgICB9KVxuICAgICAgbGV0IGRyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZHJvcFRhcmdldElkKVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyB8fCBbXSlcbiAgICAgIGlmKCFkcm9wVGFyZ2V0IHx8IGRyb3BUYXJnZXQuZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID09PSAwIHx8ICEoZHJvcFRhcmdldC5maWxlcyBpbnN0YW5jZW9mIEZpbGVMaXN0KSl7IHJldHVybiB9XG5cbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGRyb3BUYXJnZXQsIGZpbGVzLCBlLmRhdGFUcmFuc2ZlcilcbiAgICAgIGRyb3BUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKVxuICAgIH0pXG4gICAgdGhpcy5vbihQSFhfVFJBQ0tfVVBMT0FEUywgZSA9PiB7XG4gICAgICBsZXQgdXBsb2FkVGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgIGlmKCFET00uaXNVcGxvYWRJbnB1dCh1cGxvYWRUYXJnZXQpKXsgcmV0dXJuIH1cbiAgICAgIGxldCBmaWxlcyA9IEFycmF5LmZyb20oZS5kZXRhaWwuZmlsZXMgfHwgW10pLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBGaWxlIHx8IGYgaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXModXBsb2FkVGFyZ2V0LCBmaWxlcylcbiAgICAgIHVwbG9hZFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgfVxuXG4gIGV2ZW50TWV0YShldmVudE5hbWUsIGUsIHRhcmdldEVsKXtcbiAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzW2V2ZW50TmFtZV1cbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhlLCB0YXJnZXRFbCkgOiB7fVxuICB9XG5cbiAgc2V0UGVuZGluZ0xpbmsoaHJlZil7XG4gICAgdGhpcy5saW5rUmVmKytcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gaHJlZlxuICAgIHJldHVybiB0aGlzLmxpbmtSZWZcbiAgfVxuXG4gIGNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpe1xuICAgIGlmKHRoaXMubGlua1JlZiAhPT0gbGlua1JlZil7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ocmVmID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0SHJlZigpeyByZXR1cm4gdGhpcy5ocmVmIH1cblxuICBoYXNQZW5kaW5nTGluaygpeyByZXR1cm4gISF0aGlzLnBlbmRpbmdMaW5rIH1cblxuICBiaW5kKGV2ZW50cywgY2FsbGJhY2spe1xuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKXtcbiAgICAgIGxldCBicm93c2VyRXZlbnROYW1lID0gZXZlbnRzW2V2ZW50XVxuXG4gICAgICB0aGlzLm9uKGJyb3dzZXJFdmVudE5hbWUsIGUgPT4ge1xuICAgICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZyhldmVudClcbiAgICAgICAgbGV0IHdpbmRvd0JpbmRpbmcgPSB0aGlzLmJpbmRpbmcoYHdpbmRvdy0ke2V2ZW50fWApXG4gICAgICAgIGxldCB0YXJnZXRQaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoYmluZGluZylcbiAgICAgICAgaWYodGFyZ2V0UGh4RXZlbnQpe1xuICAgICAgICAgIHRoaXMuZGVib3VuY2UoZS50YXJnZXQsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZXZlbnQsIHZpZXcsIGUudGFyZ2V0LCB0YXJnZXRQaHhFdmVudCwgbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7d2luZG93QmluZGluZ31dYCwgZWwgPT4ge1xuICAgICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHdpbmRvd0JpbmRpbmcpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlKGVsLCBlLCBicm93c2VyRXZlbnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZWwsIHBoeEV2ZW50LCBcIndpbmRvd1wiKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRDbGlja3MoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBlID0+IHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBlLnRhcmdldClcbiAgICB0aGlzLmJpbmRDbGljayhcImNsaWNrXCIsIFwiY2xpY2tcIiwgZmFsc2UpXG4gICAgdGhpcy5iaW5kQ2xpY2soXCJtb3VzZWRvd25cIiwgXCJjYXB0dXJlLWNsaWNrXCIsIHRydWUpXG4gIH1cblxuICBiaW5kQ2xpY2soZXZlbnROYW1lLCBiaW5kaW5nTmFtZSwgY2FwdHVyZSl7XG4gICAgbGV0IGNsaWNrID0gdGhpcy5iaW5kaW5nKGJpbmRpbmdOYW1lKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gbnVsbFxuICAgICAgaWYoY2FwdHVyZSl7XG4gICAgICAgIHRhcmdldCA9IGUudGFyZ2V0Lm1hdGNoZXMoYFske2NsaWNrfV1gKSA/IGUudGFyZ2V0IDogZS50YXJnZXQucXVlcnlTZWxlY3RvcihgWyR7Y2xpY2t9XWApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhIHN5bnRoZXRpYyBjbGljayBldmVudCAoZGV0YWlsIDApIHdpbGwgbm90IGhhdmUgY2F1c2VkIGEgbW91c2Vkb3duIGV2ZW50LFxuICAgICAgICAvLyB0aGVyZWZvcmUgdGhlIGNsaWNrU3RhcnRlZEF0VGFyZ2V0IGlzIHN0YWxlXG4gICAgICAgIGlmKGUuZGV0YWlsID09PSAwKSB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCB8fCBlLnRhcmdldFxuICAgICAgICB0YXJnZXQgPSBjbG9zZXN0UGh4QmluZGluZyhjbGlja1N0YXJ0ZWRBdFRhcmdldCwgY2xpY2spXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDbGlja0F3YXkoZSwgY2xpY2tTdGFydGVkQXRUYXJnZXQpXG4gICAgICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgICB9XG4gICAgICBsZXQgcGh4RXZlbnQgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShjbGljaylcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGlmKCFjYXB0dXJlICYmIERPTS5pc05ld1BhZ2VDbGljayhlLCB3aW5kb3cubG9jYXRpb24pKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZih0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIpeyBlLnByZXZlbnREZWZhdWx0KCkgfVxuXG4gICAgICAvLyBub29wIGlmIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGF3YWl0aW5nIGFuIGFjayBmb3IgdGhpcyBlbCBhbHJlYWR5XG4gICAgICBpZih0YXJnZXQuaGFzQXR0cmlidXRlKFBIWF9SRUYpKXsgcmV0dXJuIH1cblxuICAgICAgdGhpcy5kZWJvdW5jZSh0YXJnZXQsIGUsIFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyh0YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0LCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIHRhcmdldCl9XSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSwgY2FwdHVyZSlcbiAgfVxuXG4gIGRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0KXtcbiAgICBsZXQgcGh4Q2xpY2tBd2F5ID0gdGhpcy5iaW5kaW5nKFwiY2xpY2stYXdheVwiKVxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtwaHhDbGlja0F3YXl9XWAsIGVsID0+IHtcbiAgICAgIGlmKCEoZWwuaXNTYW1lTm9kZShjbGlja1N0YXJ0ZWRBdCkgfHwgZWwuY29udGFpbnMoY2xpY2tTdGFydGVkQXQpKSl7XG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUocGh4Q2xpY2tBd2F5KVxuICAgICAgICAgIGlmKEpTLmlzVmlzaWJsZShlbCkgJiYgSlMuaXNJblZpZXdwb3J0KGVsKSl7XG4gICAgICAgICAgICBKUy5leGVjKFwiY2xpY2tcIiwgcGh4RXZlbnQsIHZpZXcsIGVsLCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIGUudGFyZ2V0KX1dKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYmluZE5hdigpe1xuICAgIGlmKCFCcm93c2VyLmNhblB1c2hTdGF0ZSgpKXsgcmV0dXJuIH1cbiAgICBpZihoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uKXsgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IFwibWFudWFsXCIgfVxuICAgIGxldCBzY3JvbGxUaW1lciA9IG51bGxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBfZSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZXIpXG4gICAgICBzY3JvbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBCcm93c2VyLnVwZGF0ZUN1cnJlbnRTdGF0ZShzdGF0ZSA9PiBPYmplY3QuYXNzaWduKHN0YXRlLCB7c2Nyb2xsOiB3aW5kb3cuc2Nyb2xsWX0pKVxuICAgICAgfSwgMTAwKVxuICAgIH0pXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBldmVudCA9PiB7XG4gICAgICBpZighdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbikpeyByZXR1cm4gfVxuICAgICAgbGV0IHt0eXBlLCBpZCwgcm9vdCwgc2Nyb2xsfSA9IGV2ZW50LnN0YXRlIHx8IHt9XG4gICAgICBsZXQgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG5cbiAgICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6bmF2aWdhdGVcIiwge2RldGFpbDoge2hyZWYsIHBhdGNoOiB0eXBlID09PSBcInBhdGNoXCIsIHBvcDogdHJ1ZX19KVxuICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYodGhpcy5tYWluLmlzQ29ubmVjdGVkKCkgJiYgKHR5cGUgPT09IFwicGF0Y2hcIiAmJiBpZCA9PT0gdGhpcy5tYWluLmlkKSl7XG4gICAgICAgICAgdGhpcy5tYWluLnB1c2hMaW5rUGF0Y2goaHJlZiwgbnVsbCwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tYXliZVNjcm9sbChzY3JvbGwpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlcGxhY2VNYWluKGhyZWYsIG51bGwsICgpID0+IHtcbiAgICAgICAgICAgIGlmKHJvb3QpeyB0aGlzLnJlcGxhY2VSb290SGlzdG9yeSgpIH1cbiAgICAgICAgICAgIHRoaXMubWF5YmVTY3JvbGwoc2Nyb2xsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBjbG9zZXN0UGh4QmluZGluZyhlLnRhcmdldCwgUEhYX0xJVkVfTElOSylcbiAgICAgIGxldCB0eXBlID0gdGFyZ2V0ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoUEhYX0xJVkVfTElOSylcbiAgICAgIGlmKCF0eXBlIHx8ICF0aGlzLmlzQ29ubmVjdGVkKCkgfHwgIXRoaXMubWFpbiB8fCBET00ud2FudHNOZXdUYWIoZSkpeyByZXR1cm4gfVxuXG4gICAgICAvLyBXaGVuIHdyYXBwaW5nIGFuIFNWRyBlbGVtZW50IGluIGFuIGFuY2hvciB0YWcsIHRoZSBocmVmIGNhbiBiZSBhbiBTVkdBbmltYXRlZFN0cmluZ1xuICAgICAgbGV0IGhyZWYgPSB0YXJnZXQuaHJlZiBpbnN0YW5jZW9mIFNWR0FuaW1hdGVkU3RyaW5nID8gdGFyZ2V0LmhyZWYuYmFzZVZhbCA6IHRhcmdldC5ocmVmXG5cbiAgICAgIGxldCBsaW5rU3RhdGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSU5LX1NUQVRFKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIC8vIGRvIG5vdCBidWJibGUgY2xpY2sgdG8gcmVndWxhciBwaHgtY2xpY2sgYmluZGluZ3NcbiAgICAgIGlmKHRoaXMucGVuZGluZ0xpbmsgPT09IGhyZWYpeyByZXR1cm4gfVxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0eXBlID09PSBcInBhdGNoXCIpe1xuICAgICAgICAgIHRoaXMucHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldClcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwicmVkaXJlY3RcIil7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtQSFhfTElWRV9MSU5LfSB0byBiZSBcInBhdGNoXCIgb3IgXCJyZWRpcmVjdFwiLCBnb3Q6ICR7dHlwZX1gKVxuICAgICAgICB9XG4gICAgICAgIGxldCBwaHhDbGljayA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2xpY2tcIikpXG4gICAgICAgIGlmKHBoeENsaWNrKXtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4gdGhpcy5leGVjSlModGFyZ2V0LCBwaHhDbGljaywgXCJjbGlja1wiKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgfVxuXG4gIG1heWJlU2Nyb2xsKHNjcm9sbCl7XG4gICAgaWYodHlwZW9mKHNjcm9sbCkgPT09IFwibnVtYmVyXCIpe1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbClcbiAgICAgIH0pIC8vIHRoZSBib2R5IG5lZWRzIHRvIHJlbmRlciBiZWZvcmUgd2Ugc2Nyb2xsLlxuICAgIH1cbiAgfVxuXG4gIGRpc3BhdGNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBgcGh4OiR7ZXZlbnR9YCwge2RldGFpbDogcGF5bG9hZH0pXG4gIH1cblxuICBkaXNwYXRjaEV2ZW50cyhldmVudHMpe1xuICAgIGV2ZW50cy5mb3JFYWNoKChbZXZlbnQsIHBheWxvYWRdKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQsIHBheWxvYWQpKVxuICB9XG5cbiAgd2l0aFBhZ2VMb2FkaW5nKGluZm8sIGNhbGxiYWNrKXtcbiAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCB7ZGV0YWlsOiBpbmZvfSlcbiAgICBsZXQgZG9uZSA9ICgpID0+IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0b3BcIiwge2RldGFpbDogaW5mb30pXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gY2FsbGJhY2soZG9uZSkgOiBkb25lXG4gIH1cblxuICBwdXNoSGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgdGFyZ2V0RWwpe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkgfHwgIXRoaXMubWFpbi5pc01haW4oKSl7IHJldHVybiBCcm93c2VyLnJlZGlyZWN0KGhyZWYpIH1cblxuICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogaHJlZiwga2luZDogXCJwYXRjaFwifSwgZG9uZSA9PiB7XG4gICAgICB0aGlzLm1haW4ucHVzaExpbmtQYXRjaChocmVmLCB0YXJnZXRFbCwgbGlua1JlZiA9PiB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgbGlua1JlZilcbiAgICAgICAgZG9uZSgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBoaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCBsaW5rUmVmID0gdGhpcy5zZXRQZW5kaW5nTGluayhocmVmKSl7XG4gICAgaWYoIXRoaXMuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpeyByZXR1cm4gfVxuXG4gICAgQnJvd3Nlci5wdXNoU3RhdGUobGlua1N0YXRlLCB7dHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSwgaHJlZilcbiAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4Om5hdmlnYXRlXCIsIHtkZXRhaWw6IHtwYXRjaDogdHJ1ZSwgaHJlZiwgcG9wOiBmYWxzZX19KVxuICAgIHRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pXG4gIH1cblxuICBoaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlLCBmbGFzaCl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSB8fCAhdGhpcy5tYWluLmlzTWFpbigpKXsgcmV0dXJuIEJyb3dzZXIucmVkaXJlY3QoaHJlZiwgZmxhc2gpIH1cblxuICAgIC8vIGNvbnZlcnQgdG8gZnVsbCBocmVmIGlmIG9ubHkgcGF0aCBwcmVmaXhcbiAgICBpZigvXlxcLyR8XlxcL1teXFwvXSsuKiQvLnRlc3QoaHJlZikpe1xuICAgICAgbGV0IHtwcm90b2NvbCwgaG9zdH0gPSB3aW5kb3cubG9jYXRpb25cbiAgICAgIGhyZWYgPSBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke2hyZWZ9YFxuICAgIH1cbiAgICBsZXQgc2Nyb2xsID0gd2luZG93LnNjcm9sbFlcbiAgICB0aGlzLndpdGhQYWdlTG9hZGluZyh7dG86IGhyZWYsIGtpbmQ6IFwicmVkaXJlY3RcIn0sIGRvbmUgPT4ge1xuICAgICAgdGhpcy5yZXBsYWNlTWFpbihocmVmLCBmbGFzaCwgKGxpbmtSZWYpID0+IHtcbiAgICAgICAgaWYobGlua1JlZiA9PT0gdGhpcy5saW5rUmVmKXtcbiAgICAgICAgICBCcm93c2VyLnB1c2hTdGF0ZShsaW5rU3RhdGUsIHt0eXBlOiBcInJlZGlyZWN0XCIsIGlkOiB0aGlzLm1haW4uaWQsIHNjcm9sbDogc2Nyb2xsfSwgaHJlZilcbiAgICAgICAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4Om5hdmlnYXRlXCIsIHtkZXRhaWw6IHtocmVmLCBwYXRjaDogZmFsc2UsIHBvcDogZmFsc2V9fSlcbiAgICAgICAgICB0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKVxuICAgICAgICB9XG4gICAgICAgIGRvbmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcmVwbGFjZVJvb3RIaXN0b3J5KCl7XG4gICAgQnJvd3Nlci5wdXNoU3RhdGUoXCJyZXBsYWNlXCIsIHtyb290OiB0cnVlLCB0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9KVxuICB9XG5cbiAgcmVnaXN0ZXJOZXdMb2NhdGlvbihuZXdMb2NhdGlvbil7XG4gICAgbGV0IHtwYXRobmFtZSwgc2VhcmNofSA9IHRoaXMuY3VycmVudExvY2F0aW9uXG4gICAgaWYocGF0aG5hbWUgKyBzZWFyY2ggPT09IG5ld0xvY2F0aW9uLnBhdGhuYW1lICsgbmV3TG9jYXRpb24uc2VhcmNoKXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGNsb25lKG5ld0xvY2F0aW9uKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBiaW5kRm9ybXMoKXtcbiAgICBsZXQgaXRlcmF0aW9ucyA9IDBcbiAgICBsZXQgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gZmFsc2VcblxuICAgIC8vIGRpc2FibGUgZm9ybXMgb24gc3VibWl0IHRoYXQgdHJhY2sgcGh4LWNoYW5nZSBidXQgcGVyZm9ybSBleHRlcm5hbCBzdWJtaXRcbiAgICB0aGlzLm9uKFwic3VibWl0XCIsIGUgPT4ge1xuICAgICAgbGV0IHBoeFN1Ym1pdCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBsZXQgcGh4Q2hhbmdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSlcbiAgICAgIGlmKCFleHRlcm5hbEZvcm1TdWJtaXR0ZWQgJiYgcGh4Q2hhbmdlICYmICFwaHhTdWJtaXQpe1xuICAgICAgICBleHRlcm5hbEZvcm1TdWJtaXR0ZWQgPSB0cnVlXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgdmlldy5kaXNhYmxlRm9ybShlLnRhcmdldClcbiAgICAgICAgICAvLyBzYWZhcmkgbmVlZHMgbmV4dCB0aWNrXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICAgICAgZS50YXJnZXQuc3VibWl0KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIHRydWUpXG5cbiAgICB0aGlzLm9uKFwic3VibWl0XCIsIGUgPT4ge1xuICAgICAgbGV0IHBoeEV2ZW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInN1Ym1pdFwiKSlcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGlmKERPTS5pc1VubG9hZGFibGVGb3JtU3VibWl0KGUpKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnRhcmdldC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgSlMuZXhlYyhcInN1Ym1pdFwiLCBwaHhFdmVudCwgdmlldywgZS50YXJnZXQsIFtcInB1c2hcIiwge3N1Ym1pdHRlcjogZS5zdWJtaXR0ZXJ9XSlcbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG5cbiAgICBmb3IobGV0IHR5cGUgb2YgW1wiY2hhbmdlXCIsIFwiaW5wdXRcIl0pe1xuICAgICAgdGhpcy5vbih0eXBlLCBlID0+IHtcbiAgICAgICAgbGV0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgICAgICBsZXQgaW5wdXQgPSBlLnRhcmdldFxuICAgICAgICBsZXQgaW5wdXRFdmVudCA9IGlucHV0LmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBmb3JtRXZlbnQgPSBpbnB1dC5mb3JtICYmIGlucHV0LmZvcm0uZ2V0QXR0cmlidXRlKHBoeENoYW5nZSlcbiAgICAgICAgbGV0IHBoeEV2ZW50ID0gaW5wdXRFdmVudCB8fCBmb3JtRXZlbnRcbiAgICAgICAgaWYoIXBoeEV2ZW50KXsgcmV0dXJuIH1cbiAgICAgICAgaWYoaW5wdXQudHlwZSA9PT0gXCJudW1iZXJcIiAmJiBpbnB1dC52YWxpZGl0eSAmJiBpbnB1dC52YWxpZGl0eS5iYWRJbnB1dCl7IHJldHVybiB9XG5cbiAgICAgICAgbGV0IGRpc3BhdGNoZXIgPSBpbnB1dEV2ZW50ID8gaW5wdXQgOiBpbnB1dC5mb3JtXG4gICAgICAgIGxldCBjdXJyZW50SXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnNcbiAgICAgICAgaXRlcmF0aW9ucysrXG4gICAgICAgIGxldCB7YXQ6IGF0LCB0eXBlOiBsYXN0VHlwZX0gPSBET00ucHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiKSB8fCB7fVxuICAgICAgICAvLyBCcm93c2VycyBzaG91bGQgYWx3YXlzIGZpcmUgYXQgbGVhc3Qgb25lIFwiaW5wdXRcIiBldmVudCBiZWZvcmUgZXZlcnkgXCJjaGFuZ2VcIlxuICAgICAgICAvLyBJZ25vcmUgXCJjaGFuZ2VcIiBldmVudHMsIHVubGVzcyB0aGVyZSB3YXMgbm8gcHJpb3IgXCJpbnB1dFwiIGV2ZW50LlxuICAgICAgICAvLyBUaGlzIGNvdWxkIGhhcHBlbiBpZiB1c2VyIGNvZGUgdHJpZ2dlcnMgYSBcImNoYW5nZVwiIGV2ZW50LCBvciBpZiB0aGUgYnJvd3NlciBpcyBub24tY29uZm9ybWluZy5cbiAgICAgICAgaWYoYXQgPT09IGN1cnJlbnRJdGVyYXRpb25zIC0gMSAmJiB0eXBlID09PSBcImNoYW5nZVwiICYmIGxhc3RUeXBlID09PSBcImlucHV0XCIpeyByZXR1cm4gfVxuXG4gICAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0LCBcInByZXYtaXRlcmF0aW9uXCIsIHthdDogY3VycmVudEl0ZXJhdGlvbnMsIHR5cGU6IHR5cGV9KVxuXG4gICAgICAgIHRoaXMuZGVib3VuY2UoaW5wdXQsIGUsIHR5cGUsICgpID0+IHtcbiAgICAgICAgICB0aGlzLndpdGhpbk93bmVycyhkaXNwYXRjaGVyLCB2aWV3ID0+IHtcbiAgICAgICAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQsIHRydWUpXG4gICAgICAgICAgICBpZighRE9NLmlzVGV4dHVhbElucHV0KGlucHV0KSl7XG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWxlbWVudChpbnB1dClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEpTLmV4ZWMoXCJjaGFuZ2VcIiwgcGh4RXZlbnQsIHZpZXcsIGlucHV0LCBbXCJwdXNoXCIsIHtfdGFyZ2V0OiBlLnRhcmdldC5uYW1lLCBkaXNwYXRjaGVyOiBkaXNwYXRjaGVyfV0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0sIGZhbHNlKVxuICAgIH1cbiAgICB0aGlzLm9uKFwicmVzZXRcIiwgKGUpID0+IHtcbiAgICAgIGxldCBmb3JtID0gZS50YXJnZXRcbiAgICAgIERPTS5yZXNldEZvcm0oZm9ybSwgdGhpcy5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpLCB0aGlzLmJpbmRpbmcoUEhYX0ZFRURCQUNLX0dST1VQKSlcbiAgICAgIGxldCBpbnB1dCA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZmluZChlbCA9PiBlbC50eXBlID09PSBcInJlc2V0XCIpXG4gICAgICBpZihpbnB1dCl7XG4gICAgICAgIC8vIHdhaXQgdW50aWwgbmV4dCB0aWNrIHRvIGdldCB1cGRhdGVkIGlucHV0IHZhbHVlXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IGZhbHNlfSkpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRlYm91bmNlKGVsLCBldmVudCwgZXZlbnRUeXBlLCBjYWxsYmFjayl7XG4gICAgaWYoZXZlbnRUeXBlID09PSBcImJsdXJcIiB8fCBldmVudFR5cGUgPT09IFwiZm9jdXNvdXRcIil7IHJldHVybiBjYWxsYmFjaygpIH1cblxuICAgIGxldCBwaHhEZWJvdW5jZSA9IHRoaXMuYmluZGluZyhQSFhfREVCT1VOQ0UpXG4gICAgbGV0IHBoeFRocm90dGxlID0gdGhpcy5iaW5kaW5nKFBIWF9USFJPVFRMRSlcbiAgICBsZXQgZGVmYXVsdERlYm91bmNlID0gdGhpcy5kZWZhdWx0cy5kZWJvdW5jZS50b1N0cmluZygpXG4gICAgbGV0IGRlZmF1bHRUaHJvdHRsZSA9IHRoaXMuZGVmYXVsdHMudGhyb3R0bGUudG9TdHJpbmcoKVxuXG4gICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgbGV0IGFzeW5jRmlsdGVyID0gKCkgPT4gIXZpZXcuaXNEZXN0cm95ZWQoKSAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGVsKVxuICAgICAgRE9NLmRlYm91bmNlKGVsLCBldmVudCwgcGh4RGVib3VuY2UsIGRlZmF1bHREZWJvdW5jZSwgcGh4VGhyb3R0bGUsIGRlZmF1bHRUaHJvdHRsZSwgYXN5bmNGaWx0ZXIsICgpID0+IHtcbiAgICAgICAgY2FsbGJhY2soKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgc2lsZW5jZUV2ZW50cyhjYWxsYmFjayl7XG4gICAgdGhpcy5zaWxlbmNlZCA9IHRydWVcbiAgICBjYWxsYmFjaygpXG4gICAgdGhpcy5zaWxlbmNlZCA9IGZhbHNlXG4gIH1cblxuICBvbihldmVudCwgY2FsbGJhY2spe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBlID0+IHtcbiAgICAgIGlmKCF0aGlzLnNpbGVuY2VkKXsgY2FsbGJhY2soZSkgfVxuICAgIH0pXG4gIH1cbn1cblxuY2xhc3MgVHJhbnNpdGlvblNldCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy50cmFuc2l0aW9ucyA9IG5ldyBTZXQoKVxuICAgIHRoaXMucGVuZGluZ09wcyA9IFtdXG4gIH1cblxuICByZXNldCgpe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuZm9yRWFjaCh0aW1lciA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gICAgICB0aGlzLnRyYW5zaXRpb25zLmRlbGV0ZSh0aW1lcilcbiAgICB9KVxuICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgfVxuXG4gIGFmdGVyKGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLnNpemUoKSA9PT0gMCl7XG4gICAgICBjYWxsYmFjaygpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHVzaFBlbmRpbmdPcChjYWxsYmFjaylcbiAgICB9XG4gIH1cblxuICBhZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSl7XG4gICAgb25TdGFydCgpXG4gICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyYW5zaXRpb25zLmRlbGV0ZSh0aW1lcilcbiAgICAgIG9uRG9uZSgpXG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gICAgfSwgdGltZSlcbiAgICB0aGlzLnRyYW5zaXRpb25zLmFkZCh0aW1lcilcbiAgfVxuXG4gIHB1c2hQZW5kaW5nT3Aob3ApeyB0aGlzLnBlbmRpbmdPcHMucHVzaChvcCkgfVxuXG4gIHNpemUoKXsgcmV0dXJuIHRoaXMudHJhbnNpdGlvbnMuc2l6ZSB9XG5cbiAgZmx1c2hQZW5kaW5nT3BzKCl7XG4gICAgaWYodGhpcy5zaXplKCkgPiAwKXsgcmV0dXJuIH1cbiAgICBsZXQgb3AgPSB0aGlzLnBlbmRpbmdPcHMuc2hpZnQoKVxuICAgIGlmKG9wKXtcbiAgICAgIG9wKClcbiAgICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgICB9XG4gIH1cbn1cbiIsICIvLyBJZiB5b3Ugd2FudCB0byB1c2UgUGhvZW5peCBjaGFubmVscywgcnVuIGBtaXggaGVscCBwaHguZ2VuLmNoYW5uZWxgXG4vLyB0byBnZXQgc3RhcnRlZCBhbmQgdGhlbiB1bmNvbW1lbnQgdGhlIGxpbmUgYmVsb3cuXG4vLyBpbXBvcnQgXCIuL3VzZXJfc29ja2V0LmpzXCJcblxuLy8gWW91IGNhbiBpbmNsdWRlIGRlcGVuZGVuY2llcyBpbiB0d28gd2F5cy5cbi8vXG4vLyBUaGUgc2ltcGxlc3Qgb3B0aW9uIGlzIHRvIHB1dCB0aGVtIGluIGFzc2V0cy92ZW5kb3IgYW5kXG4vLyBpbXBvcnQgdGhlbSB1c2luZyByZWxhdGl2ZSBwYXRoczpcbi8vXG4vLyAgICAgaW1wb3J0IFwiLi4vdmVuZG9yL3NvbWUtcGFja2FnZS5qc1wiXG4vL1xuLy8gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBgbnBtIGluc3RhbGwgc29tZS1wYWNrYWdlIC0tcHJlZml4IGFzc2V0c2AgYW5kIGltcG9ydFxuLy8gdGhlbSB1c2luZyBhIHBhdGggc3RhcnRpbmcgd2l0aCB0aGUgcGFja2FnZSBuYW1lOlxuLy9cbi8vICAgICBpbXBvcnQgXCJzb21lLXBhY2thZ2VcIlxuLy9cblxuLy8gSW5jbHVkZSBwaG9lbml4X2h0bWwgdG8gaGFuZGxlIG1ldGhvZD1QVVQvREVMRVRFIGluIGZvcm1zIGFuZCBidXR0b25zLlxuaW1wb3J0IFwicGhvZW5peF9odG1sXCJcbi8vIEVzdGFibGlzaCBQaG9lbml4IFNvY2tldCBhbmQgTGl2ZVZpZXcgY29uZmlndXJhdGlvbi5cbmltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG5pbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG5pbXBvcnQgdG9wYmFyIGZyb20gXCIuLi92ZW5kb3IvdG9wYmFyXCJcbmltcG9ydCBcInByZWxpbmVcIlxuXG5sZXQgY3NyZlRva2VuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT0nY3NyZi10b2tlbiddXCIpLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIilcbmxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHtcbiAgbG9uZ1BvbGxGYWxsYmFja01zOiAyNTAwLFxuICBwYXJhbXM6IHtfY3NyZl90b2tlbjogY3NyZlRva2VufVxufSlcblxuLy8gU2hvdyBwcm9ncmVzcyBiYXIgb24gbGl2ZSBuYXZpZ2F0aW9uIGFuZCBmb3JtIHN1Ym1pdHNcbnRvcGJhci5jb25maWcoe2JhckNvbG9yczogezA6IFwiIzI5ZFwifSwgc2hhZG93Q29sb3I6IFwicmdiYSgwLCAwLCAwLCAuMylcIn0pXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwgX2luZm8gPT4gdG9wYmFyLnNob3coMzAwKSlcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIF9pbmZvID0+IHRvcGJhci5oaWRlKCkpXG5cbi8vIGNvbm5lY3QgaWYgdGhlcmUgYXJlIGFueSBMaXZlVmlld3Mgb24gdGhlIHBhZ2VcbmxpdmVTb2NrZXQuY29ubmVjdCgpXG5cbi8vIGV4cG9zZSBsaXZlU29ja2V0IG9uIHdpbmRvdyBmb3Igd2ViIGNvbnNvbGUgZGVidWcgbG9ncyBhbmQgbGF0ZW5jeSBzaW11bGF0aW9uOlxuLy8gPj4gbGl2ZVNvY2tldC5lbmFibGVEZWJ1ZygpXG4vLyA+PiBsaXZlU29ja2V0LmVuYWJsZUxhdGVuY3lTaW0oMTAwMCkgIC8vIGVuYWJsZWQgZm9yIGR1cmF0aW9uIG9mIGJyb3dzZXIgc2Vzc2lvblxuLy8gPj4gbGl2ZVNvY2tldC5kaXNhYmxlTGF0ZW5jeVNpbSgpXG53aW5kb3cubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcblxuXG4vLyBQcmVsaW5lJ3MgZGFyayB0aGVtZSBzd2l0Y2hlclxuLy8gVGhpcyBjb2RlIHNob3VsZCBiZSBhZGRlZCB0byA8aGVhZD4uXG4vLyBJdCdzIHVzZWQgdG8gcHJldmVudCBwYWdlIGxvYWQgZ2xpdGNoZXMuXG5jb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuY29uc3QgaXNMaWdodE9yQXV0byA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoc190aGVtZScpID09PSAnbGlnaHQnIHx8IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaHNfdGhlbWUnKSA9PT0gJ2F1dG8nICYmICF3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXMpO1xuY29uc3QgaXNEYXJrT3JBdXRvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hzX3RoZW1lJykgPT09ICdkYXJrJyB8fCAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hzX3RoZW1lJykgPT09ICdhdXRvJyAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXMpO1xuXG5pZiAoaXNMaWdodE9yQXV0byAmJiBodG1sLmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpKSBodG1sLmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmsnKTtcbmVsc2UgaWYgKGlzRGFya09yQXV0byAmJiBodG1sLmNsYXNzTGlzdC5jb250YWlucygnbGlnaHQnKSkgaHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdsaWdodCcpO1xuZWxzZSBpZiAoaXNEYXJrT3JBdXRvICYmICFodG1sLmNsYXNzTGlzdC5jb250YWlucygnZGFyaycpKSBodG1sLmNsYXNzTGlzdC5hZGQoJ2RhcmsnKTtcbmVsc2UgaWYgKGlzTGlnaHRPckF1dG8gJiYgIWh0bWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaWdodCcpKSBodG1sLmNsYXNzTGlzdC5hZGQoJ2xpZ2h0Jyk7XG4iLCAiY29uc3Qgc3RyaW5nVG9Cb29sZWFuID0gKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG5cdHJldHVybiBzdHJpbmcgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcbn07XG5cbmNvbnN0IGdldENsYXNzUHJvcGVydHkgPSAoZWw6IEhUTUxFbGVtZW50LCBwcm9wOiBzdHJpbmcsIHZhbCA9ICcnKSA9PiB7XG5cdHJldHVybiAod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUocHJvcCkgfHwgdmFsKS5yZXBsYWNlKFxuXHRcdCcgJyxcblx0XHQnJyxcblx0KTtcbn07XG5cbmNvbnN0IGdldENsYXNzUHJvcGVydHlBbHQgPSAoXG5cdGVsOiBIVE1MRWxlbWVudCxcblx0cHJvcD86IHN0cmluZyxcblx0dmFsOiBzdHJpbmcgPSAnJyxcbikgPT4ge1xuXHRsZXQgdGFyZ2V0Q2xhc3MgPSAnJztcblxuXHRlbC5jbGFzc0xpc3QuZm9yRWFjaCgoYykgPT4ge1xuXHRcdGlmIChjLmluY2x1ZGVzKHByb3ApKSB7XG5cdFx0XHR0YXJnZXRDbGFzcyA9IGM7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gdGFyZ2V0Q2xhc3MubWF0Y2goLzooLiopXS8pID8gdGFyZ2V0Q2xhc3MubWF0Y2goLzooLiopXS8pWzFdIDogdmFsO1xufTtcblxuLy8gY29uc3QgZ2V0Q2xhc3NQcm9wZXJ0eUFsdCA9IChcbi8vIFx0ZWw6IEhUTUxFbGVtZW50LFxuLy8gXHRwcm9wOiBzdHJpbmcsXG4vLyBcdHZhbDogc3RyaW5nID0gJycsXG4vLyApOiBzdHJpbmcgPT4ge1xuLy8gXHRsZXQgdGFyZ2V0Q2xhc3MgPSAnJztcblxuLy8gXHRlbC5jbGFzc0xpc3QuZm9yRWFjaCgoY2xhc3NOYW1lKSA9PiB7XG4vLyBcdFx0aWYgKGNsYXNzTmFtZS5pbmNsdWRlcyhwcm9wKSkge1xuLy8gXHRcdFx0dGFyZ2V0Q2xhc3MgPSBjbGFzc05hbWU7XG4vLyBcdFx0fVxuLy8gXHR9KTtcblxuLy8gXHRjb25zdCBtYXRjaCA9IHRhcmdldENsYXNzLm1hdGNoKC86KC4qKS8pO1xuXG4vLyBcdHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogdmFsO1xuLy8gfTtcblxuY29uc3QgaXNJT1MgPSAoKSA9PiB7XG5cdGlmICgvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIChcblx0XHRcdG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyAmJlxuXHRcdFx0bmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMiAmJlxuXHRcdFx0L01hY0ludGVsLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSlcblx0XHQpO1xuXHR9XG59O1xuXG5jb25zdCBpc0lwYWRPUyA9ICgpID0+IHtcblx0cmV0dXJuIChcblx0XHRuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgJiZcblx0XHRuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAyICYmXG5cdFx0L01hY0ludGVsLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSlcblx0KTtcbn07XG5cbmNvbnN0IGlzRW5vdWdoU3BhY2UgPSAoXG5cdGVsOiBIVE1MRWxlbWVudCxcblx0dG9nZ2xlOiBIVE1MRWxlbWVudCxcblx0cHJlZmVycmVkUG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbScgfCAnYXV0bycgPSAnYXV0bycsXG5cdHNwYWNlID0gMTAsXG5cdHdyYXBwZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGwsXG4pID0+IHtcblx0Y29uc3QgcmVmZXJlbmNlUmVjdCA9IHRvZ2dsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0Y29uc3Qgd3JhcHBlclJlY3QgPSB3cmFwcGVyID8gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IG51bGw7XG5cdGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRjb25zdCBzcGFjZUFib3ZlID0gd3JhcHBlclJlY3Rcblx0XHQ/IHJlZmVyZW5jZVJlY3QudG9wIC0gd3JhcHBlclJlY3QudG9wXG5cdFx0OiByZWZlcmVuY2VSZWN0LnRvcDtcblx0Y29uc3Qgc3BhY2VCZWxvdyA9XG5cdFx0KHdyYXBwZXIgPyB3cmFwcGVyUmVjdC5ib3R0b20gOiB2aWV3cG9ydEhlaWdodCkgLSByZWZlcmVuY2VSZWN0LmJvdHRvbTtcblx0Y29uc3QgbWluaW11bVNwYWNlUmVxdWlyZWQgPSBlbC5jbGllbnRIZWlnaHQgKyBzcGFjZTtcblxuXHRpZiAocHJlZmVycmVkUG9zaXRpb24gPT09ICdib3R0b20nKSB7XG5cdFx0cmV0dXJuIHNwYWNlQmVsb3cgPj0gbWluaW11bVNwYWNlUmVxdWlyZWQ7XG5cdH0gZWxzZSBpZiAocHJlZmVycmVkUG9zaXRpb24gPT09ICd0b3AnKSB7XG5cdFx0cmV0dXJuIHNwYWNlQWJvdmUgPj0gbWluaW11bVNwYWNlUmVxdWlyZWQ7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIChcblx0XHRcdHNwYWNlQWJvdmUgPj0gbWluaW11bVNwYWNlUmVxdWlyZWQgfHwgc3BhY2VCZWxvdyA+PSBtaW5pbXVtU3BhY2VSZXF1aXJlZFxuXHRcdCk7XG5cdH1cbn07XG5cbmNvbnN0IGlzRm9ybUVsZW1lbnQgPSAodGFyZ2V0OiBIVE1MRWxlbWVudCkgPT4ge1xuXHRyZXR1cm4gKFxuXHRcdHRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHxcblx0XHR0YXJnZXQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50IHx8XG5cdFx0dGFyZ2V0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnRcblx0KTtcbn07XG5cbmNvbnN0IGlzUGFyZW50T3JFbGVtZW50SGlkZGVuID0gKGVsZW1lbnQ6IGFueSk6IGFueSA9PiB7XG5cdGlmICghZWxlbWVudCkgcmV0dXJuIGZhbHNlO1xuXG5cdGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuXHRpZiAoY29tcHV0ZWRTdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHJldHVybiB0cnVlO1xuXG5cdHJldHVybiBpc1BhcmVudE9yRWxlbWVudEhpZGRlbihlbGVtZW50LnBhcmVudEVsZW1lbnQpO1xufTtcblxuY29uc3QgZGVib3VuY2UgPSAoZnVuYzogRnVuY3Rpb24sIHRpbWVvdXQgPSAyMDApID0+IHtcblx0bGV0IHRpbWVyOiBhbnk7XG5cblx0cmV0dXJuICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuXHRcdGNsZWFyVGltZW91dCh0aW1lcik7XG5cblx0XHR0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0ZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcblx0XHR9LCB0aW1lb3V0KTtcblx0fTtcbn07XG5cbmNvbnN0IGRpc3BhdGNoID0gKGV2dDogc3RyaW5nLCBlbGVtZW50OiBhbnksIHBheWxvYWQ6IGFueSA9IG51bGwpID0+IHtcblx0Y29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZ0LCB7XG5cdFx0ZGV0YWlsOiB7IHBheWxvYWQgfSxcblx0XHRidWJibGVzOiB0cnVlLFxuXHRcdGNhbmNlbGFibGU6IHRydWUsXG5cdFx0Y29tcG9zZWQ6IGZhbHNlLFxuXHR9KTtcblxuXHRlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufTtcblxuY29uc3QgYWZ0ZXJUcmFuc2l0aW9uID0gKGVsOiBIVE1MRWxlbWVudCwgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG5cdGNvbnN0IGhhbmRsZUV2ZW50ID0gKCkgPT4ge1xuXHRcdGNhbGxiYWNrKCk7XG5cblx0XHRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlRXZlbnQsIHRydWUpO1xuXHR9O1xuXHRjb25zdCBoYXNUcmFuc2l0aW9uID1cblx0XHR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNpdGlvbicpICE9PVxuXHRcdChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdGaXJlZm94JykgPyAnYWxsJyA6ICdhbGwgMHMgZWFzZSAwcycpO1xuXG5cdGlmIChoYXNUcmFuc2l0aW9uKSBlbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlRXZlbnQsIHRydWUpO1xuXHRlbHNlIGNhbGxiYWNrKCk7XG59O1xuXG5jb25zdCBodG1sVG9FbGVtZW50ID0gKGh0bWw6IHN0cmluZyk6IEhUTUxFbGVtZW50ID0+IHtcblx0Y29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXHRodG1sID0gaHRtbC50cmltKCk7XG5cdHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWw7XG5cblx0cmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZCBhcyBIVE1MRWxlbWVudDtcbn07XG5cbmNvbnN0IGNsYXNzVG9DbGFzc0xpc3QgPSAoXG5cdGNsYXNzZXM6IHN0cmluZyxcblx0dGFyZ2V0OiBIVE1MRWxlbWVudCxcblx0c3BsaXR0ZXIgPSAnICcsXG5cdGFjdGlvbjogJ2FkZCcgfCAncmVtb3ZlJyA9ICdhZGQnLFxuKSA9PiB7XG5cdGNvbnN0IGNsYXNzZXNUb0FycmF5ID0gY2xhc3Nlcy5zcGxpdChzcGxpdHRlcik7XG5cdGNsYXNzZXNUb0FycmF5LmZvckVhY2goKGNsKSA9PlxuXHRcdGFjdGlvbiA9PT0gJ2FkZCcgPyB0YXJnZXQuY2xhc3NMaXN0LmFkZChjbCkgOiB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShjbCksXG5cdCk7XG59O1xuXG5jb25zdCBtZW51U2VhcmNoSGlzdG9yeSA9IHtcblx0aGlzdG9yeUluZGV4OiAtMSxcblxuXHRhZGRIaXN0b3J5KGluZGV4OiBudW1iZXIpIHtcblx0XHR0aGlzLmhpc3RvcnlJbmRleCA9IGluZGV4O1xuXHR9LFxuXG5cdGV4aXN0c0luSGlzdG9yeShpbmRleDogbnVtYmVyKSB7XG5cdFx0cmV0dXJuIGluZGV4ID4gdGhpcy5oaXN0b3J5SW5kZXg7XG5cdH0sXG5cblx0Y2xlYXJIaXN0b3J5KCkge1xuXHRcdHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG5cdH0sXG59O1xuXG5leHBvcnQge1xuXHRzdHJpbmdUb0Jvb2xlYW4sXG5cdGdldENsYXNzUHJvcGVydHksXG5cdGdldENsYXNzUHJvcGVydHlBbHQsXG5cdGlzSU9TLFxuXHRpc0lwYWRPUyxcblx0aXNFbm91Z2hTcGFjZSxcblx0aXNQYXJlbnRPckVsZW1lbnRIaWRkZW4sXG5cdGlzRm9ybUVsZW1lbnQsXG5cdGRlYm91bmNlLFxuXHRkaXNwYXRjaCxcblx0YWZ0ZXJUcmFuc2l0aW9uLFxuXHRodG1sVG9FbGVtZW50LFxuXHRjbGFzc1RvQ2xhc3NMaXN0LFxuXHRtZW51U2VhcmNoSGlzdG9yeSxcbn07XG4iLCAiLypcbiAqIEhTQmFzZVBsdWdpblxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHsgSUJhc2VQbHVnaW4gfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIU0Jhc2VQbHVnaW48TywgRSA9IEhUTUxFbGVtZW50PlxuXHRpbXBsZW1lbnRzIElCYXNlUGx1Z2luPE8sIEU+XG57XG5cdGNvbnN0cnVjdG9yKFxuXHRcdHB1YmxpYyBlbDogRSxcblx0XHRwdWJsaWMgb3B0aW9uczogTyxcblx0XHRwdWJsaWMgZXZlbnRzPzogYW55LFxuXHQpIHtcblx0XHR0aGlzLmVsID0gZWw7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLmV2ZW50cyA9IHt9O1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbjogYW55W10sIGVsZW1lbnQ6IGFueSkge1xuXHRcdGNvbGxlY3Rpb24ucHVzaCh7XG5cdFx0XHRpZDogZWxlbWVudD8uZWw/LmlkIHx8IGNvbGxlY3Rpb24ubGVuZ3RoICsgMSxcblx0XHRcdGVsZW1lbnQsXG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgZmlyZUV2ZW50KGV2dDogc3RyaW5nLCBwYXlsb2FkOiBhbnkgPSBudWxsKSB7XG5cdFx0aWYgKHRoaXMuZXZlbnRzLmhhc093blByb3BlcnR5KGV2dCkpIHJldHVybiB0aGlzLmV2ZW50c1tldnRdKHBheWxvYWQpO1xuXHR9XG5cblx0cHVibGljIG9uKGV2dDogc3RyaW5nLCBjYjogRnVuY3Rpb24pIHtcblx0XHR0aGlzLmV2ZW50c1tldnRdID0gY2I7XG5cdH1cbn1cbiIsICIvKlxuICogSFNDb3B5TWFya3VwXG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSUNvcHlNYXJrdXBPcHRpb25zLCBJQ29weU1hcmt1cCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTQ29weU1hcmt1cFxuXHRleHRlbmRzIEhTQmFzZVBsdWdpbjxJQ29weU1hcmt1cE9wdGlvbnM+XG5cdGltcGxlbWVudHMgSUNvcHlNYXJrdXBcbntcblx0cHJpdmF0ZSByZWFkb25seSB0YXJnZXRTZWxlY3Rvcjogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSB3cmFwcGVyU2VsZWN0b3I6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgbGltaXQ6IG51bWJlciB8IG51bGw7XG5cblx0cHJpdmF0ZSB0YXJnZXQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSB3cmFwcGVyOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgaXRlbXM6IEhUTUxFbGVtZW50W10gfCBudWxsO1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IElDb3B5TWFya3VwT3B0aW9ucykge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zKTtcblxuXHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29weS1tYXJrdXAnKTtcblx0XHRjb25zdCBkYXRhT3B0aW9uczogSUNvcHlNYXJrdXBPcHRpb25zID0gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiB7fTtcblx0XHRjb25zdCBjb25jYXRPcHRpb25zID0ge1xuXHRcdFx0Li4uZGF0YU9wdGlvbnMsXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdH07XG5cblx0XHR0aGlzLnRhcmdldFNlbGVjdG9yID0gY29uY2F0T3B0aW9ucz8udGFyZ2V0U2VsZWN0b3IgfHwgbnVsbDtcblx0XHR0aGlzLndyYXBwZXJTZWxlY3RvciA9IGNvbmNhdE9wdGlvbnM/LndyYXBwZXJTZWxlY3RvciB8fCBudWxsO1xuXHRcdHRoaXMubGltaXQgPSBjb25jYXRPcHRpb25zPy5saW1pdCB8fCBudWxsO1xuXHRcdHRoaXMuaXRlbXMgPSBbXTtcblxuXHRcdGlmICh0aGlzLnRhcmdldFNlbGVjdG9yKSB0aGlzLmluaXQoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpIHtcblx0XHR0aGlzLmNyZWF0ZUNvbGxlY3Rpb24od2luZG93LiRoc0NvcHlNYXJrdXBDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMuc2V0VGFyZ2V0KCk7XG5cdFx0dGhpcy5zZXRXcmFwcGVyKCk7XG5cdFx0dGhpcy5hZGRQcmVkZWZpbmVkSXRlbXMoKTtcblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jb3B5KCkpO1xuXHR9XG5cblx0cHJpdmF0ZSBjb3B5KCkge1xuXHRcdGlmICh0aGlzLmxpbWl0ICYmIHRoaXMuaXRlbXMubGVuZ3RoID49IHRoaXMubGltaXQpIHJldHVybiBmYWxzZTtcblxuXHRcdGlmICh0aGlzLmVsLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuXG5cdFx0Y29uc3QgY29waWVkRWxlbWVudCA9IHRoaXMudGFyZ2V0LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblxuXHRcdHRoaXMuYWRkVG9JdGVtcyhjb3BpZWRFbGVtZW50KTtcblxuXHRcdGlmICh0aGlzLmxpbWl0ICYmIHRoaXMuaXRlbXMubGVuZ3RoID49IHRoaXMubGltaXQpXG5cdFx0XHR0aGlzLmVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdjb3B5JywgY29waWVkRWxlbWVudCk7XG5cdFx0ZGlzcGF0Y2goJ2NvcHkuaHMuY29weU1hcmt1cCcsIGNvcGllZEVsZW1lbnQsIGNvcGllZEVsZW1lbnQpO1xuXHR9XG5cblx0cHJpdmF0ZSBhZGRQcmVkZWZpbmVkSXRlbXMoKSB7XG5cdFx0QXJyYXkuZnJvbSh0aGlzLndyYXBwZXIuY2hpbGRyZW4pXG5cdFx0XHQuZmlsdGVyKFxuXHRcdFx0XHQoZWw6IEhUTUxFbGVtZW50KSA9PiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdbLS1pZ25vcmUtZm9yLWNvdW50XScpLFxuXHRcdFx0KVxuXHRcdFx0LmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHR0aGlzLmFkZFRvSXRlbXMoZWwpO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHNldFRhcmdldCgpIHtcblx0XHRjb25zdCB0YXJnZXQ6IEhUTUxFbGVtZW50ID1cblx0XHRcdHR5cGVvZiB0aGlzLnRhcmdldFNlbGVjdG9yID09PSAnc3RyaW5nJ1xuXHRcdFx0XHQ/IChkb2N1bWVudFxuXHRcdFx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IodGhpcy50YXJnZXRTZWxlY3Rvcilcblx0XHRcdFx0XHRcdC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQpXG5cdFx0XHRcdDogKCh0aGlzLnRhcmdldFNlbGVjdG9yIGFzIEhUTUxFbGVtZW50KS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQpO1xuXG5cdFx0dGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcblxuXHRcdHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRXcmFwcGVyKCkge1xuXHRcdHRoaXMud3JhcHBlciA9XG5cdFx0XHR0eXBlb2YgdGhpcy53cmFwcGVyU2VsZWN0b3IgPT09ICdzdHJpbmcnXG5cdFx0XHRcdD8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLndyYXBwZXJTZWxlY3Rvcilcblx0XHRcdFx0OiB0aGlzLndyYXBwZXJTZWxlY3Rvcjtcblx0fVxuXG5cdHByaXZhdGUgYWRkVG9JdGVtcyhpdGVtOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGRlbGV0ZUl0ZW1CdXR0b24gPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHQnW2RhdGEtaHMtY29weS1tYXJrdXAtZGVsZXRlLWl0ZW1dJyxcblx0XHQpO1xuXG5cdFx0aWYgKHRoaXMud3JhcHBlcikgdGhpcy53cmFwcGVyLmFwcGVuZChpdGVtKTtcblx0XHRlbHNlIHRoaXMuZWwuYmVmb3JlKGl0ZW0pO1xuXG5cdFx0aWYgKGRlbGV0ZUl0ZW1CdXR0b24pXG5cdFx0XHRkZWxldGVJdGVtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5kZWxldGUoaXRlbSkpO1xuXG5cdFx0dGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuXHR9XG5cblx0Ly8gUHVibGljIG1ldGhvZHNcblx0cHVibGljIGRlbGV0ZSh0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmluZGV4T2YodGFyZ2V0KTtcblxuXHRcdGlmIChpbmRleCAhPT0gLTEpIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcblxuXHRcdHRhcmdldC5yZW1vdmUoKTtcblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdkZWxldGUnLCB0YXJnZXQpO1xuXHRcdGRpc3BhdGNoKCdkZWxldGUuaHMuY29weU1hcmt1cCcsIHRhcmdldCwgdGFyZ2V0KTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2Rcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzQ29weU1hcmt1cENvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGVsSW5Db2xsZWN0aW9uXG5cdFx0XHQ/IGlzSW5zdGFuY2Vcblx0XHRcdFx0PyBlbEluQ29sbGVjdGlvblxuXHRcdFx0XHQ6IGVsSW5Db2xsZWN0aW9uLmVsZW1lbnRcblx0XHRcdDogbnVsbDtcblx0fVxuXG5cdHN0YXRpYyBhdXRvSW5pdCgpIHtcblx0XHRpZiAoIXdpbmRvdy4kaHNDb3B5TWFya3VwQ29sbGVjdGlvbikgd2luZG93LiRoc0NvcHlNYXJrdXBDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLWNvcHktbWFya3VwXTpub3QoLi0tcHJldmVudC1vbi1sb2FkLWluaXQpJylcblx0XHRcdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzQ29weU1hcmt1cENvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0XHRcdChlbEMpID0+IChlbEM/LmVsZW1lbnQ/LmVsIGFzIEhUTUxFbGVtZW50KSA9PT0gZWwsXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLWNvcHktbWFya3VwJyk7XG5cdFx0XHRcdFx0Y29uc3Qgb3B0aW9uczogSUNvcHlNYXJrdXBPcHRpb25zID0gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiB7fTtcblxuXHRcdFx0XHRcdG5ldyBIU0NvcHlNYXJrdXAoZWwsIG9wdGlvbnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTQ29weU1hcmt1cDogRnVuY3Rpb247XG5cdFx0JGhzQ29weU1hcmt1cENvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU0NvcHlNYXJrdXA+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTQ29weU1hcmt1cC5hdXRvSW5pdCgpO1xuXG5cdC8vIFVuY29tbWVudCBmb3IgZGVidWdcblx0Ly8gY29uc29sZS5sb2coJ0NvcHkgbWFya3VwIGNvbGxlY3Rpb246Jywgd2luZG93LiRoc0NvcHlNYXJrdXBDb2xsZWN0aW9uKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTQ29weU1hcmt1cCA9IEhTQ29weU1hcmt1cDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSFNDb3B5TWFya3VwO1xuIiwgIi8qXG4gKiBIU0FjY29yZGlvblxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHsgZGlzcGF0Y2gsIGFmdGVyVHJhbnNpdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSUFjY29yZGlvbiB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTQWNjb3JkaW9uIGV4dGVuZHMgSFNCYXNlUGx1Z2luPHt9PiBpbXBsZW1lbnRzIElBY2NvcmRpb24ge1xuXHRwcml2YXRlIHJlYWRvbmx5IHRvZ2dsZTogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwdWJsaWMgY29udGVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGdyb3VwOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgaXNBbHdheXNPcGVuZWQ6IGJvb2xlYW47XG5cblx0Y29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBvcHRpb25zPzoge30sIGV2ZW50cz86IHt9KSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMsIGV2ZW50cyk7XG5cblx0XHR0aGlzLnRvZ2dsZSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmhzLWFjY29yZGlvbi10b2dnbGUnKSB8fCBudWxsO1xuXHRcdHRoaXMuY29udGVudCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmhzLWFjY29yZGlvbi1jb250ZW50JykgfHwgbnVsbDtcblx0XHR0aGlzLmdyb3VwID0gdGhpcy5lbC5jbG9zZXN0KCcuaHMtYWNjb3JkaW9uLWdyb3VwJykgfHwgbnVsbDtcblx0XHR0aGlzLmlzQWx3YXlzT3BlbmVkID1cblx0XHRcdHRoaXMuZ3JvdXAuaGFzQXR0cmlidXRlKCdkYXRhLWhzLWFjY29yZGlvbi1hbHdheXMtb3BlbicpIHx8IGZhbHNlO1xuXG5cdFx0aWYgKHRoaXMudG9nZ2xlICYmIHRoaXMuY29udGVudCkgdGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNBY2NvcmRpb25Db2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMudG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHRcdFx0XHR0aGlzLmhpZGUoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuc2hvdygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUHVibGljIG1ldGhvZHNcblx0cHVibGljIHNob3coKSB7XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5ncm91cCAmJlxuXHRcdFx0IXRoaXMuaXNBbHdheXNPcGVuZWQgJiZcblx0XHRcdHRoaXMuZ3JvdXAucXVlcnlTZWxlY3RvcignLmhzLWFjY29yZGlvbi5hY3RpdmUnKSAmJlxuXHRcdFx0dGhpcy5ncm91cC5xdWVyeVNlbGVjdG9yKCcuaHMtYWNjb3JkaW9uLmFjdGl2ZScpICE9PSB0aGlzLmVsXG5cdFx0KSB7XG5cdFx0XHRjb25zdCBjdXJyZW50bHlPcGVuZWQgPSB3aW5kb3cuJGhzQWNjb3JkaW9uQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHQoZWwpID0+XG5cdFx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT0gdGhpcy5ncm91cC5xdWVyeVNlbGVjdG9yKCcuaHMtYWNjb3JkaW9uLmFjdGl2ZScpLFxuXHRcdFx0KTtcblxuXHRcdFx0Y3VycmVudGx5T3BlbmVkLmVsZW1lbnQuaGlkZSgpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHJldHVybiBmYWxzZTtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cblx0XHR0aGlzLmNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0dGhpcy5jb250ZW50LnN0eWxlLmhlaWdodCA9ICcwJztcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuY29udGVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmNvbnRlbnQuc2Nyb2xsSGVpZ2h0fXB4YDtcblx0XHR9KTtcblxuXHRcdGFmdGVyVHJhbnNpdGlvbih0aGlzLmNvbnRlbnQsICgpID0+IHtcblx0XHRcdHRoaXMuY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdHRoaXMuY29udGVudC5zdHlsZS5oZWlnaHQgPSAnJztcblxuXHRcdFx0dGhpcy5maXJlRXZlbnQoJ29wZW4nLCB0aGlzLmVsKTtcblx0XHRcdGRpc3BhdGNoKCdvcGVuLmhzLmFjY29yZGlvbicsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGhpZGUoKSB7XG5cdFx0aWYgKCF0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHJldHVybiBmYWxzZTtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cblx0XHR0aGlzLmNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5jb250ZW50LnNjcm9sbEhlaWdodH1weGA7XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJzAnO1xuXHRcdH0pO1xuXG5cdFx0YWZ0ZXJUcmFuc2l0aW9uKHRoaXMuY29udGVudCwgKCkgPT4ge1xuXHRcdFx0dGhpcy5jb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRcdHRoaXMuY29udGVudC5zdHlsZS5oZWlnaHQgPSAnMCc7XG5cblx0XHRcdHRoaXMuZmlyZUV2ZW50KCdjbG9zZScsIHRoaXMuZWwpO1xuXHRcdFx0ZGlzcGF0Y2goJ2Nsb3NlLmhzLmFjY29yZGlvbicsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzQWNjb3JkaW9uQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gZWxJbkNvbGxlY3Rpb25cblx0XHRcdD8gaXNJbnN0YW5jZVxuXHRcdFx0XHQ/IGVsSW5Db2xsZWN0aW9uXG5cdFx0XHRcdDogZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5lbFxuXHRcdFx0OiBudWxsO1xuXHR9XG5cblx0c3RhdGljIHNob3codGFyZ2V0OiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc0FjY29yZGlvbkNvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0aWYgKFxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24gJiZcblx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuY29udGVudC5zdHlsZS5kaXNwbGF5ICE9PSAnYmxvY2snXG5cdFx0KVxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5zaG93KCk7XG5cdH1cblxuXHRzdGF0aWMgaGlkZSh0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzQWNjb3JkaW9uQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAoXG5cdFx0XHRlbEluQ29sbGVjdGlvbiAmJlxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5jb250ZW50LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaydcblx0XHQpXG5cdFx0XHRlbEluQ29sbGVjdGlvbi5lbGVtZW50LmhpZGUoKTtcblx0fVxuXG5cdHN0YXRpYyBhdXRvSW5pdCgpIHtcblx0XHRpZiAoIXdpbmRvdy4kaHNBY2NvcmRpb25Db2xsZWN0aW9uKSB3aW5kb3cuJGhzQWNjb3JkaW9uQ29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCcuaHMtYWNjb3JkaW9uOm5vdCguLS1wcmV2ZW50LW9uLWxvYWQtaW5pdCknKVxuXHRcdFx0LmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0IXdpbmRvdy4kaHNBY2NvcmRpb25Db2xsZWN0aW9uLmZpbmQoXG5cdFx0XHRcdFx0XHQoZWxDKSA9PiAoZWxDPy5lbGVtZW50Py5lbCBhcyBIVE1MRWxlbWVudCkgPT09IGVsLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0KVxuXHRcdFx0XHRcdG5ldyBIU0FjY29yZGlvbihlbCk7XG5cdFx0XHR9KTtcblx0fVxuXG5cdC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0c3RhdGljIG9uKGV2dDogc3RyaW5nLCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjYjogRnVuY3Rpb24pIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNBY2NvcmRpb25Db2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdGlmIChlbEluQ29sbGVjdGlvbikgZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5ldmVudHNbZXZ0XSA9IGNiO1xuXHR9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcblx0aW50ZXJmYWNlIFdpbmRvdyB7XG5cdFx0SFNBY2NvcmRpb246IEZ1bmN0aW9uO1xuXHRcdCRoc0FjY29yZGlvbkNvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU0FjY29yZGlvbj5bXTtcblx0fVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcblx0SFNBY2NvcmRpb24uYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdBY2NvcmRpb24gY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzQWNjb3JkaW9uQ29sbGVjdGlvbik7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdpbmRvdy5IU0FjY29yZGlvbiA9IEhTQWNjb3JkaW9uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU0FjY29yZGlvbjtcbiIsICIvKlxuICogSFNDYXJvdXNlbFxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHsgSUNhcm91c2VsLCBJQ2Fyb3VzZWxPcHRpb25zIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5pbXBvcnQgeyBJQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcblxuY2xhc3MgSFNDYXJvdXNlbCBleHRlbmRzIEhTQmFzZVBsdWdpbjxJQ2Fyb3VzZWxPcHRpb25zPiBpbXBsZW1lbnRzIElDYXJvdXNlbCB7XG5cdHByaXZhdGUgcmVhZG9ubHkgaW5uZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBzbGlkZXM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+IHwgdW5kZWZpbmVkW107XG5cdHByaXZhdGUgcmVhZG9ubHkgcHJldjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IG5leHQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBkb3RzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiB8IG51bGw7XG5cdHByaXZhdGUgc2xpZGVyV2lkdGg6IG51bWJlcjtcblx0cHJpdmF0ZSBjdXJyZW50SW5kZXg6IG51bWJlcjtcblx0cHJpdmF0ZSByZWFkb25seSBsb2FkaW5nQ2xhc3Nlczogc3RyaW5nIHwgc3RyaW5nW107XG5cdHByaXZhdGUgcmVhZG9ubHkgbG9hZGluZ0NsYXNzZXNSZW1vdmU6IHN0cmluZyB8IHN0cmluZ1tdO1xuXHRwcml2YXRlIHJlYWRvbmx5IGxvYWRpbmdDbGFzc2VzQWRkOiBzdHJpbmcgfCBzdHJpbmdbXTtcblx0cHJpdmF0ZSByZWFkb25seSBhZnRlckxvYWRpbmdDbGFzc2VzQWRkOiBzdHJpbmcgfCBzdHJpbmdbXTtcblx0cHJpdmF0ZSByZWFkb25seSBpc0F1dG9QbGF5OiBib29sZWFuO1xuXHRwcml2YXRlIHJlYWRvbmx5IHNwZWVkOiBudW1iZXI7XG5cdHByaXZhdGUgcmVhZG9ubHkgaXNJbmZpbml0ZUxvb3A6IGJvb2xlYW47XG5cdHByaXZhdGUgdGltZXI6IGFueTtcblxuXHQvLyBUb3VjaCBldmVudHMnIGhlbHAgdmFyaWFibGVzXG5cdHByaXZhdGUgcmVhZG9ubHkgdG91Y2hYOiB7XG5cdFx0c3RhcnQ6IG51bWJlcjtcblx0XHRlbmQ6IG51bWJlcjtcblx0fTtcblxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBJQ2Fyb3VzZWxPcHRpb25zKSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMpO1xuXG5cdFx0Y29uc3QgZGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jYXJvdXNlbCcpO1xuXHRcdGNvbnN0IGRhdGFPcHRpb25zOiBJQ2Fyb3VzZWxPcHRpb25zID0gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiB7fTtcblx0XHRjb25zdCBjb25jYXRPcHRpb25zID0ge1xuXHRcdFx0Li4uZGF0YU9wdGlvbnMsXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdH07XG5cblx0XHR0aGlzLmN1cnJlbnRJbmRleCA9IGNvbmNhdE9wdGlvbnMuY3VycmVudEluZGV4IHx8IDA7XG5cdFx0dGhpcy5sb2FkaW5nQ2xhc3NlcyA9IGNvbmNhdE9wdGlvbnMubG9hZGluZ0NsYXNzZXNcblx0XHRcdD8gYCR7Y29uY2F0T3B0aW9ucy5sb2FkaW5nQ2xhc3Nlc31gLnNwbGl0KCcsJylcblx0XHRcdDogbnVsbDtcblx0XHR0aGlzLmxvYWRpbmdDbGFzc2VzUmVtb3ZlID0gdGhpcy5sb2FkaW5nQ2xhc3Nlcz8uWzBdXG5cdFx0XHQ/IHRoaXMubG9hZGluZ0NsYXNzZXNbMF0uc3BsaXQoJyAnKVxuXHRcdFx0OiAnb3BhY2l0eS0wJztcblx0XHR0aGlzLmxvYWRpbmdDbGFzc2VzQWRkID0gdGhpcy5sb2FkaW5nQ2xhc3Nlcz8uWzFdXG5cdFx0XHQ/IHRoaXMubG9hZGluZ0NsYXNzZXNbMV0uc3BsaXQoJyAnKVxuXHRcdFx0OiAnJztcblx0XHR0aGlzLmFmdGVyTG9hZGluZ0NsYXNzZXNBZGQgPSB0aGlzLmxvYWRpbmdDbGFzc2VzPy5bMl1cblx0XHRcdD8gdGhpcy5sb2FkaW5nQ2xhc3Nlc1syXS5zcGxpdCgnICcpXG5cdFx0XHQ6ICcnO1xuXHRcdHRoaXMuaXNBdXRvUGxheSA9XG5cdFx0XHR0eXBlb2YgY29uY2F0T3B0aW9ucy5pc0F1dG9QbGF5ICE9PSAndW5kZWZpbmVkJ1xuXHRcdFx0XHQ/IGNvbmNhdE9wdGlvbnMuaXNBdXRvUGxheVxuXHRcdFx0XHQ6IGZhbHNlO1xuXHRcdHRoaXMuc3BlZWQgPSBjb25jYXRPcHRpb25zLnNwZWVkIHx8IDQwMDA7XG5cdFx0dGhpcy5pc0luZmluaXRlTG9vcCA9XG5cdFx0XHR0eXBlb2YgY29uY2F0T3B0aW9ucy5pc0luZmluaXRlTG9vcCAhPT0gJ3VuZGVmaW5lZCdcblx0XHRcdFx0PyBjb25jYXRPcHRpb25zLmlzSW5maW5pdGVMb29wXG5cdFx0XHRcdDogdHJ1ZTtcblx0XHR0aGlzLmlubmVyID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuaHMtY2Fyb3VzZWwtYm9keScpIHx8IG51bGw7XG5cdFx0dGhpcy5zbGlkZXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ocy1jYXJvdXNlbC1zbGlkZScpIHx8IFtdO1xuXHRcdHRoaXMucHJldiA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmhzLWNhcm91c2VsLXByZXYnKSB8fCBudWxsO1xuXHRcdHRoaXMubmV4dCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmhzLWNhcm91c2VsLW5leHQnKSB8fCBudWxsO1xuXHRcdHRoaXMuZG90cyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnLmhzLWNhcm91c2VsLXBhZ2luYXRpb24gPiAqJykgfHwgbnVsbDtcblx0XHR0aGlzLnNsaWRlcldpZHRoID0gdGhpcy5pbm5lci5wYXJlbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuXG5cdFx0Ly8gVG91Y2ggZXZlbnRzJyBoZWxwIHZhcmlhYmxlc1xuXHRcdHRoaXMudG91Y2hYID0ge1xuXHRcdFx0c3RhcnQ6IDAsXG5cdFx0XHRlbmQ6IDAsXG5cdFx0fTtcblxuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCkge1xuXHRcdHRoaXMuY3JlYXRlQ29sbGVjdGlvbih3aW5kb3cuJGhzQ2Fyb3VzZWxDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdGlmICh0aGlzLmlubmVyKSB7XG5cdFx0XHR0aGlzLmNhbGN1bGF0ZVdpZHRoKCk7XG5cdFx0XHRpZiAodGhpcy5sb2FkaW5nQ2xhc3Nlc1JlbW92ZSkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHRoaXMubG9hZGluZ0NsYXNzZXNSZW1vdmUgPT09ICdzdHJpbmcnKVxuXHRcdFx0XHRcdHRoaXMuaW5uZXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmxvYWRpbmdDbGFzc2VzUmVtb3ZlKTtcblx0XHRcdFx0ZWxzZSB0aGlzLmlubmVyLmNsYXNzTGlzdC5yZW1vdmUoLi4udGhpcy5sb2FkaW5nQ2xhc3Nlc1JlbW92ZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5sb2FkaW5nQ2xhc3Nlc0FkZCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHRoaXMubG9hZGluZ0NsYXNzZXNBZGQgPT09ICdzdHJpbmcnKVxuXHRcdFx0XHRcdHRoaXMuaW5uZXIuY2xhc3NMaXN0LmFkZCh0aGlzLmxvYWRpbmdDbGFzc2VzQWRkKTtcblx0XHRcdFx0ZWxzZSB0aGlzLmlubmVyLmNsYXNzTGlzdC5hZGQoLi4udGhpcy5sb2FkaW5nQ2xhc3Nlc0FkZCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICh0aGlzLnByZXYpXG5cdFx0XHR0aGlzLnByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZ29Ub1ByZXYoKTtcblx0XHRcdFx0aWYgKHRoaXMuaXNBdXRvUGxheSkge1xuXHRcdFx0XHRcdHRoaXMucmVzZXRUaW1lcigpO1xuXHRcdFx0XHRcdHRoaXMuc2V0VGltZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0aWYgKHRoaXMubmV4dClcblx0XHRcdHRoaXMubmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dGhpcy5nb1RvTmV4dCgpO1xuXHRcdFx0XHRpZiAodGhpcy5pc0F1dG9QbGF5KSB7XG5cdFx0XHRcdFx0dGhpcy5yZXNldFRpbWVyKCk7XG5cdFx0XHRcdFx0dGhpcy5zZXRUaW1lcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRpZiAodGhpcy5kb3RzKSB7XG5cdFx0XHR0aGlzLmRvdHMuZm9yRWFjaCgoZWwsIGkpID0+XG5cdFx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuZ29UbyhpKTtcblx0XHRcdFx0XHRpZiAodGhpcy5pc0F1dG9QbGF5KSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJlc2V0VGltZXIoKTtcblx0XHRcdFx0XHRcdHRoaXMuc2V0VGltZXIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLFxuXHRcdFx0KTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc2xpZGVzLmxlbmd0aCkge1xuXHRcdFx0dGhpcy5hZGRDdXJyZW50Q2xhc3MoKTtcblx0XHRcdGlmICghdGhpcy5pc0luZmluaXRlTG9vcCkgdGhpcy5hZGREaXNhYmxlZENsYXNzKCk7XG5cdFx0XHRpZiAodGhpcy5pc0F1dG9QbGF5KSB0aGlzLmF1dG9QbGF5KCk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmlubmVyICYmIHRoaXMuYWZ0ZXJMb2FkaW5nQ2xhc3Nlc0FkZCkge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdGhpcy5hZnRlckxvYWRpbmdDbGFzc2VzQWRkID09PSAnc3RyaW5nJylcblx0XHRcdFx0XHR0aGlzLmlubmVyLmNsYXNzTGlzdC5hZGQodGhpcy5hZnRlckxvYWRpbmdDbGFzc2VzQWRkKTtcblx0XHRcdFx0ZWxzZSB0aGlzLmlubmVyLmNsYXNzTGlzdC5hZGQoLi4udGhpcy5hZnRlckxvYWRpbmdDbGFzc2VzQWRkKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaW5pdCcpO1xuXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2dCkgPT4ge1xuXHRcdFx0dGhpcy50b3VjaFguc3RhcnQgPSBldnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWDtcblx0XHR9KTtcblxuXHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZXZ0KSA9PiB7XG5cdFx0XHR0aGlzLnRvdWNoWC5lbmQgPSBldnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWDtcblxuXHRcdFx0dGhpcy5kZXRlY3REaXJlY3Rpb24oKTtcblx0XHR9KTtcblxuXHRcdHRoaXMub2JzZXJ2ZVJlc2l6ZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBvYnNlcnZlUmVzaXplKCkge1xuXHRcdGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHRoaXMucmVjYWxjdWxhdGVXaWR0aCgpKTtcblxuXHRcdHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpKTtcblx0fVxuXG5cdHByaXZhdGUgY2FsY3VsYXRlV2lkdGgoKSB7XG5cdFx0Ly8gU2V0IHNsaWRlciB3aWR0aFxuXHRcdHRoaXMuaW5uZXIuc3R5bGUud2lkdGggPSBgJHt0aGlzLnNsaWRlcldpZHRoICogdGhpcy5zbGlkZXMubGVuZ3RofXB4YDtcblx0XHR0aGlzLmlubmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLSR7XG5cdFx0XHR0aGlzLmN1cnJlbnRJbmRleCAqIHRoaXMuc2xpZGVyV2lkdGhcblx0XHR9cHgsIDBweClgO1xuXG5cdFx0Ly8gU2V0IHdpZHRoIHRvIGVhY2ggc2xpZGVcblx0XHR0aGlzLnNsaWRlcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0ZWwuc3R5bGUud2lkdGggPSBgJHt0aGlzLnNsaWRlcldpZHRofXB4YDtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgYWRkQ3VycmVudENsYXNzKCkge1xuXHRcdHRoaXMuc2xpZGVzLmZvckVhY2goKGVsLCBpKSA9PiB7XG5cdFx0XHRpZiAoaSA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHtcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLmRvdHMpIHtcblx0XHRcdHRoaXMuZG90cy5mb3JFYWNoKChlbCwgaSkgPT4ge1xuXHRcdFx0XHRpZiAoaSA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHtcblx0XHRcdFx0XHRlbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhZGREaXNhYmxlZENsYXNzKCkge1xuXHRcdGlmICghdGhpcy5wcmV2IHx8ICF0aGlzLm5leHQpIHJldHVybiBmYWxzZTtcblxuXHRcdGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PT0gMCkge1xuXHRcdFx0dGhpcy5uZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cdFx0XHR0aGlzLnByZXYuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudEluZGV4ID09PSB0aGlzLnNsaWRlcy5sZW5ndGggLSAxKSB7XG5cdFx0XHR0aGlzLnByZXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcblx0XHRcdHRoaXMubmV4dC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnByZXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcblx0XHRcdHRoaXMubmV4dC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXV0b1BsYXkoKSB7XG5cdFx0dGhpcy5zZXRUaW1lcigpO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRUaW1lcigpIHtcblx0XHR0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudEluZGV4ID09PSB0aGlzLnNsaWRlcy5sZW5ndGggLSAxKSB0aGlzLmdvVG8oMCk7XG5cdFx0XHRlbHNlIHRoaXMuZ29Ub05leHQoKTtcblx0XHR9LCB0aGlzLnNwZWVkKTtcblx0fVxuXG5cdHByaXZhdGUgcmVzZXRUaW1lcigpIHtcblx0XHRjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuXHR9XG5cblx0cHJpdmF0ZSBkZXRlY3REaXJlY3Rpb24oKSB7XG5cdFx0Y29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLnRvdWNoWDtcblxuXHRcdGlmIChlbmQgPCBzdGFydCkgdGhpcy5nb1RvTmV4dCgpO1xuXHRcdGlmIChlbmQgPiBzdGFydCkgdGhpcy5nb1RvUHJldigpO1xuXHR9XG5cblx0Ly8gUHVibGljIG1ldGhvZHNcblx0cHVibGljIHJlY2FsY3VsYXRlV2lkdGgoKSB7XG5cdFx0dGhpcy5zbGlkZXJXaWR0aCA9IHRoaXMuaW5uZXIucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aDtcblxuXHRcdHRoaXMuY2FsY3VsYXRlV2lkdGgoKTtcblx0fVxuXG5cdHB1YmxpYyBnb1RvUHJldigpIHtcblx0XHRpZiAodGhpcy5jdXJyZW50SW5kZXggPT09IDAgJiYgdGhpcy5pc0luZmluaXRlTG9vcCkge1xuXHRcdFx0dGhpcy5jdXJyZW50SW5kZXggPSB0aGlzLnNsaWRlcy5sZW5ndGggLSAxO1xuXHRcdFx0dGhpcy5pbm5lci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC0ke1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRJbmRleCAqIHRoaXMuc2xpZGVyV2lkdGhcblx0XHRcdH1weCwgMHB4KWA7XG5cblx0XHRcdHRoaXMuYWRkQ3VycmVudENsYXNzKCk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRJbmRleCAhPT0gMCkge1xuXHRcdFx0dGhpcy5jdXJyZW50SW5kZXggLT0gMTtcblx0XHRcdHRoaXMuaW5uZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtJHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SW5kZXggKiB0aGlzLnNsaWRlcldpZHRoXG5cdFx0XHR9cHgsIDBweClgO1xuXG5cdFx0XHR0aGlzLmFkZEN1cnJlbnRDbGFzcygpO1xuXHRcdFx0dGhpcy5hZGREaXNhYmxlZENsYXNzKCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdvVG9OZXh0KCkge1xuXHRcdGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PT0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSAmJiB0aGlzLmlzSW5maW5pdGVMb29wKSB7XG5cdFx0XHR0aGlzLmN1cnJlbnRJbmRleCA9IDA7XG5cdFx0XHR0aGlzLmlubmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLSR7XG5cdFx0XHRcdHRoaXMuY3VycmVudEluZGV4ICogdGhpcy5zbGlkZXJXaWR0aFxuXHRcdFx0fXB4LCAwcHgpYDtcblxuXHRcdFx0dGhpcy5hZGRDdXJyZW50Q2xhc3MoKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudEluZGV4IDwgdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkge1xuXHRcdFx0dGhpcy5jdXJyZW50SW5kZXggKz0gMTtcblx0XHRcdHRoaXMuaW5uZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtJHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SW5kZXggKiB0aGlzLnNsaWRlcldpZHRoXG5cdFx0XHR9cHgsIDBweClgO1xuXG5cdFx0XHR0aGlzLmFkZEN1cnJlbnRDbGFzcygpO1xuXHRcdFx0dGhpcy5hZGREaXNhYmxlZENsYXNzKCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdvVG8oaTogbnVtYmVyKSB7XG5cdFx0dGhpcy5jdXJyZW50SW5kZXggPSBpO1xuXHRcdHRoaXMuaW5uZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtJHtcblx0XHRcdHRoaXMuY3VycmVudEluZGV4ICogdGhpcy5zbGlkZXJXaWR0aFxuXHRcdH1weCwgMHB4KWA7XG5cblx0XHR0aGlzLmFkZEN1cnJlbnRDbGFzcygpO1xuXHRcdGlmICghdGhpcy5pc0luZmluaXRlTG9vcCkgdGhpcy5hZGREaXNhYmxlZENsYXNzKCk7XG5cdH1cblxuXHQvLyBTdGF0aWMgbWV0aG9kc1xuXHRzdGF0aWMgZ2V0SW5zdGFuY2UodGFyZ2V0OiBIVE1MRWxlbWVudCB8IHN0cmluZywgaXNJbnN0YW5jZT86IGJvb2xlYW4pIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNDYXJvdXNlbENvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGVsSW5Db2xsZWN0aW9uXG5cdFx0XHQ/IGlzSW5zdGFuY2Vcblx0XHRcdFx0PyBlbEluQ29sbGVjdGlvblxuXHRcdFx0XHQ6IGVsSW5Db2xsZWN0aW9uLmVsZW1lbnRcblx0XHRcdDogbnVsbDtcblx0fVxuXG5cdHN0YXRpYyBhdXRvSW5pdCgpIHtcblx0XHRpZiAoIXdpbmRvdy4kaHNDYXJvdXNlbENvbGxlY3Rpb24pIHdpbmRvdy4kaHNDYXJvdXNlbENvbGxlY3Rpb24gPSBbXTtcblxuXHRcdGRvY3VtZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHMtY2Fyb3VzZWxdOm5vdCguLS1wcmV2ZW50LW9uLWxvYWQtaW5pdCknKVxuXHRcdFx0LmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0IXdpbmRvdy4kaHNDYXJvdXNlbENvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0XHRcdChlbEMpID0+IChlbEM/LmVsZW1lbnQ/LmVsIGFzIEhUTUxFbGVtZW50KSA9PT0gZWwsXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpXG5cdFx0XHRcdFx0bmV3IEhTQ2Fyb3VzZWwoZWwpO1xuXHRcdFx0fSk7XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU0Nhcm91c2VsOiBGdW5jdGlvbjtcblx0XHQkaHNDYXJvdXNlbENvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU0Nhcm91c2VsPltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU0Nhcm91c2VsLmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnQ2Fyb3VzZWwgY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzQ2Fyb3VzZWxDb2xsZWN0aW9uKTtcbn0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHRpZiAoIXdpbmRvdy4kaHNDYXJvdXNlbENvbGxlY3Rpb24pIHJldHVybiBmYWxzZTtcblxuXHR3aW5kb3cuJGhzQ2Fyb3VzZWxDb2xsZWN0aW9uLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0ZWwuZWxlbWVudC5yZWNhbGN1bGF0ZVdpZHRoKCk7XG5cdH0pO1xufSk7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHR3aW5kb3cuSFNDYXJvdXNlbCA9IEhTQ2Fyb3VzZWw7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTQ2Fyb3VzZWw7XG4iLCAiLypcbiAqIEhTQ29sbGFwc2VcbiAqIEB2ZXJzaW9uOiAyLjEuMFxuICogQGF1dGhvcjogSFRNTFN0cmVhbVxuICogQGxpY2Vuc2U6IExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9wcmVsaW5lLmNvL2RvY3MvbGljZW5zZS5odG1sKVxuICogQ29weXJpZ2h0IDIwMjMgSFRNTFN0cmVhbVxuICovXG5cbmltcG9ydCB7IGRpc3BhdGNoLCBhZnRlclRyYW5zaXRpb24gfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmltcG9ydCB7IElDb2xsYXBzZSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTQ29sbGFwc2UgZXh0ZW5kcyBIU0Jhc2VQbHVnaW48e30+IGltcGxlbWVudHMgSUNvbGxhcHNlIHtcblx0cHJpdmF0ZSByZWFkb25seSBjb250ZW50SWQ6IHN0cmluZyB8IG51bGw7XG5cdHB1YmxpYyBjb250ZW50OiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgYW5pbWF0aW9uSW5Qcm9jZXNzOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IHt9LCBldmVudHM/OiB7fSkge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zLCBldmVudHMpO1xuXG5cdFx0dGhpcy5jb250ZW50SWQgPSB0aGlzLmVsLmRhdGFzZXQuaHNDb2xsYXBzZTtcblx0XHR0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY29udGVudElkKTtcblx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IGZhbHNlO1xuXG5cdFx0aWYgKHRoaXMuY29udGVudCkgdGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNDb2xsYXBzZUNvbGxlY3Rpb24sIHRoaXMpO1xuXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHtcblx0XHRcdFx0dGhpcy5oaWRlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNob3coKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgaGlkZUFsbE1lZ2FNZW51SXRlbXMoKSB7XG5cdFx0dGhpcy5jb250ZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvckFsbCgnLmhzLW1lZ2EtbWVudS1jb250ZW50LmJsb2NrJylcblx0XHRcdC5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdibG9jaycpO1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHRcdH0pO1xuXHR9XG5cblx0Ly8gUHVibGljIG1ldGhvZHNcblx0cHVibGljIHNob3coKSB7XG5cdFx0aWYgKHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzIHx8IHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IHRydWU7XG5cblx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcblx0XHR0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuXHRcdHRoaXMuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblxuXHRcdHRoaXMuY29udGVudC5zdHlsZS5oZWlnaHQgPSAnMCc7XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5jb250ZW50LnNjcm9sbEhlaWdodH1weGA7XG5cblx0XHRcdHRoaXMuZmlyZUV2ZW50KCdiZWZvcmVPcGVuJywgdGhpcy5lbCk7XG5cdFx0XHRkaXNwYXRjaCgnYmVmb3JlT3Blbi5ocy5jb2xsYXBzZScsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXHRcdH0pO1xuXG5cdFx0YWZ0ZXJUcmFuc2l0aW9uKHRoaXMuY29udGVudCwgKCkgPT4ge1xuXHRcdFx0dGhpcy5jb250ZW50LnN0eWxlLmhlaWdodCA9ICcnO1xuXG5cdFx0XHR0aGlzLmZpcmVFdmVudCgnb3BlbicsIHRoaXMuZWwpO1xuXHRcdFx0ZGlzcGF0Y2goJ29wZW4uaHMuY29sbGFwc2UnLCB0aGlzLmVsLCB0aGlzLmVsKTtcblxuXHRcdFx0dGhpcy5hbmltYXRpb25JblByb2Nlc3MgPSBmYWxzZTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBoaWRlKCkge1xuXHRcdGlmICh0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyB8fCAhdGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSlcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzID0gdHJ1ZTtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuXG5cdFx0dGhpcy5jb250ZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuY29udGVudC5zY3JvbGxIZWlnaHR9cHhgO1xuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy5jb250ZW50LnN0eWxlLmhlaWdodCA9ICcwJztcblx0XHR9KTtcblxuXHRcdHRoaXMuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG5cblx0XHRhZnRlclRyYW5zaXRpb24odGhpcy5jb250ZW50LCAoKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0XHR0aGlzLmNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJyc7XG5cblx0XHRcdHRoaXMuZmlyZUV2ZW50KCdoaWRlJywgdGhpcy5lbCk7XG5cdFx0XHRkaXNwYXRjaCgnaGlkZS5ocy5jb2xsYXBzZScsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXG5cdFx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaHMtbWVnYS1tZW51LWNvbnRlbnQuYmxvY2snKS5sZW5ndGgpIHtcblx0XHRcdHRoaXMuaGlkZUFsbE1lZ2FNZW51SXRlbXMoKTtcblx0XHR9XG5cdH1cblxuXHQvLyBTdGF0aWMgbWV0aG9kc1xuXHRzdGF0aWMgZ2V0SW5zdGFuY2UodGFyZ2V0OiBIVE1MRWxlbWVudCwgaXNJbnN0YW5jZSA9IGZhbHNlKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzQ29sbGFwc2VDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50LmVsXG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzQ29sbGFwc2VDb2xsZWN0aW9uKSB3aW5kb3cuJGhzQ29sbGFwc2VDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ocy1jb2xsYXBzZS10b2dnbGU6bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc0NvbGxhcHNlQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNDb2xsYXBzZShlbCk7XG5cdFx0XHR9KTtcblx0fVxuXG5cdHN0YXRpYyBzaG93KHRhcmdldDogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNDb2xsYXBzZUNvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0aWYgKFxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24gJiZcblx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpXG5cdFx0KVxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5zaG93KCk7XG5cdH1cblxuXHRzdGF0aWMgaGlkZSh0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzQ29sbGFwc2VDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdGlmIChcblx0XHRcdGVsSW5Db2xsZWN0aW9uICYmXG5cdFx0XHQhZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5jb250ZW50LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJylcblx0XHQpXG5cdFx0XHRlbEluQ29sbGVjdGlvbi5lbGVtZW50LmhpZGUoKTtcblx0fVxuXG5cdC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0c3RhdGljIG9uKGV2dDogc3RyaW5nLCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjYjogRnVuY3Rpb24pIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNDb2xsYXBzZUNvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0aWYgKGVsSW5Db2xsZWN0aW9uKSBlbEluQ29sbGVjdGlvbi5lbGVtZW50LmV2ZW50c1tldnRdID0gY2I7XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU0NvbGxhcHNlOiBGdW5jdGlvbjtcblx0XHQkaHNDb2xsYXBzZUNvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU0NvbGxhcHNlPltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU0NvbGxhcHNlLmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnQ29sbGFwc2UgY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzQ29sbGFwc2VDb2xsZWN0aW9uKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTQ29sbGFwc2UgPSBIU0NvbGxhcHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU0NvbGxhcHNlO1xuIiwgImV4cG9ydCBjb25zdCBQT1NJVElPTlM6IGFueSA9IHtcblx0YXV0bzogJ2F1dG8nLFxuXHQnYXV0by1zdGFydCc6ICdhdXRvLXN0YXJ0Jyxcblx0J2F1dG8tZW5kJzogJ2F1dG8tZW5kJyxcblx0dG9wOiAndG9wJyxcblx0J3RvcC1sZWZ0JzogJ3RvcC1zdGFydCcsXG5cdCd0b3AtcmlnaHQnOiAndG9wLWVuZCcsXG5cdGJvdHRvbTogJ2JvdHRvbScsXG5cdCdib3R0b20tbGVmdCc6ICdib3R0b20tc3RhcnQnLFxuXHQnYm90dG9tLXJpZ2h0JzogJ2JvdHRvbS1lbmQnLFxuXHRyaWdodDogJ3JpZ2h0Jyxcblx0J3JpZ2h0LXN0YXJ0JzogJ3JpZ2h0LXN0YXJ0Jyxcblx0J3JpZ2h0LWVuZCc6ICdyaWdodC1lbmQnLFxuXHRsZWZ0OiAnbGVmdCcsXG5cdCdsZWZ0LXN0YXJ0JzogJ2xlZnQtc3RhcnQnLFxuXHQnbGVmdC1lbmQnOiAnbGVmdC1lbmQnLFxufTtcblxuZXhwb3J0IGNvbnN0IERST1BET1dOX0FDQ0VTU0lCSUxJVFlfS0VZX1NFVCA9IFtcblx0J0VzY2FwZScsXG5cdCdBcnJvd1VwJyxcblx0J0Fycm93RG93bicsXG5cdCdIb21lJyxcblx0J0VuZCcsXG5cdCdFbnRlcicsXG5dO1xuXG5leHBvcnQgY29uc3QgT1ZFUkxBWV9BQ0NFU1NJQklMSVRZX0tFWV9TRVQgPSBbJ0VzY2FwZScsICdUYWInXTtcblxuZXhwb3J0IGNvbnN0IFRBQlNfQUNDRVNTSUJJTElUWV9LRVlfU0VUID0gW1xuXHQnQXJyb3dVcCcsXG5cdCdBcnJvd0xlZnQnLFxuXHQnQXJyb3dEb3duJyxcblx0J0Fycm93UmlnaHQnLFxuXHQnSG9tZScsXG5cdCdFbmQnLFxuXTtcblxuZXhwb3J0IGNvbnN0IFNFTEVDVF9BQ0NFU1NJQklMSVRZX0tFWV9TRVQgPSBbXG5cdCdBcnJvd1VwJyxcblx0J0Fycm93TGVmdCcsXG5cdCdBcnJvd0Rvd24nLFxuXHQnQXJyb3dSaWdodCcsXG5cdCdIb21lJyxcblx0J0VuZCcsXG5cdCdFc2NhcGUnLFxuXHQnRW50ZXInLFxuXHQnVGFiJyxcbl07XG5cbmV4cG9ydCBjb25zdCBDT01CT19CT1hfQUNDRVNTSUJJTElUWV9LRVlfU0VUID0gW1xuXHQnQXJyb3dVcCcsXG5cdCdBcnJvd0xlZnQnLFxuXHQnQXJyb3dEb3duJyxcblx0J0Fycm93UmlnaHQnLFxuXHQnSG9tZScsXG5cdCdFbmQnLFxuXHQnRXNjYXBlJyxcblx0J0VudGVyJyxcbl07XG5cbmV4cG9ydCBjb25zdCBCUkVBS1BPSU5UUzogYW55ID0ge1xuXHRzbTogNjQwLFxuXHRtZDogNzY4LFxuXHRsZzogMTAyNCxcblx0eGw6IDEyODAsXG5cdCcyeGwnOiAxNTM2LFxufTtcbiIsICIvKlxuICogSFNDb21ib0JveFxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHtcblx0aXNFbm91Z2hTcGFjZSxcblx0ZGVib3VuY2UsXG5cdGFmdGVyVHJhbnNpdGlvbixcblx0aHRtbFRvRWxlbWVudCxcblx0aXNQYXJlbnRPckVsZW1lbnRIaWRkZW4sXG59IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSUNvbWJvQm94LCBJQ29tYm9Cb3hPcHRpb25zLCBJQ29tYm9Cb3hJdGVtQXR0ciB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCB7IENPTUJPX0JPWF9BQ0NFU1NJQklMSVRZX0tFWV9TRVQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMnO1xuXG5jbGFzcyBIU0NvbWJvQm94IGV4dGVuZHMgSFNCYXNlUGx1Z2luPElDb21ib0JveE9wdGlvbnM+IGltcGxlbWVudHMgSUNvbWJvQm94IHtcblx0Z2FwOiBudW1iZXI7XG5cdHZpZXdwb3J0OiBzdHJpbmcgfCBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByZXZlbnRWaXNpYmlsaXR5OiBib29sZWFuO1xuXHRhcGlVcmw6IHN0cmluZyB8IG51bGw7XG5cdGFwaURhdGFQYXJ0OiBzdHJpbmcgfCBudWxsO1xuXHRhcGlRdWVyeTogc3RyaW5nIHwgbnVsbDtcblx0YXBpU2VhcmNoUXVlcnk6IHN0cmluZyB8IG51bGw7XG5cdGFwaUhlYWRlcnM6IHt9O1xuXHRhcGlHcm91cEZpZWxkOiBzdHJpbmcgfCBudWxsO1xuXHRvdXRwdXRJdGVtVGVtcGxhdGU6IHN0cmluZyB8IG51bGw7XG5cdG91dHB1dEVtcHR5VGVtcGxhdGU6IHN0cmluZyB8IG51bGw7XG5cdG91dHB1dExvYWRlclRlbXBsYXRlOiBzdHJpbmcgfCBudWxsO1xuXHRncm91cGluZ1R5cGU6ICdkZWZhdWx0JyB8ICd0YWJzJyB8IG51bGw7XG5cdGdyb3VwaW5nVGl0bGVUZW1wbGF0ZTogc3RyaW5nIHwgbnVsbDtcblx0dGFic1dyYXBwZXJUZW1wbGF0ZTogc3RyaW5nIHwgbnVsbDtcblx0cHJldmVudFNlbGVjdGlvbjogYm9vbGVhbjtcblx0aXNPcGVuT25Gb2N1czogYm9vbGVhbjtcblxuXHRwcml2YXRlIHJlYWRvbmx5IGlucHV0OiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBvdXRwdXQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBpdGVtc1dyYXBwZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBpdGVtczogSFRNTEVsZW1lbnRbXSB8IFtdO1xuXHRwcml2YXRlIHRhYnM6IEhUTUxFbGVtZW50W10gfCBbXTtcblx0cHJpdmF0ZSByZWFkb25seSB0b2dnbGU6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBvdXRwdXRQbGFjZWhvbGRlcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIG91dHB1dExvYWRlcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXG5cdHByaXZhdGUgdmFsdWU6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgc2VsZWN0ZWQ6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgZ3JvdXBzOiBhbnlbXSB8IG51bGw7XG5cdHByaXZhdGUgc2VsZWN0ZWRHcm91cDogc3RyaW5nIHwgbnVsbDtcblxuXHRpc09wZW5lZDogYm9vbGVhbjtcblx0aXNDdXJyZW50OiBib29sZWFuO1xuXHRwcml2YXRlIGFuaW1hdGlvbkluUHJvY2VzczogYm9vbGVhbjtcblxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBJQ29tYm9Cb3hPcHRpb25zKSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMpO1xuXG5cdFx0Ly8gRGF0YSBwYXJhbWV0ZXJzXG5cdFx0Y29uc3QgZGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gnKTtcblx0XHRjb25zdCBkYXRhT3B0aW9uczogSUNvbWJvQm94T3B0aW9ucyA9IGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XG5cdFx0Y29uc3QgY29uY2F0T3B0aW9ucyA9IHtcblx0XHRcdC4uLmRhdGFPcHRpb25zLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHR9O1xuXG5cdFx0dGhpcy5nYXAgPSA1O1xuXHRcdHRoaXMudmlld3BvcnQgPVxuXHRcdFx0KHR5cGVvZiBjb25jYXRPcHRpb25zPy52aWV3cG9ydCA9PT0gJ3N0cmluZydcblx0XHRcdFx0PyAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25jYXRPcHRpb25zPy52aWV3cG9ydCkgYXMgSFRNTEVsZW1lbnQpXG5cdFx0XHRcdDogY29uY2F0T3B0aW9ucz8udmlld3BvcnQpID8/IG51bGw7XG5cdFx0dGhpcy5wcmV2ZW50VmlzaWJpbGl0eSA9IGNvbmNhdE9wdGlvbnM/LnByZXZlbnRWaXNpYmlsaXR5ID8/IGZhbHNlO1xuXHRcdHRoaXMuYXBpVXJsID0gY29uY2F0T3B0aW9ucz8uYXBpVXJsID8/IG51bGw7XG5cdFx0dGhpcy5hcGlEYXRhUGFydCA9IGNvbmNhdE9wdGlvbnM/LmFwaURhdGFQYXJ0ID8/IG51bGw7XG5cdFx0dGhpcy5hcGlRdWVyeSA9IGNvbmNhdE9wdGlvbnM/LmFwaVF1ZXJ5ID8/IG51bGw7XG5cdFx0dGhpcy5hcGlTZWFyY2hRdWVyeSA9IGNvbmNhdE9wdGlvbnM/LmFwaVNlYXJjaFF1ZXJ5ID8/IG51bGw7XG5cdFx0dGhpcy5hcGlIZWFkZXJzID0gY29uY2F0T3B0aW9ucz8uYXBpSGVhZGVycyA/PyB7fTtcblx0XHR0aGlzLmFwaUdyb3VwRmllbGQgPSBjb25jYXRPcHRpb25zPy5hcGlHcm91cEZpZWxkID8/IG51bGw7XG5cdFx0dGhpcy5vdXRwdXRJdGVtVGVtcGxhdGUgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucz8ub3V0cHV0SXRlbVRlbXBsYXRlID8/XG5cdFx0XHRgPGRpdiBjbGFzcz1cImN1cnNvci1wb2ludGVyIHB5LTIgcHgtNCB3LWZ1bGwgdGV4dC1zbSB0ZXh0LWdyYXktODAwIGhvdmVyOmJnLWdyYXktMTAwIHJvdW5kZWQtbGcgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJnLWdyYXktMTAwIGRhcms6Ymctc2xhdGUtOTAwIGRhcms6aG92ZXI6Ymctc2xhdGUtODAwIGRhcms6dGV4dC1ncmF5LTIwMCBkYXJrOmZvY3VzOmJnLXNsYXRlLTgwMFwiIGRhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtPlxuXHRcdFx0PGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciB3LWZ1bGxcIj5cblx0XHRcdFx0PHNwYW4gZGF0YS1ocy1jb21iby1ib3gtc2VhcmNoLXRleHQ+PC9zcGFuPlxuXHRcdFx0XHQ8c3BhbiBjbGFzcz1cImhpZGRlbiBocy1jb21iby1ib3gtc2VsZWN0ZWQ6YmxvY2tcIj5cblx0XHRcdFx0XHQ8c3ZnIGNsYXNzPVwiZmxleC1zaHJpbmstMCBzaXplLTMuNSB0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTUwMFwiIHhtbG5zPVwiaHR0cDoudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPlxuXHRcdFx0XHRcdFx0PHBvbHlsaW5lIHBvaW50cz1cIjIwIDYgOSAxNyA0IDEyXCI+PC9wb2x5bGluZT5cblx0XHRcdFx0XHQ8L3N2Zz5cblx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0PC9kaXY+XG5cdFx0PC9kaXY+YDtcblx0XHR0aGlzLm91dHB1dEVtcHR5VGVtcGxhdGUgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucz8ub3V0cHV0RW1wdHlUZW1wbGF0ZSA/P1xuXHRcdFx0YDxkaXYgY2xhc3M9XCJweS0yIHB4LTQgdy1mdWxsIHRleHQtc20gdGV4dC1ncmF5LTgwMCByb3VuZGVkLWxnIGRhcms6Ymctc2xhdGUtOTAwIGRhcms6dGV4dC1ncmF5LTIwMFwiPk5vdGhpbmcgZm91bmQuLi48L2Rpdj5gO1xuXHRcdHRoaXMub3V0cHV0TG9hZGVyVGVtcGxhdGUgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucz8ub3V0cHV0TG9hZGVyVGVtcGxhdGUgPz9cblx0XHRcdGA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcHktMiBweC00IHRleHQtc20gdGV4dC1ncmF5LTgwMCByb3VuZGVkLWxnIGJnLXdoaXRlIGRhcms6Ymctc2xhdGUtOTAwIGRhcms6dGV4dC1ncmF5LTIwMFwiPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zcGluIGlubGluZS1ibG9jayBzaXplLTYgYm9yZGVyLVszcHhdIGJvcmRlci1jdXJyZW50IGJvcmRlci10LXRyYW5zcGFyZW50IHRleHQtYmx1ZS02MDAgcm91bmRlZC1mdWxsIGRhcms6dGV4dC1ibHVlLTUwMFwiIHJvbGU9XCJzdGF0dXNcIiBhcmlhLWxhYmVsPVwibG9hZGluZ1wiPlxuXHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwic3Itb25seVwiPkxvYWRpbmcuLi48L3NwYW4+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+YDtcblx0XHR0aGlzLmdyb3VwaW5nVHlwZSA9IGNvbmNhdE9wdGlvbnM/Lmdyb3VwaW5nVHlwZSA/PyBudWxsO1xuXHRcdHRoaXMuZ3JvdXBpbmdUaXRsZVRlbXBsYXRlID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/Lmdyb3VwaW5nVGl0bGVUZW1wbGF0ZSA/P1xuXHRcdFx0KHRoaXMuZ3JvdXBpbmdUeXBlID09PSAnZGVmYXVsdCdcblx0XHRcdFx0PyBgPGRpdiBjbGFzcz1cImJsb2NrIG1iLTEgdGV4dC14cyBmb250LXNlbWlib2xkIHVwcGVyY2FzZSB0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTUwMFwiPjwvZGl2PmBcblx0XHRcdFx0OiBgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJweS0yIHB4LTMgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC14LTIgdGV4dC1zbSBmb250LXNlbWlib2xkIHdoaXRlc3BhY2Utbm93cmFwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLWJsdWUtNzAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6cG9pbnRlci1ldmVudHMtbm9uZVwiPjwvYnV0dG9uPmApO1xuXHRcdHRoaXMudGFic1dyYXBwZXJUZW1wbGF0ZSA9XG5cdFx0XHRjb25jYXRPcHRpb25zPy50YWJzV3JhcHBlclRlbXBsYXRlID8/XG5cdFx0XHRgPGRpdiBjbGFzcz1cIm92ZXJmbG93LXgtYXV0byBwLTRcIj48L2Rpdj5gO1xuXHRcdHRoaXMucHJldmVudFNlbGVjdGlvbiA9IGNvbmNhdE9wdGlvbnM/LnByZXZlbnRTZWxlY3Rpb24gPz8gZmFsc2U7XG5cdFx0dGhpcy5pc09wZW5PbkZvY3VzID0gY29uY2F0T3B0aW9ucz8uaXNPcGVuT25Gb2N1cyA/PyBmYWxzZTtcblxuXHRcdC8vIEludGVybmFsIHBhcmFtZXRlcnNcblx0XHR0aGlzLmlucHV0ID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1jb21iby1ib3gtaW5wdXRdJykgPz8gbnVsbDtcblx0XHR0aGlzLm91dHB1dCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignW2RhdGEtaHMtY29tYm8tYm94LW91dHB1dF0nKSA/PyBudWxsO1xuXHRcdHRoaXMuaXRlbXNXcmFwcGVyID1cblx0XHRcdHRoaXMuZWwucXVlcnlTZWxlY3RvcignW2RhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtcy13cmFwcGVyXScpID8/IG51bGw7XG5cdFx0dGhpcy5pdGVtcyA9XG5cdFx0XHRBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtXScpKSA/P1xuXHRcdFx0W107XG5cdFx0dGhpcy50YWJzID0gW107XG5cdFx0dGhpcy50b2dnbGUgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLWNvbWJvLWJveC10b2dnbGVdJykgPz8gbnVsbDtcblx0XHR0aGlzLm91dHB1dFBsYWNlaG9sZGVyID0gbnVsbDtcblxuXHRcdHRoaXMuc2VsZWN0ZWQgPSB0aGlzLnZhbHVlID1cblx0XHRcdCh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLWNvbWJvLWJveC1pbnB1dF0nKSBhcyBIVE1MSW5wdXRFbGVtZW50KVxuXHRcdFx0XHQudmFsdWUgPz8gJyc7XG5cdFx0dGhpcy5pc09wZW5lZCA9IGZhbHNlO1xuXHRcdHRoaXMuaXNDdXJyZW50ID0gZmFsc2U7XG5cdFx0dGhpcy5hbmltYXRpb25JblByb2Nlc3MgPSBmYWxzZTtcblx0XHR0aGlzLnNlbGVjdGVkR3JvdXAgPSAnYWxsJztcblxuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCkge1xuXHRcdHRoaXMuY3JlYXRlQ29sbGVjdGlvbih3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMuYnVpbGQoKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGQoKSB7XG5cdFx0dGhpcy5idWlsZElucHV0KCk7XG5cdFx0aWYgKHRoaXMuZ3JvdXBpbmdUeXBlKSB0aGlzLnNldEdyb3VwcygpO1xuXHRcdHRoaXMuYnVpbGRJdGVtcygpO1xuXHRcdGlmICh0aGlzLnByZXZlbnRWaXNpYmlsaXR5KSB7XG5cdFx0XHR0aGlzLmlzT3BlbmVkID0gdHJ1ZTtcblxuXHRcdFx0dGhpcy5yZWNhbGN1bGF0ZURpcmVjdGlvbigpO1xuXHRcdH1cblx0XHRpZiAodGhpcy50b2dnbGUpIHRoaXMuYnVpbGRUb2dnbGUoKTtcblx0fVxuXG5cdHByaXZhdGUgc2V0UmVzdWx0QW5kUmVuZGVyKHZhbHVlID0gJycpIHtcblx0XHR0aGlzLnNldFJlc3VsdHModmFsdWUpO1xuXG5cdFx0aWYgKHRoaXMuYXBpU2VhcmNoUXVlcnkpIHRoaXMuaXRlbXNGcm9tSnNvbigpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZElucHV0KCkge1xuXHRcdGlmICh0aGlzLmlzT3Blbk9uRm9jdXMpIHtcblx0XHRcdHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5pc09wZW5lZCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0UmVzdWx0QW5kUmVuZGVyKCk7XG5cdFx0XHRcdFx0dGhpcy5vcGVuKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdCdpbnB1dCcsXG5cdFx0XHRkZWJvdW5jZSgoZXZ0OiBJbnB1dEV2ZW50KSA9PiB7XG5cdFx0XHRcdHRoaXMuc2V0UmVzdWx0QW5kUmVuZGVyKChldnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcblx0XHRcdFx0aWYgKCF0aGlzLmlzT3BlbmVkKSB0aGlzLm9wZW4oKTtcblx0XHRcdH0pLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkSXRlbXMoKSB7XG5cdFx0aWYgKHRoaXMuYXBpVXJsKSB0aGlzLml0ZW1zRnJvbUpzb24oKTtcblx0XHRlbHNlIHtcblx0XHRcdGlmICh0aGlzLml0ZW1zV3JhcHBlcikgdGhpcy5pdGVtc1dyYXBwZXIuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHRlbHNlIHRoaXMub3V0cHV0LmlubmVySFRNTCA9ICcnO1xuXHRcdFx0dGhpcy5pdGVtc0Zyb21IdG1sKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzZXRSZXN1bHRzKHZhbDogc3RyaW5nKSB7XG5cdFx0dGhpcy52YWx1ZSA9IHZhbDtcblxuXHRcdHRoaXMucmVzdWx0SXRlbXMoKTtcblxuXHRcdGlmICh0aGlzLmhhc1Zpc2libGVJdGVtcygpKSB0aGlzLmRlc3Ryb3lPdXRwdXRQbGFjZWhvbGRlcigpO1xuXHRcdGVsc2UgdGhpcy5idWlsZE91dHB1dFBsYWNlaG9sZGVyKCk7XG5cdH1cblxuXHRwcml2YXRlIGlzSXRlbUV4aXN0cyhvYmo6IG5ldmVyKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuaXRlbXMuc29tZSgoZWw6IEhUTUxFbGVtZW50KSA9PlxuXHRcdFx0QXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1jb21iby1ib3gtc2VhcmNoLXRleHRdJykpLnNvbWUoXG5cdFx0XHRcdChlbEk6IEhUTUxFbGVtZW50KSA9PlxuXHRcdFx0XHRcdGVsSS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0JykgPT09XG5cdFx0XHRcdFx0b2JqW2VsSS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtLWZpZWxkJyldLFxuXHRcdFx0KSxcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBpc1RleHRFeGlzdHMoZWw6IEhUTUxFbGVtZW50LCB2YWw6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgbG93ZXJDYXNlZCA9IHZhbC5tYXAoKHYpID0+IHYudG9Mb3dlckNhc2UoKSk7XG5cblx0XHRyZXR1cm4gQXJyYXkuZnJvbShcblx0XHRcdGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLWNvbWJvLWJveC1zZWFyY2gtdGV4dF0nKSxcblx0XHQpLnNvbWUoKGVsSTogSFRNTEVsZW1lbnQpID0+XG5cdFx0XHRsb3dlckNhc2VkLmluY2x1ZGVzKFxuXHRcdFx0XHRlbEkuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLWNvbWJvLWJveC1zZWFyY2gtdGV4dCcpLnRvTG93ZXJDYXNlKCksXG5cdFx0XHQpLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGlzVGV4dEV4aXN0c0FueShlbDogSFRNTEVsZW1lbnQsIHZhbDogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIEFycmF5LmZyb20oXG5cdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1jb21iby1ib3gtc2VhcmNoLXRleHRdJyksXG5cdFx0KS5zb21lKChlbEk6IEhUTUxFbGVtZW50KSA9PlxuXHRcdFx0ZWxJXG5cdFx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0Jylcblx0XHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdFx0LmluY2x1ZGVzKHZhbC50b0xvd2VyQ2FzZSgpKSxcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSB2YWx1ZXNCeVNlbGVjdG9yKGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdHJldHVybiBBcnJheS5mcm9tKFxuXHRcdFx0ZWwucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0XScpLFxuXHRcdCkucmVkdWNlKFxuXHRcdFx0KGFjYzogYW55LCBjdXI6IEhUTUxFbGVtZW50KSA9PiBbXG5cdFx0XHRcdC4uLmFjYyxcblx0XHRcdFx0Y3VyLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtc2VhcmNoLXRleHQnKSxcblx0XHRcdF0sXG5cdFx0XHRbXSxcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZE91dHB1dExvYWRlcigpIHtcblx0XHRpZiAodGhpcy5vdXRwdXRMb2FkZXIpIHJldHVybiBmYWxzZTtcblxuXHRcdHRoaXMub3V0cHV0TG9hZGVyID0gaHRtbFRvRWxlbWVudCh0aGlzLm91dHB1dExvYWRlclRlbXBsYXRlKTtcblx0XHRpZiAodGhpcy5pdGVtcy5sZW5ndGggfHwgdGhpcy5vdXRwdXRQbGFjZWhvbGRlcikge1xuXHRcdFx0dGhpcy5vdXRwdXRMb2FkZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHRcdFx0dGhpcy5vdXRwdXRMb2FkZXIuc3R5bGUudG9wID0gJzAnO1xuXHRcdFx0dGhpcy5vdXRwdXRMb2FkZXIuc3R5bGUuYm90dG9tID0gJzAnO1xuXHRcdFx0dGhpcy5vdXRwdXRMb2FkZXIuc3R5bGUubGVmdCA9ICcwJztcblx0XHRcdHRoaXMub3V0cHV0TG9hZGVyLnN0eWxlLnJpZ2h0ID0gJzAnO1xuXHRcdFx0dGhpcy5vdXRwdXRMb2FkZXIuc3R5bGUuekluZGV4ID0gJzInO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm91dHB1dExvYWRlci5zdHlsZS5wb3NpdGlvbiA9ICcnO1xuXHRcdFx0dGhpcy5vdXRwdXRMb2FkZXIuc3R5bGUudG9wID0gJyc7XG5cdFx0XHR0aGlzLm91dHB1dExvYWRlci5zdHlsZS5ib3R0b20gPSAnJztcblx0XHRcdHRoaXMub3V0cHV0TG9hZGVyLnN0eWxlLmxlZnQgPSAnJztcblx0XHRcdHRoaXMub3V0cHV0TG9hZGVyLnN0eWxlLnJpZ2h0ID0gJyc7XG5cdFx0XHR0aGlzLm91dHB1dExvYWRlci5zdHlsZS56SW5kZXggPSAnJztcblx0XHRcdHRoaXMub3V0cHV0TG9hZGVyLnN0eWxlLmhlaWdodCA9ICczMHB4Jztcblx0XHR9XG5cblx0XHR0aGlzLm91dHB1dC5hcHBlbmQodGhpcy5vdXRwdXRMb2FkZXIpO1xuXHR9XG5cblx0cHJpdmF0ZSBkZXN0cm95T3V0cHV0TG9hZGVyKCkge1xuXHRcdGlmICh0aGlzLm91dHB1dExvYWRlcikgdGhpcy5vdXRwdXRMb2FkZXIucmVtb3ZlKCk7XG5cblx0XHR0aGlzLm91dHB1dExvYWRlciA9IG51bGw7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGl0ZW1zRnJvbUpzb24oKSB7XG5cdFx0dGhpcy5idWlsZE91dHB1dExvYWRlcigpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHF1ZXJ5ID0gYCR7dGhpcy5hcGlRdWVyeX1gO1xuXHRcdFx0Y29uc3Qgc2VhcmNoUXVlcnkgPSBgJHt0aGlzLmFwaVNlYXJjaFF1ZXJ5fT0ke3RoaXMudmFsdWUudG9Mb3dlckNhc2UoKX1gO1xuXHRcdFx0bGV0IHVybCA9IHRoaXMuYXBpVXJsO1xuXHRcdFx0aWYgKHRoaXMuYXBpUXVlcnkgJiYgdGhpcy5hcGlTZWFyY2hRdWVyeSkge1xuXHRcdFx0XHR1cmwgKz0gYD8ke3NlYXJjaFF1ZXJ5fSYke3F1ZXJ5fWA7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuYXBpUXVlcnkpIHtcblx0XHRcdFx0dXJsICs9IGA/JHtxdWVyeX1gO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmFwaVNlYXJjaFF1ZXJ5KSB7XG5cdFx0XHRcdHVybCArPSBgPyR7c2VhcmNoUXVlcnl9YDtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgdGhpcy5hcGlIZWFkZXJzKTtcblx0XHRcdGxldCBpdGVtcyA9IGF3YWl0IHJlcy5qc29uKCk7XG5cdFx0XHRpZiAodGhpcy5hcGlEYXRhUGFydCkge1xuXHRcdFx0XHRpdGVtcyA9IGl0ZW1zW3RoaXMuYXBpRGF0YVBhcnRdO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuYXBpU2VhcmNoUXVlcnkpIHtcblx0XHRcdFx0dGhpcy5pdGVtcyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuaXRlbXNXcmFwcGVyKSB7XG5cdFx0XHRcdHRoaXMuaXRlbXNXcmFwcGVyLmlubmVySFRNTCA9ICcnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5vdXRwdXQuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLmdyb3VwaW5nVHlwZSA9PT0gJ3RhYnMnKSB7XG5cdFx0XHRcdHRoaXMuc2V0QXBpR3JvdXBzKGl0ZW1zKTtcblx0XHRcdFx0dGhpcy5ncm91cFRhYnNSZW5kZXIoKTtcblx0XHRcdFx0dGhpcy5qc29uSXRlbXNSZW5kZXIoaXRlbXMpO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmdyb3VwaW5nVHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG5cdFx0XHRcdHRoaXMuc2V0QXBpR3JvdXBzKGl0ZW1zKTtcblxuXHRcdFx0XHR0aGlzLmdyb3Vwcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHRpdGxlID0gaHRtbFRvRWxlbWVudCh0aGlzLmdyb3VwaW5nVGl0bGVUZW1wbGF0ZSk7XG5cdFx0XHRcdFx0dGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLWhzLWNvbWJvLWJveC1ncm91cC10aXRsZScsIGVsLm5hbWUpO1xuXHRcdFx0XHRcdHRpdGxlLmNsYXNzTGlzdC5hZGQoJy0tZXhjbHVkZS1hY2Nlc3NpYmlsaXR5Jyk7XG5cdFx0XHRcdFx0dGl0bGUuaW5uZXJUZXh0ID0gZWwudGl0bGU7XG5cdFx0XHRcdFx0Y29uc3QgbmV3SXRlbXMgPSBpdGVtcy5maWx0ZXIoXG5cdFx0XHRcdFx0XHQoaTogYW55KSA9PiBpW3RoaXMuYXBpR3JvdXBGaWVsZF0gPT09IGVsLm5hbWUsXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLml0ZW1zV3JhcHBlcikgdGhpcy5pdGVtc1dyYXBwZXIuYXBwZW5kKHRpdGxlKTtcblx0XHRcdFx0XHRlbHNlIHRoaXMub3V0cHV0LmFwcGVuZCh0aXRsZSk7XG5cblx0XHRcdFx0XHR0aGlzLmpzb25JdGVtc1JlbmRlcihuZXdJdGVtcyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5qc29uSXRlbXNSZW5kZXIoaXRlbXMpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnNldFJlc3VsdHModGhpcy5pbnB1dC52YWx1ZSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0fVxuXG5cdFx0dGhpcy5kZXN0cm95T3V0cHV0TG9hZGVyKCk7XG5cdH1cblxuXHRwcml2YXRlIGpzb25JdGVtc1JlbmRlcihpdGVtczogYW55KSB7XG5cdFx0aXRlbXMuZm9yRWFjaCgoaXRlbTogbmV2ZXIsIGluZGV4OiBudW1iZXIpID0+IHtcblx0XHRcdGlmICh0aGlzLmlzSXRlbUV4aXN0cyhpdGVtKSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRjb25zdCBuZXdJdGVtID0gaHRtbFRvRWxlbWVudCh0aGlzLm91dHB1dEl0ZW1UZW1wbGF0ZSk7XG5cdFx0XHRuZXdJdGVtXG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1jb21iby1ib3gtc2VhcmNoLXRleHRdJylcblx0XHRcdFx0LmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdFx0ZWwudGV4dENvbnRlbnQgPVxuXHRcdFx0XHRcdFx0aXRlbVtlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtLWZpZWxkJyldID8/ICcnO1xuXHRcdFx0XHRcdGVsLnNldEF0dHJpYnV0ZShcblx0XHRcdFx0XHRcdCdkYXRhLWhzLWNvbWJvLWJveC1zZWFyY2gtdGV4dCcsXG5cdFx0XHRcdFx0XHRpdGVtW2VsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtb3V0cHV0LWl0ZW0tZmllbGQnKV0gPz8gJycsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRuZXdJdGVtXG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1jb21iby1ib3gtb3V0cHV0LWl0ZW0tYXR0cl0nKVxuXHRcdFx0XHQuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0XHRjb25zdCBhdHRyaWJ1dGVzID0gSlNPTi5wYXJzZShcblx0XHRcdFx0XHRcdGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtb3V0cHV0LWl0ZW0tYXR0cicpLFxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmZvckVhY2goKGF0dHI6IElDb21ib0JveEl0ZW1BdHRyKSA9PiB7XG5cdFx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoYXR0ci5hdHRyLCBpdGVtW2F0dHIudmFsdWVGcm9tXSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0bmV3SXRlbS5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgYCR7aW5kZXh9YCk7XG5cdFx0XHRpZiAodGhpcy5ncm91cGluZ1R5cGUgPT09ICd0YWJzJyB8fCB0aGlzLmdyb3VwaW5nVHlwZSA9PT0gJ2RlZmF1bHQnKSB7XG5cdFx0XHRcdG5ld0l0ZW0uc2V0QXR0cmlidXRlKFxuXHRcdFx0XHRcdCdkYXRhLWhzLWNvbWJvLWJveC1vdXRwdXQtaXRlbScsXG5cdFx0XHRcdFx0YHtcImdyb3VwXCI6IHtcIm5hbWVcIjogXCIke2l0ZW1bdGhpcy5hcGlHcm91cEZpZWxkXX1cIiwgXCJ0aXRsZVwiOiBcIiR7XG5cdFx0XHRcdFx0XHRpdGVtW3RoaXMuYXBpR3JvdXBGaWVsZF1cblx0XHRcdFx0XHR9XCJ9fWAsXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuaXRlbXMgPSBbLi4udGhpcy5pdGVtcywgbmV3SXRlbV07XG5cblx0XHRcdGlmICghdGhpcy5wcmV2ZW50U2VsZWN0aW9uKSB7XG5cdFx0XHRcdChuZXdJdGVtIGFzIEhUTUxFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNsb3NlKFxuXHRcdFx0XHRcdFx0KG5ld0l0ZW0gYXMgSFRNTEVsZW1lbnQpXG5cdFx0XHRcdFx0XHRcdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1jb21iby1ib3gtdmFsdWVdJylcblx0XHRcdFx0XHRcdFx0LmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtc2VhcmNoLXRleHQnKSxcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0dGhpcy5zZXRTZWxlY3RlZEJ5VmFsdWUodGhpcy52YWx1ZXNCeVNlbGVjdG9yKG5ld0l0ZW0pKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuYXBwZW5kSXRlbXNUb1dyYXBwZXIobmV3SXRlbSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHNldEdyb3VwcygpIHtcblx0XHRjb25zdCBncm91cHM6IGFueVtdID0gW107XG5cblx0XHR0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW06IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRjb25zdCB7IGdyb3VwIH0gPSBKU09OLnBhcnNlKFxuXHRcdFx0XHRpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtb3V0cHV0LWl0ZW0nKSxcblx0XHRcdCk7XG5cblx0XHRcdGlmICghZ3JvdXBzLnNvbWUoKGVsKSA9PiBlbD8ubmFtZSA9PT0gZ3JvdXAubmFtZSkpIHtcblx0XHRcdFx0Z3JvdXBzLnB1c2goZ3JvdXApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5ncm91cHMgPSBncm91cHM7XG5cdH1cblxuXHRwdWJsaWMgc2V0Q3VycmVudCgpIHtcblx0XHRpZiAod2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5sZW5ndGgpIHtcblx0XHRcdHdpbmRvdy4kaHNDb21ib0JveENvbGxlY3Rpb24ubWFwKChlbCkgPT4gKGVsLmVsZW1lbnQuaXNDdXJyZW50ID0gZmFsc2UpKTtcblxuXHRcdFx0dGhpcy5pc0N1cnJlbnQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2V0QXBpR3JvdXBzKGl0ZW1zOiBhbnkpIHtcblx0XHRjb25zdCBncm91cHM6IGFueVtdID0gW107XG5cblx0XHRpdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcblx0XHRcdGNvbnN0IGdyb3VwID0gaXRlbVt0aGlzLmFwaUdyb3VwRmllbGRdO1xuXG5cdFx0XHRpZiAoIWdyb3Vwcy5zb21lKChlbCkgPT4gZWwubmFtZSA9PT0gZ3JvdXApKSB7XG5cdFx0XHRcdGdyb3Vwcy5wdXNoKHtcblx0XHRcdFx0XHRuYW1lOiBncm91cCxcblx0XHRcdFx0XHR0aXRsZTogZ3JvdXAsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5ncm91cHMgPSBncm91cHM7XG5cdH1cblxuXHRwcml2YXRlIHNvcnRJdGVtcygpIHtcblx0XHRjb25zdCBjb21wYXJlRm4gPSAoaTE6IEhUTUxFbGVtZW50LCBpMjogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdGNvbnN0IGEgPSBpMVxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcignW2RhdGEtaHMtY29tYm8tYm94LXZhbHVlXScpXG5cdFx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0Jyk7XG5cdFx0XHRjb25zdCBiID0gaTJcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLWNvbWJvLWJveC12YWx1ZV0nKVxuXHRcdFx0XHQuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLWNvbWJvLWJveC1zZWFyY2gtdGV4dCcpO1xuXG5cdFx0XHRpZiAoYSA8IGIpIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fSBlbHNlIGlmIChhID4gYikge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fTtcblxuXHRcdHJldHVybiB0aGlzLml0ZW1zLnNvcnQoY29tcGFyZUZuKTtcblx0fVxuXG5cdHByaXZhdGUgaXRlbVJlbmRlcihpdGVtOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IHZhbCA9IGl0ZW1cblx0XHRcdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1jb21iby1ib3gtdmFsdWVdJylcblx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0Jyk7XG5cblx0XHRpZiAodGhpcy5pdGVtc1dyYXBwZXIpIHRoaXMuaXRlbXNXcmFwcGVyLmFwcGVuZChpdGVtKTtcblx0XHRlbHNlIHRoaXMub3V0cHV0LmFwcGVuZChpdGVtKTtcblxuXHRcdGlmICghdGhpcy5wcmV2ZW50U2VsZWN0aW9uKSB7XG5cdFx0XHRpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNsb3NlKHZhbCk7XG5cdFx0XHRcdHRoaXMuc2V0U2VsZWN0ZWRCeVZhbHVlKHRoaXMudmFsdWVzQnlTZWxlY3RvcihpdGVtKSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHBsYWluUmVuZGVyKGl0ZW1zOiBIVE1MRWxlbWVudFtdKSB7XG5cdFx0aXRlbXMuZm9yRWFjaCgoaXRlbTogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdHRoaXMuaXRlbVJlbmRlcihpdGVtKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgZ3JvdXBUYWJzUmVuZGVyKCkge1xuXHRcdGNvbnN0IHRhYnNTY3JvbGwgPSBodG1sVG9FbGVtZW50KHRoaXMudGFic1dyYXBwZXJUZW1wbGF0ZSk7XG5cdFx0Y29uc3QgdGFic1dyYXBwZXIgPSBodG1sVG9FbGVtZW50KFxuXHRcdFx0YDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtbm93cmFwIGdhcC14LTJcIj48L2Rpdj5gLFxuXHRcdCk7XG5cblx0XHR0YWJzU2Nyb2xsLmFwcGVuZCh0YWJzV3JhcHBlcik7XG5cdFx0dGhpcy5vdXRwdXQuaW5zZXJ0QmVmb3JlKHRhYnNTY3JvbGwsIHRoaXMub3V0cHV0LmZpcnN0Q2hpbGQpO1xuXG5cdFx0Y29uc3QgdGFiRGVmID0gaHRtbFRvRWxlbWVudCh0aGlzLmdyb3VwaW5nVGl0bGVUZW1wbGF0ZSk7XG5cdFx0dGFiRGVmLnNldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtZ3JvdXAtdGl0bGUnLCAnYWxsJyk7XG5cdFx0dGFiRGVmLmNsYXNzTGlzdC5hZGQoJy0tZXhjbHVkZS1hY2Nlc3NpYmlsaXR5JywgJ2FjdGl2ZScpO1xuXHRcdHRhYkRlZi5pbm5lclRleHQgPSAnQWxsJztcblx0XHR0aGlzLnRhYnMgPSBbLi4udGhpcy50YWJzLCB0YWJEZWZdO1xuXHRcdHRhYnNXcmFwcGVyLmFwcGVuZCh0YWJEZWYpO1xuXHRcdHRhYkRlZi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuc2VsZWN0ZWRHcm91cCA9ICdhbGwnO1xuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRUYWIgPSB0aGlzLnRhYnMuZmluZChcblx0XHRcdFx0KGVsSTogSFRNTEVsZW1lbnQpID0+XG5cdFx0XHRcdFx0ZWxJLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtZ3JvdXAtdGl0bGUnKSA9PT1cblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkR3JvdXAsXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLnRhYnMuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG5cdFx0XHRzZWxlY3RlZFRhYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHRcdHRoaXMuc2V0SXRlbXNWaXNpYmlsaXR5KCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmdyb3Vwcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0Y29uc3QgdGFiID0gaHRtbFRvRWxlbWVudCh0aGlzLmdyb3VwaW5nVGl0bGVUZW1wbGF0ZSk7XG5cdFx0XHR0YWIuc2V0QXR0cmlidXRlKCdkYXRhLWhzLWNvbWJvLWJveC1ncm91cC10aXRsZScsIGVsLm5hbWUpO1xuXHRcdFx0dGFiLmNsYXNzTGlzdC5hZGQoJy0tZXhjbHVkZS1hY2Nlc3NpYmlsaXR5Jyk7XG5cdFx0XHR0YWIuaW5uZXJUZXh0ID0gZWwudGl0bGU7XG5cblx0XHRcdHRoaXMudGFicyA9IFsuLi50aGlzLnRhYnMsIHRhYl07XG5cdFx0XHR0YWJzV3JhcHBlci5hcHBlbmQodGFiKTtcblxuXHRcdFx0dGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkR3JvdXAgPSBlbC5uYW1lO1xuXHRcdFx0XHRjb25zdCBzZWxlY3RlZFRhYiA9IHRoaXMudGFicy5maW5kKFxuXHRcdFx0XHRcdChlbEk6IEhUTUxFbGVtZW50KSA9PlxuXHRcdFx0XHRcdFx0ZWxJLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtZ3JvdXAtdGl0bGUnKSA9PT1cblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRHcm91cCxcblx0XHRcdFx0KTtcblxuXHRcdFx0XHR0aGlzLnRhYnMuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG5cdFx0XHRcdHNlbGVjdGVkVGFiLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcdFx0XHR0aGlzLnNldEl0ZW1zVmlzaWJpbGl0eSgpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGdyb3VwRGVmYXVsdFJlbmRlcigpIHtcblx0XHR0aGlzLmdyb3Vwcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0Y29uc3QgdGl0bGUgPSBodG1sVG9FbGVtZW50KHRoaXMuZ3JvdXBpbmdUaXRsZVRlbXBsYXRlKTtcblx0XHRcdHRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtZ3JvdXAtdGl0bGUnLCBlbC5uYW1lKTtcblx0XHRcdHRpdGxlLmNsYXNzTGlzdC5hZGQoJy0tZXhjbHVkZS1hY2Nlc3NpYmlsaXR5Jyk7XG5cdFx0XHR0aXRsZS5pbm5lclRleHQgPSBlbC50aXRsZTtcblxuXHRcdFx0aWYgKHRoaXMuaXRlbXNXcmFwcGVyKSB0aGlzLml0ZW1zV3JhcHBlci5hcHBlbmQodGl0bGUpO1xuXHRcdFx0ZWxzZSB0aGlzLm91dHB1dC5hcHBlbmQodGl0bGUpO1xuXG5cdFx0XHRjb25zdCBpdGVtcyA9IHRoaXMuc29ydEl0ZW1zKCkuZmlsdGVyKChmKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgZ3JvdXAgfSA9IEpTT04ucGFyc2UoXG5cdFx0XHRcdFx0Zi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtJyksXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0cmV0dXJuIGdyb3VwLm5hbWUgPT09IGVsLm5hbWU7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5wbGFpblJlbmRlcihpdGVtcyk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGl0ZW1zRnJvbUh0bWwoKSB7XG5cdFx0aWYgKHRoaXMuZ3JvdXBpbmdUeXBlID09PSAnZGVmYXVsdCcpIHtcblx0XHRcdHRoaXMuZ3JvdXBEZWZhdWx0UmVuZGVyKCk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmdyb3VwaW5nVHlwZSA9PT0gJ3RhYnMnKSB7XG5cdFx0XHRjb25zdCBpdGVtcyA9IHRoaXMuc29ydEl0ZW1zKCk7XG5cblx0XHRcdHRoaXMuZ3JvdXBUYWJzUmVuZGVyKCk7XG5cdFx0XHR0aGlzLnBsYWluUmVuZGVyKGl0ZW1zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgaXRlbXMgPSB0aGlzLnNvcnRJdGVtcygpO1xuXG5cdFx0XHR0aGlzLnBsYWluUmVuZGVyKGl0ZW1zKTtcblx0XHR9XG5cdFx0dGhpcy5zZXRSZXN1bHRzKHRoaXMuaW5wdXQudmFsdWUpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZFRvZ2dsZSgpIHtcblx0XHR0aGlzLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmlzT3BlbmVkKSB0aGlzLmNsb3NlKCk7XG5cdFx0XHRlbHNlIHRoaXMub3Blbih0aGlzLnRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXRvZ2dsZScpKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgc2V0U2VsZWN0ZWRCeVZhbHVlKHZhbDogc3RyaW5nW10pIHtcblx0XHR0aGlzLml0ZW1zLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5pc1RleHRFeGlzdHMoZWwsIHZhbCkpXG5cdFx0XHRcdChlbCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0XHRcdGVsc2UgKGVsIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRWYWx1ZSh2YWw6IHN0cmluZykge1xuXHRcdHRoaXMuc2VsZWN0ZWQgPSB2YWw7XG5cdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHR0aGlzLmlucHV0LnZhbHVlID0gdmFsO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRJdGVtc1Zpc2liaWxpdHkoKSB7XG5cdFx0aWYgKHRoaXMuZ3JvdXBpbmdUeXBlID09PSAndGFicycgJiYgdGhpcy5zZWxlY3RlZEdyb3VwICE9PSAnYWxsJykge1xuXHRcdFx0dGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRcdChpdGVtIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaXRlbXMgPVxuXHRcdFx0dGhpcy5ncm91cGluZ1R5cGUgPT09ICd0YWJzJ1xuXHRcdFx0XHQ/IHRoaXMuc2VsZWN0ZWRHcm91cCA9PT0gJ2FsbCdcblx0XHRcdFx0XHQ/IHRoaXMuaXRlbXNcblx0XHRcdFx0XHQ6IHRoaXMuaXRlbXMuZmlsdGVyKChmOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB7IGdyb3VwIH0gPSBKU09OLnBhcnNlKFxuXHRcdFx0XHRcdFx0XHRcdGYuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLWNvbWJvLWJveC1vdXRwdXQtaXRlbScpLFxuXHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBncm91cC5uYW1lID09PSB0aGlzLnNlbGVjdGVkR3JvdXA7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQ6IHRoaXMuaXRlbXM7XG5cblx0XHRpZiAodGhpcy5ncm91cGluZ1R5cGUgPT09ICd0YWJzJyAmJiB0aGlzLnNlbGVjdGVkR3JvdXAgIT09ICdhbGwnKSB7XG5cdFx0XHRpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRcdChpdGVtIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdGlmICghdGhpcy5pc1RleHRFeGlzdHNBbnkoaXRlbSwgdGhpcy52YWx1ZSkpXG5cdFx0XHRcdChpdGVtIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0ZWxzZSAoaXRlbSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5ncm91cGluZ1R5cGUgPT09ICdkZWZhdWx0Jykge1xuXHRcdFx0dGhpcy5vdXRwdXRcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLWNvbWJvLWJveC1ncm91cC10aXRsZV0nKVxuXHRcdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZyA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1jb21iby1ib3gtZ3JvdXAtdGl0bGUnKTtcblx0XHRcdFx0XHRjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKChmOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgeyBncm91cCB9ID0gSlNPTi5wYXJzZShcblx0XHRcdFx0XHRcdFx0Zi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LW91dHB1dC1pdGVtJyksXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZ3JvdXAubmFtZSA9PT0gZyAmJiBmLnN0eWxlLmRpc3BsYXkgPT09ICdibG9jayc7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRpZiAoaXRlbXMubGVuZ3RoKSBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdFx0XHRlbHNlIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgaGFzVmlzaWJsZUl0ZW1zKCkge1xuXHRcdHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aFxuXHRcdFx0PyB0aGlzLml0ZW1zLnNvbWUoKGVsOiBIVE1MRWxlbWVudCkgPT4gZWwuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJylcblx0XHRcdDogZmFsc2U7XG5cdH1cblxuXHRwcml2YXRlIGFwcGVuZEl0ZW1zVG9XcmFwcGVyKGl0ZW06IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuaXRlbXNXcmFwcGVyKSB7XG5cdFx0XHR0aGlzLml0ZW1zV3JhcHBlci5hcHBlbmQoaXRlbSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMub3V0cHV0LmFwcGVuZChpdGVtKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkT3V0cHV0UGxhY2Vob2xkZXIoKSB7XG5cdFx0aWYgKCF0aGlzLm91dHB1dFBsYWNlaG9sZGVyKVxuXHRcdFx0dGhpcy5vdXRwdXRQbGFjZWhvbGRlciA9IGh0bWxUb0VsZW1lbnQodGhpcy5vdXRwdXRFbXB0eVRlbXBsYXRlKTtcblxuXHRcdHRoaXMuYXBwZW5kSXRlbXNUb1dyYXBwZXIodGhpcy5vdXRwdXRQbGFjZWhvbGRlcik7XG5cdH1cblxuXHRwcml2YXRlIGRlc3Ryb3lPdXRwdXRQbGFjZWhvbGRlcigpIHtcblx0XHRpZiAodGhpcy5vdXRwdXRQbGFjZWhvbGRlcikgdGhpcy5vdXRwdXRQbGFjZWhvbGRlci5yZW1vdmUoKTtcblxuXHRcdHRoaXMub3V0cHV0UGxhY2Vob2xkZXIgPSBudWxsO1xuXHR9XG5cblx0cHJpdmF0ZSByZXN1bHRJdGVtcygpIHtcblx0XHRpZiAoIXRoaXMuaXRlbXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cblx0XHR0aGlzLnNldEl0ZW1zVmlzaWJpbGl0eSgpO1xuXHRcdHRoaXMuc2V0U2VsZWN0ZWRCeVZhbHVlKFt0aGlzLnNlbGVjdGVkXSk7XG5cdH1cblxuXHQvLyBQdWJsaWMgbWV0aG9kc1xuXHRwcml2YXRlIHNldFZhbHVlQW5kT3Blbih2YWw6IHN0cmluZykge1xuXHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cblx0XHRpZiAodGhpcy5pdGVtcy5sZW5ndGgpIHtcblx0XHRcdHRoaXMuc2V0SXRlbXNWaXNpYmlsaXR5KCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG9wZW4odmFsPzogc3RyaW5nKSB7XG5cdFx0aWYgKHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzKSByZXR1cm4gZmFsc2U7XG5cblx0XHRpZiAodHlwZW9mIHZhbCAhPT0gJ3VuZGVmaW5lZCcpIHRoaXMuc2V0VmFsdWVBbmRPcGVuKHZhbCk7XG5cblx0XHRpZiAodGhpcy5wcmV2ZW50VmlzaWJpbGl0eSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0dGhpcy5hbmltYXRpb25JblByb2Nlc3MgPSB0cnVlO1xuXG5cdFx0dGhpcy5vdXRwdXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0dGhpcy5yZWNhbGN1bGF0ZURpcmVjdGlvbigpO1xuXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG5cdFx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5pc09wZW5lZCA9IHRydWU7XG5cdH1cblxuXHRwcml2YXRlIHNldFZhbHVlQW5kQ2xlYXIodmFsOiBzdHJpbmcgfCBudWxsKSB7XG5cdFx0aWYgKHZhbCkgdGhpcy5zZXRWYWx1ZSh2YWwpO1xuXHRcdGVsc2UgdGhpcy5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkKTtcblxuXHRcdGlmICh0aGlzLm91dHB1dFBsYWNlaG9sZGVyKSB0aGlzLmRlc3Ryb3lPdXRwdXRQbGFjZWhvbGRlcigpO1xuXHR9XG5cblx0cHVibGljIGNsb3NlKHZhbD86IHN0cmluZyB8IG51bGwpIHtcblx0XHRpZiAodGhpcy5hbmltYXRpb25JblByb2Nlc3MpIHJldHVybiBmYWxzZTtcblxuXHRcdGlmICh0aGlzLnByZXZlbnRWaXNpYmlsaXR5KSB7XG5cdFx0XHR0aGlzLnNldFZhbHVlQW5kQ2xlYXIodmFsKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzID0gdHJ1ZTtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0dGhpcy5vdXRwdXQuY2xhc3NMaXN0LnJlbW92ZSgnYm90dG9tLWZ1bGwnLCAndG9wLWZ1bGwnKTtcblx0XHR0aGlzLm91dHB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblx0XHR0aGlzLm91dHB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnJztcblxuXHRcdGFmdGVyVHJhbnNpdGlvbih0aGlzLm91dHB1dCwgKCkgPT4ge1xuXHRcdFx0dGhpcy5vdXRwdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuXHRcdFx0dGhpcy5zZXRWYWx1ZUFuZENsZWFyKHZhbCk7XG5cblx0XHRcdHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzID0gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmlzT3BlbmVkID0gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgcmVjYWxjdWxhdGVEaXJlY3Rpb24oKSB7XG5cdFx0aWYgKFxuXHRcdFx0aXNFbm91Z2hTcGFjZShcblx0XHRcdFx0dGhpcy5vdXRwdXQsXG5cdFx0XHRcdHRoaXMuaW5wdXQsXG5cdFx0XHRcdCdib3R0b20nLFxuXHRcdFx0XHR0aGlzLmdhcCxcblx0XHRcdFx0dGhpcy52aWV3cG9ydCBhcyBIVE1MRWxlbWVudCxcblx0XHRcdClcblx0XHQpIHtcblx0XHRcdHRoaXMub3V0cHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2JvdHRvbS1mdWxsJyk7XG5cdFx0XHR0aGlzLm91dHB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnJztcblx0XHRcdHRoaXMub3V0cHV0LmNsYXNzTGlzdC5hZGQoJ3RvcC1mdWxsJyk7XG5cdFx0XHR0aGlzLm91dHB1dC5zdHlsZS5tYXJnaW5Ub3AgPSBgJHt0aGlzLmdhcH1weGA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMub3V0cHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3RvcC1mdWxsJyk7XG5cdFx0XHR0aGlzLm91dHB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblx0XHRcdHRoaXMub3V0cHV0LmNsYXNzTGlzdC5hZGQoJ2JvdHRvbS1mdWxsJyk7XG5cdFx0XHR0aGlzLm91dHB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBgJHt0aGlzLmdhcH1weGA7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50XG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uKSB3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLWNvbWJvLWJveF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94Jyk7XG5cdFx0XHRcdFx0Y29uc3Qgb3B0aW9uczogSUNvbWJvQm94T3B0aW9ucyA9IGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XG5cblx0XHRcdFx0XHRuZXcgSFNDb21ib0JveChlbCwgb3B0aW9ucyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0aWYgKHdpbmRvdy4kaHNDb21ib0JveENvbGxlY3Rpb24pIHtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcblx0XHRcdFx0Y29uc3QgZXZ0VGFyZ2V0ID0gZXZ0LnRhcmdldDtcblxuXHRcdFx0XHRIU0NvbWJvQm94LmNsb3NlQ3VycmVudGx5T3BlbmVkKGV2dFRhcmdldCBhcyBIVE1MRWxlbWVudCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+XG5cdFx0XHRcdEhTQ29tYm9Cb3guYWNjZXNzaWJpbGl0eShldnQpLFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgY2xvc2UodGFyZ2V0OiBIVE1MRWxlbWVudCB8IHN0cmluZykge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAoZWxJbkNvbGxlY3Rpb24gJiYgZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5pc09wZW5lZCkge1xuXHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5jbG9zZSgpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBjbG9zZUN1cnJlbnRseU9wZW5lZChldnRUYXJnZXQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGwpIHtcblx0XHRpZiAoIWV2dFRhcmdldC5jbG9zZXN0KCdbZGF0YS1ocy1jb21iby1ib3hdLmFjdGl2ZScpKSB7XG5cdFx0XHRjb25zdCBjdXJyZW50bHlPcGVuZWQgPVxuXHRcdFx0XHR3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uLmZpbHRlcigoZWwpID0+IGVsLmVsZW1lbnQuaXNPcGVuZWQpIHx8XG5cdFx0XHRcdG51bGw7XG5cblx0XHRcdGlmIChjdXJyZW50bHlPcGVuZWQpIHtcblx0XHRcdFx0Y3VycmVudGx5T3BlbmVkLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdFx0ZWwuZWxlbWVudC5jbG9zZSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBY2Nlc3NpYmlsaXR5IG1ldGhvZHNcblx0cHJpdmF0ZSBzdGF0aWMgZ2V0UHJlcGFyZWRJdGVtcyhcblx0XHRpc1JldmVyc2VkID0gZmFsc2UsXG5cdFx0b3V0cHV0OiBIVE1MRWxlbWVudCB8IG51bGwsXG5cdCk6IEVsZW1lbnRbXSB8IG51bGwge1xuXHRcdGlmICghb3V0cHV0KSByZXR1cm4gbnVsbDtcblxuXHRcdGNvbnN0IHByZXBhcmVkSXRlbXMgPSBpc1JldmVyc2VkXG5cdFx0XHQ/IEFycmF5LmZyb20oXG5cdFx0XHRcdFx0b3V0cHV0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+ICo6bm90KC4tLWV4Y2x1ZGUtYWNjZXNzaWJpbGl0eSknKSxcblx0XHRcdFx0KVxuXHRcdFx0XHRcdC5maWx0ZXIoKGVsKSA9PiAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJylcblx0XHRcdFx0XHQucmV2ZXJzZSgpXG5cdFx0XHQ6IEFycmF5LmZyb20oXG5cdFx0XHRcdFx0b3V0cHV0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+ICo6bm90KC4tLWV4Y2x1ZGUtYWNjZXNzaWJpbGl0eSknKSxcblx0XHRcdFx0KS5maWx0ZXIoKGVsKSA9PiAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJyk7XG5cdFx0Y29uc3QgaXRlbXMgPSBwcmVwYXJlZEl0ZW1zLmZpbHRlcihcblx0XHRcdChlbDogYW55KSA9PiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpLFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gaXRlbXM7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBzZXRIaWdobGlnaHRlZChcblx0XHRwcmV2OiBFbGVtZW50LFxuXHRcdGN1cnJlbnQ6IEhUTUxFbGVtZW50LFxuXHRcdGlucHV0OiBIVE1MSW5wdXRFbGVtZW50LFxuXHQpOiB2b2lkIHtcblx0XHRjdXJyZW50LmZvY3VzKCk7XG5cblx0XHRpbnB1dC52YWx1ZSA9IGN1cnJlbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1jb21iby1ib3gtdmFsdWVdJylcblx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0Jyk7XG5cblx0XHRpZiAocHJldikgcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdocy1jb21iby1ib3gtb3V0cHV0LWl0ZW0taGlnaGxpZ2h0ZWQnKTtcblx0XHRjdXJyZW50LmNsYXNzTGlzdC5hZGQoJ2hzLWNvbWJvLWJveC1vdXRwdXQtaXRlbS1oaWdobGlnaHRlZCcpO1xuXHR9XG5cblx0c3RhdGljIGFjY2Vzc2liaWxpdHkoZXZ0OiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PiBlbC5lbGVtZW50LmlzT3BlbmVkLFxuXHRcdCk7XG5cblx0XHRpZiAoXG5cdFx0XHR0YXJnZXQgJiZcblx0XHRcdENPTUJPX0JPWF9BQ0NFU1NJQklMSVRZX0tFWV9TRVQuaW5jbHVkZXMoZXZ0LmNvZGUpICYmXG5cdFx0XHQhZXZ0Lm1ldGFLZXlcblx0XHQpIHtcblx0XHRcdHN3aXRjaCAoZXZ0LmNvZGUpIHtcblx0XHRcdFx0Y2FzZSAnRXNjYXBlJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uRXNjYXBlKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0Fycm93VXAnOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25BcnJvdygpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdBcnJvd0Rvd24nOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25BcnJvdyhmYWxzZSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0hvbWUnOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25TdGFydEVuZCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdFbmQnOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25TdGFydEVuZChmYWxzZSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0VudGVyJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uRW50ZXIoZXZ0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgb25Fc2NhcGUoKSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PiAhZWwuZWxlbWVudC5wcmV2ZW50VmlzaWJpbGl0eSAmJiBlbC5lbGVtZW50LmlzT3BlbmVkLFxuXHRcdCk7XG5cblx0XHRpZiAodGFyZ2V0KSB7XG5cdFx0XHR0YXJnZXQuZWxlbWVudC5jbG9zZSgpO1xuXHRcdFx0dGFyZ2V0LmVsZW1lbnQuaW5wdXQuYmx1cigpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBvbkFycm93KGlzQXJyb3dVcCA9IHRydWUpIHtcblx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uLmZpbmQoKGVsKSA9PlxuXHRcdFx0ZWwuZWxlbWVudC5wcmV2ZW50VmlzaWJpbGl0eSA/IGVsLmVsZW1lbnQuaXNDdXJyZW50IDogZWwuZWxlbWVudC5pc09wZW5lZCxcblx0XHQpO1xuXG5cdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0Y29uc3Qgb3V0cHV0ID0gdGFyZ2V0LmVsZW1lbnQuaXRlbXNXcmFwcGVyID8/IHRhcmdldC5lbGVtZW50Lm91dHB1dDtcblxuXHRcdFx0aWYgKCFvdXRwdXQpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0Y29uc3QgaXRlbXMgPSBIU0NvbWJvQm94LmdldFByZXBhcmVkSXRlbXMoaXNBcnJvd1VwLCBvdXRwdXQpIGFzIEVsZW1lbnRbXTtcblx0XHRcdGNvbnN0IGN1cnJlbnQgPSBvdXRwdXQucXVlcnlTZWxlY3Rvcihcblx0XHRcdFx0Jy5ocy1jb21iby1ib3gtb3V0cHV0LWl0ZW0taGlnaGxpZ2h0ZWQnLFxuXHRcdFx0KTtcblx0XHRcdGxldCBjdXJyZW50SXRlbSA9IG51bGw7XG5cdFx0XHRpZiAoIWN1cnJlbnQpXG5cdFx0XHRcdGl0ZW1zWzBdLmNsYXNzTGlzdC5hZGQoJ2hzLWNvbWJvLWJveC1vdXRwdXQtaXRlbS1oaWdobGlnaHRlZCcpO1xuXHRcdFx0bGV0IGN1cnJlbnRJbmQgPSBpdGVtcy5maW5kSW5kZXgoKGVsOiBhbnkpID0+IGVsID09PSBjdXJyZW50KTtcblx0XHRcdGlmIChjdXJyZW50SW5kICsgMSA8IGl0ZW1zLmxlbmd0aCkgY3VycmVudEluZCsrO1xuXHRcdFx0Y3VycmVudEl0ZW0gPSBpdGVtc1tjdXJyZW50SW5kXSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuXHRcdFx0SFNDb21ib0JveC5zZXRIaWdobGlnaHRlZChjdXJyZW50LCBjdXJyZW50SXRlbSwgdGFyZ2V0LmVsZW1lbnQuaW5wdXQpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBvblN0YXJ0RW5kKGlzU3RhcnQgPSB0cnVlKSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKChlbCkgPT5cblx0XHRcdGVsLmVsZW1lbnQucHJldmVudFZpc2liaWxpdHkgPyBlbC5lbGVtZW50LmlzQ3VycmVudCA6IGVsLmVsZW1lbnQuaXNPcGVuZWQsXG5cdFx0KTtcblxuXHRcdGlmICh0YXJnZXQpIHtcblx0XHRcdGNvbnN0IG91dHB1dCA9IHRhcmdldC5lbGVtZW50Lml0ZW1zV3JhcHBlciA/PyB0YXJnZXQuZWxlbWVudC5vdXRwdXQ7XG5cblx0XHRcdGlmICghb3V0cHV0KSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdGNvbnN0IGl0ZW1zID0gSFNDb21ib0JveC5nZXRQcmVwYXJlZEl0ZW1zKGlzU3RhcnQsIG91dHB1dCkgYXMgRWxlbWVudFtdO1xuXHRcdFx0Y29uc3QgY3VycmVudCA9IG91dHB1dC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHQnLmhzLWNvbWJvLWJveC1vdXRwdXQtaXRlbS1oaWdobGlnaHRlZCcsXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoaXRlbXMubGVuZ3RoKVxuXHRcdFx0XHRIU0NvbWJvQm94LnNldEhpZ2hsaWdodGVkKFxuXHRcdFx0XHRcdGN1cnJlbnQsXG5cdFx0XHRcdFx0aXRlbXNbMF0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG5cdFx0XHRcdFx0dGFyZ2V0LmVsZW1lbnQuaW5wdXQsXG5cdFx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uRW50ZXIoZXZ0OiBFdmVudCkge1xuXHRcdGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cdFx0Y29uc3Qgb3BlbmVkID0gd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0Ly8gOjpURVNUICFlbC5lbGVtZW50LnByZXZlbnRWaXNpYmlsaXR5ICYmIGVsLmVsZW1lbnQuaXNPcGVuZWRcblx0XHRcdChlbCkgPT4gIWlzUGFyZW50T3JFbGVtZW50SGlkZGVuKGVsLmVsZW1lbnQuZWwpICYmIGVsLmVsZW1lbnQuaXNPcGVuZWQsXG5cdFx0KTtcblx0XHRjb25zdCBsaW5rOiBIVE1MQW5jaG9yRWxlbWVudCA9IG9wZW5lZC5lbGVtZW50LmVsLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcblxuXHRcdGlmICgodGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5oYXNBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LWlucHV0JykpIHtcblx0XHRcdG9wZW5lZC5lbGVtZW50LmNsb3NlKCk7XG5cdFx0XHQodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmJsdXIoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFvcGVuZWQuZWxlbWVudC5wcmV2ZW50U2VsZWN0aW9uKVxuXHRcdFx0XHRvcGVuZWQuZWxlbWVudC5zZXRTZWxlY3RlZEJ5VmFsdWUoXG5cdFx0XHRcdFx0b3BlbmVkLmVsZW1lbnQudmFsdWVzQnlTZWxlY3RvcihldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0KTtcblx0XHRcdGlmIChvcGVuZWQuZWxlbWVudC5wcmV2ZW50U2VsZWN0aW9uICYmIGxpbmspXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24obGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7XG5cdFx0XHRvcGVuZWQuZWxlbWVudC5jbG9zZShcblx0XHRcdFx0IW9wZW5lZC5lbGVtZW50LnByZXZlbnRTZWxlY3Rpb25cblx0XHRcdFx0XHQ/IChldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KVxuXHRcdFx0XHRcdFx0XHQucXVlcnlTZWxlY3RvcignW2RhdGEtaHMtY29tYm8tYm94LXZhbHVlXScpXG5cdFx0XHRcdFx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtY29tYm8tYm94LXNlYXJjaC10ZXh0Jylcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTQ29tYm9Cb3g6IEZ1bmN0aW9uO1xuXHRcdCRoc0NvbWJvQm94Q29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTQ29tYm9Cb3g+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTQ29tYm9Cb3guYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdDb21ib0JveCBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNDb21ib0JveENvbGxlY3Rpb24pO1xufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcblx0aWYgKCF3aW5kb3cuJGhzQ29tYm9Cb3hDb2xsZWN0aW9uKSByZXR1cm4gZmFsc2U7XG5cblx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc0NvbWJvQm94Q29sbGVjdGlvbi5maW5kKChlbCkgPT4gZWwuZWxlbWVudC5pc09wZW5lZCk7XG5cblx0aWYgKHRhcmdldCkgdGFyZ2V0LmVsZW1lbnQucmVjYWxjdWxhdGVEaXJlY3Rpb24oKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTQ29tYm9Cb3ggPSBIU0NvbWJvQm94O1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU0NvbWJvQm94O1xuIiwgImV4cG9ydCB2YXIgdG9wID0gJ3RvcCc7XG5leHBvcnQgdmFyIGJvdHRvbSA9ICdib3R0b20nO1xuZXhwb3J0IHZhciByaWdodCA9ICdyaWdodCc7XG5leHBvcnQgdmFyIGxlZnQgPSAnbGVmdCc7XG5leHBvcnQgdmFyIGF1dG8gPSAnYXV0byc7XG5leHBvcnQgdmFyIGJhc2VQbGFjZW1lbnRzID0gW3RvcCwgYm90dG9tLCByaWdodCwgbGVmdF07XG5leHBvcnQgdmFyIHN0YXJ0ID0gJ3N0YXJ0JztcbmV4cG9ydCB2YXIgZW5kID0gJ2VuZCc7XG5leHBvcnQgdmFyIGNsaXBwaW5nUGFyZW50cyA9ICdjbGlwcGluZ1BhcmVudHMnO1xuZXhwb3J0IHZhciB2aWV3cG9ydCA9ICd2aWV3cG9ydCc7XG5leHBvcnQgdmFyIHBvcHBlciA9ICdwb3BwZXInO1xuZXhwb3J0IHZhciByZWZlcmVuY2UgPSAncmVmZXJlbmNlJztcbmV4cG9ydCB2YXIgdmFyaWF0aW9uUGxhY2VtZW50cyA9IC8qI19fUFVSRV9fKi9iYXNlUGxhY2VtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gIHJldHVybiBhY2MuY29uY2F0KFtwbGFjZW1lbnQgKyBcIi1cIiArIHN0YXJ0LCBwbGFjZW1lbnQgKyBcIi1cIiArIGVuZF0pO1xufSwgW10pO1xuZXhwb3J0IHZhciBwbGFjZW1lbnRzID0gLyojX19QVVJFX18qL1tdLmNvbmNhdChiYXNlUGxhY2VtZW50cywgW2F1dG9dKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gIHJldHVybiBhY2MuY29uY2F0KFtwbGFjZW1lbnQsIHBsYWNlbWVudCArIFwiLVwiICsgc3RhcnQsIHBsYWNlbWVudCArIFwiLVwiICsgZW5kXSk7XG59LCBbXSk7IC8vIG1vZGlmaWVycyB0aGF0IG5lZWQgdG8gcmVhZCB0aGUgRE9NXG5cbmV4cG9ydCB2YXIgYmVmb3JlUmVhZCA9ICdiZWZvcmVSZWFkJztcbmV4cG9ydCB2YXIgcmVhZCA9ICdyZWFkJztcbmV4cG9ydCB2YXIgYWZ0ZXJSZWFkID0gJ2FmdGVyUmVhZCc7IC8vIHB1cmUtbG9naWMgbW9kaWZpZXJzXG5cbmV4cG9ydCB2YXIgYmVmb3JlTWFpbiA9ICdiZWZvcmVNYWluJztcbmV4cG9ydCB2YXIgbWFpbiA9ICdtYWluJztcbmV4cG9ydCB2YXIgYWZ0ZXJNYWluID0gJ2FmdGVyTWFpbic7IC8vIG1vZGlmaWVyIHdpdGggdGhlIHB1cnBvc2UgdG8gd3JpdGUgdG8gdGhlIERPTSAob3Igd3JpdGUgaW50byBhIGZyYW1ld29yayBzdGF0ZSlcblxuZXhwb3J0IHZhciBiZWZvcmVXcml0ZSA9ICdiZWZvcmVXcml0ZSc7XG5leHBvcnQgdmFyIHdyaXRlID0gJ3dyaXRlJztcbmV4cG9ydCB2YXIgYWZ0ZXJXcml0ZSA9ICdhZnRlcldyaXRlJztcbmV4cG9ydCB2YXIgbW9kaWZpZXJQaGFzZXMgPSBbYmVmb3JlUmVhZCwgcmVhZCwgYWZ0ZXJSZWFkLCBiZWZvcmVNYWluLCBtYWluLCBhZnRlck1haW4sIGJlZm9yZVdyaXRlLCB3cml0ZSwgYWZ0ZXJXcml0ZV07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE5vZGVOYW1lKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQgPyAoZWxlbWVudC5ub2RlTmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKSA6IG51bGw7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdpbmRvdyhub2RlKSB7XG4gIGlmIChub2RlID09IG51bGwpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG5cbiAgaWYgKG5vZGUudG9TdHJpbmcoKSAhPT0gJ1tvYmplY3QgV2luZG93XScpIHtcbiAgICB2YXIgb3duZXJEb2N1bWVudCA9IG5vZGUub3duZXJEb2N1bWVudDtcbiAgICByZXR1cm4gb3duZXJEb2N1bWVudCA/IG93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93IDogd2luZG93O1xuICB9XG5cbiAgcmV0dXJuIG5vZGU7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5cbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gIHZhciBPd25FbGVtZW50ID0gZ2V0V2luZG93KG5vZGUpLkVsZW1lbnQ7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaXNIVE1MRWxlbWVudChub2RlKSB7XG4gIHZhciBPd25FbGVtZW50ID0gZ2V0V2luZG93KG5vZGUpLkhUTUxFbGVtZW50O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBpc1NoYWRvd1Jvb3Qobm9kZSkge1xuICAvLyBJRSAxMSBoYXMgbm8gU2hhZG93Um9vdFxuICBpZiAodHlwZW9mIFNoYWRvd1Jvb3QgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuU2hhZG93Um9vdDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBTaGFkb3dSb290O1xufVxuXG5leHBvcnQgeyBpc0VsZW1lbnQsIGlzSFRNTEVsZW1lbnQsIGlzU2hhZG93Um9vdCB9OyIsICJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4uL2RvbS11dGlscy9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiOyAvLyBUaGlzIG1vZGlmaWVyIHRha2VzIHRoZSBzdHlsZXMgcHJlcGFyZWQgYnkgdGhlIGBjb21wdXRlU3R5bGVzYCBtb2RpZmllclxuLy8gYW5kIGFwcGxpZXMgdGhlbSB0byB0aGUgSFRNTEVsZW1lbnRzIHN1Y2ggYXMgcG9wcGVyIGFuZCBhcnJvd1xuXG5mdW5jdGlvbiBhcHBseVN0eWxlcyhfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGU7XG4gIE9iamVjdC5rZXlzKHN0YXRlLmVsZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHN0eWxlID0gc3RhdGUuc3R5bGVzW25hbWVdIHx8IHt9O1xuICAgIHZhciBhdHRyaWJ1dGVzID0gc3RhdGUuYXR0cmlidXRlc1tuYW1lXSB8fCB7fTtcbiAgICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW25hbWVdOyAvLyBhcnJvdyBpcyBvcHRpb25hbCArIHZpcnR1YWwgZWxlbWVudHNcblxuICAgIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAhZ2V0Tm9kZU5hbWUoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIEZsb3cgZG9lc24ndCBzdXBwb3J0IHRvIGV4dGVuZCB0aGlzIHByb3BlcnR5LCBidXQgaXQncyB0aGUgbW9zdFxuICAgIC8vIGVmZmVjdGl2ZSB3YXkgdG8gYXBwbHkgc3R5bGVzIHRvIGFuIEhUTUxFbGVtZW50XG4gICAgLy8gJEZsb3dGaXhNZVtjYW5ub3Qtd3JpdGVdXG5cblxuICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGUpO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYyKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlO1xuICB2YXIgaW5pdGlhbFN0eWxlcyA9IHtcbiAgICBwb3BwZXI6IHtcbiAgICAgIHBvc2l0aW9uOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgbGVmdDogJzAnLFxuICAgICAgdG9wOiAnMCcsXG4gICAgICBtYXJnaW46ICcwJ1xuICAgIH0sXG4gICAgYXJyb3c6IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgfSxcbiAgICByZWZlcmVuY2U6IHt9XG4gIH07XG4gIE9iamVjdC5hc3NpZ24oc3RhdGUuZWxlbWVudHMucG9wcGVyLnN0eWxlLCBpbml0aWFsU3R5bGVzLnBvcHBlcik7XG4gIHN0YXRlLnN0eWxlcyA9IGluaXRpYWxTdHlsZXM7XG5cbiAgaWYgKHN0YXRlLmVsZW1lbnRzLmFycm93KSB7XG4gICAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5hcnJvdy5zdHlsZSwgaW5pdGlhbFN0eWxlcy5hcnJvdyk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIE9iamVjdC5rZXlzKHN0YXRlLmVsZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW25hbWVdO1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzdGF0ZS5hdHRyaWJ1dGVzW25hbWVdIHx8IHt9O1xuICAgICAgdmFyIHN0eWxlUHJvcGVydGllcyA9IE9iamVjdC5rZXlzKHN0YXRlLnN0eWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IHN0YXRlLnN0eWxlc1tuYW1lXSA6IGluaXRpYWxTdHlsZXNbbmFtZV0pOyAvLyBTZXQgYWxsIHZhbHVlcyB0byBhbiBlbXB0eSBzdHJpbmcgdG8gdW5zZXQgdGhlbVxuXG4gICAgICB2YXIgc3R5bGUgPSBzdHlsZVByb3BlcnRpZXMucmVkdWNlKGZ1bmN0aW9uIChzdHlsZSwgcHJvcGVydHkpIHtcbiAgICAgICAgc3R5bGVbcHJvcGVydHldID0gJyc7XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH0sIHt9KTsgLy8gYXJyb3cgaXMgb3B0aW9uYWwgKyB2aXJ0dWFsIGVsZW1lbnRzXG5cbiAgICAgIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAhZ2V0Tm9kZU5hbWUoZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIHN0eWxlKTtcbiAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdhcHBseVN0eWxlcycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnd3JpdGUnLFxuICBmbjogYXBwbHlTdHlsZXMsXG4gIGVmZmVjdDogZWZmZWN0LFxuICByZXF1aXJlczogWydjb21wdXRlU3R5bGVzJ11cbn07IiwgImltcG9ydCB7IGF1dG8gfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQuc3BsaXQoJy0nKVswXTtcbn0iLCAiZXhwb3J0IHZhciBtYXggPSBNYXRoLm1heDtcbmV4cG9ydCB2YXIgbWluID0gTWF0aC5taW47XG5leHBvcnQgdmFyIHJvdW5kID0gTWF0aC5yb3VuZDsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VUFTdHJpbmcoKSB7XG4gIHZhciB1YURhdGEgPSBuYXZpZ2F0b3IudXNlckFnZW50RGF0YTtcblxuICBpZiAodWFEYXRhICE9IG51bGwgJiYgdWFEYXRhLmJyYW5kcyAmJiBBcnJheS5pc0FycmF5KHVhRGF0YS5icmFuZHMpKSB7XG4gICAgcmV0dXJuIHVhRGF0YS5icmFuZHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5icmFuZCArIFwiL1wiICsgaXRlbS52ZXJzaW9uO1xuICAgIH0pLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50O1xufSIsICJpbXBvcnQgZ2V0VUFTdHJpbmcgZnJvbSBcIi4uL3V0aWxzL3VzZXJBZ2VudC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNMYXlvdXRWaWV3cG9ydCgpIHtcbiAgcmV0dXJuICEvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xufSIsICJpbXBvcnQgeyBpc0VsZW1lbnQsIGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGlzTGF5b3V0Vmlld3BvcnQgZnJvbSBcIi4vaXNMYXlvdXRWaWV3cG9ydC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIGluY2x1ZGVTY2FsZSwgaXNGaXhlZFN0cmF0ZWd5KSB7XG4gIGlmIChpbmNsdWRlU2NhbGUgPT09IHZvaWQgMCkge1xuICAgIGluY2x1ZGVTY2FsZSA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGlzRml4ZWRTdHJhdGVneSA9PT0gdm9pZCAwKSB7XG4gICAgaXNGaXhlZFN0cmF0ZWd5ID0gZmFsc2U7XG4gIH1cblxuICB2YXIgY2xpZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciBzY2FsZVggPSAxO1xuICB2YXIgc2NhbGVZID0gMTtcblxuICBpZiAoaW5jbHVkZVNjYWxlICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICBzY2FsZVggPSBlbGVtZW50Lm9mZnNldFdpZHRoID4gMCA/IHJvdW5kKGNsaWVudFJlY3Qud2lkdGgpIC8gZWxlbWVudC5vZmZzZXRXaWR0aCB8fCAxIDogMTtcbiAgICBzY2FsZVkgPSBlbGVtZW50Lm9mZnNldEhlaWdodCA+IDAgPyByb3VuZChjbGllbnRSZWN0LmhlaWdodCkgLyBlbGVtZW50Lm9mZnNldEhlaWdodCB8fCAxIDogMTtcbiAgfVxuXG4gIHZhciBfcmVmID0gaXNFbGVtZW50KGVsZW1lbnQpID8gZ2V0V2luZG93KGVsZW1lbnQpIDogd2luZG93LFxuICAgICAgdmlzdWFsVmlld3BvcnQgPSBfcmVmLnZpc3VhbFZpZXdwb3J0O1xuXG4gIHZhciBhZGRWaXN1YWxPZmZzZXRzID0gIWlzTGF5b3V0Vmlld3BvcnQoKSAmJiBpc0ZpeGVkU3RyYXRlZ3k7XG4gIHZhciB4ID0gKGNsaWVudFJlY3QubGVmdCArIChhZGRWaXN1YWxPZmZzZXRzICYmIHZpc3VhbFZpZXdwb3J0ID8gdmlzdWFsVmlld3BvcnQub2Zmc2V0TGVmdCA6IDApKSAvIHNjYWxlWDtcbiAgdmFyIHkgPSAoY2xpZW50UmVjdC50b3AgKyAoYWRkVmlzdWFsT2Zmc2V0cyAmJiB2aXN1YWxWaWV3cG9ydCA/IHZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcCA6IDApKSAvIHNjYWxlWTtcbiAgdmFyIHdpZHRoID0gY2xpZW50UmVjdC53aWR0aCAvIHNjYWxlWDtcbiAgdmFyIGhlaWdodCA9IGNsaWVudFJlY3QuaGVpZ2h0IC8gc2NhbGVZO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB0b3A6IHksXG4gICAgcmlnaHQ6IHggKyB3aWR0aCxcbiAgICBib3R0b206IHkgKyBoZWlnaHQsXG4gICAgbGVmdDogeCxcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcbn0iLCAiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjsgLy8gUmV0dXJucyB0aGUgbGF5b3V0IHJlY3Qgb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byBpdHMgb2Zmc2V0UGFyZW50LiBMYXlvdXRcbi8vIG1lYW5zIGl0IGRvZXNuJ3QgdGFrZSBpbnRvIGFjY291bnQgdHJhbnNmb3Jtcy5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TGF5b3V0UmVjdChlbGVtZW50KSB7XG4gIHZhciBjbGllbnRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQpOyAvLyBVc2UgdGhlIGNsaWVudFJlY3Qgc2l6ZXMgaWYgaXQncyBub3QgYmVlbiB0cmFuc2Zvcm1lZC5cbiAgLy8gRml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy8xMjIzXG5cbiAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gIGlmIChNYXRoLmFicyhjbGllbnRSZWN0LndpZHRoIC0gd2lkdGgpIDw9IDEpIHtcbiAgICB3aWR0aCA9IGNsaWVudFJlY3Qud2lkdGg7XG4gIH1cblxuICBpZiAoTWF0aC5hYnMoY2xpZW50UmVjdC5oZWlnaHQgLSBoZWlnaHQpIDw9IDEpIHtcbiAgICBoZWlnaHQgPSBjbGllbnRSZWN0LmhlaWdodDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeDogZWxlbWVudC5vZmZzZXRMZWZ0LFxuICAgIHk6IGVsZW1lbnQub2Zmc2V0VG9wLFxuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodFxuICB9O1xufSIsICJpbXBvcnQgeyBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb250YWlucyhwYXJlbnQsIGNoaWxkKSB7XG4gIHZhciByb290Tm9kZSA9IGNoaWxkLmdldFJvb3ROb2RlICYmIGNoaWxkLmdldFJvb3ROb2RlKCk7IC8vIEZpcnN0LCBhdHRlbXB0IHdpdGggZmFzdGVyIG5hdGl2ZSBtZXRob2RcblxuICBpZiAocGFyZW50LmNvbnRhaW5zKGNoaWxkKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IC8vIHRoZW4gZmFsbGJhY2sgdG8gY3VzdG9tIGltcGxlbWVudGF0aW9uIHdpdGggU2hhZG93IERPTSBzdXBwb3J0XG4gIGVsc2UgaWYgKHJvb3ROb2RlICYmIGlzU2hhZG93Um9vdChyb290Tm9kZSkpIHtcbiAgICAgIHZhciBuZXh0ID0gY2hpbGQ7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKG5leHQgJiYgcGFyZW50LmlzU2FtZU5vZGUobmV4dCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ106IG5lZWQgYSBiZXR0ZXIgd2F5IHRvIGhhbmRsZSB0aGlzLi4uXG5cblxuICAgICAgICBuZXh0ID0gbmV4dC5wYXJlbnROb2RlIHx8IG5leHQuaG9zdDtcbiAgICAgIH0gd2hpbGUgKG5leHQpO1xuICAgIH0gLy8gR2l2ZSB1cCwgdGhlIHJlc3VsdCBpcyBmYWxzZVxuXG5cbiAgcmV0dXJuIGZhbHNlO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSB7XG4gIHJldHVybiBnZXRXaW5kb3coZWxlbWVudCkuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbn0iLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RhYmxlRWxlbWVudChlbGVtZW50KSB7XG4gIHJldHVybiBbJ3RhYmxlJywgJ3RkJywgJ3RoJ10uaW5kZXhPZihnZXROb2RlTmFtZShlbGVtZW50KSkgPj0gMDtcbn0iLCAiaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpIHtcbiAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogYXNzdW1lIGJvZHkgaXMgYWx3YXlzIGF2YWlsYWJsZVxuICByZXR1cm4gKChpc0VsZW1lbnQoZWxlbWVudCkgPyBlbGVtZW50Lm93bmVyRG9jdW1lbnQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgZWxlbWVudC5kb2N1bWVudCkgfHwgd2luZG93LmRvY3VtZW50KS5kb2N1bWVudEVsZW1lbnQ7XG59IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFBhcmVudE5vZGUoZWxlbWVudCkge1xuICBpZiAoZ2V0Tm9kZU5hbWUoZWxlbWVudCkgPT09ICdodG1sJykge1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuICgvLyB0aGlzIGlzIGEgcXVpY2tlciAoYnV0IGxlc3MgdHlwZSBzYWZlKSB3YXkgdG8gc2F2ZSBxdWl0ZSBzb21lIGJ5dGVzIGZyb20gdGhlIGJ1bmRsZVxuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl1cbiAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICBlbGVtZW50LmFzc2lnbmVkU2xvdCB8fCAvLyBzdGVwIGludG8gdGhlIHNoYWRvdyBET00gb2YgdGhlIHBhcmVudCBvZiBhIHNsb3R0ZWQgbm9kZVxuICAgIGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoIC8vIERPTSBFbGVtZW50IGRldGVjdGVkXG4gICAgaXNTaGFkb3dSb290KGVsZW1lbnQpID8gZWxlbWVudC5ob3N0IDogbnVsbCkgfHwgLy8gU2hhZG93Um9vdCBkZXRlY3RlZFxuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdOiBIVE1MRWxlbWVudCBpcyBhIE5vZGVcbiAgICBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkgLy8gZmFsbGJhY2tcblxuICApO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50LCBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgaXNUYWJsZUVsZW1lbnQgZnJvbSBcIi4vaXNUYWJsZUVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBnZXRVQVN0cmluZyBmcm9tIFwiLi4vdXRpbHMvdXNlckFnZW50LmpzXCI7XG5cbmZ1bmN0aW9uIGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCkge1xuICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy84MzdcbiAgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0UGFyZW50O1xufSAvLyBgLm9mZnNldFBhcmVudGAgcmVwb3J0cyBgbnVsbGAgZm9yIGZpeGVkIGVsZW1lbnRzLCB3aGlsZSBhYnNvbHV0ZSBlbGVtZW50c1xuLy8gcmV0dXJuIHRoZSBjb250YWluaW5nIGJsb2NrXG5cblxuZnVuY3Rpb24gZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHtcbiAgdmFyIGlzRmlyZWZveCA9IC9maXJlZm94L2kudGVzdChnZXRVQVN0cmluZygpKTtcbiAgdmFyIGlzSUUgPSAvVHJpZGVudC9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG5cbiAgaWYgKGlzSUUgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSkge1xuICAgIC8vIEluIElFIDksIDEwIGFuZCAxMSBmaXhlZCBlbGVtZW50cyBjb250YWluaW5nIGJsb2NrIGlzIGFsd2F5cyBlc3RhYmxpc2hlZCBieSB0aGUgdmlld3BvcnRcbiAgICB2YXIgZWxlbWVudENzcyA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cbiAgICBpZiAoZWxlbWVudENzcy5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgdmFyIGN1cnJlbnROb2RlID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcblxuICBpZiAoaXNTaGFkb3dSb290KGN1cnJlbnROb2RlKSkge1xuICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUuaG9zdDtcbiAgfVxuXG4gIHdoaWxlIChpc0hUTUxFbGVtZW50KGN1cnJlbnROb2RlKSAmJiBbJ2h0bWwnLCAnYm9keSddLmluZGV4T2YoZ2V0Tm9kZU5hbWUoY3VycmVudE5vZGUpKSA8IDApIHtcbiAgICB2YXIgY3NzID0gZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Tm9kZSk7IC8vIFRoaXMgaXMgbm9uLWV4aGF1c3RpdmUgYnV0IGNvdmVycyB0aGUgbW9zdCBjb21tb24gQ1NTIHByb3BlcnRpZXMgdGhhdFxuICAgIC8vIGNyZWF0ZSBhIGNvbnRhaW5pbmcgYmxvY2suXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL0NvbnRhaW5pbmdfYmxvY2sjaWRlbnRpZnlpbmdfdGhlX2NvbnRhaW5pbmdfYmxvY2tcblxuICAgIGlmIChjc3MudHJhbnNmb3JtICE9PSAnbm9uZScgfHwgY3NzLnBlcnNwZWN0aXZlICE9PSAnbm9uZScgfHwgY3NzLmNvbnRhaW4gPT09ICdwYWludCcgfHwgWyd0cmFuc2Zvcm0nLCAncGVyc3BlY3RpdmUnXS5pbmRleE9mKGNzcy53aWxsQ2hhbmdlKSAhPT0gLTEgfHwgaXNGaXJlZm94ICYmIGNzcy53aWxsQ2hhbmdlID09PSAnZmlsdGVyJyB8fCBpc0ZpcmVmb3ggJiYgY3NzLmZpbHRlciAmJiBjc3MuZmlsdGVyICE9PSAnbm9uZScpIHtcbiAgICAgIHJldHVybiBjdXJyZW50Tm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufSAvLyBHZXRzIHRoZSBjbG9zZXN0IGFuY2VzdG9yIHBvc2l0aW9uZWQgZWxlbWVudC4gSGFuZGxlcyBzb21lIGVkZ2UgY2FzZXMsXG4vLyBzdWNoIGFzIHRhYmxlIGFuY2VzdG9ycyBhbmQgY3Jvc3MgYnJvd3NlciBidWdzLlxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9mZnNldFBhcmVudChlbGVtZW50KSB7XG4gIHZhciB3aW5kb3cgPSBnZXRXaW5kb3coZWxlbWVudCk7XG4gIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KGVsZW1lbnQpO1xuXG4gIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgaXNUYWJsZUVsZW1lbnQob2Zmc2V0UGFyZW50KSAmJiBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCkucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgb2Zmc2V0UGFyZW50ID0gZ2V0VHJ1ZU9mZnNldFBhcmVudChvZmZzZXRQYXJlbnQpO1xuICB9XG5cbiAgaWYgKG9mZnNldFBhcmVudCAmJiAoZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSA9PT0gJ2h0bWwnIHx8IGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgPT09ICdib2R5JyAmJiBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCkucG9zaXRpb24gPT09ICdzdGF0aWMnKSkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGdldENvbnRhaW5pbmdCbG9jayhlbGVtZW50KSB8fCB3aW5kb3c7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIFsndG9wJywgJ2JvdHRvbSddLmluZGV4T2YocGxhY2VtZW50KSA+PSAwID8gJ3gnIDogJ3knO1xufSIsICJpbXBvcnQgeyBtYXggYXMgbWF0aE1heCwgbWluIGFzIG1hdGhNaW4gfSBmcm9tIFwiLi9tYXRoLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluKG1pbiwgdmFsdWUsIG1heCkge1xuICByZXR1cm4gbWF0aE1heChtaW4sIG1hdGhNaW4odmFsdWUsIG1heCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhpbk1heENsYW1wKG1pbiwgdmFsdWUsIG1heCkge1xuICB2YXIgdiA9IHdpdGhpbihtaW4sIHZhbHVlLCBtYXgpO1xuICByZXR1cm4gdiA+IG1heCA/IG1heCA6IHY7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEZyZXNoU2lkZU9iamVjdCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDBcbiAgfTtcbn0iLCAiaW1wb3J0IGdldEZyZXNoU2lkZU9iamVjdCBmcm9tIFwiLi9nZXRGcmVzaFNpZGVPYmplY3QuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlUGFkZGluZ09iamVjdChwYWRkaW5nT2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBnZXRGcmVzaFNpZGVPYmplY3QoKSwgcGFkZGluZ09iamVjdCk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV4cGFuZFRvSGFzaE1hcCh2YWx1ZSwga2V5cykge1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGhhc2hNYXAsIGtleSkge1xuICAgIGhhc2hNYXBba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBoYXNoTWFwO1xuICB9LCB7fSk7XG59IiwgImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBjb250YWlucyBmcm9tIFwiLi4vZG9tLXV0aWxzL2NvbnRhaW5zLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHdpdGhpbiB9IGZyb20gXCIuLi91dGlscy93aXRoaW4uanNcIjtcbmltcG9ydCBtZXJnZVBhZGRpbmdPYmplY3QgZnJvbSBcIi4uL3V0aWxzL21lcmdlUGFkZGluZ09iamVjdC5qc1wiO1xuaW1wb3J0IGV4cGFuZFRvSGFzaE1hcCBmcm9tIFwiLi4vdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzXCI7XG5pbXBvcnQgeyBsZWZ0LCByaWdodCwgYmFzZVBsYWNlbWVudHMsIHRvcCwgYm90dG9tIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHRvUGFkZGluZ09iamVjdCA9IGZ1bmN0aW9uIHRvUGFkZGluZ09iamVjdChwYWRkaW5nLCBzdGF0ZSkge1xuICBwYWRkaW5nID0gdHlwZW9mIHBhZGRpbmcgPT09ICdmdW5jdGlvbicgPyBwYWRkaW5nKE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnJlY3RzLCB7XG4gICAgcGxhY2VtZW50OiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSkpIDogcGFkZGluZztcbiAgcmV0dXJuIG1lcmdlUGFkZGluZ09iamVjdCh0eXBlb2YgcGFkZGluZyAhPT0gJ251bWJlcicgPyBwYWRkaW5nIDogZXhwYW5kVG9IYXNoTWFwKHBhZGRpbmcsIGJhc2VQbGFjZW1lbnRzKSk7XG59O1xuXG5mdW5jdGlvbiBhcnJvdyhfcmVmKSB7XG4gIHZhciBfc3RhdGUkbW9kaWZpZXJzRGF0YSQ7XG5cbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xuICB2YXIgYXJyb3dFbGVtZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3c7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzO1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIGF4aXMgPSBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCk7XG4gIHZhciBpc1ZlcnRpY2FsID0gW2xlZnQsIHJpZ2h0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDA7XG4gIHZhciBsZW4gPSBpc1ZlcnRpY2FsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gIGlmICghYXJyb3dFbGVtZW50IHx8ICFwb3BwZXJPZmZzZXRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHBhZGRpbmdPYmplY3QgPSB0b1BhZGRpbmdPYmplY3Qob3B0aW9ucy5wYWRkaW5nLCBzdGF0ZSk7XG4gIHZhciBhcnJvd1JlY3QgPSBnZXRMYXlvdXRSZWN0KGFycm93RWxlbWVudCk7XG4gIHZhciBtaW5Qcm9wID0gYXhpcyA9PT0gJ3knID8gdG9wIDogbGVmdDtcbiAgdmFyIG1heFByb3AgPSBheGlzID09PSAneScgPyBib3R0b20gOiByaWdodDtcbiAgdmFyIGVuZERpZmYgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2VbbGVuXSArIHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtheGlzXSAtIHBvcHBlck9mZnNldHNbYXhpc10gLSBzdGF0ZS5yZWN0cy5wb3BwZXJbbGVuXTtcbiAgdmFyIHN0YXJ0RGlmZiA9IHBvcHBlck9mZnNldHNbYXhpc10gLSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2VbYXhpc107XG4gIHZhciBhcnJvd09mZnNldFBhcmVudCA9IGdldE9mZnNldFBhcmVudChhcnJvd0VsZW1lbnQpO1xuICB2YXIgY2xpZW50U2l6ZSA9IGFycm93T2Zmc2V0UGFyZW50ID8gYXhpcyA9PT0gJ3knID8gYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50SGVpZ2h0IHx8IDAgOiBhcnJvd09mZnNldFBhcmVudC5jbGllbnRXaWR0aCB8fCAwIDogMDtcbiAgdmFyIGNlbnRlclRvUmVmZXJlbmNlID0gZW5kRGlmZiAvIDIgLSBzdGFydERpZmYgLyAyOyAvLyBNYWtlIHN1cmUgdGhlIGFycm93IGRvZXNuJ3Qgb3ZlcmZsb3cgdGhlIHBvcHBlciBpZiB0aGUgY2VudGVyIHBvaW50IGlzXG4gIC8vIG91dHNpZGUgb2YgdGhlIHBvcHBlciBib3VuZHNcblxuICB2YXIgbWluID0gcGFkZGluZ09iamVjdFttaW5Qcm9wXTtcbiAgdmFyIG1heCA9IGNsaWVudFNpemUgLSBhcnJvd1JlY3RbbGVuXSAtIHBhZGRpbmdPYmplY3RbbWF4UHJvcF07XG4gIHZhciBjZW50ZXIgPSBjbGllbnRTaXplIC8gMiAtIGFycm93UmVjdFtsZW5dIC8gMiArIGNlbnRlclRvUmVmZXJlbmNlO1xuICB2YXIgb2Zmc2V0ID0gd2l0aGluKG1pbiwgY2VudGVyLCBtYXgpOyAvLyBQcmV2ZW50cyBicmVha2luZyBzeW50YXggaGlnaGxpZ2h0aW5nLi4uXG5cbiAgdmFyIGF4aXNQcm9wID0gYXhpcztcbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IChfc3RhdGUkbW9kaWZpZXJzRGF0YSQgPSB7fSwgX3N0YXRlJG1vZGlmaWVyc0RhdGEkW2F4aXNQcm9wXSA9IG9mZnNldCwgX3N0YXRlJG1vZGlmaWVyc0RhdGEkLmNlbnRlck9mZnNldCA9IG9mZnNldCAtIGNlbnRlciwgX3N0YXRlJG1vZGlmaWVyc0RhdGEkKTtcbn1cblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYyKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYyLm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50LFxuICAgICAgYXJyb3dFbGVtZW50ID0gX29wdGlvbnMkZWxlbWVudCA9PT0gdm9pZCAwID8gJ1tkYXRhLXBvcHBlci1hcnJvd10nIDogX29wdGlvbnMkZWxlbWVudDtcblxuICBpZiAoYXJyb3dFbGVtZW50ID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gQ1NTIHNlbGVjdG9yXG5cblxuICBpZiAodHlwZW9mIGFycm93RWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5wb3BwZXIucXVlcnlTZWxlY3RvcihhcnJvd0VsZW1lbnQpO1xuXG4gICAgaWYgKCFhcnJvd0VsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbnRhaW5zKHN0YXRlLmVsZW1lbnRzLnBvcHBlciwgYXJyb3dFbGVtZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN0YXRlLmVsZW1lbnRzLmFycm93ID0gYXJyb3dFbGVtZW50O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnYXJyb3cnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogYXJyb3csXG4gIGVmZmVjdDogZWZmZWN0LFxuICByZXF1aXJlczogWydwb3BwZXJPZmZzZXRzJ10sXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J11cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFZhcmlhdGlvbihwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzFdO1xufSIsICJpbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20sIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHVuc2V0U2lkZXMgPSB7XG4gIHRvcDogJ2F1dG8nLFxuICByaWdodDogJ2F1dG8nLFxuICBib3R0b206ICdhdXRvJyxcbiAgbGVmdDogJ2F1dG8nXG59OyAvLyBSb3VuZCB0aGUgb2Zmc2V0cyB0byB0aGUgbmVhcmVzdCBzdWl0YWJsZSBzdWJwaXhlbCBiYXNlZCBvbiB0aGUgRFBSLlxuLy8gWm9vbWluZyBjYW4gY2hhbmdlIHRoZSBEUFIsIGJ1dCBpdCBzZWVtcyB0byByZXBvcnQgYSB2YWx1ZSB0aGF0IHdpbGxcbi8vIGNsZWFubHkgZGl2aWRlIHRoZSB2YWx1ZXMgaW50byB0aGUgYXBwcm9wcmlhdGUgc3VicGl4ZWxzLlxuXG5mdW5jdGlvbiByb3VuZE9mZnNldHNCeURQUihfcmVmLCB3aW4pIHtcbiAgdmFyIHggPSBfcmVmLngsXG4gICAgICB5ID0gX3JlZi55O1xuICB2YXIgZHByID0gd2luLmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgcmV0dXJuIHtcbiAgICB4OiByb3VuZCh4ICogZHByKSAvIGRwciB8fCAwLFxuICAgIHk6IHJvdW5kKHkgKiBkcHIpIC8gZHByIHx8IDBcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcFRvU3R5bGVzKF9yZWYyKSB7XG4gIHZhciBfT2JqZWN0JGFzc2lnbjI7XG5cbiAgdmFyIHBvcHBlciA9IF9yZWYyLnBvcHBlcixcbiAgICAgIHBvcHBlclJlY3QgPSBfcmVmMi5wb3BwZXJSZWN0LFxuICAgICAgcGxhY2VtZW50ID0gX3JlZjIucGxhY2VtZW50LFxuICAgICAgdmFyaWF0aW9uID0gX3JlZjIudmFyaWF0aW9uLFxuICAgICAgb2Zmc2V0cyA9IF9yZWYyLm9mZnNldHMsXG4gICAgICBwb3NpdGlvbiA9IF9yZWYyLnBvc2l0aW9uLFxuICAgICAgZ3B1QWNjZWxlcmF0aW9uID0gX3JlZjIuZ3B1QWNjZWxlcmF0aW9uLFxuICAgICAgYWRhcHRpdmUgPSBfcmVmMi5hZGFwdGl2ZSxcbiAgICAgIHJvdW5kT2Zmc2V0cyA9IF9yZWYyLnJvdW5kT2Zmc2V0cyxcbiAgICAgIGlzRml4ZWQgPSBfcmVmMi5pc0ZpeGVkO1xuICB2YXIgX29mZnNldHMkeCA9IG9mZnNldHMueCxcbiAgICAgIHggPSBfb2Zmc2V0cyR4ID09PSB2b2lkIDAgPyAwIDogX29mZnNldHMkeCxcbiAgICAgIF9vZmZzZXRzJHkgPSBvZmZzZXRzLnksXG4gICAgICB5ID0gX29mZnNldHMkeSA9PT0gdm9pZCAwID8gMCA6IF9vZmZzZXRzJHk7XG5cbiAgdmFyIF9yZWYzID0gdHlwZW9mIHJvdW5kT2Zmc2V0cyA9PT0gJ2Z1bmN0aW9uJyA/IHJvdW5kT2Zmc2V0cyh7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH0pIDoge1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xuXG4gIHggPSBfcmVmMy54O1xuICB5ID0gX3JlZjMueTtcbiAgdmFyIGhhc1ggPSBvZmZzZXRzLmhhc093blByb3BlcnR5KCd4Jyk7XG4gIHZhciBoYXNZID0gb2Zmc2V0cy5oYXNPd25Qcm9wZXJ0eSgneScpO1xuICB2YXIgc2lkZVggPSBsZWZ0O1xuICB2YXIgc2lkZVkgPSB0b3A7XG4gIHZhciB3aW4gPSB3aW5kb3c7XG5cbiAgaWYgKGFkYXB0aXZlKSB7XG4gICAgdmFyIG9mZnNldFBhcmVudCA9IGdldE9mZnNldFBhcmVudChwb3BwZXIpO1xuICAgIHZhciBoZWlnaHRQcm9wID0gJ2NsaWVudEhlaWdodCc7XG4gICAgdmFyIHdpZHRoUHJvcCA9ICdjbGllbnRXaWR0aCc7XG5cbiAgICBpZiAob2Zmc2V0UGFyZW50ID09PSBnZXRXaW5kb3cocG9wcGVyKSkge1xuICAgICAgb2Zmc2V0UGFyZW50ID0gZ2V0RG9jdW1lbnRFbGVtZW50KHBvcHBlcik7XG5cbiAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCkucG9zaXRpb24gIT09ICdzdGF0aWMnICYmIHBvc2l0aW9uID09PSAnYWJzb2x1dGUnKSB7XG4gICAgICAgIGhlaWdodFByb3AgPSAnc2Nyb2xsSGVpZ2h0JztcbiAgICAgICAgd2lkdGhQcm9wID0gJ3Njcm9sbFdpZHRoJztcbiAgICAgIH1cbiAgICB9IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhc3RdOiBmb3JjZSB0eXBlIHJlZmluZW1lbnQsIHdlIGNvbXBhcmUgb2Zmc2V0UGFyZW50IHdpdGggd2luZG93IGFib3ZlLCBidXQgRmxvdyBkb2Vzbid0IGRldGVjdCBpdFxuXG5cbiAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQ7XG5cbiAgICBpZiAocGxhY2VtZW50ID09PSB0b3AgfHwgKHBsYWNlbWVudCA9PT0gbGVmdCB8fCBwbGFjZW1lbnQgPT09IHJpZ2h0KSAmJiB2YXJpYXRpb24gPT09IGVuZCkge1xuICAgICAgc2lkZVkgPSBib3R0b207XG4gICAgICB2YXIgb2Zmc2V0WSA9IGlzRml4ZWQgJiYgb2Zmc2V0UGFyZW50ID09PSB3aW4gJiYgd2luLnZpc3VhbFZpZXdwb3J0ID8gd2luLnZpc3VhbFZpZXdwb3J0LmhlaWdodCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgICAgb2Zmc2V0UGFyZW50W2hlaWdodFByb3BdO1xuICAgICAgeSAtPSBvZmZzZXRZIC0gcG9wcGVyUmVjdC5oZWlnaHQ7XG4gICAgICB5ICo9IGdwdUFjY2VsZXJhdGlvbiA/IDEgOiAtMTtcbiAgICB9XG5cbiAgICBpZiAocGxhY2VtZW50ID09PSBsZWZ0IHx8IChwbGFjZW1lbnQgPT09IHRvcCB8fCBwbGFjZW1lbnQgPT09IGJvdHRvbSkgJiYgdmFyaWF0aW9uID09PSBlbmQpIHtcbiAgICAgIHNpZGVYID0gcmlnaHQ7XG4gICAgICB2YXIgb2Zmc2V0WCA9IGlzRml4ZWQgJiYgb2Zmc2V0UGFyZW50ID09PSB3aW4gJiYgd2luLnZpc3VhbFZpZXdwb3J0ID8gd2luLnZpc3VhbFZpZXdwb3J0LndpZHRoIDogLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICBvZmZzZXRQYXJlbnRbd2lkdGhQcm9wXTtcbiAgICAgIHggLT0gb2Zmc2V0WCAtIHBvcHBlclJlY3Qud2lkdGg7XG4gICAgICB4ICo9IGdwdUFjY2VsZXJhdGlvbiA/IDEgOiAtMTtcbiAgICB9XG4gIH1cblxuICB2YXIgY29tbW9uU3R5bGVzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgcG9zaXRpb246IHBvc2l0aW9uXG4gIH0sIGFkYXB0aXZlICYmIHVuc2V0U2lkZXMpO1xuXG4gIHZhciBfcmVmNCA9IHJvdW5kT2Zmc2V0cyA9PT0gdHJ1ZSA/IHJvdW5kT2Zmc2V0c0J5RFBSKHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfSwgZ2V0V2luZG93KHBvcHBlcikpIDoge1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xuXG4gIHggPSBfcmVmNC54O1xuICB5ID0gX3JlZjQueTtcblxuICBpZiAoZ3B1QWNjZWxlcmF0aW9uKSB7XG4gICAgdmFyIF9PYmplY3QkYXNzaWduO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywgKF9PYmplY3QkYXNzaWduID0ge30sIF9PYmplY3QkYXNzaWduW3NpZGVZXSA9IGhhc1kgPyAnMCcgOiAnJywgX09iamVjdCRhc3NpZ25bc2lkZVhdID0gaGFzWCA/ICcwJyA6ICcnLCBfT2JqZWN0JGFzc2lnbi50cmFuc2Zvcm0gPSAod2luLmRldmljZVBpeGVsUmF0aW8gfHwgMSkgPD0gMSA/IFwidHJhbnNsYXRlKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgpXCIgOiBcInRyYW5zbGF0ZTNkKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgsIDApXCIsIF9PYmplY3QkYXNzaWduKSk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCAoX09iamVjdCRhc3NpZ24yID0ge30sIF9PYmplY3QkYXNzaWduMltzaWRlWV0gPSBoYXNZID8geSArIFwicHhcIiA6ICcnLCBfT2JqZWN0JGFzc2lnbjJbc2lkZVhdID0gaGFzWCA/IHggKyBcInB4XCIgOiAnJywgX09iamVjdCRhc3NpZ24yLnRyYW5zZm9ybSA9ICcnLCBfT2JqZWN0JGFzc2lnbjIpKTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVN0eWxlcyhfcmVmNSkge1xuICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmNS5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkZ3B1QWNjZWxlcmF0ID0gb3B0aW9ucy5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfb3B0aW9ucyRncHVBY2NlbGVyYXQgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRncHVBY2NlbGVyYXQsXG4gICAgICBfb3B0aW9ucyRhZGFwdGl2ZSA9IG9wdGlvbnMuYWRhcHRpdmUsXG4gICAgICBhZGFwdGl2ZSA9IF9vcHRpb25zJGFkYXB0aXZlID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWRhcHRpdmUsXG4gICAgICBfb3B0aW9ucyRyb3VuZE9mZnNldHMgPSBvcHRpb25zLnJvdW5kT2Zmc2V0cyxcbiAgICAgIHJvdW5kT2Zmc2V0cyA9IF9vcHRpb25zJHJvdW5kT2Zmc2V0cyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHJvdW5kT2Zmc2V0cztcbiAgdmFyIGNvbW1vblN0eWxlcyA9IHtcbiAgICBwbGFjZW1lbnQ6IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KSxcbiAgICB2YXJpYXRpb246IGdldFZhcmlhdGlvbihzdGF0ZS5wbGFjZW1lbnQpLFxuICAgIHBvcHBlcjogc3RhdGUuZWxlbWVudHMucG9wcGVyLFxuICAgIHBvcHBlclJlY3Q6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBncHVBY2NlbGVyYXRpb246IGdwdUFjY2VsZXJhdGlvbixcbiAgICBpc0ZpeGVkOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5ID09PSAnZml4ZWQnXG4gIH07XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnN0eWxlcy5wb3BwZXIsIG1hcFRvU3R5bGVzKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywge1xuICAgICAgb2Zmc2V0czogc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLFxuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBhZGFwdGl2ZTogYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHM6IHJvdW5kT2Zmc2V0c1xuICAgIH0pKSk7XG4gIH1cblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5hcnJvdyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLmFycm93ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuc3R5bGVzLmFycm93LCBtYXBUb1N0eWxlcyhPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIHtcbiAgICAgIG9mZnNldHM6IHN0YXRlLm1vZGlmaWVyc0RhdGEuYXJyb3csXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGFkYXB0aXZlOiBmYWxzZSxcbiAgICAgIHJvdW5kT2Zmc2V0czogcm91bmRPZmZzZXRzXG4gICAgfSkpKTtcbiAgfVxuXG4gIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIsIHtcbiAgICAnZGF0YS1wb3BwZXItcGxhY2VtZW50Jzogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnY29tcHV0ZVN0eWxlcycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnYmVmb3JlV3JpdGUnLFxuICBmbjogY29tcHV0ZVN0eWxlcyxcbiAgZGF0YToge31cbn07IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRXaW5kb3cuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgcGFzc2l2ZSA9IHtcbiAgcGFzc2l2ZTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIGluc3RhbmNlID0gX3JlZi5pbnN0YW5jZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRzY3JvbGwgPSBvcHRpb25zLnNjcm9sbCxcbiAgICAgIHNjcm9sbCA9IF9vcHRpb25zJHNjcm9sbCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHNjcm9sbCxcbiAgICAgIF9vcHRpb25zJHJlc2l6ZSA9IG9wdGlvbnMucmVzaXplLFxuICAgICAgcmVzaXplID0gX29wdGlvbnMkcmVzaXplID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkcmVzaXplO1xuICB2YXIgd2luZG93ID0gZ2V0V2luZG93KHN0YXRlLmVsZW1lbnRzLnBvcHBlcik7XG4gIHZhciBzY3JvbGxQYXJlbnRzID0gW10uY29uY2F0KHN0YXRlLnNjcm9sbFBhcmVudHMucmVmZXJlbmNlLCBzdGF0ZS5zY3JvbGxQYXJlbnRzLnBvcHBlcik7XG5cbiAgaWYgKHNjcm9sbCkge1xuICAgIHNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAoc2Nyb2xsUGFyZW50KSB7XG4gICAgICBzY3JvbGxQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChyZXNpemUpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNjcm9sbCkge1xuICAgICAgc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzY3JvbGxQYXJlbnQpIHtcbiAgICAgICAgc2Nyb2xsUGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVzaXplKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICB9XG4gIH07XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdldmVudExpc3RlbmVycycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnd3JpdGUnLFxuICBmbjogZnVuY3Rpb24gZm4oKSB7fSxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIGRhdGE6IHt9XG59OyIsICJ2YXIgaGFzaCA9IHtcbiAgbGVmdDogJ3JpZ2h0JyxcbiAgcmlnaHQ6ICdsZWZ0JyxcbiAgYm90dG9tOiAndG9wJyxcbiAgdG9wOiAnYm90dG9tJ1xufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLCBmdW5jdGlvbiAobWF0Y2hlZCkge1xuICAgIHJldHVybiBoYXNoW21hdGNoZWRdO1xuICB9KTtcbn0iLCAidmFyIGhhc2ggPSB7XG4gIHN0YXJ0OiAnZW5kJyxcbiAgZW5kOiAnc3RhcnQnXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQucmVwbGFjZSgvc3RhcnR8ZW5kL2csIGZ1bmN0aW9uIChtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGhhc2hbbWF0Y2hlZF07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsKG5vZGUpIHtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhub2RlKTtcbiAgdmFyIHNjcm9sbExlZnQgPSB3aW4ucGFnZVhPZmZzZXQ7XG4gIHZhciBzY3JvbGxUb3AgPSB3aW4ucGFnZVlPZmZzZXQ7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcFxuICB9O1xufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpIHtcbiAgLy8gSWYgPGh0bWw+IGhhcyBhIENTUyB3aWR0aCBncmVhdGVyIHRoYW4gdGhlIHZpZXdwb3J0LCB0aGVuIHRoaXMgd2lsbCBiZVxuICAvLyBpbmNvcnJlY3QgZm9yIFJUTC5cbiAgLy8gUG9wcGVyIDEgaXMgYnJva2VuIGluIHRoaXMgY2FzZSBhbmQgbmV2ZXIgaGFkIGEgYnVnIHJlcG9ydCBzbyBsZXQncyBhc3N1bWVcbiAgLy8gaXQncyBub3QgYW4gaXNzdWUuIEkgZG9uJ3QgdGhpbmsgYW55b25lIGV2ZXIgc3BlY2lmaWVzIHdpZHRoIG9uIDxodG1sPlxuICAvLyBhbnl3YXkuXG4gIC8vIEJyb3dzZXJzIHdoZXJlIHRoZSBsZWZ0IHNjcm9sbGJhciBkb2Vzbid0IGNhdXNlIGFuIGlzc3VlIHJlcG9ydCBgMGAgZm9yXG4gIC8vIHRoaXMgKGUuZy4gRWRnZSAyMDE5LCBJRTExLCBTYWZhcmkpXG4gIHJldHVybiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKS5sZWZ0ICsgZ2V0V2luZG93U2Nyb2xsKGVsZW1lbnQpLnNjcm9sbExlZnQ7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGlzTGF5b3V0Vmlld3BvcnQgZnJvbSBcIi4vaXNMYXlvdXRWaWV3cG9ydC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSB7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3coZWxlbWVudCk7XG4gIHZhciBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICB2YXIgdmlzdWFsVmlld3BvcnQgPSB3aW4udmlzdWFsVmlld3BvcnQ7XG4gIHZhciB3aWR0aCA9IGh0bWwuY2xpZW50V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBodG1sLmNsaWVudEhlaWdodDtcbiAgdmFyIHggPSAwO1xuICB2YXIgeSA9IDA7XG5cbiAgaWYgKHZpc3VhbFZpZXdwb3J0KSB7XG4gICAgd2lkdGggPSB2aXN1YWxWaWV3cG9ydC53aWR0aDtcbiAgICBoZWlnaHQgPSB2aXN1YWxWaWV3cG9ydC5oZWlnaHQ7XG4gICAgdmFyIGxheW91dFZpZXdwb3J0ID0gaXNMYXlvdXRWaWV3cG9ydCgpO1xuXG4gICAgaWYgKGxheW91dFZpZXdwb3J0IHx8ICFsYXlvdXRWaWV3cG9ydCAmJiBzdHJhdGVneSA9PT0gJ2ZpeGVkJykge1xuICAgICAgeCA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldExlZnQ7XG4gICAgICB5ID0gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHg6IHggKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpLFxuICAgIHk6IHlcbiAgfTtcbn0iLCAiaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGxCYXJYIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbEJhclguanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5pbXBvcnQgeyBtYXggfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiOyAvLyBHZXRzIHRoZSBlbnRpcmUgc2l6ZSBvZiB0aGUgc2Nyb2xsYWJsZSBkb2N1bWVudCBhcmVhLCBldmVuIGV4dGVuZGluZyBvdXRzaWRlXG4vLyBvZiB0aGUgYDxodG1sPmAgYW5kIGA8Ym9keT5gIHJlY3QgYm91bmRzIGlmIGhvcml6b250YWxseSBzY3JvbGxhYmxlXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldERvY3VtZW50UmVjdChlbGVtZW50KSB7XG4gIHZhciBfZWxlbWVudCRvd25lckRvY3VtZW47XG5cbiAgdmFyIGh0bWwgPSBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCk7XG4gIHZhciB3aW5TY3JvbGwgPSBnZXRXaW5kb3dTY3JvbGwoZWxlbWVudCk7XG4gIHZhciBib2R5ID0gKF9lbGVtZW50JG93bmVyRG9jdW1lbiA9IGVsZW1lbnQub3duZXJEb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lbGVtZW50JG93bmVyRG9jdW1lbi5ib2R5O1xuICB2YXIgd2lkdGggPSBtYXgoaHRtbC5zY3JvbGxXaWR0aCwgaHRtbC5jbGllbnRXaWR0aCwgYm9keSA/IGJvZHkuc2Nyb2xsV2lkdGggOiAwLCBib2R5ID8gYm9keS5jbGllbnRXaWR0aCA6IDApO1xuICB2YXIgaGVpZ2h0ID0gbWF4KGh0bWwuc2Nyb2xsSGVpZ2h0LCBodG1sLmNsaWVudEhlaWdodCwgYm9keSA/IGJvZHkuc2Nyb2xsSGVpZ2h0IDogMCwgYm9keSA/IGJvZHkuY2xpZW50SGVpZ2h0IDogMCk7XG4gIHZhciB4ID0gLXdpblNjcm9sbC5zY3JvbGxMZWZ0ICsgZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KTtcbiAgdmFyIHkgPSAtd2luU2Nyb2xsLnNjcm9sbFRvcDtcblxuICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShib2R5IHx8IGh0bWwpLmRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICB4ICs9IG1heChodG1sLmNsaWVudFdpZHRoLCBib2R5ID8gYm9keS5jbGllbnRXaWR0aCA6IDApIC0gd2lkdGg7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcbn0iLCAiaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTY3JvbGxQYXJlbnQoZWxlbWVudCkge1xuICAvLyBGaXJlZm94IHdhbnRzIHVzIHRvIGNoZWNrIGAteGAgYW5kIGAteWAgdmFyaWF0aW9ucyBhcyB3ZWxsXG4gIHZhciBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICBvdmVyZmxvdyA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93LFxuICAgICAgb3ZlcmZsb3dYID0gX2dldENvbXB1dGVkU3R5bGUub3ZlcmZsb3dYLFxuICAgICAgb3ZlcmZsb3dZID0gX2dldENvbXB1dGVkU3R5bGUub3ZlcmZsb3dZO1xuXG4gIHJldHVybiAvYXV0b3xzY3JvbGx8b3ZlcmxheXxoaWRkZW4vLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpO1xufSIsICJpbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudChub2RlKSB7XG4gIGlmIChbJ2h0bWwnLCAnYm9keScsICcjZG9jdW1lbnQnXS5pbmRleE9mKGdldE5vZGVOYW1lKG5vZGUpKSA+PSAwKSB7XG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogYXNzdW1lIGJvZHkgaXMgYWx3YXlzIGF2YWlsYWJsZVxuICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQuYm9keTtcbiAgfVxuXG4gIGlmIChpc0hUTUxFbGVtZW50KG5vZGUpICYmIGlzU2Nyb2xsUGFyZW50KG5vZGUpKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICByZXR1cm4gZ2V0U2Nyb2xsUGFyZW50KGdldFBhcmVudE5vZGUobm9kZSkpO1xufSIsICJpbXBvcnQgZ2V0U2Nyb2xsUGFyZW50IGZyb20gXCIuL2dldFNjcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuLypcbmdpdmVuIGEgRE9NIGVsZW1lbnQsIHJldHVybiB0aGUgbGlzdCBvZiBhbGwgc2Nyb2xsIHBhcmVudHMsIHVwIHRoZSBsaXN0IG9mIGFuY2Vzb3JzXG51bnRpbCB3ZSBnZXQgdG8gdGhlIHRvcCB3aW5kb3cgb2JqZWN0LiBUaGlzIGxpc3QgaXMgd2hhdCB3ZSBhdHRhY2ggc2Nyb2xsIGxpc3RlbmVyc1xudG8sIGJlY2F1c2UgaWYgYW55IG9mIHRoZXNlIHBhcmVudCBlbGVtZW50cyBzY3JvbGwsIHdlJ2xsIG5lZWQgdG8gcmUtY2FsY3VsYXRlIHRoZVxucmVmZXJlbmNlIGVsZW1lbnQncyBwb3NpdGlvbi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxpc3RTY3JvbGxQYXJlbnRzKGVsZW1lbnQsIGxpc3QpIHtcbiAgdmFyIF9lbGVtZW50JG93bmVyRG9jdW1lbjtcblxuICBpZiAobGlzdCA9PT0gdm9pZCAwKSB7XG4gICAgbGlzdCA9IFtdO1xuICB9XG5cbiAgdmFyIHNjcm9sbFBhcmVudCA9IGdldFNjcm9sbFBhcmVudChlbGVtZW50KTtcbiAgdmFyIGlzQm9keSA9IHNjcm9sbFBhcmVudCA9PT0gKChfZWxlbWVudCRvd25lckRvY3VtZW4gPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZWxlbWVudCRvd25lckRvY3VtZW4uYm9keSk7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3coc2Nyb2xsUGFyZW50KTtcbiAgdmFyIHRhcmdldCA9IGlzQm9keSA/IFt3aW5dLmNvbmNhdCh3aW4udmlzdWFsVmlld3BvcnQgfHwgW10sIGlzU2Nyb2xsUGFyZW50KHNjcm9sbFBhcmVudCkgPyBzY3JvbGxQYXJlbnQgOiBbXSkgOiBzY3JvbGxQYXJlbnQ7XG4gIHZhciB1cGRhdGVkTGlzdCA9IGxpc3QuY29uY2F0KHRhcmdldCk7XG4gIHJldHVybiBpc0JvZHkgPyB1cGRhdGVkTGlzdCA6IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdOiBpc0JvZHkgdGVsbHMgdXMgdGFyZ2V0IHdpbGwgYmUgYW4gSFRNTEVsZW1lbnQgaGVyZVxuICB1cGRhdGVkTGlzdC5jb25jYXQobGlzdFNjcm9sbFBhcmVudHMoZ2V0UGFyZW50Tm9kZSh0YXJnZXQpKSk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlY3RUb0NsaWVudFJlY3QocmVjdCkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcmVjdCwge1xuICAgIGxlZnQ6IHJlY3QueCxcbiAgICB0b3A6IHJlY3QueSxcbiAgICByaWdodDogcmVjdC54ICsgcmVjdC53aWR0aCxcbiAgICBib3R0b206IHJlY3QueSArIHJlY3QuaGVpZ2h0XG4gIH0pO1xufSIsICJpbXBvcnQgeyB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldFZpZXdwb3J0UmVjdCBmcm9tIFwiLi9nZXRWaWV3cG9ydFJlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudFJlY3QgZnJvbSBcIi4vZ2V0RG9jdW1lbnRSZWN0LmpzXCI7XG5pbXBvcnQgbGlzdFNjcm9sbFBhcmVudHMgZnJvbSBcIi4vbGlzdFNjcm9sbFBhcmVudHMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4vZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBjb250YWlucyBmcm9tIFwiLi9jb250YWlucy5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi4vdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IHsgbWF4LCBtaW4gfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBzdHJhdGVneSkge1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBmYWxzZSwgc3RyYXRlZ3kgPT09ICdmaXhlZCcpO1xuICByZWN0LnRvcCA9IHJlY3QudG9wICsgZWxlbWVudC5jbGllbnRUb3A7XG4gIHJlY3QubGVmdCA9IHJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50TGVmdDtcbiAgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0ICsgZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgcmVjdC53aWR0aCA9IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIHJlY3QuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIHJlY3QueCA9IHJlY3QubGVmdDtcbiAgcmVjdC55ID0gcmVjdC50b3A7XG4gIHJldHVybiByZWN0O1xufVxuXG5mdW5jdGlvbiBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpIHtcbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50ID09PSB2aWV3cG9ydCA/IHJlY3RUb0NsaWVudFJlY3QoZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSkgOiBpc0VsZW1lbnQoY2xpcHBpbmdQYXJlbnQpID8gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSA6IHJlY3RUb0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRSZWN0KGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSkpO1xufSAvLyBBIFwiY2xpcHBpbmcgcGFyZW50XCIgaXMgYW4gb3ZlcmZsb3dhYmxlIGNvbnRhaW5lciB3aXRoIHRoZSBjaGFyYWN0ZXJpc3RpYyBvZlxuLy8gY2xpcHBpbmcgKG9yIGhpZGluZykgb3ZlcmZsb3dpbmcgZWxlbWVudHMgd2l0aCBhIHBvc2l0aW9uIGRpZmZlcmVudCBmcm9tXG4vLyBgaW5pdGlhbGBcblxuXG5mdW5jdGlvbiBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkge1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gbGlzdFNjcm9sbFBhcmVudHMoZ2V0UGFyZW50Tm9kZShlbGVtZW50KSk7XG4gIHZhciBjYW5Fc2NhcGVDbGlwcGluZyA9IFsnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmRleE9mKGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb24pID49IDA7XG4gIHZhciBjbGlwcGVyRWxlbWVudCA9IGNhbkVzY2FwZUNsaXBwaW5nICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkgPyBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkgOiBlbGVtZW50O1xuXG4gIGlmICghaXNFbGVtZW50KGNsaXBwZXJFbGVtZW50KSkge1xuICAgIHJldHVybiBbXTtcbiAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMTQxNFxuXG5cbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNsaXBwaW5nUGFyZW50KSB7XG4gICAgcmV0dXJuIGlzRWxlbWVudChjbGlwcGluZ1BhcmVudCkgJiYgY29udGFpbnMoY2xpcHBpbmdQYXJlbnQsIGNsaXBwZXJFbGVtZW50KSAmJiBnZXROb2RlTmFtZShjbGlwcGluZ1BhcmVudCkgIT09ICdib2R5JztcbiAgfSk7XG59IC8vIEdldHMgdGhlIG1heGltdW0gYXJlYSB0aGF0IHRoZSBlbGVtZW50IGlzIHZpc2libGUgaW4gZHVlIHRvIGFueSBudW1iZXIgb2Zcbi8vIGNsaXBwaW5nIHBhcmVudHNcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDbGlwcGluZ1JlY3QoZWxlbWVudCwgYm91bmRhcnksIHJvb3RCb3VuZGFyeSwgc3RyYXRlZ3kpIHtcbiAgdmFyIG1haW5DbGlwcGluZ1BhcmVudHMgPSBib3VuZGFyeSA9PT0gJ2NsaXBwaW5nUGFyZW50cycgPyBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkgOiBbXS5jb25jYXQoYm91bmRhcnkpO1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gW10uY29uY2F0KG1haW5DbGlwcGluZ1BhcmVudHMsIFtyb290Qm91bmRhcnldKTtcbiAgdmFyIGZpcnN0Q2xpcHBpbmdQYXJlbnQgPSBjbGlwcGluZ1BhcmVudHNbMF07XG4gIHZhciBjbGlwcGluZ1JlY3QgPSBjbGlwcGluZ1BhcmVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2NSZWN0LCBjbGlwcGluZ1BhcmVudCkge1xuICAgIHZhciByZWN0ID0gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KTtcbiAgICBhY2NSZWN0LnRvcCA9IG1heChyZWN0LnRvcCwgYWNjUmVjdC50b3ApO1xuICAgIGFjY1JlY3QucmlnaHQgPSBtaW4ocmVjdC5yaWdodCwgYWNjUmVjdC5yaWdodCk7XG4gICAgYWNjUmVjdC5ib3R0b20gPSBtaW4ocmVjdC5ib3R0b20sIGFjY1JlY3QuYm90dG9tKTtcbiAgICBhY2NSZWN0LmxlZnQgPSBtYXgocmVjdC5sZWZ0LCBhY2NSZWN0LmxlZnQpO1xuICAgIHJldHVybiBhY2NSZWN0O1xuICB9LCBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBmaXJzdENsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkpO1xuICBjbGlwcGluZ1JlY3Qud2lkdGggPSBjbGlwcGluZ1JlY3QucmlnaHQgLSBjbGlwcGluZ1JlY3QubGVmdDtcbiAgY2xpcHBpbmdSZWN0LmhlaWdodCA9IGNsaXBwaW5nUmVjdC5ib3R0b20gLSBjbGlwcGluZ1JlY3QudG9wO1xuICBjbGlwcGluZ1JlY3QueCA9IGNsaXBwaW5nUmVjdC5sZWZ0O1xuICBjbGlwcGluZ1JlY3QueSA9IGNsaXBwaW5nUmVjdC50b3A7XG4gIHJldHVybiBjbGlwcGluZ1JlY3Q7XG59IiwgImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4vZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LCBzdGFydCwgZW5kIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21wdXRlT2Zmc2V0cyhfcmVmKSB7XG4gIHZhciByZWZlcmVuY2UgPSBfcmVmLnJlZmVyZW5jZSxcbiAgICAgIGVsZW1lbnQgPSBfcmVmLmVsZW1lbnQsXG4gICAgICBwbGFjZW1lbnQgPSBfcmVmLnBsYWNlbWVudDtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBwbGFjZW1lbnQgPyBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkgOiBudWxsO1xuICB2YXIgdmFyaWF0aW9uID0gcGxhY2VtZW50ID8gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgOiBudWxsO1xuICB2YXIgY29tbW9uWCA9IHJlZmVyZW5jZS54ICsgcmVmZXJlbmNlLndpZHRoIC8gMiAtIGVsZW1lbnQud2lkdGggLyAyO1xuICB2YXIgY29tbW9uWSA9IHJlZmVyZW5jZS55ICsgcmVmZXJlbmNlLmhlaWdodCAvIDIgLSBlbGVtZW50LmhlaWdodCAvIDI7XG4gIHZhciBvZmZzZXRzO1xuXG4gIHN3aXRjaCAoYmFzZVBsYWNlbWVudCkge1xuICAgIGNhc2UgdG9wOlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogY29tbW9uWCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnkgLSBlbGVtZW50LmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBib3R0b206XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiBjb21tb25YLFxuICAgICAgICB5OiByZWZlcmVuY2UueSArIHJlZmVyZW5jZS5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgcmlnaHQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCArIHJlZmVyZW5jZS53aWR0aCxcbiAgICAgICAgeTogY29tbW9uWVxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBsZWZ0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLnggLSBlbGVtZW50LndpZHRoLFxuICAgICAgICB5OiBjb21tb25ZXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLngsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55XG4gICAgICB9O1xuICB9XG5cbiAgdmFyIG1haW5BeGlzID0gYmFzZVBsYWNlbWVudCA/IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KSA6IG51bGw7XG5cbiAgaWYgKG1haW5BeGlzICE9IG51bGwpIHtcbiAgICB2YXIgbGVuID0gbWFpbkF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICAgIHN3aXRjaCAodmFyaWF0aW9uKSB7XG4gICAgICBjYXNlIHN0YXJ0OlxuICAgICAgICBvZmZzZXRzW21haW5BeGlzXSA9IG9mZnNldHNbbWFpbkF4aXNdIC0gKHJlZmVyZW5jZVtsZW5dIC8gMiAtIGVsZW1lbnRbbGVuXSAvIDIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBlbmQ6XG4gICAgICAgIG9mZnNldHNbbWFpbkF4aXNdID0gb2Zmc2V0c1ttYWluQXhpc10gKyAocmVmZXJlbmNlW2xlbl0gLyAyIC0gZWxlbWVudFtsZW5dIC8gMik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvZmZzZXRzO1xufSIsICJpbXBvcnQgZ2V0Q2xpcHBpbmdSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Q2xpcHBpbmdSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgY29tcHV0ZU9mZnNldHMgZnJvbSBcIi4vY29tcHV0ZU9mZnNldHMuanNcIjtcbmltcG9ydCByZWN0VG9DbGllbnRSZWN0IGZyb20gXCIuL3JlY3RUb0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCB7IGNsaXBwaW5nUGFyZW50cywgcmVmZXJlbmNlLCBwb3BwZXIsIGJvdHRvbSwgdG9wLCByaWdodCwgYmFzZVBsYWNlbWVudHMsIHZpZXdwb3J0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBtZXJnZVBhZGRpbmdPYmplY3QgZnJvbSBcIi4vbWVyZ2VQYWRkaW5nT2JqZWN0LmpzXCI7XG5pbXBvcnQgZXhwYW5kVG9IYXNoTWFwIGZyb20gXCIuL2V4cGFuZFRvSGFzaE1hcC5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRldGVjdE92ZXJmbG93KHN0YXRlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgX29wdGlvbnMkcGxhY2VtZW50ID0gX29wdGlvbnMucGxhY2VtZW50LFxuICAgICAgcGxhY2VtZW50ID0gX29wdGlvbnMkcGxhY2VtZW50ID09PSB2b2lkIDAgPyBzdGF0ZS5wbGFjZW1lbnQgOiBfb3B0aW9ucyRwbGFjZW1lbnQsXG4gICAgICBfb3B0aW9ucyRzdHJhdGVneSA9IF9vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgc3RyYXRlZ3kgPSBfb3B0aW9ucyRzdHJhdGVneSA9PT0gdm9pZCAwID8gc3RhdGUuc3RyYXRlZ3kgOiBfb3B0aW9ucyRzdHJhdGVneSxcbiAgICAgIF9vcHRpb25zJGJvdW5kYXJ5ID0gX29wdGlvbnMuYm91bmRhcnksXG4gICAgICBib3VuZGFyeSA9IF9vcHRpb25zJGJvdW5kYXJ5ID09PSB2b2lkIDAgPyBjbGlwcGluZ1BhcmVudHMgOiBfb3B0aW9ucyRib3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zJHJvb3RCb3VuZGFyeSA9PT0gdm9pZCAwID8gdmlld3BvcnQgOiBfb3B0aW9ucyRyb290Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRlbGVtZW50Q29udGUgPSBfb3B0aW9ucy5lbGVtZW50Q29udGV4dCxcbiAgICAgIGVsZW1lbnRDb250ZXh0ID0gX29wdGlvbnMkZWxlbWVudENvbnRlID09PSB2b2lkIDAgPyBwb3BwZXIgOiBfb3B0aW9ucyRlbGVtZW50Q29udGUsXG4gICAgICBfb3B0aW9ucyRhbHRCb3VuZGFyeSA9IF9vcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBfb3B0aW9ucyRhbHRCb3VuZGFyeSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfb3B0aW9ucyRhbHRCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJHBhZGRpbmcgPSBfb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgcGFkZGluZyA9IF9vcHRpb25zJHBhZGRpbmcgPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9ucyRwYWRkaW5nO1xuICB2YXIgcGFkZGluZ09iamVjdCA9IG1lcmdlUGFkZGluZ09iamVjdCh0eXBlb2YgcGFkZGluZyAhPT0gJ251bWJlcicgPyBwYWRkaW5nIDogZXhwYW5kVG9IYXNoTWFwKHBhZGRpbmcsIGJhc2VQbGFjZW1lbnRzKSk7XG4gIHZhciBhbHRDb250ZXh0ID0gZWxlbWVudENvbnRleHQgPT09IHBvcHBlciA/IHJlZmVyZW5jZSA6IHBvcHBlcjtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbYWx0Qm91bmRhcnkgPyBhbHRDb250ZXh0IDogZWxlbWVudENvbnRleHRdO1xuICB2YXIgY2xpcHBpbmdDbGllbnRSZWN0ID0gZ2V0Q2xpcHBpbmdSZWN0KGlzRWxlbWVudChlbGVtZW50KSA/IGVsZW1lbnQgOiBlbGVtZW50LmNvbnRleHRFbGVtZW50IHx8IGdldERvY3VtZW50RWxlbWVudChzdGF0ZS5lbGVtZW50cy5wb3BwZXIpLCBib3VuZGFyeSwgcm9vdEJvdW5kYXJ5LCBzdHJhdGVneSk7XG4gIHZhciByZWZlcmVuY2VDbGllbnRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHN0YXRlLmVsZW1lbnRzLnJlZmVyZW5jZSk7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gY29tcHV0ZU9mZnNldHMoe1xuICAgIHJlZmVyZW5jZTogcmVmZXJlbmNlQ2xpZW50UmVjdCxcbiAgICBlbGVtZW50OiBwb3BwZXJSZWN0LFxuICAgIHN0cmF0ZWd5OiAnYWJzb2x1dGUnLFxuICAgIHBsYWNlbWVudDogcGxhY2VtZW50XG4gIH0pO1xuICB2YXIgcG9wcGVyQ2xpZW50UmVjdCA9IHJlY3RUb0NsaWVudFJlY3QoT2JqZWN0LmFzc2lnbih7fSwgcG9wcGVyUmVjdCwgcG9wcGVyT2Zmc2V0cykpO1xuICB2YXIgZWxlbWVudENsaWVudFJlY3QgPSBlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyID8gcG9wcGVyQ2xpZW50UmVjdCA6IHJlZmVyZW5jZUNsaWVudFJlY3Q7IC8vIHBvc2l0aXZlID0gb3ZlcmZsb3dpbmcgdGhlIGNsaXBwaW5nIHJlY3RcbiAgLy8gMCBvciBuZWdhdGl2ZSA9IHdpdGhpbiB0aGUgY2xpcHBpbmcgcmVjdFxuXG4gIHZhciBvdmVyZmxvd09mZnNldHMgPSB7XG4gICAgdG9wOiBjbGlwcGluZ0NsaWVudFJlY3QudG9wIC0gZWxlbWVudENsaWVudFJlY3QudG9wICsgcGFkZGluZ09iamVjdC50b3AsXG4gICAgYm90dG9tOiBlbGVtZW50Q2xpZW50UmVjdC5ib3R0b20gLSBjbGlwcGluZ0NsaWVudFJlY3QuYm90dG9tICsgcGFkZGluZ09iamVjdC5ib3R0b20sXG4gICAgbGVmdDogY2xpcHBpbmdDbGllbnRSZWN0LmxlZnQgLSBlbGVtZW50Q2xpZW50UmVjdC5sZWZ0ICsgcGFkZGluZ09iamVjdC5sZWZ0LFxuICAgIHJpZ2h0OiBlbGVtZW50Q2xpZW50UmVjdC5yaWdodCAtIGNsaXBwaW5nQ2xpZW50UmVjdC5yaWdodCArIHBhZGRpbmdPYmplY3QucmlnaHRcbiAgfTtcbiAgdmFyIG9mZnNldERhdGEgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldDsgLy8gT2Zmc2V0cyBjYW4gYmUgYXBwbGllZCBvbmx5IHRvIHRoZSBwb3BwZXIgZWxlbWVudFxuXG4gIGlmIChlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyICYmIG9mZnNldERhdGEpIHtcbiAgICB2YXIgb2Zmc2V0ID0gb2Zmc2V0RGF0YVtwbGFjZW1lbnRdO1xuICAgIE9iamVjdC5rZXlzKG92ZXJmbG93T2Zmc2V0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgbXVsdGlwbHkgPSBbcmlnaHQsIGJvdHRvbV0uaW5kZXhPZihrZXkpID49IDAgPyAxIDogLTE7XG4gICAgICB2YXIgYXhpcyA9IFt0b3AsIGJvdHRvbV0uaW5kZXhPZihrZXkpID49IDAgPyAneScgOiAneCc7XG4gICAgICBvdmVyZmxvd09mZnNldHNba2V5XSArPSBvZmZzZXRbYXhpc10gKiBtdWx0aXBseTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBvdmVyZmxvd09mZnNldHM7XG59IiwgImltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4vZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyB2YXJpYXRpb25QbGFjZW1lbnRzLCBiYXNlUGxhY2VtZW50cywgcGxhY2VtZW50cyBhcyBhbGxQbGFjZW1lbnRzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4vZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVBdXRvUGxhY2VtZW50KHN0YXRlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgcGxhY2VtZW50ID0gX29wdGlvbnMucGxhY2VtZW50LFxuICAgICAgYm91bmRhcnkgPSBfb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmcgPSBfb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgZmxpcFZhcmlhdGlvbnMgPSBfb3B0aW9ucy5mbGlwVmFyaWF0aW9ucyxcbiAgICAgIF9vcHRpb25zJGFsbG93ZWRBdXRvUCA9IF9vcHRpb25zLmFsbG93ZWRBdXRvUGxhY2VtZW50cyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50cyA9IF9vcHRpb25zJGFsbG93ZWRBdXRvUCA9PT0gdm9pZCAwID8gYWxsUGxhY2VtZW50cyA6IF9vcHRpb25zJGFsbG93ZWRBdXRvUDtcbiAgdmFyIHZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpO1xuICB2YXIgcGxhY2VtZW50cyA9IHZhcmlhdGlvbiA/IGZsaXBWYXJpYXRpb25zID8gdmFyaWF0aW9uUGxhY2VtZW50cyA6IHZhcmlhdGlvblBsYWNlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgPT09IHZhcmlhdGlvbjtcbiAgfSkgOiBiYXNlUGxhY2VtZW50cztcbiAgdmFyIGFsbG93ZWRQbGFjZW1lbnRzID0gcGxhY2VtZW50cy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgIHJldHVybiBhbGxvd2VkQXV0b1BsYWNlbWVudHMuaW5kZXhPZihwbGFjZW1lbnQpID49IDA7XG4gIH0pO1xuXG4gIGlmIChhbGxvd2VkUGxhY2VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBhbGxvd2VkUGxhY2VtZW50cyA9IHBsYWNlbWVudHM7XG4gIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV06IEZsb3cgc2VlbXMgdG8gaGF2ZSBwcm9ibGVtcyB3aXRoIHR3byBhcnJheSB1bmlvbnMuLi5cblxuXG4gIHZhciBvdmVyZmxvd3MgPSBhbGxvd2VkUGxhY2VtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgYWNjW3BsYWNlbWVudF0gPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmdcbiAgICB9KVtnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCldO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG92ZXJmbG93cykuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBvdmVyZmxvd3NbYV0gLSBvdmVyZmxvd3NbYl07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0T3Bwb3NpdGVQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE9wcG9zaXRlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGNvbXB1dGVBdXRvUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9jb21wdXRlQXV0b1BsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgYm90dG9tLCB0b3AsIHN0YXJ0LCByaWdodCwgbGVmdCwgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZnVuY3Rpb24gZ2V0RXhwYW5kZWRGYWxsYmFja1BsYWNlbWVudHMocGxhY2VtZW50KSB7XG4gIGlmIChnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkgPT09IGF1dG8pIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICB2YXIgb3Bwb3NpdGVQbGFjZW1lbnQgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuICByZXR1cm4gW2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KHBsYWNlbWVudCksIG9wcG9zaXRlUGxhY2VtZW50LCBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChvcHBvc2l0ZVBsYWNlbWVudCldO1xufVxuXG5mdW5jdGlvbiBmbGlwKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdLl9za2lwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIF9vcHRpb25zJG1haW5BeGlzID0gb3B0aW9ucy5tYWluQXhpcyxcbiAgICAgIGNoZWNrTWFpbkF4aXMgPSBfb3B0aW9ucyRtYWluQXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJG1haW5BeGlzLFxuICAgICAgX29wdGlvbnMkYWx0QXhpcyA9IG9wdGlvbnMuYWx0QXhpcyxcbiAgICAgIGNoZWNrQWx0QXhpcyA9IF9vcHRpb25zJGFsdEF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRhbHRBeGlzLFxuICAgICAgc3BlY2lmaWVkRmFsbGJhY2tQbGFjZW1lbnRzID0gb3B0aW9ucy5mYWxsYmFja1BsYWNlbWVudHMsXG4gICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgYm91bmRhcnkgPSBvcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IG9wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRmbGlwVmFyaWF0aW8gPSBvcHRpb25zLmZsaXBWYXJpYXRpb25zLFxuICAgICAgZmxpcFZhcmlhdGlvbnMgPSBfb3B0aW9ucyRmbGlwVmFyaWF0aW8gPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRmbGlwVmFyaWF0aW8sXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHMgPSBvcHRpb25zLmFsbG93ZWRBdXRvUGxhY2VtZW50cztcbiAgdmFyIHByZWZlcnJlZFBsYWNlbWVudCA9IHN0YXRlLm9wdGlvbnMucGxhY2VtZW50O1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocHJlZmVycmVkUGxhY2VtZW50KTtcbiAgdmFyIGlzQmFzZVBsYWNlbWVudCA9IGJhc2VQbGFjZW1lbnQgPT09IHByZWZlcnJlZFBsYWNlbWVudDtcbiAgdmFyIGZhbGxiYWNrUGxhY2VtZW50cyA9IHNwZWNpZmllZEZhbGxiYWNrUGxhY2VtZW50cyB8fCAoaXNCYXNlUGxhY2VtZW50IHx8ICFmbGlwVmFyaWF0aW9ucyA/IFtnZXRPcHBvc2l0ZVBsYWNlbWVudChwcmVmZXJyZWRQbGFjZW1lbnQpXSA6IGdldEV4cGFuZGVkRmFsbGJhY2tQbGFjZW1lbnRzKHByZWZlcnJlZFBsYWNlbWVudCkpO1xuICB2YXIgcGxhY2VtZW50cyA9IFtwcmVmZXJyZWRQbGFjZW1lbnRdLmNvbmNhdChmYWxsYmFja1BsYWNlbWVudHMpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkgPT09IGF1dG8gPyBjb21wdXRlQXV0b1BsYWNlbWVudChzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmcsXG4gICAgICBmbGlwVmFyaWF0aW9uczogZmxpcFZhcmlhdGlvbnMsXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHM6IGFsbG93ZWRBdXRvUGxhY2VtZW50c1xuICAgIH0pIDogcGxhY2VtZW50KTtcbiAgfSwgW10pO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBjaGVja3NNYXAgPSBuZXcgTWFwKCk7XG4gIHZhciBtYWtlRmFsbGJhY2tDaGVja3MgPSB0cnVlO1xuICB2YXIgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50c1swXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBsYWNlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGxhY2VtZW50ID0gcGxhY2VtZW50c1tpXTtcblxuICAgIHZhciBfYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KTtcblxuICAgIHZhciBpc1N0YXJ0VmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgPT09IHN0YXJ0O1xuICAgIHZhciBpc1ZlcnRpY2FsID0gW3RvcCwgYm90dG9tXS5pbmRleE9mKF9iYXNlUGxhY2VtZW50KSA+PSAwO1xuICAgIHZhciBsZW4gPSBpc1ZlcnRpY2FsID8gJ3dpZHRoJyA6ICdoZWlnaHQnO1xuICAgIHZhciBvdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnk6IGFsdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZ1xuICAgIH0pO1xuICAgIHZhciBtYWluVmFyaWF0aW9uU2lkZSA9IGlzVmVydGljYWwgPyBpc1N0YXJ0VmFyaWF0aW9uID8gcmlnaHQgOiBsZWZ0IDogaXNTdGFydFZhcmlhdGlvbiA/IGJvdHRvbSA6IHRvcDtcblxuICAgIGlmIChyZWZlcmVuY2VSZWN0W2xlbl0gPiBwb3BwZXJSZWN0W2xlbl0pIHtcbiAgICAgIG1haW5WYXJpYXRpb25TaWRlID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQobWFpblZhcmlhdGlvblNpZGUpO1xuICAgIH1cblxuICAgIHZhciBhbHRWYXJpYXRpb25TaWRlID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQobWFpblZhcmlhdGlvblNpZGUpO1xuICAgIHZhciBjaGVja3MgPSBbXTtcblxuICAgIGlmIChjaGVja01haW5BeGlzKSB7XG4gICAgICBjaGVja3MucHVzaChvdmVyZmxvd1tfYmFzZVBsYWNlbWVudF0gPD0gMCk7XG4gICAgfVxuXG4gICAgaWYgKGNoZWNrQWx0QXhpcykge1xuICAgICAgY2hlY2tzLnB1c2gob3ZlcmZsb3dbbWFpblZhcmlhdGlvblNpZGVdIDw9IDAsIG92ZXJmbG93W2FsdFZhcmlhdGlvblNpZGVdIDw9IDApO1xuICAgIH1cblxuICAgIGlmIChjaGVja3MuZXZlcnkoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICByZXR1cm4gY2hlY2s7XG4gICAgfSkpIHtcbiAgICAgIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudDtcbiAgICAgIG1ha2VGYWxsYmFja0NoZWNrcyA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2hlY2tzTWFwLnNldChwbGFjZW1lbnQsIGNoZWNrcyk7XG4gIH1cblxuICBpZiAobWFrZUZhbGxiYWNrQ2hlY2tzKSB7XG4gICAgLy8gYDJgIG1heSBiZSBkZXNpcmVkIGluIHNvbWUgY2FzZXMgXHUyMDEzIHJlc2VhcmNoIGxhdGVyXG4gICAgdmFyIG51bWJlck9mQ2hlY2tzID0gZmxpcFZhcmlhdGlvbnMgPyAzIDogMTtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pKSB7XG4gICAgICB2YXIgZml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudHMuZmluZChmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgICAgIHZhciBjaGVja3MgPSBjaGVja3NNYXAuZ2V0KHBsYWNlbWVudCk7XG5cbiAgICAgICAgaWYgKGNoZWNrcykge1xuICAgICAgICAgIHJldHVybiBjaGVja3Muc2xpY2UoMCwgX2kpLmV2ZXJ5KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGZpdHRpbmdQbGFjZW1lbnQpIHtcbiAgICAgICAgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gZml0dGluZ1BsYWNlbWVudDtcbiAgICAgICAgcmV0dXJuIFwiYnJlYWtcIjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgX2kgPSBudW1iZXJPZkNoZWNrczsgX2kgPiAwOyBfaS0tKSB7XG4gICAgICB2YXIgX3JldCA9IF9sb29wKF9pKTtcblxuICAgICAgaWYgKF9yZXQgPT09IFwiYnJlYWtcIikgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLnBsYWNlbWVudCAhPT0gZmlyc3RGaXR0aW5nUGxhY2VtZW50KSB7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXS5fc2tpcCA9IHRydWU7XG4gICAgc3RhdGUucGxhY2VtZW50ID0gZmlyc3RGaXR0aW5nUGxhY2VtZW50O1xuICAgIHN0YXRlLnJlc2V0ID0gdHJ1ZTtcbiAgfVxufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnZmxpcCcsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBmbGlwLFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ29mZnNldCddLFxuICBkYXRhOiB7XG4gICAgX3NraXA6IGZhbHNlXG4gIH1cbn07IiwgImltcG9ydCB7IHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuXG5mdW5jdGlvbiBnZXRTaWRlT2Zmc2V0cyhvdmVyZmxvdywgcmVjdCwgcHJldmVudGVkT2Zmc2V0cykge1xuICBpZiAocHJldmVudGVkT2Zmc2V0cyA9PT0gdm9pZCAwKSB7XG4gICAgcHJldmVudGVkT2Zmc2V0cyA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdG9wOiBvdmVyZmxvdy50b3AgLSByZWN0LmhlaWdodCAtIHByZXZlbnRlZE9mZnNldHMueSxcbiAgICByaWdodDogb3ZlcmZsb3cucmlnaHQgLSByZWN0LndpZHRoICsgcHJldmVudGVkT2Zmc2V0cy54LFxuICAgIGJvdHRvbTogb3ZlcmZsb3cuYm90dG9tIC0gcmVjdC5oZWlnaHQgKyBwcmV2ZW50ZWRPZmZzZXRzLnksXG4gICAgbGVmdDogb3ZlcmZsb3cubGVmdCAtIHJlY3Qud2lkdGggLSBwcmV2ZW50ZWRPZmZzZXRzLnhcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKG92ZXJmbG93KSB7XG4gIHJldHVybiBbdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XS5zb21lKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgcmV0dXJuIG92ZXJmbG93W3NpZGVdID49IDA7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoaWRlKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIHByZXZlbnRlZE9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnByZXZlbnRPdmVyZmxvdztcbiAgdmFyIHJlZmVyZW5jZU92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBlbGVtZW50Q29udGV4dDogJ3JlZmVyZW5jZSdcbiAgfSk7XG4gIHZhciBwb3BwZXJBbHRPdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgYWx0Qm91bmRhcnk6IHRydWVcbiAgfSk7XG4gIHZhciByZWZlcmVuY2VDbGlwcGluZ09mZnNldHMgPSBnZXRTaWRlT2Zmc2V0cyhyZWZlcmVuY2VPdmVyZmxvdywgcmVmZXJlbmNlUmVjdCk7XG4gIHZhciBwb3BwZXJFc2NhcGVPZmZzZXRzID0gZ2V0U2lkZU9mZnNldHMocG9wcGVyQWx0T3ZlcmZsb3csIHBvcHBlclJlY3QsIHByZXZlbnRlZE9mZnNldHMpO1xuICB2YXIgaXNSZWZlcmVuY2VIaWRkZW4gPSBpc0FueVNpZGVGdWxseUNsaXBwZWQocmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzKTtcbiAgdmFyIGhhc1BvcHBlckVzY2FwZWQgPSBpc0FueVNpZGVGdWxseUNsaXBwZWQocG9wcGVyRXNjYXBlT2Zmc2V0cyk7XG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSB7XG4gICAgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzOiByZWZlcmVuY2VDbGlwcGluZ09mZnNldHMsXG4gICAgcG9wcGVyRXNjYXBlT2Zmc2V0czogcG9wcGVyRXNjYXBlT2Zmc2V0cyxcbiAgICBpc1JlZmVyZW5jZUhpZGRlbjogaXNSZWZlcmVuY2VIaWRkZW4sXG4gICAgaGFzUG9wcGVyRXNjYXBlZDogaGFzUG9wcGVyRXNjYXBlZFxuICB9O1xuICBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyLCB7XG4gICAgJ2RhdGEtcG9wcGVyLXJlZmVyZW5jZS1oaWRkZW4nOiBpc1JlZmVyZW5jZUhpZGRlbixcbiAgICAnZGF0YS1wb3BwZXItZXNjYXBlZCc6IGhhc1BvcHBlckVzY2FwZWRcbiAgfSk7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdoaWRlJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydwcmV2ZW50T3ZlcmZsb3cnXSxcbiAgZm46IGhpZGVcbn07IiwgImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBwbGFjZW1lbnRzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlQW5kU2tpZGRpbmdUb1hZKHBsYWNlbWVudCwgcmVjdHMsIG9mZnNldCkge1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KTtcbiAgdmFyIGludmVydERpc3RhbmNlID0gW2xlZnQsIHRvcF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwID8gLTEgOiAxO1xuXG4gIHZhciBfcmVmID0gdHlwZW9mIG9mZnNldCA9PT0gJ2Z1bmN0aW9uJyA/IG9mZnNldChPYmplY3QuYXNzaWduKHt9LCByZWN0cywge1xuICAgIHBsYWNlbWVudDogcGxhY2VtZW50XG4gIH0pKSA6IG9mZnNldCxcbiAgICAgIHNraWRkaW5nID0gX3JlZlswXSxcbiAgICAgIGRpc3RhbmNlID0gX3JlZlsxXTtcblxuICBza2lkZGluZyA9IHNraWRkaW5nIHx8IDA7XG4gIGRpc3RhbmNlID0gKGRpc3RhbmNlIHx8IDApICogaW52ZXJ0RGlzdGFuY2U7XG4gIHJldHVybiBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMCA/IHtcbiAgICB4OiBkaXN0YW5jZSxcbiAgICB5OiBza2lkZGluZ1xuICB9IDoge1xuICAgIHg6IHNraWRkaW5nLFxuICAgIHk6IGRpc3RhbmNlXG4gIH07XG59XG5cbmZ1bmN0aW9uIG9mZnNldChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmMi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYyLm5hbWU7XG4gIHZhciBfb3B0aW9ucyRvZmZzZXQgPSBvcHRpb25zLm9mZnNldCxcbiAgICAgIG9mZnNldCA9IF9vcHRpb25zJG9mZnNldCA9PT0gdm9pZCAwID8gWzAsIDBdIDogX29wdGlvbnMkb2Zmc2V0O1xuICB2YXIgZGF0YSA9IHBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIGFjY1twbGFjZW1lbnRdID0gZGlzdGFuY2VBbmRTa2lkZGluZ1RvWFkocGxhY2VtZW50LCBzdGF0ZS5yZWN0cywgb2Zmc2V0KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHZhciBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQgPSBkYXRhW3N0YXRlLnBsYWNlbWVudF0sXG4gICAgICB4ID0gX2RhdGEkc3RhdGUkcGxhY2VtZW50LngsXG4gICAgICB5ID0gX2RhdGEkc3RhdGUkcGxhY2VtZW50Lnk7XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLnggKz0geDtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMueSArPSB5O1xuICB9XG5cbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGRhdGE7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdvZmZzZXQnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICByZXF1aXJlczogWydwb3BwZXJPZmZzZXRzJ10sXG4gIGZuOiBvZmZzZXRcbn07IiwgImltcG9ydCBjb21wdXRlT2Zmc2V0cyBmcm9tIFwiLi4vdXRpbHMvY29tcHV0ZU9mZnNldHMuanNcIjtcblxuZnVuY3Rpb24gcG9wcGVyT2Zmc2V0cyhfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICAvLyBPZmZzZXRzIGFyZSB0aGUgYWN0dWFsIHBvc2l0aW9uIHRoZSBwb3BwZXIgbmVlZHMgdG8gaGF2ZSB0byBiZVxuICAvLyBwcm9wZXJseSBwb3NpdGlvbmVkIG5lYXIgaXRzIHJlZmVyZW5jZSBlbGVtZW50XG4gIC8vIFRoaXMgaXMgdGhlIG1vc3QgYmFzaWMgcGxhY2VtZW50LCBhbmQgd2lsbCBiZSBhZGp1c3RlZCBieVxuICAvLyB0aGUgbW9kaWZpZXJzIGluIHRoZSBuZXh0IHN0ZXBcbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGNvbXB1dGVPZmZzZXRzKHtcbiAgICByZWZlcmVuY2U6IHN0YXRlLnJlY3RzLnJlZmVyZW5jZSxcbiAgICBlbGVtZW50OiBzdGF0ZS5yZWN0cy5wb3BwZXIsXG4gICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgcGxhY2VtZW50OiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSk7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdwb3BwZXJPZmZzZXRzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdyZWFkJyxcbiAgZm46IHBvcHBlck9mZnNldHMsXG4gIGRhdGE6IHt9XG59OyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRBbHRBeGlzKGF4aXMpIHtcbiAgcmV0dXJuIGF4aXMgPT09ICd4JyA/ICd5JyA6ICd4Jztcbn0iLCAiaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tLCBzdGFydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldEFsdEF4aXMgZnJvbSBcIi4uL3V0aWxzL2dldEFsdEF4aXMuanNcIjtcbmltcG9ydCB7IHdpdGhpbiwgd2l0aGluTWF4Q2xhbXAgfSBmcm9tIFwiLi4vdXRpbHMvd2l0aGluLmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IGdldEZyZXNoU2lkZU9iamVjdCBmcm9tIFwiLi4vdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBtaW4gYXMgbWF0aE1pbiwgbWF4IGFzIG1hdGhNYXggfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBwcmV2ZW50T3ZlcmZsb3coX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIHZhciBfb3B0aW9ucyRtYWluQXhpcyA9IG9wdGlvbnMubWFpbkF4aXMsXG4gICAgICBjaGVja01haW5BeGlzID0gX29wdGlvbnMkbWFpbkF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRtYWluQXhpcyxcbiAgICAgIF9vcHRpb25zJGFsdEF4aXMgPSBvcHRpb25zLmFsdEF4aXMsXG4gICAgICBjaGVja0FsdEF4aXMgPSBfb3B0aW9ucyRhbHRBeGlzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRpb25zJGFsdEF4aXMsXG4gICAgICBib3VuZGFyeSA9IG9wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBvcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcsXG4gICAgICBfb3B0aW9ucyR0ZXRoZXIgPSBvcHRpb25zLnRldGhlcixcbiAgICAgIHRldGhlciA9IF9vcHRpb25zJHRldGhlciA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHRldGhlcixcbiAgICAgIF9vcHRpb25zJHRldGhlck9mZnNldCA9IG9wdGlvbnMudGV0aGVyT2Zmc2V0LFxuICAgICAgdGV0aGVyT2Zmc2V0ID0gX29wdGlvbnMkdGV0aGVyT2Zmc2V0ID09PSB2b2lkIDAgPyAwIDogX29wdGlvbnMkdGV0aGVyT2Zmc2V0O1xuICB2YXIgb3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICBwYWRkaW5nOiBwYWRkaW5nLFxuICAgIGFsdEJvdW5kYXJ5OiBhbHRCb3VuZGFyeVxuICB9KTtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciB2YXJpYXRpb24gPSBnZXRWYXJpYXRpb24oc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIGlzQmFzZVBsYWNlbWVudCA9ICF2YXJpYXRpb247XG4gIHZhciBtYWluQXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGFsdEF4aXMgPSBnZXRBbHRBeGlzKG1haW5BeGlzKTtcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIHRldGhlck9mZnNldFZhbHVlID0gdHlwZW9mIHRldGhlck9mZnNldCA9PT0gJ2Z1bmN0aW9uJyA/IHRldGhlck9mZnNldChPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5yZWN0cywge1xuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pKSA6IHRldGhlck9mZnNldDtcbiAgdmFyIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZSA9IHR5cGVvZiB0ZXRoZXJPZmZzZXRWYWx1ZSA9PT0gJ251bWJlcicgPyB7XG4gICAgbWFpbkF4aXM6IHRldGhlck9mZnNldFZhbHVlLFxuICAgIGFsdEF4aXM6IHRldGhlck9mZnNldFZhbHVlXG4gIH0gOiBPYmplY3QuYXNzaWduKHtcbiAgICBtYWluQXhpczogMCxcbiAgICBhbHRBeGlzOiAwXG4gIH0sIHRldGhlck9mZnNldFZhbHVlKTtcbiAgdmFyIG9mZnNldE1vZGlmaWVyU3RhdGUgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldCA/IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0W3N0YXRlLnBsYWNlbWVudF0gOiBudWxsO1xuICB2YXIgZGF0YSA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBpZiAoIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY2hlY2tNYWluQXhpcykge1xuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQ7XG5cbiAgICB2YXIgbWFpblNpZGUgPSBtYWluQXhpcyA9PT0gJ3knID8gdG9wIDogbGVmdDtcbiAgICB2YXIgYWx0U2lkZSA9IG1haW5BeGlzID09PSAneScgPyBib3R0b20gOiByaWdodDtcbiAgICB2YXIgbGVuID0gbWFpbkF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICB2YXIgb2Zmc2V0ID0gcG9wcGVyT2Zmc2V0c1ttYWluQXhpc107XG4gICAgdmFyIG1pbiA9IG9mZnNldCArIG92ZXJmbG93W21haW5TaWRlXTtcbiAgICB2YXIgbWF4ID0gb2Zmc2V0IC0gb3ZlcmZsb3dbYWx0U2lkZV07XG4gICAgdmFyIGFkZGl0aXZlID0gdGV0aGVyID8gLXBvcHBlclJlY3RbbGVuXSAvIDIgOiAwO1xuICAgIHZhciBtaW5MZW4gPSB2YXJpYXRpb24gPT09IHN0YXJ0ID8gcmVmZXJlbmNlUmVjdFtsZW5dIDogcG9wcGVyUmVjdFtsZW5dO1xuICAgIHZhciBtYXhMZW4gPSB2YXJpYXRpb24gPT09IHN0YXJ0ID8gLXBvcHBlclJlY3RbbGVuXSA6IC1yZWZlcmVuY2VSZWN0W2xlbl07IC8vIFdlIG5lZWQgdG8gaW5jbHVkZSB0aGUgYXJyb3cgaW4gdGhlIGNhbGN1bGF0aW9uIHNvIHRoZSBhcnJvdyBkb2Vzbid0IGdvXG4gICAgLy8gb3V0c2lkZSB0aGUgcmVmZXJlbmNlIGJvdW5kc1xuXG4gICAgdmFyIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93O1xuICAgIHZhciBhcnJvd1JlY3QgPSB0ZXRoZXIgJiYgYXJyb3dFbGVtZW50ID8gZ2V0TGF5b3V0UmVjdChhcnJvd0VsZW1lbnQpIDoge1xuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICAgIHZhciBhcnJvd1BhZGRpbmdPYmplY3QgPSBzdGF0ZS5tb2RpZmllcnNEYXRhWydhcnJvdyNwZXJzaXN0ZW50J10gPyBzdGF0ZS5tb2RpZmllcnNEYXRhWydhcnJvdyNwZXJzaXN0ZW50J10ucGFkZGluZyA6IGdldEZyZXNoU2lkZU9iamVjdCgpO1xuICAgIHZhciBhcnJvd1BhZGRpbmdNaW4gPSBhcnJvd1BhZGRpbmdPYmplY3RbbWFpblNpZGVdO1xuICAgIHZhciBhcnJvd1BhZGRpbmdNYXggPSBhcnJvd1BhZGRpbmdPYmplY3RbYWx0U2lkZV07IC8vIElmIHRoZSByZWZlcmVuY2UgbGVuZ3RoIGlzIHNtYWxsZXIgdGhhbiB0aGUgYXJyb3cgbGVuZ3RoLCB3ZSBkb24ndCB3YW50XG4gICAgLy8gdG8gaW5jbHVkZSBpdHMgZnVsbCBzaXplIGluIHRoZSBjYWxjdWxhdGlvbi4gSWYgdGhlIHJlZmVyZW5jZSBpcyBzbWFsbFxuICAgIC8vIGFuZCBuZWFyIHRoZSBlZGdlIG9mIGEgYm91bmRhcnksIHRoZSBwb3BwZXIgY2FuIG92ZXJmbG93IGV2ZW4gaWYgdGhlXG4gICAgLy8gcmVmZXJlbmNlIGlzIG5vdCBvdmVyZmxvd2luZyBhcyB3ZWxsIChlLmcuIHZpcnR1YWwgZWxlbWVudHMgd2l0aCBub1xuICAgIC8vIHdpZHRoIG9yIGhlaWdodClcblxuICAgIHZhciBhcnJvd0xlbiA9IHdpdGhpbigwLCByZWZlcmVuY2VSZWN0W2xlbl0sIGFycm93UmVjdFtsZW5dKTtcbiAgICB2YXIgbWluT2Zmc2V0ID0gaXNCYXNlUGxhY2VtZW50ID8gcmVmZXJlbmNlUmVjdFtsZW5dIC8gMiAtIGFkZGl0aXZlIC0gYXJyb3dMZW4gLSBhcnJvd1BhZGRpbmdNaW4gLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXMgOiBtaW5MZW4gLSBhcnJvd0xlbiAtIGFycm93UGFkZGluZ01pbiAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcztcbiAgICB2YXIgbWF4T2Zmc2V0ID0gaXNCYXNlUGxhY2VtZW50ID8gLXJlZmVyZW5jZVJlY3RbbGVuXSAvIDIgKyBhZGRpdGl2ZSArIGFycm93TGVuICsgYXJyb3dQYWRkaW5nTWF4ICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzIDogbWF4TGVuICsgYXJyb3dMZW4gKyBhcnJvd1BhZGRpbmdNYXggKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXM7XG4gICAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3cgJiYgZ2V0T2Zmc2V0UGFyZW50KHN0YXRlLmVsZW1lbnRzLmFycm93KTtcbiAgICB2YXIgY2xpZW50T2Zmc2V0ID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBtYWluQXhpcyA9PT0gJ3knID8gYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50VG9wIHx8IDAgOiBhcnJvd09mZnNldFBhcmVudC5jbGllbnRMZWZ0IHx8IDAgOiAwO1xuICAgIHZhciBvZmZzZXRNb2RpZmllclZhbHVlID0gKF9vZmZzZXRNb2RpZmllclN0YXRlJCA9IG9mZnNldE1vZGlmaWVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9mZnNldE1vZGlmaWVyU3RhdGVbbWFpbkF4aXNdKSAhPSBudWxsID8gX29mZnNldE1vZGlmaWVyU3RhdGUkIDogMDtcbiAgICB2YXIgdGV0aGVyTWluID0gb2Zmc2V0ICsgbWluT2Zmc2V0IC0gb2Zmc2V0TW9kaWZpZXJWYWx1ZSAtIGNsaWVudE9mZnNldDtcbiAgICB2YXIgdGV0aGVyTWF4ID0gb2Zmc2V0ICsgbWF4T2Zmc2V0IC0gb2Zmc2V0TW9kaWZpZXJWYWx1ZTtcbiAgICB2YXIgcHJldmVudGVkT2Zmc2V0ID0gd2l0aGluKHRldGhlciA/IG1hdGhNaW4obWluLCB0ZXRoZXJNaW4pIDogbWluLCBvZmZzZXQsIHRldGhlciA/IG1hdGhNYXgobWF4LCB0ZXRoZXJNYXgpIDogbWF4KTtcbiAgICBwb3BwZXJPZmZzZXRzW21haW5BeGlzXSA9IHByZXZlbnRlZE9mZnNldDtcbiAgICBkYXRhW21haW5BeGlzXSA9IHByZXZlbnRlZE9mZnNldCAtIG9mZnNldDtcbiAgfVxuXG4gIGlmIChjaGVja0FsdEF4aXMpIHtcbiAgICB2YXIgX29mZnNldE1vZGlmaWVyU3RhdGUkMjtcblxuICAgIHZhciBfbWFpblNpZGUgPSBtYWluQXhpcyA9PT0gJ3gnID8gdG9wIDogbGVmdDtcblxuICAgIHZhciBfYWx0U2lkZSA9IG1haW5BeGlzID09PSAneCcgPyBib3R0b20gOiByaWdodDtcblxuICAgIHZhciBfb2Zmc2V0ID0gcG9wcGVyT2Zmc2V0c1thbHRBeGlzXTtcblxuICAgIHZhciBfbGVuID0gYWx0QXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gICAgdmFyIF9taW4gPSBfb2Zmc2V0ICsgb3ZlcmZsb3dbX21haW5TaWRlXTtcblxuICAgIHZhciBfbWF4ID0gX29mZnNldCAtIG92ZXJmbG93W19hbHRTaWRlXTtcblxuICAgIHZhciBpc09yaWdpblNpZGUgPSBbdG9wLCBsZWZ0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpICE9PSAtMTtcblxuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSA9IChfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyID0gb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogb2Zmc2V0TW9kaWZpZXJTdGF0ZVthbHRBeGlzXSkgIT0gbnVsbCA/IF9vZmZzZXRNb2RpZmllclN0YXRlJDIgOiAwO1xuXG4gICAgdmFyIF90ZXRoZXJNaW4gPSBpc09yaWdpblNpZGUgPyBfbWluIDogX29mZnNldCAtIHJlZmVyZW5jZVJlY3RbX2xlbl0gLSBwb3BwZXJSZWN0W19sZW5dIC0gX29mZnNldE1vZGlmaWVyVmFsdWUgKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUuYWx0QXhpcztcblxuICAgIHZhciBfdGV0aGVyTWF4ID0gaXNPcmlnaW5TaWRlID8gX29mZnNldCArIHJlZmVyZW5jZVJlY3RbX2xlbl0gKyBwb3BwZXJSZWN0W19sZW5dIC0gX29mZnNldE1vZGlmaWVyVmFsdWUgLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUuYWx0QXhpcyA6IF9tYXg7XG5cbiAgICB2YXIgX3ByZXZlbnRlZE9mZnNldCA9IHRldGhlciAmJiBpc09yaWdpblNpZGUgPyB3aXRoaW5NYXhDbGFtcChfdGV0aGVyTWluLCBfb2Zmc2V0LCBfdGV0aGVyTWF4KSA6IHdpdGhpbih0ZXRoZXIgPyBfdGV0aGVyTWluIDogX21pbiwgX29mZnNldCwgdGV0aGVyID8gX3RldGhlck1heCA6IF9tYXgpO1xuXG4gICAgcG9wcGVyT2Zmc2V0c1thbHRBeGlzXSA9IF9wcmV2ZW50ZWRPZmZzZXQ7XG4gICAgZGF0YVthbHRBeGlzXSA9IF9wcmV2ZW50ZWRPZmZzZXQgLSBfb2Zmc2V0O1xuICB9XG5cbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGRhdGE7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdwcmV2ZW50T3ZlcmZsb3cnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogcHJldmVudE92ZXJmbG93LFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ29mZnNldCddXG59OyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRIVE1MRWxlbWVudFNjcm9sbChlbGVtZW50KSB7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsTGVmdDogZWxlbWVudC5zY3JvbGxMZWZ0LFxuICAgIHNjcm9sbFRvcDogZWxlbWVudC5zY3JvbGxUb3BcbiAgfTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldEhUTUxFbGVtZW50U2Nyb2xsIGZyb20gXCIuL2dldEhUTUxFbGVtZW50U2Nyb2xsLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXROb2RlU2Nyb2xsKG5vZGUpIHtcbiAgaWYgKG5vZGUgPT09IGdldFdpbmRvdyhub2RlKSB8fCAhaXNIVE1MRWxlbWVudChub2RlKSkge1xuICAgIHJldHVybiBnZXRXaW5kb3dTY3JvbGwobm9kZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGdldEhUTUxFbGVtZW50U2Nyb2xsKG5vZGUpO1xuICB9XG59IiwgImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZVNjcm9sbCBmcm9tIFwiLi9nZXROb2RlU2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIGlzRWxlbWVudFNjYWxlZChlbGVtZW50KSB7XG4gIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IHJvdW5kKHJlY3Qud2lkdGgpIC8gZWxlbWVudC5vZmZzZXRXaWR0aCB8fCAxO1xuICB2YXIgc2NhbGVZID0gcm91bmQocmVjdC5oZWlnaHQpIC8gZWxlbWVudC5vZmZzZXRIZWlnaHQgfHwgMTtcbiAgcmV0dXJuIHNjYWxlWCAhPT0gMSB8fCBzY2FsZVkgIT09IDE7XG59IC8vIFJldHVybnMgdGhlIGNvbXBvc2l0ZSByZWN0IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gaXRzIG9mZnNldFBhcmVudC5cbi8vIENvbXBvc2l0ZSBtZWFucyBpdCB0YWtlcyBpbnRvIGFjY291bnQgdHJhbnNmb3JtcyBhcyB3ZWxsIGFzIGxheW91dC5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wb3NpdGVSZWN0KGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBvZmZzZXRQYXJlbnQsIGlzRml4ZWQpIHtcbiAgaWYgKGlzRml4ZWQgPT09IHZvaWQgMCkge1xuICAgIGlzRml4ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBpc09mZnNldFBhcmVudEFuRWxlbWVudCA9IGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudElzU2NhbGVkID0gaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGlzRWxlbWVudFNjYWxlZChvZmZzZXRQYXJlbnQpO1xuICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZ2V0RG9jdW1lbnRFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIHZhciByZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBvZmZzZXRQYXJlbnRJc1NjYWxlZCwgaXNGaXhlZCk7XG4gIHZhciBzY3JvbGwgPSB7XG4gICAgc2Nyb2xsTGVmdDogMCxcbiAgICBzY3JvbGxUb3A6IDBcbiAgfTtcbiAgdmFyIG9mZnNldHMgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgaWYgKGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50IHx8ICFpc09mZnNldFBhcmVudEFuRWxlbWVudCAmJiAhaXNGaXhlZCkge1xuICAgIGlmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpICE9PSAnYm9keScgfHwgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy8xMDc4XG4gICAgaXNTY3JvbGxQYXJlbnQoZG9jdW1lbnRFbGVtZW50KSkge1xuICAgICAgc2Nyb2xsID0gZ2V0Tm9kZVNjcm9sbChvZmZzZXRQYXJlbnQpO1xuICAgIH1cblxuICAgIGlmIChpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCkpIHtcbiAgICAgIG9mZnNldHMgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3Qob2Zmc2V0UGFyZW50LCB0cnVlKTtcbiAgICAgIG9mZnNldHMueCArPSBvZmZzZXRQYXJlbnQuY2xpZW50TGVmdDtcbiAgICAgIG9mZnNldHMueSArPSBvZmZzZXRQYXJlbnQuY2xpZW50VG9wO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICBvZmZzZXRzLnggPSBnZXRXaW5kb3dTY3JvbGxCYXJYKGRvY3VtZW50RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiByZWN0LmxlZnQgKyBzY3JvbGwuc2Nyb2xsTGVmdCAtIG9mZnNldHMueCxcbiAgICB5OiByZWN0LnRvcCArIHNjcm9sbC5zY3JvbGxUb3AgLSBvZmZzZXRzLnksXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodFxuICB9O1xufSIsICJpbXBvcnQgeyBtb2RpZmllclBoYXNlcyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiOyAvLyBzb3VyY2U6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ5ODc1MjU1XG5cbmZ1bmN0aW9uIG9yZGVyKG1vZGlmaWVycykge1xuICB2YXIgbWFwID0gbmV3IE1hcCgpO1xuICB2YXIgdmlzaXRlZCA9IG5ldyBTZXQoKTtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBtb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICBtYXAuc2V0KG1vZGlmaWVyLm5hbWUsIG1vZGlmaWVyKTtcbiAgfSk7IC8vIE9uIHZpc2l0aW5nIG9iamVjdCwgY2hlY2sgZm9yIGl0cyBkZXBlbmRlbmNpZXMgYW5kIHZpc2l0IHRoZW0gcmVjdXJzaXZlbHlcblxuICBmdW5jdGlvbiBzb3J0KG1vZGlmaWVyKSB7XG4gICAgdmlzaXRlZC5hZGQobW9kaWZpZXIubmFtZSk7XG4gICAgdmFyIHJlcXVpcmVzID0gW10uY29uY2F0KG1vZGlmaWVyLnJlcXVpcmVzIHx8IFtdLCBtb2RpZmllci5yZXF1aXJlc0lmRXhpc3RzIHx8IFtdKTtcbiAgICByZXF1aXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChkZXApIHtcbiAgICAgIGlmICghdmlzaXRlZC5oYXMoZGVwKSkge1xuICAgICAgICB2YXIgZGVwTW9kaWZpZXIgPSBtYXAuZ2V0KGRlcCk7XG5cbiAgICAgICAgaWYgKGRlcE1vZGlmaWVyKSB7XG4gICAgICAgICAgc29ydChkZXBNb2RpZmllcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXN1bHQucHVzaChtb2RpZmllcik7XG4gIH1cblxuICBtb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICBpZiAoIXZpc2l0ZWQuaGFzKG1vZGlmaWVyLm5hbWUpKSB7XG4gICAgICAvLyBjaGVjayBmb3IgdmlzaXRlZCBvYmplY3RcbiAgICAgIHNvcnQobW9kaWZpZXIpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9yZGVyTW9kaWZpZXJzKG1vZGlmaWVycykge1xuICAvLyBvcmRlciBiYXNlZCBvbiBkZXBlbmRlbmNpZXNcbiAgdmFyIG9yZGVyZWRNb2RpZmllcnMgPSBvcmRlcihtb2RpZmllcnMpOyAvLyBvcmRlciBiYXNlZCBvbiBwaGFzZVxuXG4gIHJldHVybiBtb2RpZmllclBoYXNlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGhhc2UpIHtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChvcmRlcmVkTW9kaWZpZXJzLmZpbHRlcihmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICAgIHJldHVybiBtb2RpZmllci5waGFzZSA9PT0gcGhhc2U7XG4gICAgfSkpO1xuICB9LCBbXSk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlYm91bmNlKGZuKSB7XG4gIHZhciBwZW5kaW5nO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghcGVuZGluZykge1xuICAgICAgcGVuZGluZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHBlbmRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgcmVzb2x2ZShmbigpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGVuZGluZztcbiAgfTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VCeU5hbWUobW9kaWZpZXJzKSB7XG4gIHZhciBtZXJnZWQgPSBtb2RpZmllcnMucmVkdWNlKGZ1bmN0aW9uIChtZXJnZWQsIGN1cnJlbnQpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBtZXJnZWRbY3VycmVudC5uYW1lXTtcbiAgICBtZXJnZWRbY3VycmVudC5uYW1lXSA9IGV4aXN0aW5nID8gT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmcsIGN1cnJlbnQsIHtcbiAgICAgIG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLm9wdGlvbnMsIGN1cnJlbnQub3B0aW9ucyksXG4gICAgICBkYXRhOiBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZy5kYXRhLCBjdXJyZW50LmRhdGEpXG4gICAgfSkgOiBjdXJyZW50O1xuICAgIHJldHVybiBtZXJnZWQ7XG4gIH0sIHt9KTsgLy8gSUUxMSBkb2VzIG5vdCBzdXBwb3J0IE9iamVjdC52YWx1ZXNcblxuICByZXR1cm4gT2JqZWN0LmtleXMobWVyZ2VkKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBtZXJnZWRba2V5XTtcbiAgfSk7XG59IiwgImltcG9ydCBnZXRDb21wb3NpdGVSZWN0IGZyb20gXCIuL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGxpc3RTY3JvbGxQYXJlbnRzIGZyb20gXCIuL2RvbS11dGlscy9saXN0U2Nyb2xsUGFyZW50cy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgb3JkZXJNb2RpZmllcnMgZnJvbSBcIi4vdXRpbHMvb3JkZXJNb2RpZmllcnMuanNcIjtcbmltcG9ydCBkZWJvdW5jZSBmcm9tIFwiLi91dGlscy9kZWJvdW5jZS5qc1wiO1xuaW1wb3J0IG1lcmdlQnlOYW1lIGZyb20gXCIuL3V0aWxzL21lcmdlQnlOYW1lLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG52YXIgREVGQVVMVF9PUFRJT05TID0ge1xuICBwbGFjZW1lbnQ6ICdib3R0b20nLFxuICBtb2RpZmllcnM6IFtdLFxuICBzdHJhdGVneTogJ2Fic29sdXRlJ1xufTtcblxuZnVuY3Rpb24gYXJlVmFsaWRFbGVtZW50cygpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiAhYXJncy5zb21lKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuICEoZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPT09ICdmdW5jdGlvbicpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvcHBlckdlbmVyYXRvcihnZW5lcmF0b3JPcHRpb25zKSB7XG4gIGlmIChnZW5lcmF0b3JPcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBnZW5lcmF0b3JPcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX2dlbmVyYXRvck9wdGlvbnMgPSBnZW5lcmF0b3JPcHRpb25zLFxuICAgICAgX2dlbmVyYXRvck9wdGlvbnMkZGVmID0gX2dlbmVyYXRvck9wdGlvbnMuZGVmYXVsdE1vZGlmaWVycyxcbiAgICAgIGRlZmF1bHRNb2RpZmllcnMgPSBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYgPT09IHZvaWQgMCA/IFtdIDogX2dlbmVyYXRvck9wdGlvbnMkZGVmLFxuICAgICAgX2dlbmVyYXRvck9wdGlvbnMkZGVmMiA9IF9nZW5lcmF0b3JPcHRpb25zLmRlZmF1bHRPcHRpb25zLFxuICAgICAgZGVmYXVsdE9wdGlvbnMgPSBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyID09PSB2b2lkIDAgPyBERUZBVUxUX09QVElPTlMgOiBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyO1xuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlUG9wcGVyKHJlZmVyZW5jZSwgcG9wcGVyLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xuICAgIH1cblxuICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gICAgICBvcmRlcmVkTW9kaWZpZXJzOiBbXSxcbiAgICAgIG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfT1BUSU9OUywgZGVmYXVsdE9wdGlvbnMpLFxuICAgICAgbW9kaWZpZXJzRGF0YToge30sXG4gICAgICBlbGVtZW50czoge1xuICAgICAgICByZWZlcmVuY2U6IHJlZmVyZW5jZSxcbiAgICAgICAgcG9wcGVyOiBwb3BwZXJcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVzOiB7fSxcbiAgICAgIHN0eWxlczoge31cbiAgICB9O1xuICAgIHZhciBlZmZlY3RDbGVhbnVwRm5zID0gW107XG4gICAgdmFyIGlzRGVzdHJveWVkID0gZmFsc2U7XG4gICAgdmFyIGluc3RhbmNlID0ge1xuICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgc2V0T3B0aW9uczogZnVuY3Rpb24gc2V0T3B0aW9ucyhzZXRPcHRpb25zQWN0aW9uKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHNldE9wdGlvbnNBY3Rpb24gPT09ICdmdW5jdGlvbicgPyBzZXRPcHRpb25zQWN0aW9uKHN0YXRlLm9wdGlvbnMpIDogc2V0T3B0aW9uc0FjdGlvbjtcbiAgICAgICAgY2xlYW51cE1vZGlmaWVyRWZmZWN0cygpO1xuICAgICAgICBzdGF0ZS5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIHN0YXRlLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICBzdGF0ZS5zY3JvbGxQYXJlbnRzID0ge1xuICAgICAgICAgIHJlZmVyZW5jZTogaXNFbGVtZW50KHJlZmVyZW5jZSkgPyBsaXN0U2Nyb2xsUGFyZW50cyhyZWZlcmVuY2UpIDogcmVmZXJlbmNlLmNvbnRleHRFbGVtZW50ID8gbGlzdFNjcm9sbFBhcmVudHMocmVmZXJlbmNlLmNvbnRleHRFbGVtZW50KSA6IFtdLFxuICAgICAgICAgIHBvcHBlcjogbGlzdFNjcm9sbFBhcmVudHMocG9wcGVyKVxuICAgICAgICB9OyAvLyBPcmRlcnMgdGhlIG1vZGlmaWVycyBiYXNlZCBvbiB0aGVpciBkZXBlbmRlbmNpZXMgYW5kIGBwaGFzZWBcbiAgICAgICAgLy8gcHJvcGVydGllc1xuXG4gICAgICAgIHZhciBvcmRlcmVkTW9kaWZpZXJzID0gb3JkZXJNb2RpZmllcnMobWVyZ2VCeU5hbWUoW10uY29uY2F0KGRlZmF1bHRNb2RpZmllcnMsIHN0YXRlLm9wdGlvbnMubW9kaWZpZXJzKSkpOyAvLyBTdHJpcCBvdXQgZGlzYWJsZWQgbW9kaWZpZXJzXG5cbiAgICAgICAgc3RhdGUub3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyZWRNb2RpZmllcnMuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgcmV0dXJuIG0uZW5hYmxlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJ1bk1vZGlmaWVyRWZmZWN0cygpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICB9LFxuICAgICAgLy8gU3luYyB1cGRhdGUgXHUyMDEzIGl0IHdpbGwgYWx3YXlzIGJlIGV4ZWN1dGVkLCBldmVuIGlmIG5vdCBuZWNlc3NhcnkuIFRoaXNcbiAgICAgIC8vIGlzIHVzZWZ1bCBmb3IgbG93IGZyZXF1ZW5jeSB1cGRhdGVzIHdoZXJlIHN5bmMgYmVoYXZpb3Igc2ltcGxpZmllcyB0aGVcbiAgICAgIC8vIGxvZ2ljLlxuICAgICAgLy8gRm9yIGhpZ2ggZnJlcXVlbmN5IHVwZGF0ZXMgKGUuZy4gYHJlc2l6ZWAgYW5kIGBzY3JvbGxgIGV2ZW50cyksIGFsd2F5c1xuICAgICAgLy8gcHJlZmVyIHRoZSBhc3luYyBQb3BwZXIjdXBkYXRlIG1ldGhvZFxuICAgICAgZm9yY2VVcGRhdGU6IGZ1bmN0aW9uIGZvcmNlVXBkYXRlKCkge1xuICAgICAgICBpZiAoaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX3N0YXRlJGVsZW1lbnRzID0gc3RhdGUuZWxlbWVudHMsXG4gICAgICAgICAgICByZWZlcmVuY2UgPSBfc3RhdGUkZWxlbWVudHMucmVmZXJlbmNlLFxuICAgICAgICAgICAgcG9wcGVyID0gX3N0YXRlJGVsZW1lbnRzLnBvcHBlcjsgLy8gRG9uJ3QgcHJvY2VlZCBpZiBgcmVmZXJlbmNlYCBvciBgcG9wcGVyYCBhcmUgbm90IHZhbGlkIGVsZW1lbnRzXG4gICAgICAgIC8vIGFueW1vcmVcblxuICAgICAgICBpZiAoIWFyZVZhbGlkRWxlbWVudHMocmVmZXJlbmNlLCBwb3BwZXIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFN0b3JlIHRoZSByZWZlcmVuY2UgYW5kIHBvcHBlciByZWN0cyB0byBiZSByZWFkIGJ5IG1vZGlmaWVyc1xuXG5cbiAgICAgICAgc3RhdGUucmVjdHMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBnZXRDb21wb3NpdGVSZWN0KHJlZmVyZW5jZSwgZ2V0T2Zmc2V0UGFyZW50KHBvcHBlciksIHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3kgPT09ICdmaXhlZCcpLFxuICAgICAgICAgIHBvcHBlcjogZ2V0TGF5b3V0UmVjdChwb3BwZXIpXG4gICAgICAgIH07IC8vIE1vZGlmaWVycyBoYXZlIHRoZSBhYmlsaXR5IHRvIHJlc2V0IHRoZSBjdXJyZW50IHVwZGF0ZSBjeWNsZS4gVGhlXG4gICAgICAgIC8vIG1vc3QgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIGlzIHRoZSBgZmxpcGAgbW9kaWZpZXIgY2hhbmdpbmcgdGhlXG4gICAgICAgIC8vIHBsYWNlbWVudCwgd2hpY2ggdGhlbiBuZWVkcyB0byByZS1ydW4gYWxsIHRoZSBtb2RpZmllcnMsIGJlY2F1c2UgdGhlXG4gICAgICAgIC8vIGxvZ2ljIHdhcyBwcmV2aW91c2x5IHJhbiBmb3IgdGhlIHByZXZpb3VzIHBsYWNlbWVudCBhbmQgaXMgdGhlcmVmb3JlXG4gICAgICAgIC8vIHN0YWxlL2luY29ycmVjdFxuXG4gICAgICAgIHN0YXRlLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnBsYWNlbWVudCA9IHN0YXRlLm9wdGlvbnMucGxhY2VtZW50OyAvLyBPbiBlYWNoIHVwZGF0ZSBjeWNsZSwgdGhlIGBtb2RpZmllcnNEYXRhYCBwcm9wZXJ0eSBmb3IgZWFjaCBtb2RpZmllclxuICAgICAgICAvLyBpcyBmaWxsZWQgd2l0aCB0aGUgaW5pdGlhbCBkYXRhIHNwZWNpZmllZCBieSB0aGUgbW9kaWZpZXIuIFRoaXMgbWVhbnNcbiAgICAgICAgLy8gaXQgZG9lc24ndCBwZXJzaXN0IGFuZCBpcyBmcmVzaCBvbiBlYWNoIHVwZGF0ZS5cbiAgICAgICAgLy8gVG8gZW5zdXJlIHBlcnNpc3RlbnQgZGF0YSwgdXNlIGAke25hbWV9I3BlcnNpc3RlbnRgXG5cbiAgICAgICAgc3RhdGUub3JkZXJlZE1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgICAgICAgIHJldHVybiBzdGF0ZS5tb2RpZmllcnNEYXRhW21vZGlmaWVyLm5hbWVdID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kaWZpZXIuZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGlmIChzdGF0ZS5yZXNldCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX3N0YXRlJG9yZGVyZWRNb2RpZmllID0gc3RhdGUub3JkZXJlZE1vZGlmaWVyc1tpbmRleF0sXG4gICAgICAgICAgICAgIGZuID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLmZuLFxuICAgICAgICAgICAgICBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLm9wdGlvbnMsXG4gICAgICAgICAgICAgIF9vcHRpb25zID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllMiA9PT0gdm9pZCAwID8ge30gOiBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyLFxuICAgICAgICAgICAgICBuYW1lID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLm5hbWU7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGZuKHtcbiAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgICBvcHRpb25zOiBfb3B0aW9ucyxcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlXG4gICAgICAgICAgICB9KSB8fCBzdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBBc3luYyBhbmQgb3B0aW1pc3RpY2FsbHkgb3B0aW1pemVkIHVwZGF0ZSBcdTIwMTMgaXQgd2lsbCBub3QgYmUgZXhlY3V0ZWQgaWZcbiAgICAgIC8vIG5vdCBuZWNlc3NhcnkgKGRlYm91bmNlZCB0byBydW4gYXQgbW9zdCBvbmNlLXBlci10aWNrKVxuICAgICAgdXBkYXRlOiBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIGluc3RhbmNlLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgcmVzb2x2ZShzdGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSksXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIGlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFhcmVWYWxpZEVsZW1lbnRzKHJlZmVyZW5jZSwgcG9wcGVyKSkge1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cblxuICAgIGluc3RhbmNlLnNldE9wdGlvbnMob3B0aW9ucykudGhlbihmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIGlmICghaXNEZXN0cm95ZWQgJiYgb3B0aW9ucy5vbkZpcnN0VXBkYXRlKSB7XG4gICAgICAgIG9wdGlvbnMub25GaXJzdFVwZGF0ZShzdGF0ZSk7XG4gICAgICB9XG4gICAgfSk7IC8vIE1vZGlmaWVycyBoYXZlIHRoZSBhYmlsaXR5IHRvIGV4ZWN1dGUgYXJiaXRyYXJ5IGNvZGUgYmVmb3JlIHRoZSBmaXJzdFxuICAgIC8vIHVwZGF0ZSBjeWNsZSBydW5zLiBUaGV5IHdpbGwgYmUgZXhlY3V0ZWQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIHVwZGF0ZVxuICAgIC8vIGN5Y2xlLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGEgbW9kaWZpZXIgYWRkcyBzb21lIHBlcnNpc3RlbnQgZGF0YSB0aGF0XG4gICAgLy8gb3RoZXIgbW9kaWZpZXJzIG5lZWQgdG8gdXNlLCBidXQgdGhlIG1vZGlmaWVyIGlzIHJ1biBhZnRlciB0aGUgZGVwZW5kZW50XG4gICAgLy8gb25lLlxuXG4gICAgZnVuY3Rpb24gcnVuTW9kaWZpZXJFZmZlY3RzKCkge1xuICAgICAgc3RhdGUub3JkZXJlZE1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgICAgICAgX3JlZiRvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgICAgICAgICAgb3B0aW9ucyA9IF9yZWYkb3B0aW9ucyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJG9wdGlvbnMsXG4gICAgICAgICAgICBlZmZlY3QgPSBfcmVmLmVmZmVjdDtcblxuICAgICAgICBpZiAodHlwZW9mIGVmZmVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciBjbGVhbnVwRm4gPSBlZmZlY3Qoe1xuICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHZhciBub29wRm4gPSBmdW5jdGlvbiBub29wRm4oKSB7fTtcblxuICAgICAgICAgIGVmZmVjdENsZWFudXBGbnMucHVzaChjbGVhbnVwRm4gfHwgbm9vcEZuKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cE1vZGlmaWVyRWZmZWN0cygpIHtcbiAgICAgIGVmZmVjdENsZWFudXBGbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICB9KTtcbiAgICAgIGVmZmVjdENsZWFudXBGbnMgPSBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG59XG5leHBvcnQgdmFyIGNyZWF0ZVBvcHBlciA9IC8qI19fUFVSRV9fKi9wb3BwZXJHZW5lcmF0b3IoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBkZXRlY3RPdmVyZmxvdyB9OyIsICJpbXBvcnQgeyBwb3BwZXJHZW5lcmF0b3IsIGRldGVjdE92ZXJmbG93IH0gZnJvbSBcIi4vY3JlYXRlUG9wcGVyLmpzXCI7XG5pbXBvcnQgZXZlbnRMaXN0ZW5lcnMgZnJvbSBcIi4vbW9kaWZpZXJzL2V2ZW50TGlzdGVuZXJzLmpzXCI7XG5pbXBvcnQgcG9wcGVyT2Zmc2V0cyBmcm9tIFwiLi9tb2RpZmllcnMvcG9wcGVyT2Zmc2V0cy5qc1wiO1xuaW1wb3J0IGNvbXB1dGVTdHlsZXMgZnJvbSBcIi4vbW9kaWZpZXJzL2NvbXB1dGVTdHlsZXMuanNcIjtcbmltcG9ydCBhcHBseVN0eWxlcyBmcm9tIFwiLi9tb2RpZmllcnMvYXBwbHlTdHlsZXMuanNcIjtcbmltcG9ydCBvZmZzZXQgZnJvbSBcIi4vbW9kaWZpZXJzL29mZnNldC5qc1wiO1xuaW1wb3J0IGZsaXAgZnJvbSBcIi4vbW9kaWZpZXJzL2ZsaXAuanNcIjtcbmltcG9ydCBwcmV2ZW50T3ZlcmZsb3cgZnJvbSBcIi4vbW9kaWZpZXJzL3ByZXZlbnRPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGFycm93IGZyb20gXCIuL21vZGlmaWVycy9hcnJvdy5qc1wiO1xuaW1wb3J0IGhpZGUgZnJvbSBcIi4vbW9kaWZpZXJzL2hpZGUuanNcIjtcbnZhciBkZWZhdWx0TW9kaWZpZXJzID0gW2V2ZW50TGlzdGVuZXJzLCBwb3BwZXJPZmZzZXRzLCBjb21wdXRlU3R5bGVzLCBhcHBseVN0eWxlcywgb2Zmc2V0LCBmbGlwLCBwcmV2ZW50T3ZlcmZsb3csIGFycm93LCBoaWRlXTtcbnZhciBjcmVhdGVQb3BwZXIgPSAvKiNfX1BVUkVfXyovcG9wcGVyR2VuZXJhdG9yKHtcbiAgZGVmYXVsdE1vZGlmaWVyczogZGVmYXVsdE1vZGlmaWVyc1xufSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IHsgY3JlYXRlUG9wcGVyLCBwb3BwZXJHZW5lcmF0b3IsIGRlZmF1bHRNb2RpZmllcnMsIGRldGVjdE92ZXJmbG93IH07IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IHsgY3JlYXRlUG9wcGVyIGFzIGNyZWF0ZVBvcHBlckxpdGUgfSBmcm9tIFwiLi9wb3BwZXItbGl0ZS5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCAqIGZyb20gXCIuL21vZGlmaWVycy9pbmRleC5qc1wiOyIsICIvKlxuICogSFNEcm9wZG93blxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHtcblx0Z2V0Q2xhc3NQcm9wZXJ0eSxcblx0Z2V0Q2xhc3NQcm9wZXJ0eUFsdCxcblx0aXNJT1MsXG5cdGlzSXBhZE9TLFxuXHRkaXNwYXRjaCxcblx0YWZ0ZXJUcmFuc2l0aW9uLFxuXHRtZW51U2VhcmNoSGlzdG9yeSxcbn0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgSU1lbnVTZWFyY2hIaXN0b3J5IH0gZnJvbSAnLi4vLi4vdXRpbHMvaW50ZXJmYWNlcyc7XG5cbmltcG9ydCB7IGNyZWF0ZVBvcHBlciwgUG9zaXRpb25pbmdTdHJhdGVneSB9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcblxuaW1wb3J0IHsgSURyb3Bkb3duLCBJSFRNTEVsZW1lbnRQb3BwZXIgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5pbXBvcnQgeyBJQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IHsgUE9TSVRJT05TLCBEUk9QRE9XTl9BQ0NFU1NJQklMSVRZX0tFWV9TRVQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMnO1xuXG5jbGFzcyBIU0Ryb3Bkb3duXG5cdGV4dGVuZHMgSFNCYXNlUGx1Z2luPHt9LCBJSFRNTEVsZW1lbnRQb3BwZXI+XG5cdGltcGxlbWVudHMgSURyb3Bkb3duXG57XG5cdHByaXZhdGUgc3RhdGljIGhpc3Rvcnk6IElNZW51U2VhcmNoSGlzdG9yeTtcblx0cHJpdmF0ZSByZWFkb25seSB0b2dnbGU6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHVibGljIG1lbnU6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBldmVudE1vZGU6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBjbG9zZU1vZGU6IHN0cmluZztcblx0cHJpdmF0ZSBhbmltYXRpb25JblByb2Nlc3M6IGJvb2xlYW47XG5cblx0Y29uc3RydWN0b3IoZWw6IElIVE1MRWxlbWVudFBvcHBlciwgb3B0aW9ucz86IHt9LCBldmVudHM/OiB7fSkge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zLCBldmVudHMpO1xuXG5cdFx0dGhpcy50b2dnbGUgPVxuXHRcdFx0dGhpcy5lbC5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuaHMtZHJvcGRvd24tdG9nZ2xlJykgfHxcblx0XHRcdCh0aGlzLmVsLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KTtcblx0XHR0aGlzLm1lbnUgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5ocy1kcm9wZG93bi1tZW51Jyk7XG5cdFx0dGhpcy5ldmVudE1vZGUgPSBnZXRDbGFzc1Byb3BlcnR5KHRoaXMuZWwsICctLXRyaWdnZXInLCAnY2xpY2snKTtcblx0XHR0aGlzLmNsb3NlTW9kZSA9IGdldENsYXNzUHJvcGVydHkodGhpcy5lbCwgJy0tYXV0by1jbG9zZScsICd0cnVlJyk7XG5cdFx0dGhpcy5hbmltYXRpb25JblByb2Nlc3MgPSBmYWxzZTtcblxuXHRcdGlmICh0aGlzLnRvZ2dsZSAmJiB0aGlzLm1lbnUpIHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCkge1xuXHRcdHRoaXMuY3JlYXRlQ29sbGVjdGlvbih3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdGlmICgodGhpcy50b2dnbGUgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmRpc2FibGVkKSByZXR1cm4gZmFsc2U7XG5cblx0XHR0aGlzLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub25DbGlja0hhbmRsZXIoKSk7XG5cblx0XHRpZiAoIWlzSU9TKCkgJiYgIWlzSXBhZE9TKCkpIHtcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHRoaXMub25Nb3VzZUVudGVySGFuZGxlcigpKTtcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHRoaXMub25Nb3VzZUxlYXZlSGFuZGxlcigpKTtcblx0XHR9XG5cdH1cblxuXHRyZXNpemVIYW5kbGVyKCkge1xuXHRcdHRoaXMuZXZlbnRNb2RlID0gZ2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLmVsLCAnLS10cmlnZ2VyJywgJ2NsaWNrJyk7XG5cdH1cblxuXHRwcml2YXRlIG9uQ2xpY2tIYW5kbGVyKCkge1xuXHRcdGlmIChcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykgJiZcblx0XHRcdCF0aGlzLm1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKVxuXHRcdCkge1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm9wZW4oKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG9uTW91c2VFbnRlckhhbmRsZXIoKSB7XG5cdFx0aWYgKHRoaXMuZXZlbnRNb2RlICE9PSAnaG92ZXInKSByZXR1cm4gZmFsc2U7XG5cblx0XHRpZiAodGhpcy5lbC5fcG9wcGVyKSB0aGlzLmZvcmNlQ2xlYXJTdGF0ZSgpO1xuXG5cdFx0aWYgKFxuXHRcdFx0IXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykgJiZcblx0XHRcdHRoaXMubWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpXG5cdFx0KSB7XG5cdFx0XHR0aGlzLm9wZW4oKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG9uTW91c2VMZWF2ZUhhbmRsZXIoKSB7XG5cdFx0aWYgKHRoaXMuZXZlbnRNb2RlICE9PSAnaG92ZXInKSByZXR1cm4gZmFsc2U7XG5cblx0XHRpZiAoXG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpICYmXG5cdFx0XHQhdGhpcy5tZW51LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJylcblx0XHQpIHtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGRlc3Ryb3lQb3BwZXIoKSB7XG5cdFx0dGhpcy5tZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2Jsb2NrJyk7XG5cdFx0dGhpcy5tZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG5cdFx0dGhpcy5tZW51LnN0eWxlLmluc2V0ID0gbnVsbDtcblx0XHR0aGlzLm1lbnUuc3R5bGUucG9zaXRpb24gPSBudWxsO1xuXG5cdFx0aWYgKHRoaXMuZWwgJiYgdGhpcy5lbC5fcG9wcGVyKSB0aGlzLmVsLl9wb3BwZXIuZGVzdHJveSgpO1xuXG5cdFx0dGhpcy5hbmltYXRpb25JblByb2Nlc3MgPSBmYWxzZTtcblx0fVxuXG5cdHByaXZhdGUgYWJzb2x1dGVTdHJhdGVneU1vZGlmaWVycygpIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnYXBwbHlTdHlsZXMnLFxuXHRcdFx0XHRmbjogKGRhdGE6IGFueSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHN0cmF0ZWd5ID0gKFxuXHRcdFx0XHRcdFx0d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1zdHJhdGVneScpIHx8XG5cdFx0XHRcdFx0XHQnYWJzb2x1dGUnXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCcgJywgJycpO1xuXHRcdFx0XHRcdGNvbnN0IGFkYXB0aXZlID0gKFxuXHRcdFx0XHRcdFx0d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1hZGFwdGl2ZScpIHx8XG5cdFx0XHRcdFx0XHQnYWRhcHRpdmUnXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCcgJywgJycpO1xuXG5cdFx0XHRcdFx0ZGF0YS5zdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUucG9zaXRpb24gPSBzdHJhdGVneTtcblx0XHRcdFx0XHRkYXRhLnN0YXRlLmVsZW1lbnRzLnBvcHBlci5zdHlsZS50cmFuc2Zvcm0gPVxuXHRcdFx0XHRcdFx0YWRhcHRpdmUgPT09ICdhZGFwdGl2ZScgPyBkYXRhLnN0YXRlLnN0eWxlcy5wb3BwZXIudHJhbnNmb3JtIDogbnVsbDtcblx0XHRcdFx0XHRkYXRhLnN0YXRlLmVsZW1lbnRzLnBvcHBlci5zdHlsZS50b3AgPSBudWxsO1xuXHRcdFx0XHRcdGRhdGEuc3RhdGUuZWxlbWVudHMucG9wcGVyLnN0eWxlLmJvdHRvbSA9IG51bGw7XG5cdFx0XHRcdFx0ZGF0YS5zdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUubGVmdCA9IG51bGw7XG5cdFx0XHRcdFx0ZGF0YS5zdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUucmlnaHQgPSBudWxsO1xuXHRcdFx0XHRcdGRhdGEuc3RhdGUuZWxlbWVudHMucG9wcGVyLnN0eWxlLm1hcmdpbiA9IDA7XG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnY29tcHV0ZVN0eWxlcycsXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRhZGFwdGl2ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdF07XG5cdH1cblxuXHQvLyBQdWJsaWMgbWV0aG9kc1xuXHRwdWJsaWMgb3BlbigpIHtcblx0XHRpZiAodGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0aWYgKHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzKSByZXR1cm4gZmFsc2U7XG5cblx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IHRydWU7XG5cblx0XHRjb25zdCBwbGFjZW1lbnQgPSAoXG5cdFx0XHR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5nZXRQcm9wZXJ0eVZhbHVlKCctLXBsYWNlbWVudCcpIHx8ICcnXG5cdFx0KS5yZXBsYWNlKCcgJywgJycpO1xuXHRcdGNvbnN0IGZsaXAgPSAoXG5cdFx0XHR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5nZXRQcm9wZXJ0eVZhbHVlKCctLWZsaXAnKSB8fCAndHJ1ZSdcblx0XHQpLnJlcGxhY2UoJyAnLCAnJyk7XG5cdFx0Y29uc3Qgc3RyYXRlZ3kgPSAoXG5cdFx0XHR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5nZXRQcm9wZXJ0eVZhbHVlKCctLXN0cmF0ZWd5JykgfHwgJ2ZpeGVkJ1xuXHRcdCkucmVwbGFjZSgnICcsICcnKSBhcyBQb3NpdGlvbmluZ1N0cmF0ZWd5O1xuXHRcdGNvbnN0IG9mZnNldCA9IHBhcnNlSW50KFxuXHRcdFx0KFxuXHRcdFx0XHR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5nZXRQcm9wZXJ0eVZhbHVlKCctLW9mZnNldCcpIHx8ICcxMCdcblx0XHRcdCkucmVwbGFjZSgnICcsICcnKSxcblx0XHQpO1xuXG5cdFx0aWYgKHN0cmF0ZWd5ICE9PSAoJ3N0YXRpYycgYXMgUG9zaXRpb25pbmdTdHJhdGVneSkpIHtcblx0XHRcdHRoaXMuZWwuX3BvcHBlciA9IGNyZWF0ZVBvcHBlcih0aGlzLmVsLCB0aGlzLm1lbnUsIHtcblx0XHRcdFx0cGxhY2VtZW50OiBQT1NJVElPTlNbcGxhY2VtZW50XSB8fCAnYm90dG9tLXN0YXJ0Jyxcblx0XHRcdFx0c3RyYXRlZ3k6IHN0cmF0ZWd5LFxuXHRcdFx0XHRtb2RpZmllcnM6IFtcblx0XHRcdFx0XHQuLi4oc3RyYXRlZ3kgIT09ICdmaXhlZCcgPyB0aGlzLmFic29sdXRlU3RyYXRlZ3lNb2RpZmllcnMoKSA6IFtdKSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiAnZmxpcCcsXG5cdFx0XHRcdFx0XHRlbmFibGVkOiBmbGlwID09PSAndHJ1ZScsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiAnb2Zmc2V0Jyxcblx0XHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdFx0b2Zmc2V0OiBbMCwgb2Zmc2V0XSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XSxcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMubWVudS5zdHlsZS5tYXJnaW4gPSBudWxsO1xuXG5cdFx0dGhpcy5tZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdHRoaXMubWVudS5jbGFzc0xpc3QuYWRkKCdibG9jaycpO1xuXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcblxuXHRcdFx0dGhpcy5hbmltYXRpb25JblByb2Nlc3MgPSBmYWxzZTtcblx0XHR9KTtcblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdvcGVuJywgdGhpcy5lbCk7XG5cdFx0ZGlzcGF0Y2goJ29wZW4uaHMuZHJvcGRvd24nLCB0aGlzLmVsLCB0aGlzLmVsKTtcblx0fVxuXG5cdHB1YmxpYyBjbG9zZShpc0FuaW1hdGVkID0gdHJ1ZSkge1xuXHRcdGlmICh0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyB8fCAhdGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSlcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzID0gdHJ1ZTtcblxuXHRcdGlmIChpc0FuaW1hdGVkKSB7XG5cdFx0XHRjb25zdCBlbDogSFRNTEVsZW1lbnQgPVxuXHRcdFx0XHR0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLWRyb3Bkb3duLXRyYW5zaXRpb25dJykgfHwgdGhpcy5tZW51O1xuXG5cdFx0XHRhZnRlclRyYW5zaXRpb24oZWwsICgpID0+IHRoaXMuZGVzdHJveVBvcHBlcigpKTtcblx0XHR9IGVsc2UgdGhpcy5kZXN0cm95UG9wcGVyKCk7XG5cblx0XHR0aGlzLm1lbnUuc3R5bGUubWFyZ2luID0gbnVsbDtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuXG5cdFx0dGhpcy5maXJlRXZlbnQoJ2Nsb3NlJywgdGhpcy5lbCk7XG5cdFx0ZGlzcGF0Y2goJ2Nsb3NlLmhzLmRyb3Bkb3duJywgdGhpcy5lbCwgdGhpcy5lbCk7XG5cdH1cblxuXHRwdWJsaWMgZm9yY2VDbGVhclN0YXRlKCkge1xuXHRcdHRoaXMuZGVzdHJveVBvcHBlcigpO1xuXHRcdHRoaXMubWVudS5zdHlsZS5tYXJnaW4gPSBudWxsO1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50LmVsXG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uKSB3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ocy1kcm9wZG93bjpub3QoLi0tcHJldmVudC1vbi1sb2FkLWluaXQpJylcblx0XHRcdC5mb3JFYWNoKChlbDogSUhUTUxFbGVtZW50UG9wcGVyKSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNEcm9wZG93bihlbCk7XG5cdFx0XHR9KTtcblxuXHRcdGlmICh3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uKSB7XG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT5cblx0XHRcdFx0SFNEcm9wZG93bi5hY2Nlc3NpYmlsaXR5KGV2dCksXG5cdFx0XHQpO1xuXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGV2dFRhcmdldCA9IGV2dC50YXJnZXQ7XG5cblx0XHRcdFx0SFNEcm9wZG93bi5jbG9zZUN1cnJlbnRseU9wZW5lZChldnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGxldCBwcmV2V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG5cdFx0XHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCAhPT0gcHJldldpZHRoKSB7XG5cdFx0XHRcdFx0cHJldldpZHRoID0gaW5uZXJXaWR0aDtcblx0XHRcdFx0XHRIU0Ryb3Bkb3duLmNsb3NlQ3VycmVudGx5T3BlbmVkKG51bGwsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9wZW4odGFyZ2V0OiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAoXG5cdFx0XHRlbEluQ29sbGVjdGlvbiAmJlxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5tZW51LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJylcblx0XHQpXG5cdFx0XHRlbEluQ29sbGVjdGlvbi5lbGVtZW50Lm9wZW4oKTtcblx0fVxuXG5cdHN0YXRpYyBjbG9zZSh0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdGlmIChcblx0XHRcdGVsSW5Db2xsZWN0aW9uICYmXG5cdFx0XHQhZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5tZW51LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJylcblx0XHQpIHtcblx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuY2xvc2UoKTtcblx0XHR9XG5cdH1cblxuXHQvLyBBY2Nlc3NpYmlsaXR5IG1ldGhvZHNcblx0c3RhdGljIGFjY2Vzc2liaWxpdHkoZXZ0OiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0dGhpcy5oaXN0b3J5ID0gbWVudVNlYXJjaEhpc3Rvcnk7XG5cblx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uLmZpbmQoKGVsKSA9PlxuXHRcdFx0ZWwuZWxlbWVudC5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcblx0XHQpO1xuXG5cdFx0aWYgKFxuXHRcdFx0dGFyZ2V0ICYmXG5cdFx0XHQoRFJPUERPV05fQUNDRVNTSUJJTElUWV9LRVlfU0VULmluY2x1ZGVzKGV2dC5jb2RlKSB8fFxuXHRcdFx0XHQoZXZ0LmNvZGUubGVuZ3RoID09PSA0ICYmXG5cdFx0XHRcdFx0ZXZ0LmNvZGVbZXZ0LmNvZGUubGVuZ3RoIC0gMV0ubWF0Y2goL15bQS1aXSokLykpKSAmJlxuXHRcdFx0IWV2dC5tZXRhS2V5ICYmXG5cdFx0XHQhdGFyZ2V0LmVsZW1lbnQubWVudS5xdWVyeVNlbGVjdG9yKCdpbnB1dDpmb2N1cycpXG5cdFx0KSB7XG5cdFx0XHRzd2l0Y2ggKGV2dC5jb2RlKSB7XG5cdFx0XHRcdGNhc2UgJ0VzY2FwZSc6XG5cdFx0XHRcdFx0aWYgKCF0YXJnZXQuZWxlbWVudC5tZW51LnF1ZXJ5U2VsZWN0b3IoJy5ocy1zZWxlY3QuYWN0aXZlJykpIHtcblx0XHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0dGhpcy5vbkVzY2FwZShldnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnRW50ZXInOlxuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdCF0YXJnZXQuZWxlbWVudC5tZW51LnF1ZXJ5U2VsZWN0b3IoJy5ocy1zZWxlY3QgYnV0dG9uOmZvY3VzJykgJiZcblx0XHRcdFx0XHRcdCF0YXJnZXQuZWxlbWVudC5tZW51LnF1ZXJ5U2VsZWN0b3IoJy5ocy1jb2xsYXBzZS10b2dnbGU6Zm9jdXMnKVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0dGhpcy5vbkVudGVyKGV2dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdBcnJvd1VwJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uQXJyb3coKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnQXJyb3dEb3duJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uQXJyb3coZmFsc2UpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdIb21lJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uU3RhcnRFbmQoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnRW5kJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uU3RhcnRFbmQoZmFsc2UpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25GaXJzdExldHRlcihldnQua2V5KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgb25Fc2NhcGUoZXZ0OiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0Y29uc3QgZHJvcGRvd24gPSAoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLmhzLWRyb3Bkb3duLm9wZW4nKTtcblxuXHRcdGlmICh3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uLmZpbmQoKGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSBkcm9wZG93bikpIHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IHdpbmRvdy4kaHNEcm9wZG93bkNvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0KGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSBkcm9wZG93bixcblx0XHRcdCk7XG5cblx0XHRcdGlmICh0YXJnZXQpIHtcblx0XHRcdFx0dGFyZ2V0LmVsZW1lbnQuY2xvc2UoKTtcblx0XHRcdFx0dGFyZ2V0LmVsZW1lbnQudG9nZ2xlLmZvY3VzKCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY2xvc2VDdXJyZW50bHlPcGVuZWQoKTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgb25FbnRlcihldnQ6IEtleWJvYXJkRXZlbnQpIHtcblx0XHRjb25zdCBkcm9wZG93biA9IChldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5wYXJlbnRFbGVtZW50O1xuXG5cdFx0aWYgKHdpbmRvdy4kaHNEcm9wZG93bkNvbGxlY3Rpb24uZmluZCgoZWwpID0+IGVsLmVsZW1lbnQuZWwgPT09IGRyb3Bkb3duKSkge1xuXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdGNvbnN0IHRhcmdldCA9IHdpbmRvdy4kaHNEcm9wZG93bkNvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0KGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSBkcm9wZG93bixcblx0XHRcdCk7XG5cblx0XHRcdGlmICh0YXJnZXQpIHRhcmdldC5lbGVtZW50Lm9wZW4oKTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgb25BcnJvdyhpc0Fycm93VXAgPSB0cnVlKSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbi5maW5kKChlbCkgPT5cblx0XHRcdGVsLmVsZW1lbnQuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyksXG5cdFx0KTtcblxuXHRcdGlmICh0YXJnZXQpIHtcblx0XHRcdGNvbnN0IG1lbnUgPSB0YXJnZXQuZWxlbWVudC5tZW51O1xuXG5cdFx0XHRpZiAoIW1lbnUpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0Y29uc3QgcHJlcGFyZWRMaW5rcyA9IGlzQXJyb3dVcFxuXHRcdFx0XHQ/IEFycmF5LmZyb20oXG5cdFx0XHRcdFx0XHRtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRcdFx0XHRcdCdhOm5vdChbaGlkZGVuXSksIC5ocy1kcm9wZG93biA+IGJ1dHRvbjpub3QoW2hpZGRlbl0pJyxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0KS5yZXZlcnNlKClcblx0XHRcdFx0OiBBcnJheS5mcm9tKFxuXHRcdFx0XHRcdFx0bWVudS5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHRcdFx0XHQnYTpub3QoW2hpZGRlbl0pLCAuaHMtZHJvcGRvd24gPiBidXR0b246bm90KFtoaWRkZW5dKScsXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IGxpbmtzID0gcHJlcGFyZWRMaW5rcy5maWx0ZXIoXG5cdFx0XHRcdChlbDogYW55KSA9PiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpLFxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGN1cnJlbnQgPSBtZW51LnF1ZXJ5U2VsZWN0b3IoJ2E6Zm9jdXMsIGJ1dHRvbjpmb2N1cycpO1xuXHRcdFx0bGV0IGN1cnJlbnRJbmQgPSBsaW5rcy5maW5kSW5kZXgoKGVsOiBhbnkpID0+IGVsID09PSBjdXJyZW50KTtcblxuXHRcdFx0aWYgKGN1cnJlbnRJbmQgKyAxIDwgbGlua3MubGVuZ3RoKSB7XG5cdFx0XHRcdGN1cnJlbnRJbmQrKztcblx0XHRcdH1cblxuXHRcdFx0KGxpbmtzW2N1cnJlbnRJbmRdIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgSFRNTEFuY2hvckVsZW1lbnQpLmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uU3RhcnRFbmQoaXNTdGFydCA9IHRydWUpIHtcblx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzRHJvcGRvd25Db2xsZWN0aW9uLmZpbmQoKGVsKSA9PlxuXHRcdFx0ZWwuZWxlbWVudC5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcblx0XHQpO1xuXG5cdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0Y29uc3QgbWVudSA9IHRhcmdldC5lbGVtZW50Lm1lbnU7XG5cblx0XHRcdGlmICghbWVudSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRjb25zdCBwcmVwYXJlZExpbmtzID0gaXNTdGFydFxuXHRcdFx0XHQ/IEFycmF5LmZyb20obWVudS5xdWVyeVNlbGVjdG9yQWxsKCdhJykpXG5cdFx0XHRcdDogQXJyYXkuZnJvbShtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKSkucmV2ZXJzZSgpO1xuXHRcdFx0Y29uc3QgbGlua3MgPSBwcmVwYXJlZExpbmtzLmZpbHRlcihcblx0XHRcdFx0KGVsOiBhbnkpID0+ICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyksXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAobGlua3MubGVuZ3RoKSB7XG5cdFx0XHRcdGxpbmtzWzBdLmZvY3VzKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uRmlyc3RMZXR0ZXIoY29kZTogc3RyaW5nKSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbi5maW5kKChlbCkgPT5cblx0XHRcdGVsLmVsZW1lbnQuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyksXG5cdFx0KTtcblxuXHRcdGlmICh0YXJnZXQpIHtcblx0XHRcdGNvbnN0IG1lbnUgPSB0YXJnZXQuZWxlbWVudC5tZW51O1xuXG5cdFx0XHRpZiAoIW1lbnUpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0Y29uc3QgbGlua3MgPSBBcnJheS5mcm9tKG1lbnUucXVlcnlTZWxlY3RvckFsbCgnYScpKTtcblx0XHRcdGNvbnN0IGdldEN1cnJlbnRJbmQgPSAoKSA9PlxuXHRcdFx0XHRsaW5rcy5maW5kSW5kZXgoXG5cdFx0XHRcdFx0KGVsLCBpKSA9PlxuXHRcdFx0XHRcdFx0ZWwuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkuY2hhckF0KDApID09PSBjb2RlLnRvTG93ZXJDYXNlKCkgJiZcblx0XHRcdFx0XHRcdHRoaXMuaGlzdG9yeS5leGlzdHNJbkhpc3RvcnkoaSksXG5cdFx0XHRcdCk7XG5cdFx0XHRsZXQgY3VycmVudEluZCA9IGdldEN1cnJlbnRJbmQoKTtcblxuXHRcdFx0aWYgKGN1cnJlbnRJbmQgPT09IC0xKSB7XG5cdFx0XHRcdHRoaXMuaGlzdG9yeS5jbGVhckhpc3RvcnkoKTtcblx0XHRcdFx0Y3VycmVudEluZCA9IGdldEN1cnJlbnRJbmQoKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGN1cnJlbnRJbmQgIT09IC0xKSB7XG5cdFx0XHRcdGxpbmtzW2N1cnJlbnRJbmRdLmZvY3VzKCk7XG5cdFx0XHRcdHRoaXMuaGlzdG9yeS5hZGRIaXN0b3J5KGN1cnJlbnRJbmQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBjbG9zZUN1cnJlbnRseU9wZW5lZChcblx0XHRldnRUYXJnZXQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGwsXG5cdFx0aXNBbmltYXRlZCA9IHRydWUsXG5cdCkge1xuXHRcdGNvbnN0IHBhcmVudCA9XG5cdFx0XHRldnRUYXJnZXQgJiZcblx0XHRcdGV2dFRhcmdldC5jbG9zZXN0KCcuaHMtZHJvcGRvd24nKSAmJlxuXHRcdFx0ZXZ0VGFyZ2V0LmNsb3Nlc3QoJy5ocy1kcm9wZG93bicpLnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnLmhzLWRyb3Bkb3duJylcblx0XHRcdFx0PyBldnRUYXJnZXRcblx0XHRcdFx0XHRcdC5jbG9zZXN0KCcuaHMtZHJvcGRvd24nKVxuXHRcdFx0XHRcdFx0LnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnLmhzLWRyb3Bkb3duJylcblx0XHRcdFx0OiBudWxsO1xuXHRcdGxldCBjdXJyZW50bHlPcGVuZWQgPSBwYXJlbnRcblx0XHRcdD8gd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbi5maWx0ZXIoXG5cdFx0XHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRcdFx0ZWwuZWxlbWVudC5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSAmJlxuXHRcdFx0XHRcdFx0ZWwuZWxlbWVudC5tZW51XG5cdFx0XHRcdFx0XHRcdC5jbG9zZXN0KCcuaHMtZHJvcGRvd24nKVxuXHRcdFx0XHRcdFx0XHQucGFyZW50RWxlbWVudC5jbG9zZXN0KCcuaHMtZHJvcGRvd24nKSA9PT0gcGFyZW50LFxuXHRcdFx0XHQpXG5cdFx0XHQ6IHdpbmRvdy4kaHNEcm9wZG93bkNvbGxlY3Rpb24uZmlsdGVyKChlbCkgPT5cblx0XHRcdFx0XHRlbC5lbGVtZW50LmVsLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpLFxuXHRcdFx0XHQpO1xuXG5cdFx0aWYgKFxuXHRcdFx0ZXZ0VGFyZ2V0ICYmXG5cdFx0XHRldnRUYXJnZXQuY2xvc2VzdCgnLmhzLWRyb3Bkb3duJykgJiZcblx0XHRcdGdldENsYXNzUHJvcGVydHlBbHQoZXZ0VGFyZ2V0LmNsb3Nlc3QoJy5ocy1kcm9wZG93bicpLCAnLS1hdXRvLWNsb3NlJykgPT09XG5cdFx0XHRcdCdpbnNpZGUnXG5cdFx0KSB7XG5cdFx0XHRjdXJyZW50bHlPcGVuZWQgPSBjdXJyZW50bHlPcGVuZWQuZmlsdGVyKFxuXHRcdFx0XHQoZWwpID0+IGVsLmVsZW1lbnQuZWwgIT09IGV2dFRhcmdldC5jbG9zZXN0KCcuaHMtZHJvcGRvd24nKSxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKGN1cnJlbnRseU9wZW5lZCkge1xuXHRcdFx0Y3VycmVudGx5T3BlbmVkLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRlbC5lbGVtZW50LmNsb3NlTW9kZSA9PT0gJ2ZhbHNlJyB8fFxuXHRcdFx0XHRcdGVsLmVsZW1lbnQuY2xvc2VNb2RlID09PSAnb3V0c2lkZSdcblx0XHRcdFx0KVxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdFx0XHRlbC5lbGVtZW50LmNsb3NlKGlzQW5pbWF0ZWQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXHRzdGF0aWMgb24oZXZ0OiBzdHJpbmcsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNiOiBGdW5jdGlvbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAoZWxJbkNvbGxlY3Rpb24pIGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuZXZlbnRzW2V2dF0gPSBjYjtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTRHJvcGRvd246IEZ1bmN0aW9uO1xuXHRcdCRoc0Ryb3Bkb3duQ29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTRHJvcGRvd24+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTRHJvcGRvd24uYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdEcm9wZG93biBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNEcm9wZG93bkNvbGxlY3Rpb24pO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG5cdGlmICghd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbikgd2luZG93LiRoc0Ryb3Bkb3duQ29sbGVjdGlvbiA9IFtdO1xuXG5cdHdpbmRvdy4kaHNEcm9wZG93bkNvbGxlY3Rpb24uZm9yRWFjaCgoZWwpID0+IGVsLmVsZW1lbnQucmVzaXplSGFuZGxlcigpKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTRHJvcGRvd24gPSBIU0Ryb3Bkb3duO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU0Ryb3Bkb3duO1xuIiwgIi8qXG4gKiBIU0lucHV0TnVtYmVyXG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSUlucHV0TnVtYmVyT3B0aW9ucywgSUlucHV0TnVtYmVyIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5cbmNsYXNzIEhTSW5wdXROdW1iZXJcblx0ZXh0ZW5kcyBIU0Jhc2VQbHVnaW48SUlucHV0TnVtYmVyT3B0aW9ucz5cblx0aW1wbGVtZW50cyBJSW5wdXROdW1iZXJcbntcblx0cHJpdmF0ZSByZWFkb25seSBpbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgaW5jcmVtZW50OiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgZGVjcmVtZW50OiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgaW5wdXRWYWx1ZTogbnVtYmVyIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBtaW5JbnB1dFZhbHVlOiBudW1iZXIgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IG1heElucHV0VmFsdWU6IG51bWJlciB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgc3RlcDogbnVtYmVyO1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IElJbnB1dE51bWJlck9wdGlvbnMpIHtcblx0XHRzdXBlcihlbCwgb3B0aW9ucyk7XG5cblx0XHR0aGlzLmlucHV0ID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1pbnB1dC1udW1iZXItaW5wdXRdJykgfHwgbnVsbDtcblx0XHR0aGlzLmluY3JlbWVudCA9XG5cdFx0XHR0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLWlucHV0LW51bWJlci1pbmNyZW1lbnRdJykgfHwgbnVsbDtcblx0XHR0aGlzLmRlY3JlbWVudCA9XG5cdFx0XHR0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLWlucHV0LW51bWJlci1kZWNyZW1lbnRdJykgfHwgbnVsbDtcblxuXHRcdGlmICh0aGlzLmlucHV0KSB7XG5cdFx0XHR0aGlzLmlucHV0VmFsdWUgPSAhaXNOYU4ocGFyc2VJbnQodGhpcy5pbnB1dC52YWx1ZSkpXG5cdFx0XHRcdD8gcGFyc2VJbnQodGhpcy5pbnB1dC52YWx1ZSlcblx0XHRcdFx0OiAwO1xuXHRcdH1cblxuXHRcdGNvbnN0IGRhdGEgPSB0aGlzLmVsLmRhdGFzZXQuaHNJbnB1dE51bWJlcjtcblx0XHRjb25zdCBkYXRhT3B0aW9uczogSUlucHV0TnVtYmVyT3B0aW9ucyA9IGRhdGFcblx0XHRcdD8gSlNPTi5wYXJzZShkYXRhKVxuXHRcdFx0OiB7IHN0ZXA6IDEgfTtcblx0XHRjb25zdCBjb25jYXRPcHRpb25zID0ge1xuXHRcdFx0Li4uZGF0YU9wdGlvbnMsXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdH07XG5cblx0XHR0aGlzLm1pbklucHV0VmFsdWUgPSAnbWluJyBpbiBjb25jYXRPcHRpb25zID8gY29uY2F0T3B0aW9ucy5taW4gOiAwO1xuXHRcdHRoaXMubWF4SW5wdXRWYWx1ZSA9ICdtYXgnIGluIGNvbmNhdE9wdGlvbnMgPyBjb25jYXRPcHRpb25zLm1heCA6IG51bGw7XG5cdFx0dGhpcy5zdGVwID1cblx0XHRcdCdzdGVwJyBpbiBjb25jYXRPcHRpb25zICYmIGNvbmNhdE9wdGlvbnMuc3RlcCA+IDBcblx0XHRcdFx0PyBjb25jYXRPcHRpb25zLnN0ZXBcblx0XHRcdFx0OiAxO1xuXG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNJbnB1dE51bWJlckNvbGxlY3Rpb24sIHRoaXMpO1xuXG5cdFx0aWYgKHRoaXMuaW5wdXQgJiYgdGhpcy5pbmNyZW1lbnQpIHRoaXMuYnVpbGQoKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGQoKSB7XG5cdFx0aWYgKHRoaXMuaW5wdXQpIHRoaXMuYnVpbGRJbnB1dCgpO1xuXHRcdGlmICh0aGlzLmluY3JlbWVudCkgdGhpcy5idWlsZEluY3JlbWVudCgpO1xuXHRcdGlmICh0aGlzLmRlY3JlbWVudCkgdGhpcy5idWlsZERlY3JlbWVudCgpO1xuXG5cdFx0aWYgKHRoaXMuaW5wdXRWYWx1ZSA8PSAwICYmIHRoaXMubWluSW5wdXRWYWx1ZSA9PT0gMCkge1xuXHRcdFx0dGhpcy5pbnB1dFZhbHVlID0gMDtcblx0XHRcdHRoaXMuaW5wdXQudmFsdWUgPSAnMCc7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuaW5wdXRWYWx1ZSA8PSAwIHx8IHRoaXMubWluSW5wdXRWYWx1ZSA8IDApIHRoaXMuY2hhbmdlVmFsdWUoKTtcblxuXHRcdGlmICh0aGlzLmlucHV0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkgdGhpcy5kaXNhYmxlQnV0dG9ucygpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZElucHV0KCkge1xuXHRcdHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB0aGlzLmNoYW5nZVZhbHVlKCkpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZEluY3JlbWVudCgpIHtcblx0XHR0aGlzLmluY3JlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuY2hhbmdlVmFsdWUoJ2luY3JlbWVudCcpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZERlY3JlbWVudCgpIHtcblx0XHR0aGlzLmRlY3JlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuY2hhbmdlVmFsdWUoJ2RlY3JlbWVudCcpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBjaGFuZ2VWYWx1ZShldmVudCA9ICdub25lJykge1xuXHRcdGNvbnN0IHBheWxvYWQgPSB7IGlucHV0VmFsdWU6IHRoaXMuaW5wdXRWYWx1ZSB9O1xuXHRcdGNvbnN0IG1pbklucHV0VmFsdWUgPSB0aGlzLm1pbklucHV0VmFsdWUgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG5cdFx0Y29uc3QgbWF4SW5wdXRWYWx1ZSA9IHRoaXMubWF4SW5wdXRWYWx1ZSA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblxuXHRcdHRoaXMuaW5wdXRWYWx1ZSA9IGlzTmFOKHRoaXMuaW5wdXRWYWx1ZSkgPyAwIDogdGhpcy5pbnB1dFZhbHVlO1xuXG5cdFx0c3dpdGNoIChldmVudCkge1xuXHRcdFx0Y2FzZSAnaW5jcmVtZW50Jzpcblx0XHRcdFx0Y29uc3QgaW5jcmVtZW50ZWRSZXN1bHQgPSB0aGlzLmlucHV0VmFsdWUgKyB0aGlzLnN0ZXA7XG5cdFx0XHRcdHRoaXMuaW5wdXRWYWx1ZSA9XG5cdFx0XHRcdFx0aW5jcmVtZW50ZWRSZXN1bHQgPj0gbWluSW5wdXRWYWx1ZSAmJlxuXHRcdFx0XHRcdGluY3JlbWVudGVkUmVzdWx0IDw9IG1heElucHV0VmFsdWVcblx0XHRcdFx0XHRcdD8gaW5jcmVtZW50ZWRSZXN1bHRcblx0XHRcdFx0XHRcdDogbWF4SW5wdXRWYWx1ZTtcblx0XHRcdFx0dGhpcy5pbnB1dC52YWx1ZSA9IHRoaXMuaW5wdXRWYWx1ZS50b1N0cmluZygpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2RlY3JlbWVudCc6XG5cdFx0XHRcdGNvbnN0IGRlY3JlbWVudGVkUmVzdWx0ID0gdGhpcy5pbnB1dFZhbHVlIC0gdGhpcy5zdGVwO1xuXHRcdFx0XHR0aGlzLmlucHV0VmFsdWUgPVxuXHRcdFx0XHRcdGRlY3JlbWVudGVkUmVzdWx0ID49IG1pbklucHV0VmFsdWUgJiZcblx0XHRcdFx0XHRkZWNyZW1lbnRlZFJlc3VsdCA8PSBtYXhJbnB1dFZhbHVlXG5cdFx0XHRcdFx0XHQ/IGRlY3JlbWVudGVkUmVzdWx0XG5cdFx0XHRcdFx0XHQ6IG1pbklucHV0VmFsdWU7XG5cdFx0XHRcdHRoaXMuaW5wdXQudmFsdWUgPSB0aGlzLmlucHV0VmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjb25zdCBkZWZhdWx0UmVzdWx0ID0gaXNOYU4ocGFyc2VJbnQodGhpcy5pbnB1dC52YWx1ZSkpXG5cdFx0XHRcdFx0PyAwXG5cdFx0XHRcdFx0OiBwYXJzZUludCh0aGlzLmlucHV0LnZhbHVlKTtcblx0XHRcdFx0dGhpcy5pbnB1dFZhbHVlID1cblx0XHRcdFx0XHRkZWZhdWx0UmVzdWx0ID49IG1heElucHV0VmFsdWVcblx0XHRcdFx0XHRcdD8gbWF4SW5wdXRWYWx1ZVxuXHRcdFx0XHRcdFx0OiBkZWZhdWx0UmVzdWx0IDw9IG1pbklucHV0VmFsdWVcblx0XHRcdFx0XHRcdFx0PyBtaW5JbnB1dFZhbHVlXG5cdFx0XHRcdFx0XHRcdDogZGVmYXVsdFJlc3VsdDtcblx0XHRcdFx0aWYgKHRoaXMuaW5wdXRWYWx1ZSA8PSBtaW5JbnB1dFZhbHVlKVxuXHRcdFx0XHRcdHRoaXMuaW5wdXQudmFsdWUgPSB0aGlzLmlucHV0VmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0cGF5bG9hZC5pbnB1dFZhbHVlID0gdGhpcy5pbnB1dFZhbHVlO1xuXG5cdFx0aWYgKHRoaXMuaW5wdXRWYWx1ZSA9PT0gbWluSW5wdXRWYWx1ZSkge1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuXHRcdFx0aWYgKHRoaXMuZGVjcmVtZW50KSB0aGlzLmRpc2FibGVCdXR0b25zKCdkZWNyZW1lbnQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXHRcdFx0aWYgKHRoaXMuZGVjcmVtZW50KSB0aGlzLmVuYWJsZUJ1dHRvbnMoJ2RlY3JlbWVudCcpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5pbnB1dFZhbHVlID09PSBtYXhJbnB1dFZhbHVlKSB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG5cdFx0XHRpZiAodGhpcy5pbmNyZW1lbnQpIHRoaXMuZGlzYWJsZUJ1dHRvbnMoJ2luY3JlbWVudCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cdFx0XHRpZiAodGhpcy5pbmNyZW1lbnQpIHRoaXMuZW5hYmxlQnV0dG9ucygnaW5jcmVtZW50Jyk7XG5cdFx0fVxuXG5cdFx0dGhpcy5maXJlRXZlbnQoJ2NoYW5nZScsIHBheWxvYWQpO1xuXHRcdGRpc3BhdGNoKCdjaGFuZ2UuaHMuaW5wdXROdW1iZXInLCB0aGlzLmVsLCBwYXlsb2FkKTtcblx0fVxuXG5cdHByaXZhdGUgZGlzYWJsZUJ1dHRvbnMobW9kZSA9ICdhbGwnKSB7XG5cdFx0aWYgKG1vZGUgPT09ICdhbGwnKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdHRoaXMuaW5jcmVtZW50LnRhZ05hbWUgPT09ICdCVVRUT04nIHx8XG5cdFx0XHRcdHRoaXMuaW5jcmVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCdcblx0XHRcdClcblx0XHRcdFx0dGhpcy5pbmNyZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR0aGlzLmRlY3JlbWVudC50YWdOYW1lID09PSAnQlVUVE9OJyB8fFxuXHRcdFx0XHR0aGlzLmRlY3JlbWVudC50YWdOYW1lID09PSAnSU5QVVQnXG5cdFx0XHQpXG5cdFx0XHRcdHRoaXMuZGVjcmVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2UgaWYgKG1vZGUgPT09ICdpbmNyZW1lbnQnKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdHRoaXMuaW5jcmVtZW50LnRhZ05hbWUgPT09ICdCVVRUT04nIHx8XG5cdFx0XHRcdHRoaXMuaW5jcmVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCdcblx0XHRcdClcblx0XHRcdFx0dGhpcy5pbmNyZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSBpZiAobW9kZSA9PT0gJ2RlY3JlbWVudCcpIHtcblx0XHRcdGlmIChcblx0XHRcdFx0dGhpcy5kZWNyZW1lbnQudGFnTmFtZSA9PT0gJ0JVVFRPTicgfHxcblx0XHRcdFx0dGhpcy5kZWNyZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJ1xuXHRcdFx0KVxuXHRcdFx0XHR0aGlzLmRlY3JlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBlbmFibGVCdXR0b25zKG1vZGUgPSAnYWxsJykge1xuXHRcdGlmIChtb2RlID09PSAnYWxsJykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR0aGlzLmluY3JlbWVudC50YWdOYW1lID09PSAnQlVUVE9OJyB8fFxuXHRcdFx0XHR0aGlzLmluY3JlbWVudC50YWdOYW1lID09PSAnSU5QVVQnXG5cdFx0XHQpXG5cdFx0XHRcdHRoaXMuaW5jcmVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcblx0XHRcdGlmIChcblx0XHRcdFx0dGhpcy5kZWNyZW1lbnQudGFnTmFtZSA9PT0gJ0JVVFRPTicgfHxcblx0XHRcdFx0dGhpcy5kZWNyZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJ1xuXHRcdFx0KVxuXHRcdFx0XHR0aGlzLmRlY3JlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG5cdFx0fSBlbHNlIGlmIChtb2RlID09PSAnaW5jcmVtZW50Jykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR0aGlzLmluY3JlbWVudC50YWdOYW1lID09PSAnQlVUVE9OJyB8fFxuXHRcdFx0XHR0aGlzLmluY3JlbWVudC50YWdOYW1lID09PSAnSU5QVVQnXG5cdFx0XHQpXG5cdFx0XHRcdHRoaXMuaW5jcmVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2UgaWYgKG1vZGUgPT09ICdkZWNyZW1lbnQnKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdHRoaXMuZGVjcmVtZW50LnRhZ05hbWUgPT09ICdCVVRUT04nIHx8XG5cdFx0XHRcdHRoaXMuZGVjcmVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCdcblx0XHRcdClcblx0XHRcdFx0dGhpcy5kZWNyZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0fVxuXG5cdC8vIEdsb2JhbCBtZXRob2Rcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzSW5wdXROdW1iZXJDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50XG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzSW5wdXROdW1iZXJDb2xsZWN0aW9uKSB3aW5kb3cuJGhzSW5wdXROdW1iZXJDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLWlucHV0LW51bWJlcl06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc0lucHV0TnVtYmVyQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNJbnB1dE51bWJlcihlbCk7XG5cdFx0XHR9KTtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTSW5wdXROdW1iZXI6IEZ1bmN0aW9uO1xuXHRcdCRoc0lucHV0TnVtYmVyQ29sbGVjdGlvbjoge1xuXHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdGVsZW1lbnQ6IEhTSW5wdXROdW1iZXI7XG5cdFx0fVtdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU0lucHV0TnVtYmVyLmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnSW5wdXQgbnVtYmVyIGNvbGxlY3Rpb246Jywgd2luZG93LiRoc0lucHV0TnVtYmVyQ29sbGVjdGlvbik7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdpbmRvdy5IU0lucHV0TnVtYmVyID0gSFNJbnB1dE51bWJlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSFNJbnB1dE51bWJlcjtcbiIsICIvKlxuICogSFNPdmVybGF5XG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQge1xuXHRzdHJpbmdUb0Jvb2xlYW4sXG5cdGdldENsYXNzUHJvcGVydHksXG5cdGlzUGFyZW50T3JFbGVtZW50SGlkZGVuLFxuXHRkaXNwYXRjaCxcblx0YWZ0ZXJUcmFuc2l0aW9uLFxufSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmltcG9ydCB7IElPdmVybGF5T3B0aW9ucywgSU92ZXJsYXkgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBCUkVBS1BPSU5UUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuXG5jbGFzcyBIU092ZXJsYXkgZXh0ZW5kcyBIU0Jhc2VQbHVnaW48e30+IGltcGxlbWVudHMgSU92ZXJsYXkge1xuXHRwcml2YXRlIHJlYWRvbmx5IGhpZGRlbkNsYXNzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGlzQ2xvc2VQcmV2OiBib29sZWFuO1xuXHRwcml2YXRlIHJlYWRvbmx5IGJhY2tkcm9wQ2xhc3Nlczogc3RyaW5nIHwgbnVsbDtcblxuXHRwcml2YXRlIG9wZW5OZXh0T3ZlcmxheTogYm9vbGVhbjtcblx0cHJpdmF0ZSBhdXRvSGlkZTogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IG92ZXJsYXlJZDogc3RyaW5nIHwgbnVsbDtcblxuXHRwdWJsaWMgb3ZlcmxheTogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwdWJsaWMgaXNDbG9zZVdoZW5DbGlja0luc2lkZTogYm9vbGVhbjtcblx0cHVibGljIGlzVGFiQWNjZXNzaWJpbGl0eUxpbWl0ZWQ6IGJvb2xlYW47XG5cdHB1YmxpYyBpc0xheW91dEFmZmVjdDogYm9vbGVhbjtcblx0cHVibGljIGhhc0F1dG9mb2N1czogYm9vbGVhbjtcblx0cHVibGljIGhhc0FiaWxpdHlUb0Nsb3NlT25CYWNrZHJvcENsaWNrOiBib29sZWFuO1xuXHRwdWJsaWMgb3BlbmVkQnJlYWtwb2ludDogbnVtYmVyIHwgbnVsbDtcblx0cHVibGljIGF1dG9DbG9zZTogbnVtYmVyIHwgbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBJT3ZlcmxheU9wdGlvbnMsIGV2ZW50cz86IHt9KSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMsIGV2ZW50cyk7XG5cblx0XHRjb25zdCBkYXRhID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLW92ZXJsYXktb3B0aW9ucycpO1xuXHRcdGNvbnN0IGRhdGFPcHRpb25zOiBJT3ZlcmxheU9wdGlvbnMgPSBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IHt9O1xuXHRcdGNvbnN0IGNvbmNhdE9wdGlvbnMgPSB7XG5cdFx0XHQuLi5kYXRhT3B0aW9ucyxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0fTtcblxuXHRcdHRoaXMuaGlkZGVuQ2xhc3MgPSBjb25jYXRPcHRpb25zPy5oaWRkZW5DbGFzcyB8fCAnaGlkZGVuJztcblx0XHR0aGlzLmlzQ2xvc2VQcmV2ID0gY29uY2F0T3B0aW9ucz8uaXNDbG9zZVByZXYgPz8gdHJ1ZTtcblx0XHR0aGlzLmJhY2tkcm9wQ2xhc3NlcyA9XG5cdFx0XHRjb25jYXRPcHRpb25zPy5iYWNrZHJvcENsYXNzZXMgPz9cblx0XHRcdCd0cmFuc2l0aW9uIGR1cmF0aW9uIGZpeGVkIGluc2V0LTAgYmctZ3JheS05MDAgYmctb3BhY2l0eS01MCBkYXJrOmJnLW9wYWNpdHktODAgaHMtb3ZlcmxheS1iYWNrZHJvcCc7XG5cblx0XHR0aGlzLm9wZW5OZXh0T3ZlcmxheSA9IGZhbHNlO1xuXHRcdHRoaXMuYXV0b0hpZGUgPSBudWxsO1xuXHRcdHRoaXMub3ZlcmxheUlkID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtb3ZlcmxheScpO1xuXHRcdHRoaXMub3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vdmVybGF5SWQpO1xuXHRcdGlmICh0aGlzLm92ZXJsYXkpIHtcblx0XHRcdHRoaXMuaXNDbG9zZVdoZW5DbGlja0luc2lkZSA9IHN0cmluZ1RvQm9vbGVhbihcblx0XHRcdFx0Z2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLm92ZXJsYXksICctLWNsb3NlLXdoZW4tY2xpY2staW5zaWRlJywgJ2ZhbHNlJykgfHxcblx0XHRcdFx0XHQnZmFsc2UnLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMuaXNUYWJBY2Nlc3NpYmlsaXR5TGltaXRlZCA9IHN0cmluZ1RvQm9vbGVhbihcblx0XHRcdFx0Z2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLm92ZXJsYXksICctLXRhYi1hY2Nlc3NpYmlsaXR5LWxpbWl0ZWQnLCAndHJ1ZScpIHx8XG5cdFx0XHRcdFx0J3RydWUnLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMuaXNMYXlvdXRBZmZlY3QgPSBzdHJpbmdUb0Jvb2xlYW4oXG5cdFx0XHRcdGdldENsYXNzUHJvcGVydHkodGhpcy5vdmVybGF5LCAnLS1pcy1sYXlvdXQtYWZmZWN0JywgJ2ZhbHNlJykgfHxcblx0XHRcdFx0XHQnZmFsc2UnLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMuaGFzQXV0b2ZvY3VzID0gc3RyaW5nVG9Cb29sZWFuKFxuXHRcdFx0XHRnZXRDbGFzc1Byb3BlcnR5KHRoaXMub3ZlcmxheSwgJy0taGFzLWF1dG9mb2N1cycsICd0cnVlJykgfHwgJ3RydWUnLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMuaGFzQWJpbGl0eVRvQ2xvc2VPbkJhY2tkcm9wQ2xpY2sgPSBzdHJpbmdUb0Jvb2xlYW4oXG5cdFx0XHRcdHRoaXMub3ZlcmxheS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtb3ZlcmxheS1rZXlib2FyZCcpIHx8ICd0cnVlJyxcblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IGF1dG9DbG9zZUJyZWFrcG9pbnQgPSBnZXRDbGFzc1Byb3BlcnR5KFxuXHRcdFx0XHR0aGlzLm92ZXJsYXksXG5cdFx0XHRcdCctLWF1dG8tY2xvc2UnLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMuYXV0b0Nsb3NlID1cblx0XHRcdFx0IWlzTmFOKCthdXRvQ2xvc2VCcmVha3BvaW50KSAmJiBpc0Zpbml0ZSgrYXV0b0Nsb3NlQnJlYWtwb2ludClcblx0XHRcdFx0XHQ/ICthdXRvQ2xvc2VCcmVha3BvaW50XG5cdFx0XHRcdFx0OiBCUkVBS1BPSU5UU1thdXRvQ2xvc2VCcmVha3BvaW50XSB8fCBudWxsO1xuXG5cdFx0XHRjb25zdCBvcGVuZWRCcmVha3BvaW50ID0gZ2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLm92ZXJsYXksICctLW9wZW5lZCcpO1xuXHRcdFx0dGhpcy5vcGVuZWRCcmVha3BvaW50ID1cblx0XHRcdFx0KCFpc05hTigrb3BlbmVkQnJlYWtwb2ludCkgJiYgaXNGaW5pdGUoK29wZW5lZEJyZWFrcG9pbnQpXG5cdFx0XHRcdFx0PyArb3BlbmVkQnJlYWtwb2ludFxuXHRcdFx0XHRcdDogQlJFQUtQT0lOVFNbb3BlbmVkQnJlYWtwb2ludF0pIHx8IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMub3ZlcmxheSkgdGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNPdmVybGF5Q29sbGVjdGlvbiwgdGhpcyk7XG5cblx0XHRpZiAodGhpcy5pc0xheW91dEFmZmVjdCAmJiB0aGlzLm9wZW5lZEJyZWFrcG9pbnQpIHtcblx0XHRcdGNvbnN0IGluc3RhbmNlID0gSFNPdmVybGF5LmdldEluc3RhbmNlKHRoaXMuZWwsIHRydWUpO1xuXG5cdFx0XHRIU092ZXJsYXkuc2V0T3BlbmVkKFxuXHRcdFx0XHR0aGlzLm9wZW5lZEJyZWFrcG9pbnQsXG5cdFx0XHRcdGluc3RhbmNlIGFzIElDb2xsZWN0aW9uSXRlbTxIU092ZXJsYXk+LFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMub3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW5lZCcpKSB0aGlzLmNsb3NlKCk7XG5cdFx0XHRlbHNlIHRoaXMub3BlbigpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuaWQgJiZcblx0XHRcdFx0YCMkeyhldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5pZH1gID09PSB0aGlzLm92ZXJsYXlJZCAmJlxuXHRcdFx0XHR0aGlzLmlzQ2xvc2VXaGVuQ2xpY2tJbnNpZGUgJiZcblx0XHRcdFx0dGhpcy5oYXNBYmlsaXR5VG9DbG9zZU9uQmFja2Ryb3BDbGlja1xuXHRcdFx0KSB7XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgaGlkZUF1dG8oKSB7XG5cdFx0Y29uc3QgdGltZSA9IHBhcnNlSW50KGdldENsYXNzUHJvcGVydHkodGhpcy5vdmVybGF5LCAnLS1hdXRvLWhpZGUnLCAnMCcpKTtcblxuXHRcdGlmICh0aW1lKSB7XG5cdFx0XHR0aGlzLmF1dG9IaWRlID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdH0sIHRpbWUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgY2hlY2tUaW1lcigpIHtcblx0XHRpZiAodGhpcy5hdXRvSGlkZSkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuYXV0b0hpZGUpO1xuXG5cdFx0XHR0aGlzLmF1dG9IaWRlID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkQmFja2Ryb3AoKSB7XG5cdFx0Y29uc3Qgb3ZlcmxheUNsYXNzZXMgPSB0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LnZhbHVlLnNwbGl0KCcgJyk7XG5cdFx0Y29uc3Qgb3ZlcmxheVpJbmRleCA9IHBhcnNlSW50KFxuXHRcdFx0d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5vdmVybGF5KS5nZXRQcm9wZXJ0eVZhbHVlKCd6LWluZGV4JyksXG5cdFx0KTtcblx0XHRjb25zdCBiYWNrZHJvcElkID1cblx0XHRcdHRoaXMub3ZlcmxheS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtb3ZlcmxheS1iYWNrZHJvcC1jb250YWluZXInKSB8fCBmYWxzZTtcblx0XHRsZXQgYmFja2Ryb3A6IEhUTUxFbGVtZW50IHwgTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdGxldCBiYWNrZHJvcENsYXNzZXMgPSB0aGlzLmJhY2tkcm9wQ2xhc3Nlcztcblx0XHRjb25zdCBjbG9zZU9uQmFja2Ryb3AgPVxuXHRcdFx0Z2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLm92ZXJsYXksICctLW92ZXJsYXktYmFja2Ryb3AnLCAndHJ1ZScpICE9PSAnc3RhdGljJztcblx0XHRjb25zdCBkaXNhYmxlQmFja2Ryb3AgPVxuXHRcdFx0Z2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLm92ZXJsYXksICctLW92ZXJsYXktYmFja2Ryb3AnLCAndHJ1ZScpID09PSAnZmFsc2UnO1xuXG5cdFx0KGJhY2tkcm9wIGFzIEhUTUxFbGVtZW50KS5pZCA9IGAke3RoaXMub3ZlcmxheS5pZH0tYmFja2Ryb3BgO1xuXHRcdGlmICgnc3R5bGUnIGluIGJhY2tkcm9wKSBiYWNrZHJvcC5zdHlsZS56SW5kZXggPSBgJHtvdmVybGF5WkluZGV4IC0gMX1gO1xuXG5cdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiBvdmVybGF5Q2xhc3Nlcykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR2YWx1ZS5zdGFydHNXaXRoKCdocy1vdmVybGF5LWJhY2tkcm9wLW9wZW46JykgfHxcblx0XHRcdFx0dmFsdWUuaW5jbHVkZXMoJzpocy1vdmVybGF5LWJhY2tkcm9wLW9wZW46Jylcblx0XHRcdCkge1xuXHRcdFx0XHRiYWNrZHJvcENsYXNzZXMgKz0gYCAke3ZhbHVlfWA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGRpc2FibGVCYWNrZHJvcCkgcmV0dXJuO1xuXG5cdFx0aWYgKGJhY2tkcm9wSWQpIHtcblx0XHRcdGJhY2tkcm9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiYWNrZHJvcElkKS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0XHQoYmFja2Ryb3AgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXG5cdFx0XHRiYWNrZHJvcENsYXNzZXMgPSBgJHsoYmFja2Ryb3AgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC50b1N0cmluZygpfWA7XG5cdFx0XHQoYmFja2Ryb3AgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC52YWx1ZSA9ICcnO1xuXHRcdH1cblxuXHRcdGlmIChjbG9zZU9uQmFja2Ryb3ApIHtcblx0XHRcdChiYWNrZHJvcCBhcyBIVE1MRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFx0J2NsaWNrJyxcblx0XHRcdFx0KCkgPT4gdGhpcy5jbG9zZSgpLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQoYmFja2Ryb3AgYXMgSFRNTEVsZW1lbnQpLnNldEF0dHJpYnV0ZShcblx0XHRcdCdkYXRhLWhzLW92ZXJsYXktYmFja2Ryb3AtdGVtcGxhdGUnLFxuXHRcdFx0JycsXG5cdFx0KTtcblxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xuXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHQoYmFja2Ryb3AgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC52YWx1ZSA9IGJhY2tkcm9wQ2xhc3Nlcztcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgZGVzdHJveUJhY2tkcm9wKCkge1xuXHRcdGNvbnN0IGJhY2tkcm9wOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHRgIyR7dGhpcy5vdmVybGF5LmlkfS1iYWNrZHJvcGAsXG5cdFx0KTtcblxuXHRcdGlmICghYmFja2Ryb3ApIHJldHVybjtcblxuXHRcdGlmICh0aGlzLm9wZW5OZXh0T3ZlcmxheSkge1xuXHRcdFx0YmFja2Ryb3Auc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7XG5cdFx0XHRcdHBhcnNlRmxvYXQoXG5cdFx0XHRcdFx0d2luZG93XG5cdFx0XHRcdFx0XHQuZ2V0Q29tcHV0ZWRTdHlsZShiYWNrZHJvcClcblx0XHRcdFx0XHRcdC50cmFuc2l0aW9uRHVyYXRpb24ucmVwbGFjZSgvW15cXGQuLV0vZywgJycpLFxuXHRcdFx0XHQpICogMS44XG5cdFx0XHR9c2A7XG5cdFx0fVxuXG5cdFx0YmFja2Ryb3AuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS0wJyk7XG5cblx0XHRhZnRlclRyYW5zaXRpb24oYmFja2Ryb3AsICgpID0+IHtcblx0XHRcdGJhY2tkcm9wLnJlbW92ZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBmb2N1c0VsZW1lbnQoKSB7XG5cdFx0Y29uc3QgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSB0aGlzLm92ZXJsYXkucXVlcnlTZWxlY3RvcignW2F1dG9mb2N1c10nKTtcblxuXHRcdGlmICghaW5wdXQpIHJldHVybiBmYWxzZTtcblx0XHRlbHNlIGlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHQvLyBQdWJsaWMgbWV0aG9kc1xuXHRwdWJsaWMgb3BlbigpIHtcblx0XHRpZiAoIXRoaXMub3ZlcmxheSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0Y29uc3QgY3VycmVudGx5T3BlbmVkID0gd2luZG93LiRoc092ZXJsYXlDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQub3ZlcmxheSA9PT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhzLW92ZXJsYXkub3BlbicpICYmXG5cdFx0XHRcdCFlbC5lbGVtZW50LmlzTGF5b3V0QWZmZWN0LFxuXHRcdCk7XG5cdFx0Y29uc3QgZGlzYWJsZWRTY3JvbGwgPVxuXHRcdFx0Z2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLm92ZXJsYXksICctLWJvZHktc2Nyb2xsJywgJ2ZhbHNlJykgIT09ICd0cnVlJztcblxuXHRcdGlmICh0aGlzLmlzQ2xvc2VQcmV2ICYmIGN1cnJlbnRseU9wZW5lZCkge1xuXHRcdFx0dGhpcy5vcGVuTmV4dE92ZXJsYXkgPSB0cnVlO1xuXG5cdFx0XHRyZXR1cm4gY3VycmVudGx5T3BlbmVkLmVsZW1lbnQuY2xvc2UoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0dGhpcy5vcGVuKCk7XG5cblx0XHRcdFx0dGhpcy5vcGVuTmV4dE92ZXJsYXkgPSBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChkaXNhYmxlZFNjcm9sbCkge1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXHRcdH1cblxuXHRcdHRoaXMuYnVpbGRCYWNrZHJvcCgpO1xuXHRcdHRoaXMuY2hlY2tUaW1lcigpO1xuXHRcdHRoaXMuaGlkZUF1dG8oKTtcblxuXHRcdHRoaXMub3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaGlkZGVuQ2xhc3MpO1xuXHRcdHRoaXMub3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3ZlcmxheScsICd0cnVlJyk7XG5cdFx0dGhpcy5vdmVybGF5LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcblxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMub3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW5lZCcpKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdHRoaXMub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGVuJywgJ29wZW5lZCcpO1xuXHRcdFx0aWYgKHRoaXMuaXNMYXlvdXRBZmZlY3QpXG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaHMtb3ZlcmxheS1ib2R5LW9wZW4nKTtcblxuXHRcdFx0dGhpcy5maXJlRXZlbnQoJ29wZW4nLCB0aGlzLmVsKTtcblx0XHRcdGRpc3BhdGNoKCdvcGVuLmhzLm92ZXJsYXknLCB0aGlzLmVsLCB0aGlzLmVsKTtcblxuXHRcdFx0aWYgKHRoaXMuaGFzQXV0b2ZvY3VzKSB0aGlzLmZvY3VzRWxlbWVudCgpO1xuXHRcdH0sIDUwKTtcblx0fVxuXG5cdHB1YmxpYyBjbG9zZShmb3JjZUNsb3NlID0gZmFsc2UpIHtcblx0XHRpZiAodGhpcy5pc0xheW91dEFmZmVjdClcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaHMtb3ZlcmxheS1ib2R5LW9wZW4nKTtcblxuXHRcdGNvbnN0IGNsb3NlRm4gPSAoY2I6IEZ1bmN0aW9uKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5vdmVybGF5LmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdHRoaXMub3ZlcmxheS5jbGFzc0xpc3QuYWRkKHRoaXMuaGlkZGVuQ2xhc3MpO1xuXG5cdFx0XHR0aGlzLmRlc3Ryb3lCYWNrZHJvcCgpO1xuXG5cdFx0XHR0aGlzLmZpcmVFdmVudCgnY2xvc2UnLCB0aGlzLmVsKTtcblx0XHRcdGRpc3BhdGNoKCdjbG9zZS5ocy5vdmVybGF5JywgdGhpcy5lbCwgdGhpcy5lbCk7XG5cblx0XHRcdGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhzLW92ZXJsYXkub3BlbmVkJykpXG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcblxuXHRcdFx0Y2IodGhpcy5vdmVybGF5KTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMub3ZlcmxheSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHR0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicsICdvcGVuZWQnKTtcblx0XHRcdHRoaXMub3ZlcmxheS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtb3ZlcmxheScpO1xuXHRcdFx0dGhpcy5vdmVybGF5LnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcblxuXHRcdFx0aWYgKGZvcmNlQ2xvc2UpIGNsb3NlRm4ocmVzb2x2ZSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGFmdGVyVHJhbnNpdGlvbih0aGlzLm92ZXJsYXksICgpID0+IHtcblx0XHRcdFx0XHRjbG9zZUZuKHJlc29sdmUpO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2RzXG5cdHN0YXRpYyBnZXRJbnN0YW5jZSh0YXJnZXQ6IEhUTUxFbGVtZW50LCBpc0luc3RhbmNlPzogYm9vbGVhbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc092ZXJsYXlDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG5cdFx0XHRcdFx0XHQ/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KVxuXHRcdFx0XHRcdFx0OiB0YXJnZXQpIHx8XG5cdFx0XHRcdGVsLmVsZW1lbnQub3ZlcmxheSA9PT1cblx0XHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZydcblx0XHRcdFx0XHRcdD8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpXG5cdFx0XHRcdFx0XHQ6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50LmVsXG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24pIHdpbmRvdy4kaHNPdmVybGF5Q29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1vdmVybGF5XTpub3QoLi0tcHJldmVudC1vbi1sb2FkLWluaXQpJylcblx0XHRcdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0XHRcdChlbEMpID0+IChlbEM/LmVsZW1lbnQ/LmVsIGFzIEhUTUxFbGVtZW50KSA9PT0gZWwsXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpXG5cdFx0XHRcdFx0bmV3IEhTT3ZlcmxheShlbCk7XG5cdFx0XHR9KTtcblxuXHRcdGlmICh3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24pIHtcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PlxuXHRcdFx0XHRIU092ZXJsYXkuYWNjZXNzaWJpbGl0eShldnQpLFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgb3Blbih0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZydcblx0XHRcdFx0XHRcdD8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpXG5cdFx0XHRcdFx0XHQ6IHRhcmdldCkgfHxcblx0XHRcdFx0ZWwuZWxlbWVudC5vdmVybGF5ID09PVxuXHRcdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJ1xuXHRcdFx0XHRcdFx0PyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldClcblx0XHRcdFx0XHRcdDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0aWYgKFxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24gJiZcblx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQub3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoXG5cdFx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuaGlkZGVuQ2xhc3MsXG5cdFx0XHQpXG5cdFx0KVxuXHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5vcGVuKCk7XG5cdH1cblxuXHRzdGF0aWMgY2xvc2UodGFyZ2V0OiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc092ZXJsYXlDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG5cdFx0XHRcdFx0XHQ/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KVxuXHRcdFx0XHRcdFx0OiB0YXJnZXQpIHx8XG5cdFx0XHRcdGVsLmVsZW1lbnQub3ZlcmxheSA9PT1cblx0XHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZydcblx0XHRcdFx0XHRcdD8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpXG5cdFx0XHRcdFx0XHQ6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdGlmIChcblx0XHRcdGVsSW5Db2xsZWN0aW9uICYmXG5cdFx0XHQhZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5vdmVybGF5LmNsYXNzTGlzdC5jb250YWlucyhcblx0XHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5oaWRkZW5DbGFzcyxcblx0XHRcdClcblx0XHQpXG5cdFx0XHRlbEluQ29sbGVjdGlvbi5lbGVtZW50LmNsb3NlKCk7XG5cdH1cblxuXHRzdGF0aWMgc2V0T3BlbmVkKGJyZWFrcG9pbnQ6IG51bWJlciwgZWw6IElDb2xsZWN0aW9uSXRlbTxIU092ZXJsYXk+KSB7XG5cdFx0aWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPj0gYnJlYWtwb2ludCkge1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdocy1vdmVybGF5LWJvZHktb3BlbicpO1xuXHRcdFx0ZWwuZWxlbWVudC5vdmVybGF5LmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuXHRcdH0gZWxzZSBlbC5lbGVtZW50LmNsb3NlKHRydWUpO1xuXHR9XG5cblx0Ly8gQWNjZXNzaWJpbGl0eSBtZXRob2RzXG5cdHN0YXRpYyBhY2Nlc3NpYmlsaXR5KGV2dDogS2V5Ym9hcmRFdmVudCkge1xuXHRcdGNvbnN0IHRhcmdldHMgPSB3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24uZmlsdGVyKChlbCkgPT5cblx0XHRcdGVsLmVsZW1lbnQub3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcblx0XHQpO1xuXHRcdGNvbnN0IHRhcmdldCA9IHRhcmdldHNbdGFyZ2V0cy5sZW5ndGggLSAxXTtcblx0XHRjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IHRhcmdldD8uZWxlbWVudD8ub3ZlcmxheT8ucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdCdidXR0b24sIFtocmVmXSwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIFt0YWJpbmRleF06bm90KFt0YWJpbmRleD1cIi0xXCJdKScsXG5cdFx0KTtcblx0XHRjb25zdCBub3RIaWRkZW5Gb2N1c2FibGVFbGVtZW50czogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGlmIChmb2N1c2FibGVFbGVtZW50cz8ubGVuZ3RoKVxuXHRcdFx0Zm9jdXNhYmxlRWxlbWVudHMuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmICghaXNQYXJlbnRPckVsZW1lbnRIaWRkZW4oZWwpKSBub3RIaWRkZW5Gb2N1c2FibGVFbGVtZW50cy5wdXNoKGVsKTtcblx0XHRcdH0pO1xuXHRcdGNvbnN0IGJhc2ljQ2hlY2sgPSB0YXJnZXQgJiYgIWV2dC5tZXRhS2V5O1xuXG5cdFx0aWYgKFxuXHRcdFx0YmFzaWNDaGVjayAmJlxuXHRcdFx0IXRhcmdldC5lbGVtZW50LmlzVGFiQWNjZXNzaWJpbGl0eUxpbWl0ZWQgJiZcblx0XHRcdGV2dC5jb2RlID09PSAnVGFiJ1xuXHRcdClcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdGlmIChiYXNpY0NoZWNrICYmIG5vdEhpZGRlbkZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAmJiBldnQuY29kZSA9PT0gJ1RhYicpIHtcblx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5vblRhYih0YXJnZXQsIG5vdEhpZGRlbkZvY3VzYWJsZUVsZW1lbnRzKTtcblx0XHR9XG5cdFx0aWYgKGJhc2ljQ2hlY2sgJiYgZXZ0LmNvZGUgPT09ICdFc2NhcGUnKSB7XG5cdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMub25Fc2NhcGUodGFyZ2V0KTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgb25Fc2NhcGUodGFyZ2V0OiBJQ29sbGVjdGlvbkl0ZW08SFNPdmVybGF5Pikge1xuXHRcdGlmICh0YXJnZXQgJiYgdGFyZ2V0LmVsZW1lbnQuaGFzQWJpbGl0eVRvQ2xvc2VPbkJhY2tkcm9wQ2xpY2spXG5cdFx0XHR0YXJnZXQuZWxlbWVudC5jbG9zZSgpO1xuXHR9XG5cblx0c3RhdGljIG9uVGFiKFxuXHRcdHRhcmdldDogSUNvbGxlY3Rpb25JdGVtPEhTT3ZlcmxheT4sXG5cdFx0Zm9jdXNhYmxlRWxlbWVudHM6IEhUTUxFbGVtZW50W10sXG5cdCkge1xuXHRcdGlmICghZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cblx0XHRjb25zdCBmb2N1c2VkID0gdGFyZ2V0LmVsZW1lbnQub3ZlcmxheS5xdWVyeVNlbGVjdG9yKCc6Zm9jdXMnKTtcblx0XHRjb25zdCBmb2N1c2VkSW5kZXggPSBBcnJheS5mcm9tKGZvY3VzYWJsZUVsZW1lbnRzKS5pbmRleE9mKFxuXHRcdFx0Zm9jdXNlZCBhcyBIVE1MRWxlbWVudCxcblx0XHQpO1xuXG5cdFx0aWYgKGZvY3VzZWRJbmRleCA+IC0xKSB7XG5cdFx0XHRjb25zdCBuZXh0SW5kZXggPSAoZm9jdXNlZEluZGV4ICsgMSkgJSBmb2N1c2FibGVFbGVtZW50cy5sZW5ndGg7XG5cdFx0XHQoZm9jdXNhYmxlRWxlbWVudHNbbmV4dEluZGV4XSBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0KGZvY3VzYWJsZUVsZW1lbnRzWzBdIGFzIEhUTUxFbGVtZW50KS5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0c3RhdGljIG9uKGV2dDogc3RyaW5nLCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjYjogRnVuY3Rpb24pIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNPdmVybGF5Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJ1xuXHRcdFx0XHRcdFx0PyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldClcblx0XHRcdFx0XHRcdDogdGFyZ2V0KSB8fFxuXHRcdFx0XHRlbC5lbGVtZW50Lm92ZXJsYXkgPT09XG5cdFx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG5cdFx0XHRcdFx0XHQ/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KVxuXHRcdFx0XHRcdFx0OiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAoZWxJbkNvbGxlY3Rpb24pIGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuZXZlbnRzW2V2dF0gPSBjYjtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTT3ZlcmxheTogRnVuY3Rpb247XG5cdFx0JGhzT3ZlcmxheUNvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU092ZXJsYXk+W107XG5cdH1cbn1cblxuY29uc3QgYXV0b0Nsb3NlUmVzaXplRm4gPSAoKSA9PiB7XG5cdGlmIChcblx0XHQhd2luZG93LiRoc092ZXJsYXlDb2xsZWN0aW9uLmxlbmd0aCB8fFxuXHRcdCF3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24uZmluZCgoZWwpID0+IGVsLmVsZW1lbnQuYXV0b0Nsb3NlKVxuXHQpXG5cdFx0cmV0dXJuIGZhbHNlO1xuXG5cdGNvbnN0IG92ZXJsYXlzID0gd2luZG93LiRoc092ZXJsYXlDb2xsZWN0aW9uLmZpbHRlcihcblx0XHQoZWwpID0+IGVsLmVsZW1lbnQuYXV0b0Nsb3NlLFxuXHQpO1xuXG5cdG92ZXJsYXlzLmZvckVhY2goKG92ZXJsYXkpID0+IHtcblx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+PSBvdmVybGF5LmVsZW1lbnQuYXV0b0Nsb3NlKVxuXHRcdFx0b3ZlcmxheS5lbGVtZW50LmNsb3NlKHRydWUpO1xuXHR9KTtcbn07XG5cbmNvbnN0IHNldE9wZW5lZFJlc2l6ZUZuID0gKCkgPT4ge1xuXHRpZiAoXG5cdFx0IXdpbmRvdy4kaHNPdmVybGF5Q29sbGVjdGlvbi5sZW5ndGggfHxcblx0XHQhd2luZG93LiRoc092ZXJsYXlDb2xsZWN0aW9uLmZpbmQoKGVsKSA9PiBlbC5lbGVtZW50Lm9wZW5lZEJyZWFrcG9pbnQpXG5cdClcblx0XHRyZXR1cm4gZmFsc2U7XG5cblx0Y29uc3Qgb3ZlcmxheXMgPSB3aW5kb3cuJGhzT3ZlcmxheUNvbGxlY3Rpb24uZmlsdGVyKFxuXHRcdChlbCkgPT4gZWwuZWxlbWVudC5vcGVuZWRCcmVha3BvaW50LFxuXHQpO1xuXG5cdG92ZXJsYXlzLmZvckVhY2goKG92ZXJsYXkpID0+IHtcblx0XHRIU092ZXJsYXkuc2V0T3BlbmVkKG92ZXJsYXkuZWxlbWVudC5vcGVuZWRCcmVha3BvaW50LCBvdmVybGF5KTtcblx0fSk7XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcblx0SFNPdmVybGF5LmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnT3ZlcmxheSBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNPdmVybGF5Q29sbGVjdGlvbik7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcblx0YXV0b0Nsb3NlUmVzaXplRm4oKTtcblx0c2V0T3BlbmVkUmVzaXplRm4oKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTT3ZlcmxheSA9IEhTT3ZlcmxheTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSFNPdmVybGF5O1xuIiwgIi8qXG4gKiBIU1BpbklucHV0XG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSVBpbklucHV0T3B0aW9ucywgSVBpbklucHV0IH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5pbXBvcnQgeyBJQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcblxuY2xhc3MgSFNQaW5JbnB1dCBleHRlbmRzIEhTQmFzZVBsdWdpbjxJUGluSW5wdXRPcHRpb25zPiBpbXBsZW1lbnRzIElQaW5JbnB1dCB7XG5cdHByaXZhdGUgaXRlbXM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+IHwgbnVsbDtcblx0cHJpdmF0ZSBjdXJyZW50SXRlbTogSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgY3VycmVudFZhbHVlOiBzdHJpbmdbXSB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgcGxhY2Vob2xkZXJzOiBzdHJpbmdbXSB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgYXZhaWxhYmxlQ2hhcnNSRTogUmVnRXhwIHwgbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBJUGluSW5wdXRPcHRpb25zKSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMpO1xuXG5cdFx0Y29uc3QgZGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1waW4taW5wdXQnKTtcblx0XHRjb25zdCBkYXRhT3B0aW9uczogSVBpbklucHV0T3B0aW9ucyA9IGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XG5cdFx0Y29uc3QgY29uY2F0T3B0aW9ucyA9IHtcblx0XHRcdC4uLmRhdGFPcHRpb25zLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHR9O1xuXG5cdFx0dGhpcy5pdGVtcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHMtcGluLWlucHV0LWl0ZW1dJyk7XG5cdFx0dGhpcy5jdXJyZW50SXRlbSA9IG51bGw7XG5cdFx0dGhpcy5jdXJyZW50VmFsdWUgPSBuZXcgQXJyYXkodGhpcy5pdGVtcy5sZW5ndGgpLmZpbGwoJycpO1xuXHRcdHRoaXMucGxhY2Vob2xkZXJzID0gW107XG5cdFx0dGhpcy5hdmFpbGFibGVDaGFyc1JFID0gbmV3IFJlZ0V4cChcblx0XHRcdGNvbmNhdE9wdGlvbnM/LmF2YWlsYWJsZUNoYXJzUkUgfHwgJ15bYS16QS1aMC05XSskJyxcblx0XHQpOyAvLyAnXlswLTldKyQnXG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpIHtcblx0XHR0aGlzLmNyZWF0ZUNvbGxlY3Rpb24od2luZG93LiRoc1BpbklucHV0Q29sbGVjdGlvbiwgdGhpcyk7XG5cblx0XHRpZiAodGhpcy5pdGVtcy5sZW5ndGgpIHRoaXMuYnVpbGQoKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGQoKSB7XG5cdFx0dGhpcy5idWlsZElucHV0SXRlbXMoKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRJbnB1dEl0ZW1zKCkge1xuXHRcdHRoaXMuaXRlbXMuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG5cdFx0XHR0aGlzLnBsYWNlaG9sZGVycy5wdXNoKGVsLmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKSB8fCAnJyk7XG5cblx0XHRcdGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2F1dG9mb2N1cycpKSB0aGlzLm9uRm9jdXNJbihpbmRleCk7XG5cblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2dCkgPT4gdGhpcy5vbklucHV0KGV2dCwgaW5kZXgpKTtcblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgKGV2dCkgPT4gdGhpcy5vblBhc3RlKGV2dCkpO1xuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHRoaXMub25LZXlkb3duKGV2dCwgaW5kZXgpKTtcblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCAoKSA9PiB0aGlzLm9uRm9jdXNJbihpbmRleCkpO1xuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCAoKSA9PiB0aGlzLm9uRm9jdXNPdXQoaW5kZXgpKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgY2hlY2tJZk51bWJlcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0cmV0dXJuIHZhbHVlLm1hdGNoKHRoaXMuYXZhaWxhYmxlQ2hhcnNSRSk7XG5cdH1cblxuXHRwcml2YXRlIGF1dG9GaWxsQWxsKHRleHQ6IHN0cmluZykge1xuXHRcdEFycmF5LmZyb20odGV4dCkuZm9yRWFjaCgobiwgaSkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzPy5pdGVtc1tpXSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHQodGhpcy5pdGVtc1tpXSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IG47XG5cblx0XHRcdHRoaXMuaXRlbXNbaV0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgc2V0Q3VycmVudFZhbHVlKCkge1xuXHRcdHRoaXMuY3VycmVudFZhbHVlID0gQXJyYXkuZnJvbSh0aGlzLml0ZW1zKS5tYXAoXG5cdFx0XHQoZWwpID0+IChlbCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSxcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSB0b2dnbGVDb21wbGV0ZWQoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRWYWx1ZS5pbmNsdWRlcygnJykpIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0ZWxzZSB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHR9XG5cblx0cHJpdmF0ZSBvbklucHV0KGV2dDogRXZlbnQsIGluZGV4OiBudW1iZXIpIHtcblx0XHRjb25zdCBvcmlnaW5hbFZhbHVlID0gKGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG5cdFx0dGhpcy5jdXJyZW50SXRlbSA9IGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcblx0XHR0aGlzLmN1cnJlbnRJdGVtLnZhbHVlID0gJyc7XG5cdFx0dGhpcy5jdXJyZW50SXRlbS52YWx1ZSA9IG9yaWdpbmFsVmFsdWVbb3JpZ2luYWxWYWx1ZS5sZW5ndGggLSAxXTtcblxuXHRcdGlmICghdGhpcy5jaGVja0lmTnVtYmVyKHRoaXMuY3VycmVudEl0ZW0udmFsdWUpKSB7XG5cdFx0XHR0aGlzLmN1cnJlbnRJdGVtLnZhbHVlID0gdGhpcy5jdXJyZW50VmFsdWVbaW5kZXhdIHx8ICcnO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0dGhpcy5zZXRDdXJyZW50VmFsdWUoKTtcblxuXHRcdGlmICh0aGlzLmN1cnJlbnRJdGVtLnZhbHVlKSB7XG5cdFx0XHRpZiAoaW5kZXggPCB0aGlzLml0ZW1zLmxlbmd0aCAtIDEpIHRoaXMuaXRlbXNbaW5kZXggKyAxXS5mb2N1cygpO1xuXHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRWYWx1ZS5pbmNsdWRlcygnJykpIHtcblx0XHRcdFx0Y29uc3QgcGF5bG9hZCA9IHsgY3VycmVudFZhbHVlOiB0aGlzLmN1cnJlbnRWYWx1ZSB9O1xuXG5cdFx0XHRcdHRoaXMuZmlyZUV2ZW50KCdjb21wbGV0ZWQnLCBwYXlsb2FkKTtcblx0XHRcdFx0ZGlzcGF0Y2goJ2NvbXBsZXRlZC5ocy5waW5JbnB1dCcsIHRoaXMuZWwsIHBheWxvYWQpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnRvZ2dsZUNvbXBsZXRlZCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoaW5kZXggPiAwKSB0aGlzLml0ZW1zW2luZGV4IC0gMV0uZm9jdXMoKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG9uS2V5ZG93bihldnQ6IEtleWJvYXJkRXZlbnQsIGluZGV4OiBudW1iZXIpIHtcblx0XHRpZiAoZXZ0LmtleSA9PT0gJ0JhY2tzcGFjZScgJiYgaW5kZXggPiAwKSB7XG5cdFx0XHRpZiAoKHRoaXMuaXRlbXNbaW5kZXhdIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID09PSAnJykge1xuXHRcdFx0XHQodGhpcy5pdGVtc1tpbmRleCAtIDFdIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gJyc7XG5cdFx0XHRcdCh0aGlzLml0ZW1zW2luZGV4IC0gMV0gYXMgSFRNTElucHV0RWxlbWVudCkuZm9jdXMoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCh0aGlzLml0ZW1zW2luZGV4XSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9ICcnO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuc2V0Q3VycmVudFZhbHVlKCk7XG5cdFx0dGhpcy50b2dnbGVDb21wbGV0ZWQoKTtcblx0fVxuXG5cdHByaXZhdGUgb25Gb2N1c0luKGluZGV4OiBudW1iZXIpIHtcblx0XHR0aGlzLml0ZW1zW2luZGV4XS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJycpO1xuXHR9XG5cblx0cHJpdmF0ZSBvbkZvY3VzT3V0KGluZGV4OiBudW1iZXIpIHtcblx0XHR0aGlzLml0ZW1zW2luZGV4XS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgdGhpcy5wbGFjZWhvbGRlcnNbaW5kZXhdKTtcblx0fVxuXG5cdHByaXZhdGUgb25QYXN0ZShldnQ6IENsaXBib2FyZEV2ZW50KSB7XG5cdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR0aGlzLml0ZW1zLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwpXG5cdFx0XHRcdHRoaXMuYXV0b0ZpbGxBbGwoZXZ0LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dCcpKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2Rcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzUGluSW5wdXRDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50XG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzUGluSW5wdXRDb2xsZWN0aW9uKSB3aW5kb3cuJGhzUGluSW5wdXRDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLXBpbi1pbnB1dF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc1BpbklucHV0Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNQaW5JbnB1dChlbCk7XG5cdFx0XHR9KTtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTUGluSW5wdXQ6IEZ1bmN0aW9uO1xuXHRcdCRoc1BpbklucHV0Q29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTUGluSW5wdXQ+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTUGluSW5wdXQuYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdQSU4gaW5wdXQgY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzUGluSW5wdXRDb2xsZWN0aW9uKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTUGluSW5wdXQgPSBIU1BpbklucHV0O1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU1BpbklucHV0O1xuIiwgIi8qXG4gKiBIU1JlbW92ZUVsZW1lbnRcbiAqIEB2ZXJzaW9uOiAyLjEuMFxuICogQGF1dGhvcjogSFRNTFN0cmVhbVxuICogQGxpY2Vuc2U6IExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9wcmVsaW5lLmNvL2RvY3MvbGljZW5zZS5odG1sKVxuICogQ29weXJpZ2h0IDIwMjMgSFRNTFN0cmVhbVxuICovXG5cbmltcG9ydCB7IGFmdGVyVHJhbnNpdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSVJlbW92ZUVsZW1lbnRPcHRpb25zLCBJUmVtb3ZlRWxlbWVudCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTUmVtb3ZlRWxlbWVudFxuXHRleHRlbmRzIEhTQmFzZVBsdWdpbjxJUmVtb3ZlRWxlbWVudE9wdGlvbnM+XG5cdGltcGxlbWVudHMgSVJlbW92ZUVsZW1lbnRcbntcblx0cHJpdmF0ZSByZWFkb25seSByZW1vdmVUYXJnZXRJZDogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSByZW1vdmVUYXJnZXQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSByZW1vdmVUYXJnZXRBbmltYXRpb25DbGFzczogc3RyaW5nO1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IElSZW1vdmVFbGVtZW50T3B0aW9ucykge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zKTtcblxuXHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtcmVtb3ZlLWVsZW1lbnQtb3B0aW9ucycpO1xuXHRcdGNvbnN0IGRhdGFPcHRpb25zOiBJUmVtb3ZlRWxlbWVudE9wdGlvbnMgPSBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IHt9O1xuXHRcdGNvbnN0IGNvbmNhdE9wdGlvbnMgPSB7XG5cdFx0XHQuLi5kYXRhT3B0aW9ucyxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0fTtcblxuXHRcdHRoaXMucmVtb3ZlVGFyZ2V0SWQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1yZW1vdmUtZWxlbWVudCcpO1xuXHRcdHRoaXMucmVtb3ZlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnJlbW92ZVRhcmdldElkKTtcblx0XHR0aGlzLnJlbW92ZVRhcmdldEFuaW1hdGlvbkNsYXNzID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/LnJlbW92ZVRhcmdldEFuaW1hdGlvbkNsYXNzIHx8ICdocy1yZW1vdmluZyc7XG5cblx0XHRpZiAodGhpcy5yZW1vdmVUYXJnZXQpIHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCkge1xuXHRcdHRoaXMuY3JlYXRlQ29sbGVjdGlvbih3aW5kb3cuJGhzUmVtb3ZlRWxlbWVudENvbGxlY3Rpb24sIHRoaXMpO1xuXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVtb3ZlKCkpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmUoKSB7XG5cdFx0aWYgKCF0aGlzLnJlbW92ZVRhcmdldCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0dGhpcy5yZW1vdmVUYXJnZXQuY2xhc3NMaXN0LmFkZCh0aGlzLnJlbW92ZVRhcmdldEFuaW1hdGlvbkNsYXNzKTtcblxuXHRcdGFmdGVyVHJhbnNpdGlvbih0aGlzLnJlbW92ZVRhcmdldCwgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZW1vdmVUYXJnZXQucmVtb3ZlKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBTdGF0aWMgbWV0aG9kXG5cdHN0YXRpYyBhdXRvSW5pdCgpIHtcblx0XHRpZiAoIXdpbmRvdy4kaHNSZW1vdmVFbGVtZW50Q29sbGVjdGlvbilcblx0XHRcdHdpbmRvdy4kaHNSZW1vdmVFbGVtZW50Q29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1yZW1vdmUtZWxlbWVudF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc1JlbW92ZUVsZW1lbnRDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHRcdFx0XHQoZWxDKSA9PiAoZWxDPy5lbGVtZW50Py5lbCBhcyBIVE1MRWxlbWVudCkgPT09IGVsLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0KVxuXHRcdFx0XHRcdG5ldyBIU1JlbW92ZUVsZW1lbnQoZWwpO1xuXHRcdFx0fSk7XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU1JlbW92ZUVsZW1lbnQ6IEZ1bmN0aW9uO1xuXHRcdCRoc1JlbW92ZUVsZW1lbnRDb2xsZWN0aW9uOiBJQ29sbGVjdGlvbkl0ZW08SFNSZW1vdmVFbGVtZW50PltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU1JlbW92ZUVsZW1lbnQuYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdSZW1vdmUgZWxlbWVudCBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNSZW1vdmVFbGVtZW50Q29sbGVjdGlvbik7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdpbmRvdy5IU1JlbW92ZUVsZW1lbnQgPSBIU1JlbW92ZUVsZW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTUmVtb3ZlRWxlbWVudDtcbiIsICIvKlxuICogSFNUb2dnbGVQYXNzd29yZFxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHsgZGVib3VuY2UsIGh0bWxUb0VsZW1lbnQsIGNsYXNzVG9DbGFzc0xpc3QgfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmltcG9ydCB7XG5cdElTZWFyY2hCeUpzb25PcHRpb25zLFxuXHRJU2VhcmNoSXRlbSxcblx0SVNlYXJjaEJ5SnNvbixcblx0SVNlYXJjaEl0ZW1UZW1wbGF0ZSxcbn0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5pbXBvcnQgeyBJQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcblxuY2xhc3MgSFNTZWFyY2hCeUpzb25cblx0ZXh0ZW5kcyBIU0Jhc2VQbHVnaW48SVNlYXJjaEJ5SnNvbk9wdGlvbnMsIEhUTUxJbnB1dEVsZW1lbnQ+XG5cdGltcGxlbWVudHMgSVNlYXJjaEJ5SnNvblxue1xuXHRwcml2YXRlIHJlYWRvbmx5IGpzb25Vcmw6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBtaW5DaGFyczogbnVtYmVyO1xuXG5cdHByaXZhdGUganNvbjogSVNlYXJjaEl0ZW1bXTtcblx0cHJpdmF0ZSByZXN1bHQ6IElTZWFyY2hJdGVtW107XG5cdHByaXZhdGUgdmFsOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSByZWFkb25seSBkcm9wZG93blRlbXBsYXRlOiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgZHJvcGRvd25DbGFzc2VzOiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgZHJvcGRvd25JdGVtVGVtcGxhdGU6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBkcm9wZG93bkl0ZW1UZW1wbGF0ZXNCeVR5cGU6IElTZWFyY2hJdGVtVGVtcGxhdGVbXTtcblx0cHJpdmF0ZSByZWFkb25seSBkcm9wZG93bkl0ZW1DbGFzc2VzOiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgaGlnaGxpZ2h0ZWRUZXh0VGFnTmFtZTogc3RyaW5nO1xuXHRwcml2YXRlIHJlYWRvbmx5IGhpZ2hsaWdodGVkVGV4dENsYXNzZXM6IHN0cmluZztcblxuXHRwcml2YXRlIGRyb3Bkb3duOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cblx0Y29uc3RydWN0b3IoZWw6IEhUTUxJbnB1dEVsZW1lbnQsIG9wdGlvbnM/OiBJU2VhcmNoQnlKc29uT3B0aW9ucykge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zKTtcblxuXHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtc2VhcmNoLWJ5LWpzb24nKTtcblx0XHRjb25zdCBkYXRhT3B0aW9uczogSVNlYXJjaEJ5SnNvbk9wdGlvbnMgPSBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IHt9O1xuXHRcdGNvbnN0IGNvbmNhdE9wdGlvbnMgPSB7XG5cdFx0XHQuLi5kYXRhT3B0aW9ucyxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0fTtcblxuXHRcdHRoaXMuanNvblVybCA9IGNvbmNhdE9wdGlvbnMuanNvblVybDtcblx0XHR0aGlzLm1pbkNoYXJzID0gY29uY2F0T3B0aW9ucy5taW5DaGFycyB8fCAzO1xuXHRcdHRoaXMuZHJvcGRvd25UZW1wbGF0ZSA9IGNvbmNhdE9wdGlvbnMuZHJvcGRvd25UZW1wbGF0ZSB8fCAnPGRpdj48L2Rpdj4nO1xuXHRcdHRoaXMuZHJvcGRvd25DbGFzc2VzID1cblx0XHRcdGNvbmNhdE9wdGlvbnMuZHJvcGRvd25DbGFzc2VzIHx8XG5cdFx0XHQnYWJzb2x1dGUgdG9wLWZ1bGwgei1bMV0gdy1mdWxsIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1tZCBoaWRkZW4gbXQtMic7XG5cdFx0dGhpcy5kcm9wZG93bkl0ZW1UZW1wbGF0ZSA9XG5cdFx0XHRjb25jYXRPcHRpb25zLmRyb3Bkb3duSXRlbVRlbXBsYXRlIHx8ICc8ZGl2PjwvZGl2Pic7XG5cdFx0dGhpcy5kcm9wZG93bkl0ZW1UZW1wbGF0ZXNCeVR5cGUgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucy5kcm9wZG93bkl0ZW1UZW1wbGF0ZXNCeVR5cGUgfHwgbnVsbDtcblx0XHR0aGlzLmRyb3Bkb3duSXRlbUNsYXNzZXMgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucy5kcm9wZG93bkl0ZW1DbGFzc2VzIHx8XG5cdFx0XHQncHktMiBweC00IHctZnVsbCBjdXJzb3ItcG9pbnRlciB0ZXh0LXNtIGhvdmVyOmJnLWdyYXktMzAwIGhvdmVyOnRleHQtYmxhY2snO1xuXHRcdHRoaXMuaGlnaGxpZ2h0ZWRUZXh0VGFnTmFtZSA9IGNvbmNhdE9wdGlvbnMuaGlnaGxpZ2h0ZWRUZXh0VGFnTmFtZSB8fCAndSc7XG5cdFx0dGhpcy5oaWdobGlnaHRlZFRleHRDbGFzc2VzID1cblx0XHRcdGNvbmNhdE9wdGlvbnMuaGlnaGxpZ2h0ZWRUZXh0Q2xhc3NlcyB8fCAnYmctZ3JlZW4tMjAwJztcblxuXHRcdGlmICh0aGlzLmpzb25VcmwpIHRoaXMuZmV0Y2hEYXRhKCkudGhlbigoKSA9PiB0aGlzLmluaXQoKSk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNTZWFyY2hCeUpzb25Db2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMuYnVpbGREcm9wZG93bigpO1xuXG5cdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0J2lucHV0Jyxcblx0XHRcdGRlYm91bmNlKChldnQ6IElucHV0RXZlbnQpID0+IHtcblx0XHRcdFx0dGhpcy52YWwgPSAoZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuXHRcdFx0XHRpZiAodGhpcy52YWwubGVuZ3RoID4gdGhpcy5taW5DaGFycykge1xuXHRcdFx0XHRcdHRoaXMuc2VhcmNoRGF0YSh0aGlzLnZhbCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQgPSBbXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0aGlzLnJlc3VsdC5sZW5ndGgpIHtcblx0XHRcdFx0XHR0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmJ1aWxkSXRlbXMoKTtcblx0XHRcdH0pLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGZldGNoRGF0YSgpIHtcblx0XHRhd2FpdCBmZXRjaCh0aGlzLmpzb25VcmwpXG5cdFx0XHQudGhlbigoZGF0YSkgPT4gZGF0YS5qc29uKCkpXG5cdFx0XHQudGhlbigoZGF0YSkgPT4gKHRoaXMuanNvbiA9IGRhdGEpKTtcblx0fVxuXG5cdHByaXZhdGUgc2VhcmNoRGF0YSh2YWw6IHN0cmluZykge1xuXHRcdHRoaXMucmVzdWx0ID0gdGhpcy5qc29uLmZpbHRlcigoZWwpID0+IHtcblx0XHRcdGNvbnN0IHZhbHVlID0gdmFsLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRjb25zdCB0aXRsZSA9IGVsLnRpdGxlLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IGVsLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdHJldHVybiB0aXRsZS5pbmNsdWRlcyh2YWx1ZSkgfHwgZGVzY3JpcHRpb24uaW5jbHVkZXModmFsdWUpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZERyb3Bkb3duKCkge1xuXHRcdHRoaXMuZHJvcGRvd24gPSBodG1sVG9FbGVtZW50KHRoaXMuZHJvcGRvd25UZW1wbGF0ZSk7XG5cdFx0aWYgKHRoaXMuZHJvcGRvd25DbGFzc2VzKVxuXHRcdFx0Y2xhc3NUb0NsYXNzTGlzdCh0aGlzLmRyb3Bkb3duQ2xhc3NlcywgdGhpcy5kcm9wZG93bik7XG5cblx0XHR0aGlzLmVsLmFmdGVyKHRoaXMuZHJvcGRvd24pO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZEl0ZW1zKCkge1xuXHRcdHRoaXMuZHJvcGRvd24uaW5uZXJIVE1MID0gJyc7XG5cblx0XHR0aGlzLnJlc3VsdC5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0Y29uc3QgbGluayA9IGh0bWxUb0VsZW1lbnQoXG5cdFx0XHRcdGA8YSBjbGFzcz1cImJsb2NrXCIgaHJlZj1cIiR7ZWwudXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPjwvYT5gLFxuXHRcdFx0KTtcblx0XHRcdGxpbmsuYXBwZW5kKHRoaXMuaXRlbVRlbXBsYXRlKGVsKSk7XG5cdFx0XHR0aGlzLmRyb3Bkb3duLmFwcGVuZChsaW5rKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgaXRlbVRlbXBsYXRlKGVsOiBJU2VhcmNoSXRlbSkge1xuXHRcdGNvbnN0IHJlID0gbmV3IFJlZ0V4cCh0aGlzLnZhbCwgJ2dpJyk7XG5cdFx0Y29uc3QgbmV3VGl0bGUgPSBlbC50aXRsZS5yZXBsYWNlKFxuXHRcdFx0cmUsXG5cdFx0XHRgPCR7dGhpcy5oaWdobGlnaHRlZFRleHRUYWdOYW1lfSBjbGFzcz1cImlubGluZS1ibG9jayAke3RoaXMuaGlnaGxpZ2h0ZWRUZXh0Q2xhc3Nlc31cIj4ke3RoaXMudmFsfTwvJHt0aGlzLmhpZ2hsaWdodGVkVGV4dFRhZ05hbWV9PmAsXG5cdFx0KTtcblx0XHRjb25zdCBuZXdEZXNjcmlwdGlvbiA9IGVsLmRlc2NyaXB0aW9uLnJlcGxhY2UoXG5cdFx0XHRyZSxcblx0XHRcdGA8JHt0aGlzLmhpZ2hsaWdodGVkVGV4dFRhZ05hbWV9IGNsYXNzPVwiaW5saW5lLWJsb2NrICR7dGhpcy5oaWdobGlnaHRlZFRleHRDbGFzc2VzfVwiPiR7dGhpcy52YWx9PC8ke3RoaXMuaGlnaGxpZ2h0ZWRUZXh0VGFnTmFtZX0+YCxcblx0XHQpO1xuXHRcdGNvbnN0IHRlbXBsYXRlQnlUeXBlID0gdGhpcy5kcm9wZG93bkl0ZW1UZW1wbGF0ZXNCeVR5cGVcblx0XHRcdD8gdGhpcy5kcm9wZG93bkl0ZW1UZW1wbGF0ZXNCeVR5cGUuZmluZChcblx0XHRcdFx0XHQodGVtcGxhdGUpID0+IHRlbXBsYXRlLnR5cGUgPT09IGVsLnR5cGUsXG5cdFx0XHRcdClcblx0XHRcdDogbnVsbDtcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQnlUeXBlXG5cdFx0XHQ/IGh0bWxUb0VsZW1lbnQodGVtcGxhdGVCeVR5cGUubWFya3VwKVxuXHRcdFx0OiBodG1sVG9FbGVtZW50KHRoaXMuZHJvcGRvd25JdGVtVGVtcGxhdGUpO1xuXHRcdGlmICh0aGlzLmRyb3Bkb3duSXRlbUNsYXNzZXMpXG5cdFx0XHRjbGFzc1RvQ2xhc3NMaXN0KHRoaXMuZHJvcGRvd25JdGVtQ2xhc3NlcywgdGVtcGxhdGUpO1xuXHRcdGNvbnN0IHRpdGxlOiBIVE1MRWxlbWVudCA9IHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRpdGxlXScpO1xuXHRcdGlmICh0aXRsZSkgdGl0bGUuYXBwZW5kKGh0bWxUb0VsZW1lbnQoYDxzcGFuPiR7bmV3VGl0bGV9PC9zcGFuPmApKTtcblx0XHRlbHNlIHRlbXBsYXRlLmFwcGVuZChodG1sVG9FbGVtZW50KGA8c3Bhbj4ke25ld1RpdGxlfTwvc3Bhbj5gKSk7XG5cdFx0Y29uc3QgZGVzY3JpcHRpb246IEhUTUxFbGVtZW50ID1cblx0XHRcdHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRlc2NyaXB0aW9uXScpO1xuXHRcdGlmIChkZXNjcmlwdGlvbilcblx0XHRcdGRlc2NyaXB0aW9uLmFwcGVuZChodG1sVG9FbGVtZW50KGA8c3Bhbj4ke25ld0Rlc2NyaXB0aW9ufTwvc3Bhbj5gKSk7XG5cdFx0ZWxzZSBpZiAoIXRlbXBsYXRlQnlUeXBlKSB7XG5cdFx0XHRjb25zdCBiciA9IGh0bWxUb0VsZW1lbnQoJzxicj4nKTtcblx0XHRcdHRlbXBsYXRlLmFwcGVuZChicik7XG5cdFx0XHR0ZW1wbGF0ZS5hcHBlbmQoaHRtbFRvRWxlbWVudChgPHNwYW4+JHtuZXdEZXNjcmlwdGlvbn08L3NwYW4+YCkpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0ZW1wbGF0ZTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2Rcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcpIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNTZWFyY2hCeUpzb25Db2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvbiA/IGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQgOiBudWxsO1xuXHR9XG5cblx0c3RhdGljIGF1dG9Jbml0KCkge1xuXHRcdGlmICghd2luZG93LiRoc1NlYXJjaEJ5SnNvbkNvbGxlY3Rpb24pXG5cdFx0XHR3aW5kb3cuJGhzU2VhcmNoQnlKc29uQ29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1zZWFyY2gtYnktanNvbl06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzU2VhcmNoQnlKc29uQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNTZWFyY2hCeUpzb24oZWwpO1xuXHRcdFx0fSk7XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU1NlYXJjaEJ5SnNvbjogRnVuY3Rpb247XG5cdFx0JGhzU2VhcmNoQnlKc29uQ29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTU2VhcmNoQnlKc29uPltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU1NlYXJjaEJ5SnNvbi5hdXRvSW5pdCgpO1xuXG5cdC8vIFVuY29tbWVudCBmb3IgZGVidWdcblx0Ly8gY29uc29sZS5sb2coJ1NlYXJjaCBieSBKU09OIGNvbGxlY3Rpb246Jywgd2luZG93LiRoc1NlYXJjaEJ5SnNvbkNvbGxlY3Rpb24pO1xufSk7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHR3aW5kb3cuSFNTZWFyY2hCeUpzb24gPSBIU1NlYXJjaEJ5SnNvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSFNTZWFyY2hCeUpzb247XG4iLCAiLypcbiAqIEhTU2Nyb2xsc3B5XG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBnZXRDbGFzc1Byb3BlcnR5LCBkaXNwYXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSVNjcm9sbHNweSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTU2Nyb2xsc3B5IGV4dGVuZHMgSFNCYXNlUGx1Z2luPHt9PiBpbXBsZW1lbnRzIElTY3JvbGxzcHkge1xuXHRwcml2YXRlIGFjdGl2ZVNlY3Rpb246IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBjb250ZW50SWQ6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgY29udGVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGxpbmtzOiBOb2RlTGlzdE9mPEhUTUxBbmNob3JFbGVtZW50PiB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgc2VjdGlvbnM6IEhUTUxFbGVtZW50W10gfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHNjcm9sbGFibGVJZDogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBzY3JvbGxhYmxlOiBIVE1MRWxlbWVudCB8IERvY3VtZW50O1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMpO1xuXG5cdFx0dGhpcy5hY3RpdmVTZWN0aW9uID0gbnVsbDtcblx0XHR0aGlzLmNvbnRlbnRJZCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLXNjcm9sbHNweScpO1xuXHRcdHRoaXMuY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jb250ZW50SWQpO1xuXHRcdHRoaXMubGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tocmVmXScpO1xuXHRcdC8vIHRoaXMuc2VjdGlvbnMgPSB0aGlzLmNvbnRlbnQuY2hpbGRyZW47XG5cdFx0dGhpcy5zZWN0aW9ucyA9IFtdO1xuXHRcdHRoaXMuc2Nyb2xsYWJsZUlkID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXG5cdFx0XHQnZGF0YS1ocy1zY3JvbGxzcHktc2Nyb2xsYWJsZS1wYXJlbnQnLFxuXHRcdCk7XG5cdFx0dGhpcy5zY3JvbGxhYmxlID0gdGhpcy5zY3JvbGxhYmxlSWRcblx0XHRcdD8gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zY3JvbGxhYmxlSWQpIGFzIEhUTUxFbGVtZW50KVxuXHRcdFx0OiAoZG9jdW1lbnQgYXMgRG9jdW1lbnQpO1xuXG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNTY3JvbGxzcHlDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMubGlua3MuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdHRoaXMuc2VjdGlvbnMucHVzaChcblx0XHRcdFx0dGhpcy5zY3JvbGxhYmxlLnF1ZXJ5U2VsZWN0b3IoZWwuZ2V0QXR0cmlidXRlKCdocmVmJykpLFxuXHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdEFycmF5LmZyb20odGhpcy5zZWN0aW9ucykuZm9yRWFjaCgoc2VjdGlvbjogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdGlmICghc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2lkJykpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0dGhpcy5zY3JvbGxhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIChldnQpID0+XG5cdFx0XHRcdHRoaXMudXBkYXRlKGV2dCwgc2VjdGlvbiksXG5cdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5saW5rcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSA9PT0gJ2phdmFzY3JpcHQ6OycpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0XHR0aGlzLnNjcm9sbFRvKGVsKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGUoZXZ0OiBFdmVudCwgc2VjdGlvbjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBnbG9iYWxPZmZzZXQgPSBwYXJzZUludChcblx0XHRcdGdldENsYXNzUHJvcGVydHkodGhpcy5lbCwgJy0tc2Nyb2xsc3B5LW9mZnNldCcsICcwJyksXG5cdFx0KTtcblx0XHRjb25zdCB1c2VyT2Zmc2V0ID1cblx0XHRcdHBhcnNlSW50KGdldENsYXNzUHJvcGVydHkoc2VjdGlvbiwgJy0tc2Nyb2xsc3B5LW9mZnNldCcpKSB8fCBnbG9iYWxPZmZzZXQ7XG5cdFx0Y29uc3Qgc2Nyb2xsYWJsZVBhcmVudE9mZnNldCA9XG5cdFx0XHRldnQudGFyZ2V0ID09PSBkb2N1bWVudFxuXHRcdFx0XHQ/IDBcblx0XHRcdFx0OiBwYXJzZUludChcblx0XHRcdFx0XHRcdFN0cmluZygoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKSxcblx0XHRcdFx0XHQpO1xuXHRcdGNvbnN0IHRvcE9mZnNldCA9XG5cdFx0XHRwYXJzZUludChTdHJpbmcoc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApKSAtXG5cdFx0XHR1c2VyT2Zmc2V0IC1cblx0XHRcdHNjcm9sbGFibGVQYXJlbnRPZmZzZXQ7XG5cdFx0Y29uc3QgaGVpZ2h0ID0gc2VjdGlvbi5vZmZzZXRIZWlnaHQ7XG5cblx0XHRpZiAodG9wT2Zmc2V0IDw9IDAgJiYgdG9wT2Zmc2V0ICsgaGVpZ2h0ID4gMCkge1xuXHRcdFx0aWYgKHRoaXMuYWN0aXZlU2VjdGlvbiA9PT0gc2VjdGlvbikgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHR0aGlzLmxpbmtzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGN1cnJlbnQgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHRcdGBbaHJlZj1cIiMke3NlY3Rpb24uZ2V0QXR0cmlidXRlKCdpZCcpfVwiXWAsXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoY3VycmVudCkge1xuXHRcdFx0XHRjdXJyZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG5cdFx0XHRcdGNvbnN0IGdyb3VwID0gY3VycmVudC5jbG9zZXN0KCdbZGF0YS1ocy1zY3JvbGxzcHktZ3JvdXBdJyk7XG5cblx0XHRcdFx0aWYgKGdyb3VwKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50TGluayA9IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJ1tocmVmXScpO1xuXG5cdFx0XHRcdFx0aWYgKHBhcmVudExpbmspIHBhcmVudExpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5hY3RpdmVTZWN0aW9uID0gc2VjdGlvbjtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNjcm9sbFRvKGxpbms6IEhUTUxBbmNob3JFbGVtZW50KSB7XG5cdFx0Y29uc3QgdGFyZ2V0SWQgPSBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuXHRcdGNvbnN0IHRhcmdldDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldElkKTtcblx0XHRjb25zdCBnbG9iYWxPZmZzZXQgPSBwYXJzZUludChcblx0XHRcdGdldENsYXNzUHJvcGVydHkodGhpcy5lbCwgJy0tc2Nyb2xsc3B5LW9mZnNldCcsICcwJyksXG5cdFx0KTtcblx0XHRjb25zdCB1c2VyT2Zmc2V0ID1cblx0XHRcdHBhcnNlSW50KGdldENsYXNzUHJvcGVydHkodGFyZ2V0LCAnLS1zY3JvbGxzcHktb2Zmc2V0JykpIHx8IGdsb2JhbE9mZnNldDtcblx0XHRjb25zdCBzY3JvbGxhYmxlUGFyZW50T2Zmc2V0ID1cblx0XHRcdHRoaXMuc2Nyb2xsYWJsZSA9PT0gZG9jdW1lbnRcblx0XHRcdFx0PyAwXG5cdFx0XHRcdDogKHRoaXMuc2Nyb2xsYWJsZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0VG9wO1xuXHRcdGNvbnN0IHRvcE9mZnNldCA9IHRhcmdldC5vZmZzZXRUb3AgLSB1c2VyT2Zmc2V0IC0gc2Nyb2xsYWJsZVBhcmVudE9mZnNldDtcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5zY3JvbGxhYmxlID09PSBkb2N1bWVudCA/IHdpbmRvdyA6IHRoaXMuc2Nyb2xsYWJsZTtcblx0XHRjb25zdCBzY3JvbGxGbiA9ICgpID0+IHtcblx0XHRcdHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpKTtcblxuXHRcdFx0aWYgKCdzY3JvbGxUbycgaW4gdmlldykge1xuXHRcdFx0XHR2aWV3LnNjcm9sbFRvKHtcblx0XHRcdFx0XHR0b3A6IHRvcE9mZnNldCxcblx0XHRcdFx0XHRsZWZ0OiAwLFxuXHRcdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJyxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGJlZm9yZVNjcm9sbCA9IHRoaXMuZmlyZUV2ZW50KCdiZWZvcmVTY3JvbGwnLCB0aGlzLmVsKTtcblx0XHRkaXNwYXRjaCgnYmVmb3JlU2Nyb2xsLmhzLnNjcm9sbHNweScsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXG5cdFx0aWYgKGJlZm9yZVNjcm9sbCBpbnN0YW5jZW9mIFByb21pc2UpIGJlZm9yZVNjcm9sbC50aGVuKCgpID0+IHNjcm9sbEZuKCkpO1xuXHRcdGVsc2Ugc2Nyb2xsRm4oKTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2RzXG5cdHN0YXRpYyBnZXRJbnN0YW5jZSh0YXJnZXQ6IEhUTUxFbGVtZW50LCBpc0luc3RhbmNlID0gZmFsc2UpIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNTY3JvbGxzcHlDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50LmVsXG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzU2Nyb2xsc3B5Q29sbGVjdGlvbikgd2luZG93LiRoc1Njcm9sbHNweUNvbGxlY3Rpb24gPSBbXTtcblxuXHRcdGRvY3VtZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHMtc2Nyb2xsc3B5XTpub3QoLi0tcHJldmVudC1vbi1sb2FkLWluaXQpJylcblx0XHRcdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzU2Nyb2xsc3B5Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNTY3JvbGxzcHkoZWwpO1xuXHRcdFx0fSk7XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU1Njcm9sbHNweTogRnVuY3Rpb247XG5cdFx0JGhzU2Nyb2xsc3B5Q29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTU2Nyb2xsc3B5PltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU1Njcm9sbHNweS5hdXRvSW5pdCgpO1xuXG5cdC8vIFVuY29tbWVudCBmb3IgZGVidWdcblx0Ly8gY29uc29sZS5sb2coJ1Njcm9sbHNweSBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNTY3JvbGxzcHlDb2xsZWN0aW9uKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTU2Nyb2xsc3B5ID0gSFNTY3JvbGxzcHk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTU2Nyb2xsc3B5O1xuIiwgIi8qXG4gKiBIU1NlbGVjdFxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHtcblx0aXNFbm91Z2hTcGFjZSxcblx0ZGVib3VuY2UsXG5cdGRpc3BhdGNoLFxuXHRhZnRlclRyYW5zaXRpb24sXG5cdGh0bWxUb0VsZW1lbnQsXG5cdGNsYXNzVG9DbGFzc0xpc3QsXG59IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHtcblx0SVNlbGVjdCxcblx0SVNlbGVjdE9wdGlvbnMsXG5cdElTaW5nbGVPcHRpb24sXG5cdElTaW5nbGVPcHRpb25PcHRpb25zLFxufSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgSFNCYXNlUGx1Z2luIGZyb20gJy4uL2Jhc2UtcGx1Z2luJztcbmltcG9ydCB7IElDb2xsZWN0aW9uSXRlbSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgeyBTRUxFQ1RfQUNDRVNTSUJJTElUWV9LRVlfU0VUIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJztcblxuY2xhc3MgSFNTZWxlY3QgZXh0ZW5kcyBIU0Jhc2VQbHVnaW48SVNlbGVjdE9wdGlvbnM+IGltcGxlbWVudHMgSVNlbGVjdCB7XG5cdHZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgcGxhY2Vob2xkZXI6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgaGFzU2VhcmNoOiBib29sZWFuO1xuXHRwcml2YXRlIHJlYWRvbmx5IHByZXZlbnRTZWFyY2hGb2N1czogYm9vbGVhbjtcblx0cHJpdmF0ZSByZWFkb25seSBtb2RlOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHZpZXdwb3J0OiBIVE1MRWxlbWVudCB8IG51bGw7XG5cblx0aXNPcGVuZWQ6IGJvb2xlYW4gfCBudWxsO1xuXHRpc011bHRpcGxlOiBib29sZWFuIHwgbnVsbDtcblx0aXNEaXNhYmxlZDogYm9vbGVhbiB8IG51bGw7XG5cdHNlbGVjdGVkSXRlbXM6IHN0cmluZ1tdO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgdG9nZ2xlVGFnOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHRvZ2dsZUNsYXNzZXM6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgdG9nZ2xlQ291bnRUZXh0OiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHRvZ2dsZUNvdW50VGV4dE1pbkl0ZW1zOiBudW1iZXIgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHdyYXBwZXJDbGFzc2VzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHRhZ3NJdGVtVGVtcGxhdGU6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgdGFnc0l0ZW1DbGFzc2VzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IHRhZ3NJbnB1dENsYXNzZXM6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgZHJvcGRvd25UYWc6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgZHJvcGRvd25DbGFzc2VzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGRyb3Bkb3duRGlyZWN0aW9uQ2xhc3Nlczoge1xuXHRcdHRvcD86IHN0cmluZztcblx0XHRib3R0b20/OiBzdHJpbmc7XG5cdH0gfCBudWxsO1xuXHRwdWJsaWMgZHJvcGRvd25TcGFjZTogbnVtYmVyIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBzZWFyY2hXcmFwcGVyVGVtcGxhdGU6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgc2VhcmNoUGxhY2Vob2xkZXI6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgc2VhcmNoQ2xhc3Nlczogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBzZWFyY2hXcmFwcGVyQ2xhc3Nlczogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSBzZWFyY2hOb1Jlc3VsdFRleHQ6IHN0cmluZyB8IG51bGw7XG5cdHByaXZhdGUgc2VhcmNoTm9SZXN1bHRDbGFzc2VzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IG9wdGlvblRhZzogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBvcHRpb25UZW1wbGF0ZTogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBvcHRpb25DbGFzc2VzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGRlc2NyaXB0aW9uQ2xhc3Nlczogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBpY29uQ2xhc3Nlczogc3RyaW5nIHwgbnVsbDtcblxuXHRwcml2YXRlIGFuaW1hdGlvbkluUHJvY2VzczogYm9vbGVhbjtcblxuXHRwcml2YXRlIHdyYXBwZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSB0b2dnbGU6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSB0b2dnbGVUZXh0V3JhcHBlcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHRhZ3NJbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIGRyb3Bkb3duOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgc2VhcmNoV3JhcHBlcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHNlYXJjaDogSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgc2VhcmNoTm9SZXN1bHQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBzZWxlY3RPcHRpb25zOiBJU2luZ2xlT3B0aW9uW10gfCBbXTtcblx0cHJpdmF0ZSBleHRyYU1hcmt1cDogc3RyaW5nIHwgc3RyaW5nW10gfCBudWxsO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgaXNBZGRUYWdPbkVudGVyOiBib29sZWFuO1xuXG5cdHByaXZhdGUgdGFnc0lucHV0SGVscGVyOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cblx0Y29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogSVNlbGVjdE9wdGlvbnMpIHtcblx0XHRzdXBlcihlbCwgb3B0aW9ucyk7XG5cblx0XHRjb25zdCBkYXRhID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLXNlbGVjdCcpO1xuXHRcdGNvbnN0IGRhdGFPcHRpb25zOiBJU2VsZWN0T3B0aW9ucyA9IGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XG5cdFx0Y29uc3QgY29uY2F0T3B0aW9ucyA9IHtcblx0XHRcdC4uLmRhdGFPcHRpb25zLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHR9O1xuXG5cdFx0dGhpcy52YWx1ZSA9XG5cdFx0XHRjb25jYXRPcHRpb25zPy52YWx1ZSB8fCAodGhpcy5lbCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUgfHwgbnVsbDtcblx0XHR0aGlzLnBsYWNlaG9sZGVyID0gY29uY2F0T3B0aW9ucz8ucGxhY2Vob2xkZXIgfHwgJ1NlbGVjdC4uLic7XG5cdFx0dGhpcy5oYXNTZWFyY2ggPSBjb25jYXRPcHRpb25zPy5oYXNTZWFyY2ggfHwgZmFsc2U7XG5cdFx0dGhpcy5wcmV2ZW50U2VhcmNoRm9jdXMgPSBjb25jYXRPcHRpb25zPy5wcmV2ZW50U2VhcmNoRm9jdXMgfHwgZmFsc2U7XG5cdFx0dGhpcy5tb2RlID0gY29uY2F0T3B0aW9ucz8ubW9kZSB8fCAnZGVmYXVsdCc7XG5cdFx0dGhpcy52aWV3cG9ydCA9XG5cdFx0XHR0eXBlb2YgY29uY2F0T3B0aW9ucz8udmlld3BvcnQgIT09ICd1bmRlZmluZWQnXG5cdFx0XHRcdD8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25jYXRPcHRpb25zPy52aWV3cG9ydClcblx0XHRcdFx0OiBudWxsO1xuXHRcdHRoaXMuaXNPcGVuZWQgPSBCb29sZWFuKGNvbmNhdE9wdGlvbnM/LmlzT3BlbmVkKSB8fCBmYWxzZTtcblx0XHR0aGlzLmlzTXVsdGlwbGUgPSB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSB8fCBmYWxzZTtcblx0XHR0aGlzLmlzRGlzYWJsZWQgPSB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSB8fCBmYWxzZTtcblx0XHR0aGlzLnNlbGVjdGVkSXRlbXMgPSBbXTtcblx0XHR0aGlzLndyYXBwZXJDbGFzc2VzID0gY29uY2F0T3B0aW9ucz8ud3JhcHBlckNsYXNzZXMgfHwgbnVsbDtcblx0XHR0aGlzLnRvZ2dsZVRhZyA9IGNvbmNhdE9wdGlvbnM/LnRvZ2dsZVRhZyB8fCBudWxsO1xuXHRcdHRoaXMudG9nZ2xlQ2xhc3NlcyA9IGNvbmNhdE9wdGlvbnM/LnRvZ2dsZUNsYXNzZXMgfHwgbnVsbDtcblx0XHR0aGlzLnRvZ2dsZUNvdW50VGV4dCA9IGNvbmNhdE9wdGlvbnM/LnRvZ2dsZUNvdW50VGV4dCB8fCBudWxsO1xuXHRcdHRoaXMudG9nZ2xlQ291bnRUZXh0TWluSXRlbXMgPSBjb25jYXRPcHRpb25zPy50b2dnbGVDb3VudFRleHRNaW5JdGVtcyB8fCAxO1xuXHRcdHRoaXMudGFnc0l0ZW1UZW1wbGF0ZSA9IGNvbmNhdE9wdGlvbnM/LnRhZ3NJdGVtVGVtcGxhdGUgfHwgbnVsbDtcblx0XHR0aGlzLnRhZ3NJdGVtQ2xhc3NlcyA9IGNvbmNhdE9wdGlvbnM/LnRhZ3NJdGVtQ2xhc3NlcyB8fCBudWxsO1xuXHRcdHRoaXMudGFnc0lucHV0Q2xhc3NlcyA9IGNvbmNhdE9wdGlvbnM/LnRhZ3NJbnB1dENsYXNzZXMgfHwgbnVsbDtcblx0XHR0aGlzLmRyb3Bkb3duVGFnID0gY29uY2F0T3B0aW9ucz8uZHJvcGRvd25UYWcgfHwgbnVsbDtcblx0XHR0aGlzLmRyb3Bkb3duQ2xhc3NlcyA9IGNvbmNhdE9wdGlvbnM/LmRyb3Bkb3duQ2xhc3NlcyB8fCBudWxsO1xuXHRcdHRoaXMuZHJvcGRvd25EaXJlY3Rpb25DbGFzc2VzID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/LmRyb3Bkb3duRGlyZWN0aW9uQ2xhc3NlcyB8fCBudWxsO1xuXHRcdHRoaXMuZHJvcGRvd25TcGFjZSA9IGNvbmNhdE9wdGlvbnM/LmRyb3Bkb3duU3BhY2UgfHwgMTA7XG5cdFx0dGhpcy5zZWFyY2hXcmFwcGVyVGVtcGxhdGUgPSBjb25jYXRPcHRpb25zPy5zZWFyY2hXcmFwcGVyVGVtcGxhdGUgfHwgbnVsbDtcblx0XHR0aGlzLnNlYXJjaFdyYXBwZXJDbGFzc2VzID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/LnNlYXJjaFdyYXBwZXJDbGFzc2VzIHx8ICdiZy13aGl0ZSBwLTIgc3RpY2t5IHRvcC0wJztcblx0XHR0aGlzLnNlYXJjaENsYXNzZXMgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucz8uc2VhcmNoQ2xhc3NlcyB8fFxuXHRcdFx0J2Jsb2NrIHctW2NhbGMoMTAwJS0ycmVtKV0gdGV4dC1zbSBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1tZCBmb2N1czpib3JkZXItYmx1ZS01MDAgZm9jdXM6cmluZy1ibHVlLTUwMCBkYXJrOmJnLXNsYXRlLTkwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS00MDAgcHktMiBweC0zIG15LTIgbXgtNCc7XG5cdFx0dGhpcy5zZWFyY2hQbGFjZWhvbGRlciA9IGNvbmNhdE9wdGlvbnM/LnNlYXJjaFBsYWNlaG9sZGVyIHx8ICdTZWFyY2guLi4nO1xuXHRcdHRoaXMuc2VhcmNoTm9SZXN1bHRUZXh0ID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/LnNlYXJjaE5vUmVzdWx0VGV4dCB8fCAnTm8gb3B0aW9ucyBmb3VuZC4uLic7XG5cdFx0dGhpcy5zZWFyY2hOb1Jlc3VsdENsYXNzZXMgPVxuXHRcdFx0Y29uY2F0T3B0aW9ucz8uc2VhcmNoTm9SZXN1bHRDbGFzc2VzIHx8ICdweC00IHRleHQtc20nO1xuXHRcdHRoaXMub3B0aW9uVGVtcGxhdGUgPSBjb25jYXRPcHRpb25zPy5vcHRpb25UZW1wbGF0ZSB8fCBudWxsO1xuXHRcdHRoaXMub3B0aW9uVGFnID0gY29uY2F0T3B0aW9ucz8ub3B0aW9uVGFnIHx8IG51bGw7XG5cdFx0dGhpcy5vcHRpb25DbGFzc2VzID0gY29uY2F0T3B0aW9ucz8ub3B0aW9uQ2xhc3NlcyB8fCBudWxsO1xuXHRcdHRoaXMuZXh0cmFNYXJrdXAgPSBjb25jYXRPcHRpb25zPy5leHRyYU1hcmt1cCB8fCBudWxsO1xuXHRcdHRoaXMuZGVzY3JpcHRpb25DbGFzc2VzID0gY29uY2F0T3B0aW9ucz8uZGVzY3JpcHRpb25DbGFzc2VzIHx8IG51bGw7XG5cdFx0dGhpcy5pY29uQ2xhc3NlcyA9IGNvbmNhdE9wdGlvbnM/Lmljb25DbGFzc2VzIHx8IG51bGw7XG5cdFx0dGhpcy5pc0FkZFRhZ09uRW50ZXIgPSBjb25jYXRPcHRpb25zPy5pc0FkZFRhZ09uRW50ZXIgPz8gdHJ1ZTtcblxuXHRcdHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzID0gZmFsc2U7XG5cdFx0dGhpcy5zZWxlY3RPcHRpb25zID0gW107XG5cblx0XHR0aGlzLnRhZ3NJbnB1dEhlbHBlciA9IG51bGw7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpIHtcblx0XHR0aGlzLmNyZWF0ZUNvbGxlY3Rpb24od2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24sIHRoaXMpO1xuXG5cdFx0dGhpcy5idWlsZCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZCgpIHtcblx0XHR0aGlzLmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cblx0XHRpZiAodGhpcy5lbC5jaGlsZHJlbikge1xuXHRcdFx0QXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKVxuXHRcdFx0XHQuZmlsdGVyKChlbDogSFRNTE9wdGlvbkVsZW1lbnQpID0+IGVsLnZhbHVlICYmIGVsLnZhbHVlICE9PSAnJylcblx0XHRcdFx0LmZvckVhY2goKGVsOiBIVE1MT3B0aW9uRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtc2VsZWN0LW9wdGlvbicpO1xuXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RPcHRpb25zID0gW1xuXHRcdFx0XHRcdFx0Li4udGhpcy5zZWxlY3RPcHRpb25zLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogZWwudGV4dENvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdHZhbDogZWwudmFsdWUsXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnM6IGRhdGEgIT09ICd1bmRlZmluZWQnID8gSlNPTi5wYXJzZShkYXRhKSA6IG51bGwsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdF07XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcblx0XHRcdGNvbnN0IHNlbGVjdGVkT3B0aW9ucyA9IEFycmF5LmZyb20oXG5cdFx0XHRcdCh0aGlzLmVsIGFzIEhUTUxTZWxlY3RFbGVtZW50KS5vcHRpb25zLFxuXHRcdFx0KS5maWx0ZXIoKGVsKSA9PiBlbC5zZWxlY3RlZCk7XG5cblx0XHRcdGlmIChzZWxlY3RlZE9wdGlvbnMpIHtcblx0XHRcdFx0Y29uc3QgdmFsdWVzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0XHRcdHNlbGVjdGVkT3B0aW9ucy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRcdHZhbHVlcy5wdXNoKGVsLnZhbHVlKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbHVlcztcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmJ1aWxkV3JhcHBlcigpO1xuXHRcdGlmICh0aGlzLm1vZGUgPT09ICd0YWdzJykgdGhpcy5idWlsZFRhZ3MoKTtcblx0XHRlbHNlIHRoaXMuYnVpbGRUb2dnbGUoKTtcblx0XHR0aGlzLmJ1aWxkRHJvcGRvd24oKTtcblx0XHRpZiAodGhpcy5leHRyYU1hcmt1cCkgdGhpcy5idWlsZEV4dHJhTWFya3VwKCk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkV3JhcHBlcigpIHtcblx0XHR0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHR0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgnaHMtc2VsZWN0JywgJ3JlbGF0aXZlJyk7XG5cblx0XHRpZiAodGhpcy5tb2RlID09PSAndGFncycpIHtcblx0XHRcdHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCEoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtaHMtc2VsZWN0LWRyb3Bkb3duXScpICYmXG5cdFx0XHRcdFx0IShldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS10YWctdmFsdWVdJylcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0dGhpcy50YWdzSW5wdXQuZm9jdXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMud3JhcHBlckNsYXNzZXMpXG5cdFx0XHRjbGFzc1RvQ2xhc3NMaXN0KHRoaXMud3JhcHBlckNsYXNzZXMsIHRoaXMud3JhcHBlcik7XG5cblx0XHR0aGlzLmVsLmJlZm9yZSh0aGlzLndyYXBwZXIpO1xuXG5cdFx0dGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLmVsKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRFeHRyYU1hcmt1cCgpIHtcblx0XHRjb25zdCBhcHBlbmRNYXJrdXAgPSAobWFya3VwOiBzdHJpbmcpID0+IHtcblx0XHRcdHRoaXMud3JhcHBlci5hcHBlbmQoaHRtbFRvRWxlbWVudChtYXJrdXApKTtcblx0XHR9O1xuXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodGhpcy5leHRyYU1hcmt1cCkpXG5cdFx0XHR0aGlzLmV4dHJhTWFya3VwLmZvckVhY2goKGVsKSA9PiBhcHBlbmRNYXJrdXAoZWwpKTtcblx0XHRlbHNlIGFwcGVuZE1hcmt1cCh0aGlzLmV4dHJhTWFya3VwKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRUb2dnbGUoKSB7XG5cdFx0bGV0IGljb24sIHRpdGxlO1xuXHRcdHRoaXMudG9nZ2xlVGV4dFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0dGhpcy50b2dnbGVUZXh0V3JhcHBlci5jbGFzc0xpc3QuYWRkKCd0cnVuY2F0ZScpO1xuXHRcdHRoaXMudG9nZ2xlID0gaHRtbFRvRWxlbWVudCh0aGlzLnRvZ2dsZVRhZyB8fCAnPGRpdj48L2Rpdj4nKTtcblx0XHRpY29uID0gdGhpcy50b2dnbGUucXVlcnlTZWxlY3RvcignW2RhdGEtaWNvbl0nKTtcblx0XHR0aXRsZSA9IHRoaXMudG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRpdGxlXScpO1xuXG5cdFx0aWYgKCF0aGlzLmlzTXVsdGlwbGUgJiYgaWNvbikgdGhpcy5zZXRUb2dnbGVJY29uKCk7XG5cdFx0aWYgKCF0aGlzLmlzTXVsdGlwbGUgJiYgdGl0bGUpIHRoaXMuc2V0VG9nZ2xlVGl0bGUoKTtcblx0XHRpZiAodGhpcy5pc011bHRpcGxlKSB7XG5cdFx0XHR0aGlzLnRvZ2dsZVRleHRXcmFwcGVyLmlubmVySFRNTCA9IHRoaXMudmFsdWUubGVuZ3RoXG5cdFx0XHRcdD8gdGhpcy5zdHJpbmdGcm9tVmFsdWUoKVxuXHRcdFx0XHQ6IHRoaXMucGxhY2Vob2xkZXI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudG9nZ2xlVGV4dFdyYXBwZXIuaW5uZXJIVE1MID1cblx0XHRcdFx0dGhpcy5nZXRJdGVtQnlWYWx1ZSh0aGlzLnZhbHVlIGFzIHN0cmluZyk/LnRpdGxlIHx8IHRoaXMucGxhY2Vob2xkZXI7XG5cdFx0fVxuXHRcdGlmICghdGl0bGUpIHRoaXMudG9nZ2xlLmFwcGVuZCh0aGlzLnRvZ2dsZVRleHRXcmFwcGVyKTtcblx0XHRpZiAodGhpcy50b2dnbGVDbGFzc2VzKSBjbGFzc1RvQ2xhc3NMaXN0KHRoaXMudG9nZ2xlQ2xhc3NlcywgdGhpcy50b2dnbGUpO1xuXHRcdGlmICh0aGlzLmlzRGlzYWJsZWQpIHRoaXMudG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG5cdFx0aWYgKHRoaXMud3JhcHBlcikgdGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLnRvZ2dsZSk7XG5cblx0XHR0aGlzLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmlzRGlzYWJsZWQpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0aWYgKHRoaXMuaXNPcGVuZWQpIHRoaXMuY2xvc2UoKTtcblx0XHRcdGVsc2UgdGhpcy5vcGVuKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHNldFRvZ2dsZUljb24oKSB7XG5cdFx0Y29uc3QgaWNvbiA9IHRoaXMudG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWljb25dJyk7XG5cdFx0aWNvbi5pbm5lckhUTUwgPSAnJztcblxuXHRcdGlmIChpY29uKSB7XG5cdFx0XHRjb25zdCBpbWcgPSBodG1sVG9FbGVtZW50KFxuXHRcdFx0XHR0aGlzLmdldEl0ZW1CeVZhbHVlKHRoaXMudmFsdWUgYXMgc3RyaW5nKT8ub3B0aW9ucz8uaWNvbiB8fCAnJyxcblx0XHRcdCk7XG5cdFx0XHRpY29uLmFwcGVuZChpbWcpO1xuXG5cdFx0XHRpZiAoIWltZykgaWNvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHRcdGVsc2UgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldFRvZ2dsZVRpdGxlKCkge1xuXHRcdGNvbnN0IHRpdGxlID0gdGhpcy50b2dnbGUucXVlcnlTZWxlY3RvcignW2RhdGEtdGl0bGVdJyk7XG5cdFx0dGl0bGUuY2xhc3NMaXN0LmFkZCgndHJ1bmNhdGUnKTtcblx0XHR0aXRsZS5pbm5lckhUTUwgPSAnJztcblxuXHRcdGlmICh0aXRsZSkge1xuXHRcdFx0Y29uc3QgdGl0bGVUZXh0ID1cblx0XHRcdFx0dGhpcy5nZXRJdGVtQnlWYWx1ZSh0aGlzLnZhbHVlIGFzIHN0cmluZyk/LnRpdGxlIHx8IHRoaXMucGxhY2Vob2xkZXI7XG5cdFx0XHR0aXRsZS5pbm5lckhUTUwgPSB0aXRsZVRleHQ7XG5cblx0XHRcdHRoaXMudG9nZ2xlLmFwcGVuZCh0aXRsZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBidWlsZFRhZ3MoKSB7XG5cdFx0dGhpcy5idWlsZFRhZ3NJbnB1dCgpO1xuXHRcdHRoaXMuc2V0VGFnc0l0ZW1zKCk7XG5cdH1cblxuXHRwcml2YXRlIHJlYXNzaWduVGFnc0lucHV0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXI6IHN0cmluZykge1xuXHRcdCh0aGlzLnRhZ3NJbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuXHRcdHRoaXMudGFnc0lucHV0SGVscGVyLmlubmVySFRNTCA9IHBsYWNlaG9sZGVyO1xuXHRcdHRoaXMuY2FsY3VsYXRlSW5wdXRXaWR0aCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZFRhZ3NJdGVtKHZhbDogc3RyaW5nKSB7XG5cdFx0Y29uc3QgaXRlbSA9IHRoaXMuZ2V0SXRlbUJ5VmFsdWUodmFsKTtcblxuXHRcdGxldCB0ZW1wbGF0ZSwgdGl0bGUsIHJlbW92ZSwgaWNvbjogbnVsbCB8IEhUTUxFbGVtZW50O1xuXG5cdFx0Y29uc3QgbmV3SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdG5ld0l0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLXRhZy12YWx1ZScsIHZhbCk7XG5cdFx0aWYgKHRoaXMudGFnc0l0ZW1DbGFzc2VzKSBjbGFzc1RvQ2xhc3NMaXN0KHRoaXMudGFnc0l0ZW1DbGFzc2VzLCBuZXdJdGVtKTtcblxuXHRcdGlmICh0aGlzLnRhZ3NJdGVtVGVtcGxhdGUpIHtcblx0XHRcdHRlbXBsYXRlID0gaHRtbFRvRWxlbWVudCh0aGlzLnRhZ3NJdGVtVGVtcGxhdGUpO1xuXG5cdFx0XHRuZXdJdGVtLmFwcGVuZCh0ZW1wbGF0ZSk7XG5cdFx0fVxuXG5cdFx0Ly8gSWNvblxuXHRcdGlmIChpdGVtPy5vcHRpb25zPy5pY29uKSB7XG5cdFx0XHRjb25zdCBpbWcgPSBodG1sVG9FbGVtZW50KGl0ZW0/Lm9wdGlvbnM/Lmljb24pO1xuXHRcdFx0aWNvbiA9IHRlbXBsYXRlXG5cdFx0XHRcdD8gdGVtcGxhdGUucXVlcnlTZWxlY3RvcignW2RhdGEtaWNvbl0nKVxuXHRcdFx0XHQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuXHRcdFx0aWNvbi5hcHBlbmQoaW1nKTtcblxuXHRcdFx0aWYgKCF0ZW1wbGF0ZSkgbmV3SXRlbS5hcHBlbmQoaWNvbik7XG5cdFx0fVxuXHRcdGlmIChcblx0XHRcdHRlbXBsYXRlICYmXG5cdFx0XHR0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pY29uXScpICYmXG5cdFx0XHQhaXRlbT8ub3B0aW9ucz8uaWNvblxuXHRcdCkge1xuXHRcdFx0dGVtcGxhdGUucXVlcnlTZWxlY3RvcignW2RhdGEtaWNvbl0nKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHR9XG5cblx0XHQvLyBUaXRsZVxuXHRcdHRpdGxlID0gdGVtcGxhdGVcblx0XHRcdD8gdGVtcGxhdGUucXVlcnlTZWxlY3RvcignW2RhdGEtdGl0bGVdJylcblx0XHRcdDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdHRpdGxlLnRleHRDb250ZW50ID0gaXRlbS50aXRsZSB8fCAnJztcblxuXHRcdGlmICghdGVtcGxhdGUpIG5ld0l0ZW0uYXBwZW5kKHRpdGxlKTtcblxuXHRcdC8vIFJlbW92ZVxuXHRcdGlmICh0ZW1wbGF0ZSkge1xuXHRcdFx0cmVtb3ZlID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvcignW2RhdGEtcmVtb3ZlXScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRyZW1vdmUudGV4dENvbnRlbnQgPSAnWCc7XG5cblx0XHRcdG5ld0l0ZW0uYXBwZW5kKHJlbW92ZSk7XG5cdFx0fVxuXG5cdFx0cmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy52YWx1ZSA9ICh0aGlzLnZhbHVlIGFzIHN0cmluZ1tdKS5maWx0ZXIoKGVsKSA9PiBlbCAhPT0gdmFsKTtcblx0XHRcdHRoaXMuc2VsZWN0ZWRJdGVtcyA9IHRoaXMuc2VsZWN0ZWRJdGVtcy5maWx0ZXIoKGVsKSA9PiBlbCAhPT0gdmFsKTtcblxuXHRcdFx0aWYgKCF0aGlzLnZhbHVlLmxlbmd0aClcblx0XHRcdFx0dGhpcy5yZWFzc2lnblRhZ3NJbnB1dFBsYWNlaG9sZGVyKHRoaXMucGxhY2Vob2xkZXIpO1xuXG5cdFx0XHR0aGlzLnVuc2VsZWN0TXVsdGlwbGVJdGVtcygpO1xuXHRcdFx0dGhpcy5zZWxlY3RNdWx0aXBsZUl0ZW1zKCk7XG5cblx0XHRcdG5ld0l0ZW0ucmVtb3ZlKCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLndyYXBwZXIuYXBwZW5kKG5ld0l0ZW0pO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRJdGVtQnlWYWx1ZSh2YWw6IHN0cmluZykge1xuXHRcdHJldHVybiB0aGlzLnNlbGVjdE9wdGlvbnMuZmluZCgoZWw6IElTaW5nbGVPcHRpb24pID0+IGVsLnZhbCA9PT0gdmFsKTtcblx0fVxuXG5cdHByaXZhdGUgc2V0VGFnc0l0ZW1zKCkge1xuXHRcdGlmICh0aGlzLnZhbHVlKSB7XG5cdFx0XHQodGhpcy52YWx1ZSBhcyBzdHJpbmdbXSkuZm9yRWFjaCgodmFsKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5zZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKHZhbCkpIHRoaXMuYnVpbGRUYWdzSXRlbSh2YWwpO1xuXG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRJdGVtcyA9ICF0aGlzLnNlbGVjdGVkSXRlbXMuaW5jbHVkZXModmFsKVxuXHRcdFx0XHRcdD8gWy4uLnRoaXMuc2VsZWN0ZWRJdGVtcywgdmFsXVxuXHRcdFx0XHRcdDogdGhpcy5zZWxlY3RlZEl0ZW1zO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBidWlsZFRhZ3NJbnB1dCgpIHtcblx0XHR0aGlzLnRhZ3NJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cblx0XHRpZiAodGhpcy50YWdzSW5wdXRDbGFzc2VzKVxuXHRcdFx0Y2xhc3NUb0NsYXNzTGlzdCh0aGlzLnRhZ3NJbnB1dENsYXNzZXMsIHRoaXMudGFnc0lucHV0KTtcblxuXHRcdHRoaXMudGFnc0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gdGhpcy5vcGVuKCkpO1xuXHRcdHRoaXMudGFnc0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gdGhpcy5jYWxjdWxhdGVJbnB1dFdpZHRoKCkpO1xuXHRcdHRoaXMudGFnc0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG5cdFx0XHQnaW5wdXQnLFxuXHRcdFx0ZGVib3VuY2UoKGV2dDogSW5wdXRFdmVudCkgPT5cblx0XHRcdFx0dGhpcy5zZWFyY2hPcHRpb25zKChldnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKSxcblx0XHRcdCksXG5cdFx0KTtcblx0XHR0aGlzLnRhZ3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5rZXkgPT09ICdFbnRlcicgJiYgdGhpcy5pc0FkZFRhZ09uRW50ZXIpIHtcblx0XHRcdFx0Y29uc3QgdmFsID0gKGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG5cblx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0T3B0aW9ucy5maW5kKChlbDogSVNpbmdsZU9wdGlvbikgPT4gZWwudmFsID09PSB2YWwpKVxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdFx0XHR0aGlzLmFkZFNlbGVjdE9wdGlvbih2YWwsIHZhbCk7XG5cdFx0XHRcdHRoaXMuYnVpbGRPcHRpb24odmFsLCB2YWwpO1xuXHRcdFx0XHQoXG5cdFx0XHRcdFx0dGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKGBbZGF0YS12YWx1ZT1cIiR7dmFsfVwiXWApIGFzIEhUTUxFbGVtZW50XG5cdFx0XHRcdCkuY2xpY2soKTtcblxuXHRcdFx0XHR0aGlzLnJlc2V0VGFnc0lucHV0RmllbGQoKTtcblx0XHRcdFx0Ly8gdGhpcy5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLnRhZ3NJbnB1dCk7XG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuYWRqdXN0SW5wdXRXaWR0aCgpO1xuXHRcdFx0dGhpcy5yZWFzc2lnblRhZ3NJbnB1dFBsYWNlaG9sZGVyKFxuXHRcdFx0XHR0aGlzLnZhbHVlLmxlbmd0aCA/ICcnIDogdGhpcy5wbGFjZWhvbGRlcixcblx0XHRcdCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkRHJvcGRvd24oKSB7XG5cdFx0dGhpcy5kcm9wZG93biA9IGh0bWxUb0VsZW1lbnQodGhpcy5kcm9wZG93blRhZyB8fCAnPGRpdj48L2Rpdj4nKTtcblx0XHR0aGlzLmRyb3Bkb3duLnNldEF0dHJpYnV0ZSgnZGF0YS1ocy1zZWxlY3QtZHJvcGRvd24nLCAnJyk7XG5cblx0XHR0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2Fic29sdXRlJywgJ3RvcC1mdWxsJyk7XG5cdFx0aWYgKCF0aGlzLmlzT3BlbmVkKSB0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG5cdFx0aWYgKHRoaXMuZHJvcGRvd25DbGFzc2VzKVxuXHRcdFx0Y2xhc3NUb0NsYXNzTGlzdCh0aGlzLmRyb3Bkb3duQ2xhc3NlcywgdGhpcy5kcm9wZG93bik7XG5cdFx0aWYgKHRoaXMud3JhcHBlcikgdGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLmRyb3Bkb3duKTtcblx0XHRpZiAodGhpcy5kcm9wZG93biAmJiB0aGlzLmhhc1NlYXJjaCkgdGhpcy5idWlsZFNlYXJjaCgpO1xuXHRcdGlmICh0aGlzLnNlbGVjdE9wdGlvbnMpXG5cdFx0XHR0aGlzLnNlbGVjdE9wdGlvbnMuZm9yRWFjaCgocHJvcHM6IElTaW5nbGVPcHRpb24sIGkpID0+XG5cdFx0XHRcdHRoaXMuYnVpbGRPcHRpb24ocHJvcHMudGl0bGUsIHByb3BzLnZhbCwgcHJvcHMub3B0aW9ucywgYCR7aX1gKSxcblx0XHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkU2VhcmNoKCkge1xuXHRcdGxldCBpbnB1dDtcblx0XHR0aGlzLnNlYXJjaFdyYXBwZXIgPSBodG1sVG9FbGVtZW50KFxuXHRcdFx0dGhpcy5zZWFyY2hXcmFwcGVyVGVtcGxhdGUgfHwgJzxkaXY+PC9kaXY+Jyxcblx0XHQpO1xuXHRcdGlmICh0aGlzLnNlYXJjaFdyYXBwZXJDbGFzc2VzKVxuXHRcdFx0Y2xhc3NUb0NsYXNzTGlzdCh0aGlzLnNlYXJjaFdyYXBwZXJDbGFzc2VzLCB0aGlzLnNlYXJjaFdyYXBwZXIpO1xuXHRcdGlucHV0ID0gdGhpcy5zZWFyY2hXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlucHV0XScpO1xuXG5cdFx0dGhpcy5zZWFyY2ggPSBodG1sVG9FbGVtZW50KCc8aW5wdXQgdHlwZT1cInRleHRcIiAvPicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0dGhpcy5zZWFyY2gucGxhY2Vob2xkZXIgPSB0aGlzLnNlYXJjaFBsYWNlaG9sZGVyO1xuXHRcdGlmICh0aGlzLnNlYXJjaENsYXNzZXMpIGNsYXNzVG9DbGFzc0xpc3QodGhpcy5zZWFyY2hDbGFzc2VzLCB0aGlzLnNlYXJjaCk7XG5cblx0XHR0aGlzLnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0J2lucHV0Jyxcblx0XHRcdGRlYm91bmNlKChldnQ6IElucHV0RXZlbnQpID0+XG5cdFx0XHRcdHRoaXMuc2VhcmNoT3B0aW9ucygoZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSksXG5cdFx0XHQpLFxuXHRcdCk7XG5cblx0XHRpZiAoaW5wdXQpIGlucHV0LmFwcGVuZCh0aGlzLnNlYXJjaCk7XG5cdFx0ZWxzZSB0aGlzLnNlYXJjaFdyYXBwZXIuYXBwZW5kKHRoaXMuc2VhcmNoKTtcblxuXHRcdHRoaXMuZHJvcGRvd24uYXBwZW5kKHRoaXMuc2VhcmNoV3JhcHBlcik7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkT3B0aW9uKFxuXHRcdHRpdGxlOiBzdHJpbmcsXG5cdFx0dmFsOiBzdHJpbmcsXG5cdFx0b3B0aW9ucz86IElTaW5nbGVPcHRpb25PcHRpb25zLFxuXHRcdGluZGV4OiBzdHJpbmcgPSAnMScsXG5cdCkge1xuXHRcdGxldCB0ZW1wbGF0ZTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgdGl0bGVXcmFwcGVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBpY29uV3JhcHBlcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZGVzY3JpcHRpb25XcmFwcGVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdFx0Y29uc3Qgb3B0aW9uID0gaHRtbFRvRWxlbWVudCh0aGlzLm9wdGlvblRhZyB8fCAnPGRpdj48L2Rpdj4nKTtcblx0XHRvcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgdmFsKTtcblx0XHRvcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlLXZhbHVlJywgdGl0bGUpO1xuXHRcdG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgaW5kZXgpO1xuXHRcdG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdjdXJzb3ItcG9pbnRlcicpO1xuXHRcdGlmICh0aGlzLm9wdGlvblRlbXBsYXRlKSB7XG5cdFx0XHR0ZW1wbGF0ZSA9IGh0bWxUb0VsZW1lbnQodGhpcy5vcHRpb25UZW1wbGF0ZSk7XG5cblx0XHRcdG9wdGlvbi5hcHBlbmQodGVtcGxhdGUpO1xuXHRcdH1cblx0XHRpZiAodGVtcGxhdGUpIHtcblx0XHRcdHRpdGxlV3JhcHBlciA9IHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRpdGxlXScpO1xuXHRcdFx0dGl0bGVXcmFwcGVyLnRleHRDb250ZW50ID0gdGl0bGUgfHwgJyc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9wdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlIHx8ICcnO1xuXHRcdH1cblx0XHRpZiAob3B0aW9ucykge1xuXHRcdFx0aWYgKG9wdGlvbnMuaWNvbikge1xuXHRcdFx0XHRjb25zdCBpbWcgPSBodG1sVG9FbGVtZW50KG9wdGlvbnMuaWNvbik7XG5cdFx0XHRcdGltZy5jbGFzc0xpc3QuYWRkKCdtdy1mdWxsJyk7XG5cblx0XHRcdFx0aWYgKHRlbXBsYXRlKSB7XG5cdFx0XHRcdFx0aWNvbldyYXBwZXIgPSB0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pY29uXScpO1xuXHRcdFx0XHRcdGljb25XcmFwcGVyLmFwcGVuZChpbWcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGljb24gPSBodG1sVG9FbGVtZW50KCc8ZGl2PjwvZGl2PicpO1xuXHRcdFx0XHRcdGlmICh0aGlzLmljb25DbGFzc2VzKSBjbGFzc1RvQ2xhc3NMaXN0KHRoaXMuaWNvbkNsYXNzZXMsIGljb24pO1xuXG5cdFx0XHRcdFx0aWNvbi5hcHBlbmQoaW1nKTtcblx0XHRcdFx0XHRvcHRpb24uYXBwZW5kKGljb24pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAob3B0aW9ucy5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRpZiAodGVtcGxhdGUpIHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbldyYXBwZXIgPSB0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZXNjcmlwdGlvbl0nKTtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbldyYXBwZXIuYXBwZW5kKG9wdGlvbnMuZGVzY3JpcHRpb24pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gaHRtbFRvRWxlbWVudCgnPGRpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG9wdGlvbnMuZGVzY3JpcHRpb247XG5cdFx0XHRcdFx0aWYgKHRoaXMuZGVzY3JpcHRpb25DbGFzc2VzKVxuXHRcdFx0XHRcdFx0Y2xhc3NUb0NsYXNzTGlzdCh0aGlzLmRlc2NyaXB0aW9uQ2xhc3NlcywgZGVzY3JpcHRpb24pO1xuXG5cdFx0XHRcdFx0b3B0aW9uLmFwcGVuZChkZXNjcmlwdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0dGVtcGxhdGUgJiZcblx0XHRcdHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWljb25dJykgJiZcblx0XHRcdCFvcHRpb25zICYmXG5cdFx0XHQhb3B0aW9ucz8uaWNvblxuXHRcdCkge1xuXHRcdFx0dGVtcGxhdGUucXVlcnlTZWxlY3RvcignW2RhdGEtaWNvbl0nKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy52YWx1ZSAmJlxuXHRcdFx0KHRoaXMuaXNNdWx0aXBsZSA/IHRoaXMudmFsdWUuaW5jbHVkZXModmFsKSA6IHRoaXMudmFsdWUgPT09IHZhbClcblx0XHQpXG5cdFx0XHRvcHRpb24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblxuXHRcdG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub25TZWxlY3RPcHRpb24odmFsKSk7XG5cblx0XHRpZiAodGhpcy5vcHRpb25DbGFzc2VzKSBjbGFzc1RvQ2xhc3NMaXN0KHRoaXMub3B0aW9uQ2xhc3Nlcywgb3B0aW9uKTtcblx0XHRpZiAodGhpcy5kcm9wZG93bikgdGhpcy5kcm9wZG93bi5hcHBlbmQob3B0aW9uKTtcblx0fVxuXG5cdHByaXZhdGUgZGVzdHJveU9wdGlvbih2YWw6IHN0cmluZykge1xuXHRcdGNvbnN0IG9wdGlvbiA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihgW2RhdGEtdmFsdWU9XCIke3ZhbH1cIl1gKTtcblxuXHRcdGlmICghb3B0aW9uKSByZXR1cm4gZmFsc2U7XG5cblx0XHRvcHRpb24ucmVtb3ZlKCk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkT3JpZ2luYWxPcHRpb24oXG5cdFx0dGl0bGU6IHN0cmluZyxcblx0XHR2YWw6IHN0cmluZyxcblx0XHRvcHRpb25zPzogSVNpbmdsZU9wdGlvbk9wdGlvbnMsXG5cdCkge1xuXHRcdGNvbnN0IG9wdGlvbiA9IGh0bWxUb0VsZW1lbnQoJzxvcHRpb24+PC9vcHRpb24+Jyk7XG5cdFx0b3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCB2YWwpO1xuXHRcdG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtc2VsZWN0LW9wdGlvbicsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKTtcblx0XHRvcHRpb24uaW5uZXJUZXh0ID0gdGl0bGU7XG5cblx0XHR0aGlzLmVsLmFwcGVuZChvcHRpb24pO1xuXHR9XG5cblx0cHJpdmF0ZSBkZXN0cm95T3JpZ2luYWxPcHRpb24odmFsOiBzdHJpbmcpIHtcblx0XHRjb25zdCBvcHRpb24gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoYFt2YWx1ZT1cIiR7dmFsfVwiXWApO1xuXG5cdFx0aWYgKCFvcHRpb24pIHJldHVybiBmYWxzZTtcblxuXHRcdG9wdGlvbi5yZW1vdmUoKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRUYWdzSW5wdXRIZWxwZXIoKSB7XG5cdFx0dGhpcy50YWdzSW5wdXRIZWxwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0dGhpcy50YWdzSW5wdXRIZWxwZXIuc3R5bGUuZm9udFNpemUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShcblx0XHRcdHRoaXMudGFnc0lucHV0LFxuXHRcdCkuZm9udFNpemU7XG5cdFx0dGhpcy50YWdzSW5wdXRIZWxwZXIuc3R5bGUuZm9udEZhbWlseSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKFxuXHRcdFx0dGhpcy50YWdzSW5wdXQsXG5cdFx0KS5mb250RmFtaWx5O1xuXHRcdHRoaXMudGFnc0lucHV0SGVscGVyLnN0eWxlLmZvbnRXZWlnaHQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShcblx0XHRcdHRoaXMudGFnc0lucHV0LFxuXHRcdCkuZm9udFdlaWdodDtcblx0XHR0aGlzLnRhZ3NJbnB1dEhlbHBlci5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoXG5cdFx0XHR0aGlzLnRhZ3NJbnB1dCxcblx0XHQpLmxldHRlclNwYWNpbmc7XG5cdFx0dGhpcy50YWdzSW5wdXRIZWxwZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXHRcdHRoaXMudGFnc0lucHV0SGVscGVyLnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJztcblx0XHR0aGlzLnRhZ3NJbnB1dEhlbHBlci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cblx0XHR0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy50YWdzSW5wdXRIZWxwZXIpO1xuXHR9XG5cblx0cHJpdmF0ZSBjYWxjdWxhdGVJbnB1dFdpZHRoKCkge1xuXHRcdHRoaXMudGFnc0lucHV0SGVscGVyLnRleHRDb250ZW50ID1cblx0XHRcdCh0aGlzLnRhZ3NJbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSB8fFxuXHRcdFx0KHRoaXMudGFnc0lucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnBsYWNlaG9sZGVyO1xuXG5cdFx0Y29uc3QgaW5wdXRQYWRkaW5nID1cblx0XHRcdHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMudGFnc0lucHV0KS5wYWRkaW5nTGVmdCkgK1xuXHRcdFx0cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWdzSW5wdXQpLnBhZGRpbmdSaWdodCk7XG5cdFx0Y29uc3QgaW5wdXRCb3JkZXIgPVxuXHRcdFx0cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWdzSW5wdXQpLmJvcmRlckxlZnRXaWR0aCkgK1xuXHRcdFx0cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWdzSW5wdXQpLmJvcmRlclJpZ2h0V2lkdGgpO1xuXHRcdGNvbnN0IG5ld1dpZHRoID1cblx0XHRcdHRoaXMudGFnc0lucHV0SGVscGVyLm9mZnNldFdpZHRoICsgaW5wdXRQYWRkaW5nICsgaW5wdXRCb3JkZXI7XG5cdFx0Y29uc3QgbWF4V2lkdGggPVxuXHRcdFx0dGhpcy53cmFwcGVyLm9mZnNldFdpZHRoIC1cblx0XHRcdChwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLndyYXBwZXIpLnBhZGRpbmdMZWZ0KSArXG5cdFx0XHRcdHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMud3JhcHBlcikucGFkZGluZ1JpZ2h0KSk7XG5cblx0XHQodGhpcy50YWdzSW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkuc3R5bGUud2lkdGggPSBgJHtcblx0XHRcdE1hdGgubWluKG5ld1dpZHRoLCBtYXhXaWR0aCkgKyAyXG5cdFx0fXB4YDtcblx0fVxuXG5cdHByaXZhdGUgYWRqdXN0SW5wdXRXaWR0aCgpIHtcblx0XHR0aGlzLmJ1aWxkVGFnc0lucHV0SGVscGVyKCk7XG5cdFx0dGhpcy5jYWxjdWxhdGVJbnB1dFdpZHRoKCk7XG5cdH1cblxuXHRwcml2YXRlIG9uU2VsZWN0T3B0aW9uKHZhbDogc3RyaW5nKSB7XG5cdFx0dGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcblxuXHRcdGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcblx0XHRcdHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmluY2x1ZGVzKHZhbClcblx0XHRcdFx0PyBBcnJheS5mcm9tKHRoaXMudmFsdWUpLmZpbHRlcigoZWwpID0+IGVsICE9PSB2YWwpXG5cdFx0XHRcdDogWy4uLkFycmF5LmZyb20odGhpcy52YWx1ZSksIHZhbF07XG5cblx0XHRcdHRoaXMuc2VsZWN0TXVsdGlwbGVJdGVtcygpO1xuXHRcdFx0dGhpcy5zZXROZXdWYWx1ZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnZhbHVlID0gdmFsO1xuXG5cdFx0XHR0aGlzLnNlbGVjdFNpbmdsZUl0ZW0oKTtcblx0XHRcdHRoaXMuc2V0TmV3VmFsdWUoKTtcblx0XHR9XG5cblx0XHR0aGlzLmZpcmVFdmVudCgnY2hhbmdlJywgdGhpcy52YWx1ZSk7XG5cdFx0ZGlzcGF0Y2goJ2NoYW5nZS5ocy5zZWxlY3QnLCB0aGlzLmVsLCB0aGlzLnZhbHVlKTtcblxuXHRcdGlmICh0aGlzLm1vZGUgPT09ICd0YWdzJykge1xuXHRcdFx0Y29uc3QgaW50ZXJzZWN0aW9uID0gdGhpcy5zZWxlY3RlZEl0ZW1zLmZpbHRlcihcblx0XHRcdFx0KHgpID0+ICEodGhpcy52YWx1ZSBhcyBzdHJpbmdbXSkuaW5jbHVkZXMoeCksXG5cdFx0XHQpO1xuXHRcdFx0aWYgKGludGVyc2VjdGlvbi5sZW5ndGgpIHtcblx0XHRcdFx0aW50ZXJzZWN0aW9uLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEl0ZW1zID0gdGhpcy5zZWxlY3RlZEl0ZW1zLmZpbHRlcigoZWxJKSA9PiBlbEkgIT09IGVsKTtcblx0XHRcdFx0XHR0aGlzLndyYXBwZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFnLXZhbHVlPVwiJHtlbH1cIl1gKS5yZW1vdmUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMucmVzZXRUYWdzSW5wdXRGaWVsZCgpO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5pc011bHRpcGxlKSB7XG5cdFx0XHRpZiAodGhpcy50b2dnbGUucXVlcnlTZWxlY3RvcignW2RhdGEtaWNvbl0nKSkgdGhpcy5zZXRUb2dnbGVJY29uKCk7XG5cdFx0XHRpZiAodGhpcy50b2dnbGUucXVlcnlTZWxlY3RvcignW2RhdGEtdGl0bGVdJykpIHRoaXMuc2V0VG9nZ2xlVGl0bGUoKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMudmFsdWUubGVuZ3RoICYmIHRoaXMubW9kZSA9PT0gJ3RhZ3MnKVxuXHRcdFx0dGhpcy5yZWFzc2lnblRhZ3NJbnB1dFBsYWNlaG9sZGVyKHRoaXMucGxhY2Vob2xkZXIpO1xuXG5cdFx0aWYgKHRoaXMuaXNPcGVuZWQgJiYgdGhpcy5tb2RlID09PSAndGFncycgJiYgdGhpcy50YWdzSW5wdXQpXG5cdFx0XHR0aGlzLnRhZ3NJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0cHJpdmF0ZSBhZGRTZWxlY3RPcHRpb24oXG5cdFx0dGl0bGU6IHN0cmluZyxcblx0XHR2YWw6IHN0cmluZyxcblx0XHRvcHRpb25zPzogSVNpbmdsZU9wdGlvbk9wdGlvbnMsXG5cdCkge1xuXHRcdHRoaXMuc2VsZWN0T3B0aW9ucyA9IFtcblx0XHRcdC4uLnRoaXMuc2VsZWN0T3B0aW9ucyxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGUsXG5cdFx0XHRcdHZhbCxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdH0sXG5cdFx0XTtcblx0fVxuXG5cdHByaXZhdGUgcmVtb3ZlU2VsZWN0T3B0aW9uKHZhbDogc3RyaW5nKSB7XG5cdFx0Y29uc3QgaGFzT3B0aW9uID0gISF0aGlzLnNlbGVjdE9wdGlvbnMuc29tZShcblx0XHRcdChlbDogSVNpbmdsZU9wdGlvbikgPT4gZWwudmFsID09PSB2YWwsXG5cdFx0KTtcblxuXHRcdGlmICghaGFzT3B0aW9uKSByZXR1cm4gZmFsc2U7XG5cblx0XHR0aGlzLnNlbGVjdE9wdGlvbnMgPSB0aGlzLnNlbGVjdE9wdGlvbnMuZmlsdGVyKFxuXHRcdFx0KGVsOiBJU2luZ2xlT3B0aW9uKSA9PiBlbC52YWwgIT09IHZhbCxcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSByZXNldFRhZ3NJbnB1dEZpZWxkKCkge1xuXHRcdCh0aGlzLnRhZ3NJbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9ICcnO1xuXG5cdFx0dGhpcy5yZWFzc2lnblRhZ3NJbnB1dFBsYWNlaG9sZGVyKCcnKTtcblx0XHR0aGlzLnNlYXJjaE9wdGlvbnMoJycpO1xuXHR9XG5cblx0cHJpdmF0ZSBjbGVhclNlbGVjdGlvbnMoKSB7XG5cdFx0QXJyYXkuZnJvbSh0aGlzLmRyb3Bkb3duLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblx0XHR9KTtcblx0XHRBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRpZiAoKGVsIGFzIEhUTUxPcHRpb25FbGVtZW50KS5zZWxlY3RlZClcblx0XHRcdFx0KGVsIGFzIEhUTUxPcHRpb25FbGVtZW50KS5zZWxlY3RlZCA9IGZhbHNlO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXROZXdWYWx1ZSgpIHtcblx0XHRpZiAodGhpcy5tb2RlID09PSAndGFncycpIHtcblx0XHRcdHRoaXMuc2V0VGFnc0l0ZW1zKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0aGlzLnZhbHVlLmxlbmd0aClcblx0XHRcdFx0dGhpcy50b2dnbGVUZXh0V3JhcHBlci5pbm5lckhUTUwgPSB0aGlzLnN0cmluZ0Zyb21WYWx1ZSgpO1xuXHRcdFx0ZWxzZSB0aGlzLnRvZ2dsZVRleHRXcmFwcGVyLmlubmVySFRNTCA9IHRoaXMucGxhY2Vob2xkZXI7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzdHJpbmdGcm9tVmFsdWUoKSB7XG5cdFx0Y29uc3QgdmFsdWU6IHN0cmluZ1tdID0gW107XG5cblx0XHR0aGlzLnNlbGVjdE9wdGlvbnMuZm9yRWFjaCgoZWw6IElTaW5nbGVPcHRpb24pID0+IHtcblx0XHRcdGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcblx0XHRcdFx0aWYgKHRoaXMudmFsdWUuaW5jbHVkZXMoZWwudmFsKSkgdmFsdWUucHVzaChlbC50aXRsZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodGhpcy52YWx1ZSA9PT0gZWwudmFsKSB2YWx1ZS5wdXNoKGVsLnRpdGxlKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiB0aGlzLnRvZ2dsZUNvdW50VGV4dCAmJlxuXHRcdFx0dGhpcy50b2dnbGVDb3VudFRleHQgIT09ICcnICYmXG5cdFx0XHR2YWx1ZS5sZW5ndGggPj0gdGhpcy50b2dnbGVDb3VudFRleHRNaW5JdGVtc1xuXHRcdFx0PyBgJHt2YWx1ZS5sZW5ndGh9ICR7dGhpcy50b2dnbGVDb3VudFRleHR9YFxuXHRcdFx0OiB2YWx1ZS5qb2luKCcsICcpO1xuXHR9XG5cblx0cHJpdmF0ZSBzZWxlY3RTaW5nbGVJdGVtKCkge1xuXHRcdGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gQXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKS5maW5kKFxuXHRcdFx0KGVsKSA9PiB0aGlzLnZhbHVlID09PSAoZWwgYXMgSFRNTE9wdGlvbkVsZW1lbnQpLnZhbHVlLFxuXHRcdCk7XG5cdFx0KHNlbGVjdGVkT3B0aW9uIGFzIEhUTUxPcHRpb25FbGVtZW50KS5zZWxlY3RlZCA9IHRydWU7XG5cblx0XHRjb25zdCBzZWxlY3RlZEl0ZW0gPSBBcnJheS5mcm9tKHRoaXMuZHJvcGRvd24uY2hpbGRyZW4pLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdHRoaXMudmFsdWUgPT09IChlbCBhcyBIVE1MT3B0aW9uRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyksXG5cdFx0KTtcblx0XHRzZWxlY3RlZEl0ZW0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0fVxuXG5cdHByaXZhdGUgc2VsZWN0TXVsdGlwbGVJdGVtcygpIHtcblx0XHRBcnJheS5mcm9tKHRoaXMuZHJvcGRvd24uY2hpbGRyZW4pXG5cdFx0XHQuZmlsdGVyKChlbCkgPT4gdGhpcy52YWx1ZS5pbmNsdWRlcyhlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKSkpXG5cdFx0XHQuZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJykpO1xuXG5cdFx0QXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKVxuXHRcdFx0LmZpbHRlcigoZWwpID0+IHRoaXMudmFsdWUuaW5jbHVkZXMoKGVsIGFzIEhUTUxPcHRpb25FbGVtZW50KS52YWx1ZSkpXG5cdFx0XHQuZm9yRWFjaCgoZWwpID0+ICgoZWwgYXMgSFRNTE9wdGlvbkVsZW1lbnQpLnNlbGVjdGVkID0gdHJ1ZSkpO1xuXHR9XG5cblx0cHJpdmF0ZSB1bnNlbGVjdE11bHRpcGxlSXRlbXMoKSB7XG5cdFx0QXJyYXkuZnJvbSh0aGlzLmRyb3Bkb3duLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT5cblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyksXG5cdFx0KTtcblx0XHRBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pLmZvckVhY2goXG5cdFx0XHQoZWwpID0+ICgoZWwgYXMgSFRNTE9wdGlvbkVsZW1lbnQpLnNlbGVjdGVkID0gZmFsc2UpLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIHNlYXJjaE9wdGlvbnModmFsOiBzdHJpbmcpIHtcblx0XHRpZiAodGhpcy5zZWFyY2hOb1Jlc3VsdCkge1xuXHRcdFx0dGhpcy5zZWFyY2hOb1Jlc3VsdC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuc2VhcmNoTm9SZXN1bHQgPSBudWxsO1xuXHRcdH1cblx0XHR0aGlzLnNlYXJjaE5vUmVzdWx0ID0gaHRtbFRvRWxlbWVudCgnPHNwYW4+PC9zcGFuPicpO1xuXHRcdHRoaXMuc2VhcmNoTm9SZXN1bHQuaW5uZXJUZXh0ID0gdGhpcy5zZWFyY2hOb1Jlc3VsdFRleHQ7XG5cdFx0Y2xhc3NUb0NsYXNzTGlzdCh0aGlzLnNlYXJjaE5vUmVzdWx0Q2xhc3NlcywgdGhpcy5zZWFyY2hOb1Jlc3VsdCk7XG5cblx0XHRjb25zdCBvcHRpb25zID0gdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12YWx1ZV0nKTtcblx0XHRsZXQgaGFzSXRlbXMgPSBmYWxzZTtcblxuXHRcdG9wdGlvbnMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdGNvbnN0IG9wdGlvblZhbCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZS12YWx1ZScpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICghb3B0aW9uVmFsLmluY2x1ZGVzKHZhbC50b0xvY2FsZUxvd2VyQ2FzZSgpKSkgZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cdFx0XHRcdGhhc0l0ZW1zID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICghaGFzSXRlbXMpIHRoaXMuZHJvcGRvd24uYXBwZW5kKHRoaXMuc2VhcmNoTm9SZXN1bHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBlcmFzZVRvZ2dsZUljb24oKSB7XG5cdFx0Y29uc3QgaWNvbiA9IHRoaXMudG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWljb25dJyk7XG5cblx0XHRpZiAoaWNvbikge1xuXHRcdFx0aWNvbi5pbm5lckhUTUwgPSBudWxsO1xuXHRcdFx0aWNvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGVyYXNlVG9nZ2xlVGl0bGUoKSB7XG5cdFx0Y29uc3QgdGl0bGUgPSB0aGlzLnRvZ2dsZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS10aXRsZV0nKTtcblxuXHRcdGlmICh0aXRsZSkge1xuXHRcdFx0dGl0bGUuaW5uZXJIVE1MID0gdGhpcy5wbGFjZWhvbGRlcjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50b2dnbGVUZXh0V3JhcHBlci5pbm5lckhUTUwgPSB0aGlzLnBsYWNlaG9sZGVyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1YmxpYyBtZXRob2RzXG5cdHB1YmxpYyBkZXN0cm95KCkge1xuXHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuZWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0XHR0aGlzLmVsLnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRwYXJlbnQucHJlcGVuZCh0aGlzLmVsKTtcblx0XHRwYXJlbnQucXVlcnlTZWxlY3RvcignLmhzLXNlbGVjdCcpLnJlbW92ZSgpO1xuXHRcdHRoaXMud3JhcHBlciA9IG51bGw7XG5cdH1cblxuXHRwdWJsaWMgb3BlbigpIHtcblx0XHRpZiAodGhpcy5hbmltYXRpb25JblByb2Nlc3MpIHJldHVybiBmYWxzZTtcblxuXHRcdHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzID0gdHJ1ZTtcblxuXHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cblx0XHR0aGlzLnJlY2FsY3VsYXRlRGlyZWN0aW9uKCk7XG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMud3JhcHBlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG5cdFx0XHRpZiAodGhpcy5oYXNTZWFyY2ggJiYgIXRoaXMucHJldmVudFNlYXJjaEZvY3VzKSB0aGlzLnNlYXJjaC5mb2N1cygpO1xuXG5cdFx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5pc09wZW5lZCA9IHRydWU7XG5cdH1cblxuXHRwdWJsaWMgY2xvc2UoKSB7XG5cdFx0aWYgKHRoaXMuYW5pbWF0aW9uSW5Qcm9jZXNzKSByZXR1cm4gZmFsc2U7XG5cblx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IHRydWU7XG5cblx0XHR0aGlzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0dGhpcy5kcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnLCAnYm90dG9tLWZ1bGwnLCAndG9wLWZ1bGwnKTtcblx0XHRpZiAodGhpcy5kcm9wZG93bkRpcmVjdGlvbkNsYXNzZXM/LmJvdHRvbSlcblx0XHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmRyb3Bkb3duRGlyZWN0aW9uQ2xhc3Nlcy5ib3R0b20pO1xuXHRcdGlmICh0aGlzLmRyb3Bkb3duRGlyZWN0aW9uQ2xhc3Nlcz8udG9wKVxuXHRcdFx0dGhpcy5kcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZHJvcGRvd25EaXJlY3Rpb25DbGFzc2VzLnRvcCk7XG5cdFx0dGhpcy5kcm9wZG93bi5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblx0XHR0aGlzLmRyb3Bkb3duLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcnO1xuXG5cdFx0YWZ0ZXJUcmFuc2l0aW9uKHRoaXMuZHJvcGRvd24sICgpID0+IHtcblx0XHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0XHRpZiAodGhpcy5oYXNTZWFyY2gpIHtcblx0XHRcdFx0dGhpcy5zZWFyY2gudmFsdWUgPSAnJztcblx0XHRcdFx0dGhpcy5zZWFyY2guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pKTtcblx0XHRcdFx0dGhpcy5zZWFyY2guYmx1cigpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmFuaW1hdGlvbkluUHJvY2VzcyA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5kcm9wZG93blxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJy5ocy1zZWxlY3Qtb3B0aW9uLWhpZ2hsaWdodGVkJylcblx0XHRcdD8uY2xhc3NMaXN0LnJlbW92ZSgnaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdHRoaXMuaXNPcGVuZWQgPSBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBhZGRPcHRpb24oaXRlbXM6IElTaW5nbGVPcHRpb24gfCBJU2luZ2xlT3B0aW9uW10pIHtcblx0XHRsZXQgaSA9IGAke3RoaXMuc2VsZWN0T3B0aW9ucy5sZW5ndGh9YDtcblx0XHRjb25zdCBhZGRPcHRpb24gPSAob3B0aW9uOiBJU2luZ2xlT3B0aW9uKSA9PiB7XG5cdFx0XHRjb25zdCB7IHRpdGxlLCB2YWwsIG9wdGlvbnMgfSA9IG9wdGlvbjtcblx0XHRcdGNvbnN0IGhhc09wdGlvbiA9ICEhdGhpcy5zZWxlY3RPcHRpb25zLnNvbWUoXG5cdFx0XHRcdChlbDogSVNpbmdsZU9wdGlvbikgPT4gZWwudmFsID09PSB2YWwsXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoIWhhc09wdGlvbikge1xuXHRcdFx0XHR0aGlzLmFkZFNlbGVjdE9wdGlvbih0aXRsZSwgdmFsLCBvcHRpb25zKTtcblx0XHRcdFx0dGhpcy5idWlsZE9wdGlvbih0aXRsZSwgdmFsLCBvcHRpb25zLCBpKTtcblx0XHRcdFx0dGhpcy5idWlsZE9yaWdpbmFsT3B0aW9uKHRpdGxlLCB2YWwsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheShpdGVtcykpIHtcblx0XHRcdGl0ZW1zLmZvckVhY2goKG9wdGlvbikgPT4ge1xuXHRcdFx0XHRhZGRPcHRpb24ob3B0aW9uKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZGRPcHRpb24oaXRlbXMpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZW1vdmVPcHRpb24odmFsdWVzOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xuXHRcdGNvbnN0IHJlbW92ZU9wdGlvbiA9ICh2YWw6IHN0cmluZykgPT4ge1xuXHRcdFx0Y29uc3QgaGFzT3B0aW9uID0gISF0aGlzLnNlbGVjdE9wdGlvbnMuc29tZShcblx0XHRcdFx0KGVsOiBJU2luZ2xlT3B0aW9uKSA9PiBlbC52YWwgPT09IHZhbCxcblx0XHRcdCk7XG5cblx0XHRcdGlmIChoYXNPcHRpb24pIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVTZWxlY3RPcHRpb24odmFsKTtcblx0XHRcdFx0dGhpcy5kZXN0cm95T3B0aW9uKHZhbCk7XG5cdFx0XHRcdHRoaXMuZGVzdHJveU9yaWdpbmFsT3B0aW9uKHZhbCk7XG5cblx0XHRcdFx0aWYgKHRoaXMudmFsdWUgPT09IHZhbCkge1xuXHRcdFx0XHRcdHRoaXMudmFsdWUgPSBudWxsO1xuXG5cdFx0XHRcdFx0dGhpcy5lcmFzZVRvZ2dsZVRpdGxlKCk7XG5cdFx0XHRcdFx0dGhpcy5lcmFzZVRvZ2dsZUljb24oKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XG5cdFx0XHR2YWx1ZXMuZm9yRWFjaCgodmFsKSA9PiB7XG5cdFx0XHRcdHJlbW92ZU9wdGlvbih2YWwpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZU9wdGlvbih2YWx1ZXMpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZWNhbGN1bGF0ZURpcmVjdGlvbigpIHtcblx0XHRpZiAoXG5cdFx0XHRpc0Vub3VnaFNwYWNlKFxuXHRcdFx0XHR0aGlzLmRyb3Bkb3duLFxuXHRcdFx0XHR0aGlzLnRvZ2dsZSB8fCB0aGlzLnRhZ3NJbnB1dCxcblx0XHRcdFx0J2JvdHRvbScsXG5cdFx0XHRcdHRoaXMuZHJvcGRvd25TcGFjZSxcblx0XHRcdFx0dGhpcy52aWV3cG9ydCxcblx0XHRcdClcblx0XHQpIHtcblx0XHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnYm90dG9tLWZ1bGwnKTtcblx0XHRcdGlmICh0aGlzLmRyb3Bkb3duRGlyZWN0aW9uQ2xhc3Nlcz8uYm90dG9tKVxuXHRcdFx0XHR0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5kcm9wZG93bkRpcmVjdGlvbkNsYXNzZXMuYm90dG9tKTtcblx0XHRcdHRoaXMuZHJvcGRvd24uc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG5cdFx0XHR0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ3RvcC1mdWxsJyk7XG5cdFx0XHRpZiAodGhpcy5kcm9wZG93bkRpcmVjdGlvbkNsYXNzZXM/LnRvcClcblx0XHRcdFx0dGhpcy5kcm9wZG93bi5jbGFzc0xpc3QuYWRkKHRoaXMuZHJvcGRvd25EaXJlY3Rpb25DbGFzc2VzLnRvcCk7XG5cdFx0XHR0aGlzLmRyb3Bkb3duLnN0eWxlLm1hcmdpblRvcCA9IGAke3RoaXMuZHJvcGRvd25TcGFjZX1weGA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgndG9wLWZ1bGwnKTtcblx0XHRcdGlmICh0aGlzLmRyb3Bkb3duRGlyZWN0aW9uQ2xhc3Nlcz8udG9wKVxuXHRcdFx0XHR0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5kcm9wZG93bkRpcmVjdGlvbkNsYXNzZXMudG9wKTtcblx0XHRcdHRoaXMuZHJvcGRvd24uc3R5bGUubWFyZ2luVG9wID0gJyc7XG5cdFx0XHR0aGlzLmRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ2JvdHRvbS1mdWxsJyk7XG5cdFx0XHRpZiAodGhpcy5kcm9wZG93bkRpcmVjdGlvbkNsYXNzZXM/LmJvdHRvbSlcblx0XHRcdFx0dGhpcy5kcm9wZG93bi5jbGFzc0xpc3QuYWRkKHRoaXMuZHJvcGRvd25EaXJlY3Rpb25DbGFzc2VzLmJvdHRvbSk7XG5cdFx0XHR0aGlzLmRyb3Bkb3duLnN0eWxlLm1hcmdpbkJvdHRvbSA9IGAke3RoaXMuZHJvcGRvd25TcGFjZX1weGA7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gZWxJbkNvbGxlY3Rpb25cblx0XHRcdD8gaXNJbnN0YW5jZVxuXHRcdFx0XHQ/IGVsSW5Db2xsZWN0aW9uXG5cdFx0XHRcdDogZWxJbkNvbGxlY3Rpb24uZWxlbWVudFxuXHRcdFx0OiBudWxsO1xuXHR9XG5cblx0c3RhdGljIGF1dG9Jbml0KCkge1xuXHRcdGlmICghd2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24pIHdpbmRvdy4kaHNTZWxlY3RDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLXNlbGVjdF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0XHRcdChlbEMpID0+IChlbEM/LmVsZW1lbnQ/LmVsIGFzIEhUTUxFbGVtZW50KSA9PT0gZWwsXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLXNlbGVjdCcpO1xuXHRcdFx0XHRcdGNvbnN0IG9wdGlvbnM6IElTZWxlY3RPcHRpb25zID0gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiB7fTtcblxuXHRcdFx0XHRcdG5ldyBIU1NlbGVjdChlbCwgb3B0aW9ucyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0aWYgKHdpbmRvdy4kaHNTZWxlY3RDb2xsZWN0aW9uKSB7XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGV2dFRhcmdldCA9IGV2dC50YXJnZXQ7XG5cblx0XHRcdFx0SFNTZWxlY3QuY2xvc2VDdXJyZW50bHlPcGVuZWQoZXZ0VGFyZ2V0IGFzIEhUTUxFbGVtZW50KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT5cblx0XHRcdFx0SFNTZWxlY3QuYWNjZXNzaWJpbGl0eShldnQpLFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgY2xvc2UodGFyZ2V0OiBIVE1MRWxlbWVudCB8IHN0cmluZykge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0aWYgKGVsSW5Db2xsZWN0aW9uICYmIGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuaXNPcGVuZWQpIHtcblx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuY2xvc2UoKTtcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgY2xvc2VDdXJyZW50bHlPcGVuZWQoZXZ0VGFyZ2V0OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsKSB7XG5cdFx0aWYgKCFldnRUYXJnZXQuY2xvc2VzdCgnLmhzLXNlbGVjdC5hY3RpdmUnKSkge1xuXHRcdFx0Y29uc3QgY3VycmVudGx5T3BlbmVkID1cblx0XHRcdFx0d2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24uZmlsdGVyKChlbCkgPT4gZWwuZWxlbWVudC5pc09wZW5lZCkgfHwgbnVsbDtcblxuXHRcdFx0aWYgKGN1cnJlbnRseU9wZW5lZCkge1xuXHRcdFx0XHRjdXJyZW50bHlPcGVuZWQuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0XHRlbC5lbGVtZW50LmNsb3NlKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFjY2Vzc2liaWxpdHkgbWV0aG9kc1xuXHRzdGF0aWMgYWNjZXNzaWJpbGl0eShldnQ6IEtleWJvYXJkRXZlbnQpIHtcblx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKChlbCkgPT4gZWwuZWxlbWVudC5pc09wZW5lZCk7XG5cblx0XHRpZiAoXG5cdFx0XHR0YXJnZXQgJiZcblx0XHRcdFNFTEVDVF9BQ0NFU1NJQklMSVRZX0tFWV9TRVQuaW5jbHVkZXMoZXZ0LmNvZGUpICYmXG5cdFx0XHQhZXZ0Lm1ldGFLZXlcblx0XHQpIHtcblx0XHRcdHN3aXRjaCAoZXZ0LmNvZGUpIHtcblx0XHRcdFx0Y2FzZSAnRXNjYXBlJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uRXNjYXBlKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0Fycm93VXAnOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25BcnJvdygpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdBcnJvd0Rvd24nOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRoaXMub25BcnJvdyhmYWxzZSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1RhYic6XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0dGhpcy5vblRhYihldnQuc2hpZnRLZXkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdIb21lJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uU3RhcnRFbmQoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnRW5kJzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLm9uU3RhcnRFbmQoZmFsc2UpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdFbnRlcic6XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0dGhpcy5vbkVudGVyKGV2dCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uRXNjYXBlKCkge1xuXHRcdGNvbnN0IHRhcmdldCA9IHdpbmRvdy4kaHNTZWxlY3RDb2xsZWN0aW9uLmZpbmQoKGVsKSA9PiBlbC5lbGVtZW50LmlzT3BlbmVkKTtcblxuXHRcdGlmICh0YXJnZXQpIHRhcmdldC5lbGVtZW50LmNsb3NlKCk7XG5cdH1cblxuXHRzdGF0aWMgb25BcnJvdyhpc0Fycm93VXAgPSB0cnVlKSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24uZmluZCgoZWwpID0+IGVsLmVsZW1lbnQuaXNPcGVuZWQpO1xuXG5cdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0Y29uc3QgZHJvcGRvd24gPSB0YXJnZXQuZWxlbWVudC5kcm9wZG93bjtcblxuXHRcdFx0aWYgKCFkcm9wZG93bikgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRjb25zdCBwcmVwYXJlZE9wdGlvbnMgPSBpc0Fycm93VXBcblx0XHRcdFx0PyBBcnJheS5mcm9tKFxuXHRcdFx0XHRcdFx0ZHJvcGRvd24ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gKjpub3QoLmhpZGRlbiknKSxcblx0XHRcdFx0XHQpLnJldmVyc2UoKVxuXHRcdFx0XHQ6IEFycmF5LmZyb20oZHJvcGRvd24ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gKjpub3QoLmhpZGRlbiknKSk7XG5cdFx0XHRjb25zdCBvcHRpb25zID0gcHJlcGFyZWRPcHRpb25zLmZpbHRlcihcblx0XHRcdFx0KGVsOiBhbnkpID0+ICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyksXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgY3VycmVudCA9IGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoJy5ocy1zZWxlY3Qtb3B0aW9uLWhpZ2hsaWdodGVkJyk7XG5cdFx0XHRpZiAoIWN1cnJlbnQpIG9wdGlvbnNbMF0uY2xhc3NMaXN0LmFkZCgnaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdFx0bGV0IGN1cnJlbnRJbmQgPSBvcHRpb25zLmZpbmRJbmRleCgoZWw6IGFueSkgPT4gZWwgPT09IGN1cnJlbnQpO1xuXG5cdFx0XHRpZiAoY3VycmVudEluZCArIDEgPCBvcHRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRjdXJyZW50SW5kKys7XG5cdFx0XHR9XG5cblx0XHRcdChvcHRpb25zW2N1cnJlbnRJbmRdIGFzIEhUTUxCdXR0b25FbGVtZW50KS5mb2N1cygpO1xuXHRcdFx0aWYgKGN1cnJlbnQpIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdFx0b3B0aW9uc1tjdXJyZW50SW5kXS5jbGFzc0xpc3QuYWRkKCdocy1zZWxlY3Qtb3B0aW9uLWhpZ2hsaWdodGVkJyk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uVGFiKGlzQXJyb3dVcCA9IHRydWUpIHtcblx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKChlbCkgPT4gZWwuZWxlbWVudC5pc09wZW5lZCk7XG5cblx0XHRpZiAodGFyZ2V0KSB7XG5cdFx0XHRjb25zdCBkcm9wZG93biA9IHRhcmdldC5lbGVtZW50LmRyb3Bkb3duO1xuXG5cdFx0XHRpZiAoIWRyb3Bkb3duKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdGNvbnN0IHByZXBhcmVkT3B0aW9ucyA9IGlzQXJyb3dVcFxuXHRcdFx0XHQ/IEFycmF5LmZyb20oXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAgKjpub3QoLmhpZGRlbiknKSxcblx0XHRcdFx0XHQpLnJldmVyc2UoKVxuXHRcdFx0XHQ6IEFycmF5LmZyb20oZHJvcGRvd24ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gICo6bm90KC5oaWRkZW4pJykpO1xuXHRcdFx0Y29uc3Qgb3B0aW9ucyA9IHByZXBhcmVkT3B0aW9ucy5maWx0ZXIoXG5cdFx0XHRcdChlbDogYW55KSA9PiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpLFxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGN1cnJlbnQgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdFx0aWYgKCFjdXJyZW50KSBvcHRpb25zWzBdLmNsYXNzTGlzdC5hZGQoJ2hzLXNlbGVjdC1vcHRpb24taGlnaGxpZ2h0ZWQnKTtcblx0XHRcdGxldCBjdXJyZW50SW5kID0gb3B0aW9ucy5maW5kSW5kZXgoKGVsOiBhbnkpID0+IGVsID09PSBjdXJyZW50KTtcblxuXHRcdFx0aWYgKGN1cnJlbnRJbmQgKyAxIDwgb3B0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0Y3VycmVudEluZCsrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGN1cnJlbnQpIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdFx0XHR0YXJnZXQuZWxlbWVudC5jbG9zZSgpO1xuXHRcdFx0XHR0YXJnZXQuZWxlbWVudC50b2dnbGUuZm9jdXMoKTtcblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdChvcHRpb25zW2N1cnJlbnRJbmRdIGFzIEhUTUxCdXR0b25FbGVtZW50KS5mb2N1cygpO1xuXHRcdFx0aWYgKGN1cnJlbnQpIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdFx0b3B0aW9uc1tjdXJyZW50SW5kXS5jbGFzc0xpc3QuYWRkKCdocy1zZWxlY3Qtb3B0aW9uLWhpZ2hsaWdodGVkJyk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uU3RhcnRFbmQoaXNTdGFydCA9IHRydWUpIHtcblx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKChlbCkgPT4gZWwuZWxlbWVudC5pc09wZW5lZCk7XG5cblx0XHRpZiAodGFyZ2V0KSB7XG5cdFx0XHRjb25zdCBkcm9wZG93biA9IHRhcmdldC5lbGVtZW50LmRyb3Bkb3duO1xuXG5cdFx0XHRpZiAoIWRyb3Bkb3duKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdGNvbnN0IHByZXBhcmVkT3B0aW9ucyA9IGlzU3RhcnRcblx0XHRcdFx0PyBBcnJheS5mcm9tKGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+ICAqOm5vdCguaGlkZGVuKScpKVxuXHRcdFx0XHQ6IEFycmF5LmZyb20oXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAgKjpub3QoLmhpZGRlbiknKSxcblx0XHRcdFx0XHQpLnJldmVyc2UoKTtcblx0XHRcdGNvbnN0IG9wdGlvbnMgPSBwcmVwYXJlZE9wdGlvbnMuZmlsdGVyKFxuXHRcdFx0XHQoZWw6IGFueSkgPT4gIWVsLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSxcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBjdXJyZW50ID0gZHJvcGRvd24ucXVlcnlTZWxlY3RvcignLmhzLXNlbGVjdC1vcHRpb24taGlnaGxpZ2h0ZWQnKTtcblxuXHRcdFx0aWYgKG9wdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdChvcHRpb25zWzBdIGFzIEhUTUxCdXR0b25FbGVtZW50KS5mb2N1cygpO1xuXHRcdFx0XHRpZiAoY3VycmVudCkgY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdocy1zZWxlY3Qtb3B0aW9uLWhpZ2hsaWdodGVkJyk7XG5cdFx0XHRcdG9wdGlvbnNbMF0uY2xhc3NMaXN0LmFkZCgnaHMtc2VsZWN0LW9wdGlvbi1oaWdobGlnaHRlZCcpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBvbkVudGVyKGV2dDogRXZlbnQpIHtcblx0XHRjb25zdCBzZWxlY3QgPSAoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkucHJldmlvdXNTaWJsaW5nO1xuXG5cdFx0aWYgKHdpbmRvdy4kaHNTZWxlY3RDb2xsZWN0aW9uLmZpbmQoKGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSBzZWxlY3QpKSB7XG5cdFx0XHRjb25zdCBvcGVuZWQgPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHQoZWwpID0+IGVsLmVsZW1lbnQuaXNPcGVuZWQsXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gd2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0KGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSBzZWxlY3QsXG5cdFx0XHQpO1xuXG5cdFx0XHRvcGVuZWQuZWxlbWVudC5jbG9zZSgpO1xuXHRcdFx0dGFyZ2V0LmVsZW1lbnQub3BlbigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHQoZWwpID0+IGVsLmVsZW1lbnQuaXNPcGVuZWQsXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAodGFyZ2V0KVxuXHRcdFx0XHR0YXJnZXQuZWxlbWVudC5vblNlbGVjdE9wdGlvbihcblx0XHRcdFx0XHQoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC52YWx1ZSB8fCAnJyxcblx0XHRcdFx0KTtcblx0XHR9XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU1NlbGVjdDogRnVuY3Rpb247XG5cdFx0JGhzU2VsZWN0Q29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTU2VsZWN0PltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU1NlbGVjdC5hdXRvSW5pdCgpO1xuXG5cdC8vIFVuY29tbWVudCBmb3IgZGVidWdcblx0Ly8gY29uc29sZS5sb2coJ1NlbGVjdCBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNTZWxlY3RDb2xsZWN0aW9uKTtcbn0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG5cdGlmICghd2luZG93LiRoc1NlbGVjdENvbGxlY3Rpb24pIHJldHVybiBmYWxzZTtcblxuXHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzU2VsZWN0Q29sbGVjdGlvbi5maW5kKChlbCkgPT4gZWwuZWxlbWVudC5pc09wZW5lZCk7XG5cblx0aWYgKHRhcmdldCkgdGFyZ2V0LmVsZW1lbnQucmVjYWxjdWxhdGVEaXJlY3Rpb24oKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTU2VsZWN0ID0gSFNTZWxlY3Q7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTU2VsZWN0O1xuIiwgIi8qXG4gKiBIU1N0ZXBwZXJcbiAqIEB2ZXJzaW9uOiAyLjEuMFxuICogQGF1dGhvcjogSFRNTFN0cmVhbVxuICogQGxpY2Vuc2U6IExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9wcmVsaW5lLmNvL2RvY3MvbGljZW5zZS5odG1sKVxuICogQ29weXJpZ2h0IDIwMjMgSFRNTFN0cmVhbVxuICovXG5cbmltcG9ydCB7IGRpc3BhdGNoIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5pbXBvcnQgeyBJU3RlcHBlck9wdGlvbnMsIElTdGVwcGVyLCBJU3RlcHBlckl0ZW0gfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgSFNCYXNlUGx1Z2luIGZyb20gJy4uL2Jhc2UtcGx1Z2luJztcbmltcG9ydCB7IElDb2xsZWN0aW9uSXRlbSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMnO1xuXG5jbGFzcyBIU1N0ZXBwZXIgZXh0ZW5kcyBIU0Jhc2VQbHVnaW48e30+IGltcGxlbWVudHMgSVN0ZXBwZXIge1xuXHRwcml2YXRlIGN1cnJlbnRJbmRleDogbnVtYmVyIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBtb2RlOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIGlzQ29tcGxldGVkOiBib29sZWFuIHwgbnVsbDtcblxuXHRwcml2YXRlIHRvdGFsU3RlcHM6IG51bWJlciB8IG51bGw7XG5cblx0cHJpdmF0ZSBuYXZJdGVtczogSVN0ZXBwZXJJdGVtW10gfCBudWxsO1xuXHRwcml2YXRlIGNvbnRlbnRJdGVtczogSVN0ZXBwZXJJdGVtW10gfCBudWxsO1xuXHRwcml2YXRlIGJhY2tCdG46IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBuZXh0QnRuOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgc2tpcEJ0bjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIGNvbXBsZXRlU3RlcEJ0bjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIGNvbXBsZXRlU3RlcEJ0bkRlZmF1bHRUZXh0OiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIGZpbmlzaEJ0bjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHJlc2V0QnRuOiBIVE1MRWxlbWVudCB8IG51bGw7XG5cblx0Y29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogSVN0ZXBwZXJPcHRpb25zKSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMpO1xuXG5cdFx0Y29uc3QgZGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1zdGVwcGVyJyk7XG5cdFx0Y29uc3QgZGF0YU9wdGlvbnM6IElTdGVwcGVyT3B0aW9ucyA9IGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XG5cdFx0Y29uc3QgY29uY2F0T3B0aW9ucyA9IHtcblx0XHRcdC4uLmRhdGFPcHRpb25zLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHR9O1xuXG5cdFx0dGhpcy5jdXJyZW50SW5kZXggPSBjb25jYXRPcHRpb25zPy5jdXJyZW50SW5kZXggfHwgMTtcblx0XHR0aGlzLm1vZGUgPSBjb25jYXRPcHRpb25zPy5tb2RlIHx8ICdsaW5lYXInO1xuXHRcdHRoaXMuaXNDb21wbGV0ZWQgPVxuXHRcdFx0dHlwZW9mIGNvbmNhdE9wdGlvbnM/LmlzQ29tcGxldGVkICE9PSAndW5kZWZpbmVkJ1xuXHRcdFx0XHQ/IGNvbmNhdE9wdGlvbnM/LmlzQ29tcGxldGVkXG5cdFx0XHRcdDogZmFsc2U7XG5cblx0XHR0aGlzLnRvdGFsU3RlcHMgPSAxO1xuXG5cdFx0dGhpcy5uYXZJdGVtcyA9IFtdO1xuXHRcdHRoaXMuY29udGVudEl0ZW1zID0gW107XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpIHtcblx0XHR0aGlzLmNyZWF0ZUNvbGxlY3Rpb24od2luZG93LiRoc1N0ZXBwZXJDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMuYnVpbGROYXYoKTtcblx0XHR0aGlzLmJ1aWxkQ29udGVudCgpO1xuXHRcdHRoaXMuYnVpbGRCdXR0b25zKCk7XG5cdFx0dGhpcy5zZXRUb3RhbFN0ZXBzKCk7XG5cdH1cblxuXHRwcml2YXRlIGdldFVuY29tcGxldGVkU3RlcHMoaW5JbmNsdWRlZFNraXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuXHRcdHJldHVybiB0aGlzLm5hdkl0ZW1zLmZpbHRlcigoeyBpc0NvbXBsZXRlZCwgaXNTa2lwIH0pID0+XG5cdFx0XHRpbkluY2x1ZGVkU2tpcHBlZCA/ICFpc0NvbXBsZXRlZCB8fCBpc1NraXAgOiAhaXNDb21wbGV0ZWQgJiYgIWlzU2tpcCxcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRUb3RhbFN0ZXBzKCkge1xuXHRcdHRoaXMubmF2SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3QgeyBpbmRleCB9ID0gaXRlbTtcblxuXHRcdFx0aWYgKGluZGV4ID4gdGhpcy50b3RhbFN0ZXBzKSB0aGlzLnRvdGFsU3RlcHMgPSBpbmRleDtcblx0XHR9KTtcblx0fVxuXG5cdC8vIE5hdlxuXHRwcml2YXRlIGJ1aWxkTmF2KCkge1xuXHRcdHRoaXMuZWxcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1zdGVwcGVyLW5hdi1pdGVtXScpXG5cdFx0XHQuZm9yRWFjaCgoZWwpID0+IHRoaXMuYWRkTmF2SXRlbShlbCBhcyBIVE1MRWxlbWVudCkpO1xuXG5cdFx0dGhpcy5uYXZJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLmJ1aWxkTmF2SXRlbShpdGVtKSk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkTmF2SXRlbShpdGVtOiBJU3RlcHBlckl0ZW0pIHtcblx0XHRjb25zdCB7IGluZGV4LCBpc0Rpc2FibGVkLCBlbCB9ID0gaXRlbTtcblxuXHRcdGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHRoaXMuc2V0Q3VycmVudE5hdkl0ZW0oKTtcblxuXHRcdGlmICh0aGlzLm1vZGUgIT09ICdsaW5lYXInIHx8IGlzRGlzYWJsZWQpIHtcblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVOYXZJdGVtQ2xpY2soaXRlbSkpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYWRkTmF2SXRlbShlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCB7XG5cdFx0XHRpbmRleCxcblx0XHRcdGlzRmluYWwgPSBmYWxzZSxcblx0XHRcdGlzQ29tcGxldGVkID0gZmFsc2UsXG5cdFx0XHRpc1NraXAgPSBmYWxzZSxcblx0XHRcdGlzT3B0aW9uYWwgPSBmYWxzZSxcblx0XHRcdGlzRGlzYWJsZWQgPSBmYWxzZSxcblx0XHRcdGlzUHJvY2Vzc2VkID0gZmFsc2UsXG5cdFx0XHRoYXNFcnJvciA9IGZhbHNlLFxuXHRcdH0gPSBKU09OLnBhcnNlKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1zdGVwcGVyLW5hdi1pdGVtJykpO1xuXG5cdFx0aWYgKGlzQ29tcGxldGVkKSBlbC5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XG5cdFx0aWYgKGlzU2tpcCkgZWwuY2xhc3NMaXN0LmFkZCgnc2tpcHBlZCcpO1xuXHRcdGlmIChpc0Rpc2FibGVkKSB7XG5cdFx0XHRpZiAoZWwudGFnTmFtZSA9PT0gJ0JVVFRPTicgfHwgZWwudGFnTmFtZSA9PT0gJ0lOUFVUJylcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG5cdFx0XHRlbC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0XHRpZiAoaGFzRXJyb3IpIGVsLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG5cblx0XHR0aGlzLm5hdkl0ZW1zLnB1c2goe1xuXHRcdFx0aW5kZXgsXG5cdFx0XHRpc0ZpbmFsLFxuXHRcdFx0aXNDb21wbGV0ZWQsXG5cdFx0XHRpc1NraXAsXG5cdFx0XHRpc09wdGlvbmFsLFxuXHRcdFx0aXNEaXNhYmxlZCxcblx0XHRcdGlzUHJvY2Vzc2VkLFxuXHRcdFx0aGFzRXJyb3IsXG5cdFx0XHRlbDogZWwgYXMgSFRNTEVsZW1lbnQsXG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHNldEN1cnJlbnROYXZJdGVtKCkge1xuXHRcdHRoaXMubmF2SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3QgeyBpbmRleCwgZWwgfSA9IGl0ZW07XG5cblx0XHRcdGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHRoaXMuc2V0Q3VycmVudE5hdkl0ZW1BY3Rpb25zKGVsKTtcblx0XHRcdGVsc2UgdGhpcy51bnNldEN1cnJlbnROYXZJdGVtQWN0aW9ucyhlbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHNldEN1cnJlbnROYXZJdGVtQWN0aW9ucyhlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdhY3RpdmUnLCB0aGlzLmN1cnJlbnRJbmRleCk7XG5cdFx0ZGlzcGF0Y2goJ2FjdGl2ZS5ocy5zdGVwcGVyJywgdGhpcy5lbCwgdGhpcy5jdXJyZW50SW5kZXgpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXROYXZJdGVtKG4gPSB0aGlzLmN1cnJlbnRJbmRleCkge1xuXHRcdHJldHVybiB0aGlzLm5hdkl0ZW1zLmZpbmQoKHsgaW5kZXggfSkgPT4gaW5kZXggPT09IG4pO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRQcm9jZXNzZWROYXZJdGVtQWN0aW9ucyhpdGVtOiBJU3RlcHBlckl0ZW0pIHtcblx0XHRpdGVtLmlzUHJvY2Vzc2VkID0gdHJ1ZTtcblxuXHRcdGl0ZW0uZWwuY2xhc3NMaXN0LmFkZCgncHJvY2Vzc2VkJyk7XG5cdH1cblxuXHRwcml2YXRlIHNldEVycm9yTmF2SXRlbUFjdGlvbnMoaXRlbTogSVN0ZXBwZXJJdGVtKSB7XG5cdFx0aXRlbS5oYXNFcnJvciA9IHRydWU7XG5cblx0XHRpdGVtLmVsLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG5cdH1cblxuXHRwcml2YXRlIHVuc2V0Q3VycmVudE5hdkl0ZW1BY3Rpb25zKGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVOYXZJdGVtQ2xpY2soaXRlbTogSVN0ZXBwZXJJdGVtKSB7XG5cdFx0Y29uc3QgeyBpbmRleCB9ID0gaXRlbTtcblxuXHRcdHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXg7XG5cblx0XHR0aGlzLnNldEN1cnJlbnROYXZJdGVtKCk7XG5cdFx0dGhpcy5zZXRDdXJyZW50Q29udGVudEl0ZW0oKTtcblxuXHRcdHRoaXMuY2hlY2tGb3JUaGVGaXJzdFN0ZXAoKTtcblx0fVxuXG5cdC8vIENvbnRlbnRcblx0cHJpdmF0ZSBidWlsZENvbnRlbnQoKSB7XG5cdFx0dGhpcy5lbFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLXN0ZXBwZXItY29udGVudC1pdGVtXScpXG5cdFx0XHQuZm9yRWFjaCgoZWwpID0+IHRoaXMuYWRkQ29udGVudEl0ZW0oZWwgYXMgSFRNTEVsZW1lbnQpKTtcblxuXHRcdHRoaXMubmF2SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5idWlsZENvbnRlbnRJdGVtKGl0ZW0pKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRDb250ZW50SXRlbShpdGVtOiBJU3RlcHBlckl0ZW0pIHtcblx0XHRjb25zdCB7IGluZGV4IH0gPSBpdGVtO1xuXG5cdFx0aWYgKGluZGV4ID09PSB0aGlzLmN1cnJlbnRJbmRleCkgdGhpcy5zZXRDdXJyZW50Q29udGVudEl0ZW0oKTtcblx0fVxuXG5cdHByaXZhdGUgYWRkQ29udGVudEl0ZW0oZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3Qge1xuXHRcdFx0aW5kZXgsXG5cdFx0XHRpc0ZpbmFsID0gZmFsc2UsXG5cdFx0XHRpc0NvbXBsZXRlZCA9IGZhbHNlLFxuXHRcdFx0aXNTa2lwID0gZmFsc2UsXG5cdFx0fSA9IEpTT04ucGFyc2UoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLXN0ZXBwZXItY29udGVudC1pdGVtJykpO1xuXG5cdFx0aWYgKGlzQ29tcGxldGVkKSBlbC5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XG5cdFx0aWYgKGlzU2tpcCkgZWwuY2xhc3NMaXN0LmFkZCgnc2tpcHBlZCcpO1xuXG5cdFx0dGhpcy5jb250ZW50SXRlbXMucHVzaCh7XG5cdFx0XHRpbmRleCxcblx0XHRcdGlzRmluYWwsXG5cdFx0XHRpc0NvbXBsZXRlZCxcblx0XHRcdGlzU2tpcCxcblx0XHRcdGVsOiBlbCBhcyBIVE1MRWxlbWVudCxcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgc2V0Q3VycmVudENvbnRlbnRJdGVtKCkge1xuXHRcdGlmICh0aGlzLmlzQ29tcGxldGVkKSB7XG5cdFx0XHRjb25zdCBmaW5hbENvbnRlbnRJdGVtID0gdGhpcy5jb250ZW50SXRlbXMuZmluZCgoeyBpc0ZpbmFsIH0pID0+IGlzRmluYWwpO1xuXHRcdFx0Y29uc3Qgb3RoZXJDb250ZW50SXRlbXMgPSB0aGlzLmNvbnRlbnRJdGVtcy5maWx0ZXIoXG5cdFx0XHRcdCh7IGlzRmluYWwgfSkgPT4gIWlzRmluYWwsXG5cdFx0XHQpO1xuXHRcdFx0ZmluYWxDb250ZW50SXRlbS5lbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0XHRvdGhlckNvbnRlbnRJdGVtcy5mb3JFYWNoKCh7IGVsIH0pID0+IChlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKSk7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHR0aGlzLmNvbnRlbnRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRjb25zdCB7IGluZGV4LCBlbCB9ID0gaXRlbTtcblxuXHRcdFx0aWYgKGluZGV4ID09PSB0aGlzLmN1cnJlbnRJbmRleCkgdGhpcy5zZXRDdXJyZW50Q29udGVudEl0ZW1BY3Rpb25zKGVsKTtcblx0XHRcdGVsc2UgdGhpcy51bnNldEN1cnJlbnRDb250ZW50SXRlbUFjdGlvbnMoZWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBoaWRlQWxsQ29udGVudEl0ZW1zKCkge1xuXHRcdHRoaXMuY29udGVudEl0ZW1zLmZvckVhY2goKHsgZWwgfSkgPT4gKGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpKTtcblx0fVxuXG5cdHByaXZhdGUgc2V0Q3VycmVudENvbnRlbnRJdGVtQWN0aW9ucyhlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdH1cblxuXHRwcml2YXRlIHVuc2V0Q3VycmVudENvbnRlbnRJdGVtQWN0aW9ucyhlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHR9XG5cblx0cHJpdmF0ZSBkaXNhYmxlQWxsKCkge1xuXHRcdGNvbnN0IGN1cnJlbnROYXZJdGVtID0gdGhpcy5nZXROYXZJdGVtKHRoaXMuY3VycmVudEluZGV4KTtcblx0XHRjdXJyZW50TmF2SXRlbS5oYXNFcnJvciA9IGZhbHNlO1xuXHRcdGN1cnJlbnROYXZJdGVtLmlzQ29tcGxldGVkID0gZmFsc2U7XG5cdFx0Y3VycmVudE5hdkl0ZW0uaXNEaXNhYmxlZCA9IGZhbHNlO1xuXHRcdGN1cnJlbnROYXZJdGVtLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJywgJ3N1Y2Nlc3MnKTtcblxuXHRcdHRoaXMuZGlzYWJsZUJ1dHRvbnMoKTtcblx0fVxuXG5cdHByaXZhdGUgZGlzYWJsZU5hdkl0ZW1BY3Rpb25zKGl0ZW06IElTdGVwcGVySXRlbSkge1xuXHRcdGl0ZW0uaXNEaXNhYmxlZCA9IHRydWU7XG5cdFx0aXRlbS5lbC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuXHR9XG5cblx0cHJpdmF0ZSBlbmFibGVOYXZJdGVtQWN0aW9ucyhpdGVtOiBJU3RlcHBlckl0ZW0pIHtcblx0XHRpdGVtLmlzRGlzYWJsZWQgPSBmYWxzZTtcblx0XHRpdGVtLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cdH1cblxuXHQvLyBCdXR0b25zXG5cdHByaXZhdGUgYnVpbGRCdXR0b25zKCkge1xuXHRcdHRoaXMuYmFja0J0biA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignW2RhdGEtaHMtc3RlcHBlci1iYWNrLWJ0bl0nKTtcblx0XHR0aGlzLm5leHRCdG4gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLXN0ZXBwZXItbmV4dC1idG5dJyk7XG5cdFx0dGhpcy5za2lwQnRuID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1zdGVwcGVyLXNraXAtYnRuXScpO1xuXHRcdHRoaXMuY29tcGxldGVTdGVwQnRuID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0J1tkYXRhLWhzLXN0ZXBwZXItY29tcGxldGUtc3RlcC1idG5dJyxcblx0XHQpO1xuXHRcdHRoaXMuZmluaXNoQnRuID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ocy1zdGVwcGVyLWZpbmlzaC1idG5dJyk7XG5cdFx0dGhpcy5yZXNldEJ0biA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignW2RhdGEtaHMtc3RlcHBlci1yZXNldC1idG5dJyk7XG5cblx0XHR0aGlzLmJ1aWxkQmFja0J1dHRvbigpO1xuXHRcdHRoaXMuYnVpbGROZXh0QnV0dG9uKCk7XG5cdFx0dGhpcy5idWlsZFNraXBCdXR0b24oKTtcblx0XHR0aGlzLmJ1aWxkQ29tcGxldGVTdGVwQnV0dG9uKCk7XG5cdFx0dGhpcy5idWlsZEZpbmlzaEJ1dHRvbigpO1xuXHRcdHRoaXMuYnVpbGRSZXNldEJ1dHRvbigpO1xuXHR9XG5cblx0Ly8gYmFja1xuXHRwcml2YXRlIGJ1aWxkQmFja0J1dHRvbigpIHtcblx0XHRpZiAoIXRoaXMuYmFja0J0bikgcmV0dXJuO1xuXG5cdFx0dGhpcy5jaGVja0ZvclRoZUZpcnN0U3RlcCgpO1xuXG5cdFx0dGhpcy5iYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5oYW5kbGVCYWNrQnV0dG9uQ2xpY2soKTtcblxuXHRcdFx0aWYgKHRoaXMubW9kZSA9PT0gJ2xpbmVhcicpIHtcblx0XHRcdFx0Y29uc3QgY3VycmVudE5hdkl0ZW0gPSB0aGlzLm5hdkl0ZW1zLmZpbmQoXG5cdFx0XHRcdFx0KHsgaW5kZXggfSkgPT4gaW5kZXggPT09IHRoaXMuY3VycmVudEluZGV4LFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Q29udGVudEl0ZW0gPSB0aGlzLmNvbnRlbnRJdGVtcy5maW5kKFxuXHRcdFx0XHRcdCh7IGluZGV4IH0pID0+IGluZGV4ID09PSB0aGlzLmN1cnJlbnRJbmRleCxcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoIWN1cnJlbnROYXZJdGVtIHx8ICFjdXJyZW50Q29udGVudEl0ZW0pIHJldHVybjtcblxuXHRcdFx0XHRpZiAoY3VycmVudE5hdkl0ZW0uaXNDb21wbGV0ZWQpIHtcblx0XHRcdFx0XHRjdXJyZW50TmF2SXRlbS5pc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGN1cnJlbnROYXZJdGVtLmlzU2tpcCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0Y3VycmVudE5hdkl0ZW0uZWwuY2xhc3NMaXN0LnJlbW92ZSgnc3VjY2VzcycsICdza2lwcGVkJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY3VycmVudENvbnRlbnRJdGVtLmlzQ29tcGxldGVkKSB7XG5cdFx0XHRcdFx0Y3VycmVudENvbnRlbnRJdGVtLmlzQ29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0Y3VycmVudENvbnRlbnRJdGVtLmlzU2tpcCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0Y3VycmVudENvbnRlbnRJdGVtLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Y2Nlc3MnLCAnc2tpcHBlZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMubW9kZSA9PT0gJ2xpbmVhcicgJiYgdGhpcy5jdXJyZW50SW5kZXggIT09IHRoaXMudG90YWxTdGVwcykge1xuXHRcdFx0XHRcdGlmICh0aGlzLm5leHRCdG4pIHRoaXMubmV4dEJ0bi5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0XHRcdFx0aWYgKHRoaXMuY29tcGxldGVTdGVwQnRuKSB0aGlzLmNvbXBsZXRlU3RlcEJ0bi5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLnNob3dTa2lwQnV0dG9uKCk7XG5cdFx0XHRcdHRoaXMuc2hvd0ZpbmlzaEJ1dHRvbigpO1xuXHRcdFx0XHR0aGlzLnNob3dDb21wbGV0ZVN0ZXBCdXR0b24oKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgaGFuZGxlQmFja0J1dHRvbkNsaWNrKCkge1xuXHRcdGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PT0gMSkgcmV0dXJuO1xuXG5cdFx0aWYgKHRoaXMubW9kZSA9PT0gJ2xpbmVhcicpIHtcblx0XHRcdHRoaXMucmVtb3ZlT3B0aW9uYWxDbGFzc2VzKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5jdXJyZW50SW5kZXgtLTtcblxuXHRcdGlmICh0aGlzLm1vZGUgPT09ICdsaW5lYXInKSB7XG5cdFx0XHR0aGlzLnJlbW92ZU9wdGlvbmFsQ2xhc3NlcygpO1xuXHRcdH1cblxuXHRcdHRoaXMuc2V0Q3VycmVudE5hdkl0ZW0oKTtcblx0XHR0aGlzLnNldEN1cnJlbnRDb250ZW50SXRlbSgpO1xuXG5cdFx0dGhpcy5jaGVja0ZvclRoZUZpcnN0U3RlcCgpO1xuXHRcdGlmICh0aGlzLmNvbXBsZXRlU3RlcEJ0bilcblx0XHRcdHRoaXMuY2hhbmdlVGV4dEFuZERpc2FibGVDb21wbGV0ZUJ1dHRvbklmU3RlcENvbXBsZXRlZCgpO1xuXG5cdFx0dGhpcy5maXJlRXZlbnQoJ2JhY2snLCB0aGlzLmN1cnJlbnRJbmRleCk7XG5cdFx0ZGlzcGF0Y2goJ2JhY2suaHMuc3RlcHBlcicsIHRoaXMuZWwsIHRoaXMuY3VycmVudEluZGV4KTtcblx0fVxuXG5cdHByaXZhdGUgY2hlY2tGb3JUaGVGaXJzdFN0ZXAoKSB7XG5cdFx0aWYgKHRoaXMuY3VycmVudEluZGV4ID09PSAxKSB7XG5cdFx0XHR0aGlzLnNldFRvRGlzYWJsZWQodGhpcy5iYWNrQnRuKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zZXRUb05vbkRpc2FibGVkKHRoaXMuYmFja0J0bik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzZXRUb0Rpc2FibGVkKGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmIChlbC50YWdOYW1lID09PSAnQlVUVE9OJyB8fCBlbC50YWdOYW1lID09PSAnSU5QVVQnKVxuXHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG5cdFx0ZWwuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcblx0fVxuXG5cdHByaXZhdGUgc2V0VG9Ob25EaXNhYmxlZChlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAoZWwudGFnTmFtZSA9PT0gJ0JVVFRPTicgfHwgZWwudGFnTmFtZSA9PT0gJ0lOUFVUJylcblx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcblxuXHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cdH1cblxuXHQvLyBuZXh0XG5cdHByaXZhdGUgYnVpbGROZXh0QnV0dG9uKCkge1xuXHRcdGlmICghdGhpcy5uZXh0QnRuKSByZXR1cm47XG5cblx0XHR0aGlzLm5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmZpcmVFdmVudCgnYmVmb3JlTmV4dCcsIHRoaXMuY3VycmVudEluZGV4KTtcblx0XHRcdGRpc3BhdGNoKCdiZWZvcmVOZXh0LmhzLnN0ZXBwZXInLCB0aGlzLmVsLCB0aGlzLmN1cnJlbnRJbmRleCk7XG5cblx0XHRcdGlmICh0aGlzLmdldE5hdkl0ZW0odGhpcy5jdXJyZW50SW5kZXgpPy5pc1Byb2Nlc3NlZCkge1xuXHRcdFx0XHR0aGlzLmRpc2FibGVBbGwoKTtcblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZ29Ub05leHQoKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgdW5zZXRQcm9jZXNzZWROYXZJdGVtQWN0aW9ucyhpdGVtOiBJU3RlcHBlckl0ZW0pIHtcblx0XHRpdGVtLmlzUHJvY2Vzc2VkID0gZmFsc2U7XG5cblx0XHRpdGVtLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2Nlc3NlZCcpO1xuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVOZXh0QnV0dG9uQ2xpY2soaW5maW5pdGUgPSB0cnVlKSB7XG5cdFx0aWYgKGluZmluaXRlKSB7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50SW5kZXggPT09IHRoaXMudG90YWxTdGVwcykgdGhpcy5jdXJyZW50SW5kZXggPSAxO1xuXHRcdFx0ZWxzZSB0aGlzLmN1cnJlbnRJbmRleCsrO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBub25Db21wbGV0ZWRTdGVwcyA9IHRoaXMuZ2V0VW5jb21wbGV0ZWRTdGVwcygpO1xuXG5cdFx0XHRpZiAobm9uQ29tcGxldGVkU3RlcHMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdGNvbnN0IHsgaW5kZXggfSA9IG5vbkNvbXBsZXRlZFN0ZXBzWzBdO1xuXG5cdFx0XHRcdHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50SW5kZXggPT09IHRoaXMudG90YWxTdGVwcykgcmV0dXJuO1xuXG5cdFx0XHRcdHRoaXMuY3VycmVudEluZGV4Kys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMubW9kZSA9PT0gJ2xpbmVhcicpIHtcblx0XHRcdHRoaXMucmVtb3ZlT3B0aW9uYWxDbGFzc2VzKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zZXRDdXJyZW50TmF2SXRlbSgpO1xuXHRcdHRoaXMuc2V0Q3VycmVudENvbnRlbnRJdGVtKCk7XG5cblx0XHR0aGlzLmNoZWNrRm9yVGhlRmlyc3RTdGVwKCk7XG5cdFx0aWYgKHRoaXMuY29tcGxldGVTdGVwQnRuKVxuXHRcdFx0dGhpcy5jaGFuZ2VUZXh0QW5kRGlzYWJsZUNvbXBsZXRlQnV0dG9uSWZTdGVwQ29tcGxldGVkKCk7XG5cblx0XHR0aGlzLnNob3dTa2lwQnV0dG9uKCk7XG5cdFx0dGhpcy5zaG93RmluaXNoQnV0dG9uKCk7XG5cdFx0dGhpcy5zaG93Q29tcGxldGVTdGVwQnV0dG9uKCk7XG5cblx0XHR0aGlzLmZpcmVFdmVudCgnbmV4dCcsIHRoaXMuY3VycmVudEluZGV4KTtcblx0XHRkaXNwYXRjaCgnbmV4dC5ocy5zdGVwcGVyJywgdGhpcy5lbCwgdGhpcy5jdXJyZW50SW5kZXgpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVPcHRpb25hbENsYXNzZXMoKSB7XG5cdFx0Y29uc3QgY3VycmVudE5hdkl0ZW0gPSB0aGlzLm5hdkl0ZW1zLmZpbmQoXG5cdFx0XHQoeyBpbmRleCB9KSA9PiBpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgsXG5cdFx0KTtcblx0XHRjb25zdCBjdXJyZW50Q29udGVudEl0ZW0gPSB0aGlzLmNvbnRlbnRJdGVtcy5maW5kKFxuXHRcdFx0KHsgaW5kZXggfSkgPT4gaW5kZXggPT09IHRoaXMuY3VycmVudEluZGV4LFxuXHRcdCk7XG5cblx0XHRjdXJyZW50TmF2SXRlbS5pc1NraXAgPSBmYWxzZTtcblx0XHRjdXJyZW50TmF2SXRlbS5oYXNFcnJvciA9IGZhbHNlO1xuXHRcdGN1cnJlbnROYXZJdGVtLmlzRGlzYWJsZWQgPSBmYWxzZTtcblx0XHRjdXJyZW50Q29udGVudEl0ZW0uaXNTa2lwID0gZmFsc2U7XG5cblx0XHRjdXJyZW50TmF2SXRlbS5lbC5jbGFzc0xpc3QucmVtb3ZlKCdza2lwcGVkJywgJ3N1Y2Nlc3MnLCAnZXJyb3InKTtcblx0XHRjdXJyZW50Q29udGVudEl0ZW0uZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2tpcHBlZCcsICdzdWNjZXNzJywgJ2Vycm9yJyk7XG5cdH1cblxuXHQvLyBza2lwXG5cdHByaXZhdGUgYnVpbGRTa2lwQnV0dG9uKCkge1xuXHRcdGlmICghdGhpcy5za2lwQnRuKSByZXR1cm47XG5cblx0XHR0aGlzLnNob3dTa2lwQnV0dG9uKCk7XG5cblx0XHR0aGlzLnNraXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmhhbmRsZVNraXBCdXR0b25DbGljaygpO1xuXG5cdFx0XHRpZiAodGhpcy5tb2RlID09PSAnbGluZWFyJyAmJiB0aGlzLmN1cnJlbnRJbmRleCA9PT0gdGhpcy50b3RhbFN0ZXBzKSB7XG5cdFx0XHRcdGlmICh0aGlzLm5leHRCdG4pIHRoaXMubmV4dEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0XHRpZiAodGhpcy5jb21wbGV0ZVN0ZXBCdG4pIHRoaXMuY29tcGxldGVTdGVwQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdGlmICh0aGlzLmZpbmlzaEJ0bikgdGhpcy5maW5pc2hCdG4uc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRTa2lwSXRlbShuPzogbnVtYmVyKSB7XG5cdFx0Y29uc3QgdGFyZ2V0TmF2SXRlbSA9IHRoaXMubmF2SXRlbXMuZmluZChcblx0XHRcdCh7IGluZGV4IH0pID0+IGluZGV4ID09PSAobiB8fCB0aGlzLmN1cnJlbnRJbmRleCksXG5cdFx0KTtcblx0XHRjb25zdCB0YXJnZXRDb250ZW50SXRlbSA9IHRoaXMuY29udGVudEl0ZW1zLmZpbmQoXG5cdFx0XHQoeyBpbmRleCB9KSA9PiBpbmRleCA9PT0gKG4gfHwgdGhpcy5jdXJyZW50SW5kZXgpLFxuXHRcdCk7XG5cblx0XHRpZiAoIXRhcmdldE5hdkl0ZW0gfHwgIXRhcmdldENvbnRlbnRJdGVtKSByZXR1cm47XG5cblx0XHR0aGlzLnNldFNraXBJdGVtQWN0aW9ucyh0YXJnZXROYXZJdGVtKTtcblx0XHR0aGlzLnNldFNraXBJdGVtQWN0aW9ucyh0YXJnZXRDb250ZW50SXRlbSk7XG5cdH1cblxuXHRwcml2YXRlIHNldFNraXBJdGVtQWN0aW9ucyhpdGVtOiBJU3RlcHBlckl0ZW0pIHtcblx0XHRpdGVtLmlzU2tpcCA9IHRydWU7XG5cblx0XHRpdGVtLmVsLmNsYXNzTGlzdC5hZGQoJ3NraXBwZWQnKTtcblx0fVxuXG5cdHByaXZhdGUgc2hvd1NraXBCdXR0b24oKSB7XG5cdFx0aWYgKCF0aGlzLnNraXBCdG4pIHJldHVybjtcblxuXHRcdGNvbnN0IHsgaXNPcHRpb25hbCB9ID0gdGhpcy5uYXZJdGVtcy5maW5kKFxuXHRcdFx0KHsgaW5kZXggfSkgPT4gaW5kZXggPT09IHRoaXMuY3VycmVudEluZGV4LFxuXHRcdCk7XG5cblx0XHRpZiAoaXNPcHRpb25hbCkgdGhpcy5za2lwQnRuLnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRlbHNlIHRoaXMuc2tpcEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVTa2lwQnV0dG9uQ2xpY2soKSB7XG5cdFx0dGhpcy5zZXRTa2lwSXRlbSgpO1xuXHRcdHRoaXMuaGFuZGxlTmV4dEJ1dHRvbkNsaWNrKCk7XG5cblx0XHR0aGlzLmZpcmVFdmVudCgnc2tpcCcsIHRoaXMuY3VycmVudEluZGV4KTtcblx0XHRkaXNwYXRjaCgnc2tpcC5ocy5zdGVwcGVyJywgdGhpcy5lbCwgdGhpcy5jdXJyZW50SW5kZXgpO1xuXHR9XG5cblx0Ly8gY29tcGxldGVcblx0cHJpdmF0ZSBidWlsZENvbXBsZXRlU3RlcEJ1dHRvbigpIHtcblx0XHRpZiAoIXRoaXMuY29tcGxldGVTdGVwQnRuKSByZXR1cm47XG5cblx0XHR0aGlzLmNvbXBsZXRlU3RlcEJ0bkRlZmF1bHRUZXh0ID0gdGhpcy5jb21wbGV0ZVN0ZXBCdG4uaW5uZXJUZXh0O1xuXG5cdFx0dGhpcy5jb21wbGV0ZVN0ZXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuXHRcdFx0dGhpcy5oYW5kbGVDb21wbGV0ZVN0ZXBCdXR0b25DbGljaygpLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGNoYW5nZVRleHRBbmREaXNhYmxlQ29tcGxldGVCdXR0b25JZlN0ZXBDb21wbGV0ZWQoKSB7XG5cdFx0Y29uc3QgY3VycmVudE5hdkl0ZW0gPSB0aGlzLm5hdkl0ZW1zLmZpbmQoXG5cdFx0XHQoeyBpbmRleCB9KSA9PiBpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgsXG5cdFx0KTtcblx0XHRjb25zdCB7IGNvbXBsZXRlZFRleHQgfSA9IEpTT04ucGFyc2UoXG5cdFx0XHR0aGlzLmNvbXBsZXRlU3RlcEJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtc3RlcHBlci1jb21wbGV0ZS1zdGVwLWJ0bicpLFxuXHRcdCk7XG5cblx0XHRpZiAoIWN1cnJlbnROYXZJdGVtKSByZXR1cm47XG5cblx0XHRpZiAoY3VycmVudE5hdkl0ZW0uaXNDb21wbGV0ZWQpIHtcblx0XHRcdHRoaXMuY29tcGxldGVTdGVwQnRuLmlubmVyVGV4dCA9XG5cdFx0XHRcdGNvbXBsZXRlZFRleHQgfHwgdGhpcy5jb21wbGV0ZVN0ZXBCdG5EZWZhdWx0VGV4dDtcblx0XHRcdHRoaXMuY29tcGxldGVTdGVwQnRuLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblx0XHRcdHRoaXMuY29tcGxldGVTdGVwQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY29tcGxldGVTdGVwQnRuLmlubmVyVGV4dCA9IHRoaXMuY29tcGxldGVTdGVwQnRuRGVmYXVsdFRleHQ7XG5cdFx0XHR0aGlzLmNvbXBsZXRlU3RlcEJ0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG5cdFx0XHR0aGlzLmNvbXBsZXRlU3RlcEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2V0Q29tcGxldGVJdGVtKG4/OiBudW1iZXIpIHtcblx0XHRjb25zdCB0YXJnZXROYXZJdGVtID0gdGhpcy5uYXZJdGVtcy5maW5kKFxuXHRcdFx0KHsgaW5kZXggfSkgPT4gaW5kZXggPT09IChuIHx8IHRoaXMuY3VycmVudEluZGV4KSxcblx0XHQpO1xuXHRcdGNvbnN0IHRhcmdldENvbnRlbnRJdGVtID0gdGhpcy5jb250ZW50SXRlbXMuZmluZChcblx0XHRcdCh7IGluZGV4IH0pID0+IGluZGV4ID09PSAobiB8fCB0aGlzLmN1cnJlbnRJbmRleCksXG5cdFx0KTtcblxuXHRcdGlmICghdGFyZ2V0TmF2SXRlbSB8fCAhdGFyZ2V0Q29udGVudEl0ZW0pIHJldHVybjtcblxuXHRcdHRoaXMuc2V0Q29tcGxldGVJdGVtQWN0aW9ucyh0YXJnZXROYXZJdGVtKTtcblx0XHR0aGlzLnNldENvbXBsZXRlSXRlbUFjdGlvbnModGFyZ2V0Q29udGVudEl0ZW0pO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRDb21wbGV0ZUl0ZW1BY3Rpb25zKGl0ZW06IElTdGVwcGVySXRlbSkge1xuXHRcdGl0ZW0uaXNDb21wbGV0ZWQgPSB0cnVlO1xuXG5cdFx0aXRlbS5lbC5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XG5cdH1cblxuXHRwcml2YXRlIHNob3dDb21wbGV0ZVN0ZXBCdXR0b24oKSB7XG5cdFx0aWYgKCF0aGlzLmNvbXBsZXRlU3RlcEJ0bikgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgbm9uQ29tcGxldGVkU3RlcHMgPSB0aGlzLmdldFVuY29tcGxldGVkU3RlcHMoKTtcblxuXHRcdGlmIChub25Db21wbGV0ZWRTdGVwcy5sZW5ndGggPT09IDEpXG5cdFx0XHR0aGlzLmNvbXBsZXRlU3RlcEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGVsc2UgdGhpcy5jb21wbGV0ZVN0ZXBCdG4uc3R5bGUuZGlzcGxheSA9ICcnO1xuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVDb21wbGV0ZVN0ZXBCdXR0b25DbGljaygpIHtcblx0XHR0aGlzLnNldENvbXBsZXRlSXRlbSgpO1xuXG5cdFx0dGhpcy5maXJlRXZlbnQoJ2NvbXBsZXRlJywgdGhpcy5jdXJyZW50SW5kZXgpO1xuXHRcdGRpc3BhdGNoKCdjb21wbGV0ZS5ocy5zdGVwcGVyJywgdGhpcy5lbCwgdGhpcy5jdXJyZW50SW5kZXgpO1xuXG5cdFx0dGhpcy5oYW5kbGVOZXh0QnV0dG9uQ2xpY2soZmFsc2UpO1xuXHRcdHRoaXMuc2hvd0ZpbmlzaEJ1dHRvbigpO1xuXHRcdHRoaXMuc2hvd0NvbXBsZXRlU3RlcEJ1dHRvbigpO1xuXHRcdHRoaXMuY2hlY2tGb3JUaGVGaXJzdFN0ZXAoKTtcblx0XHRpZiAodGhpcy5jb21wbGV0ZVN0ZXBCdG4pXG5cdFx0XHR0aGlzLmNoYW5nZVRleHRBbmREaXNhYmxlQ29tcGxldGVCdXR0b25JZlN0ZXBDb21wbGV0ZWQoKTtcblx0XHR0aGlzLnNob3dTa2lwQnV0dG9uKCk7XG5cdH1cblxuXHQvLyBmaW5pc2hcblx0cHJpdmF0ZSBidWlsZEZpbmlzaEJ1dHRvbigpIHtcblx0XHRpZiAoIXRoaXMuZmluaXNoQnRuKSByZXR1cm47XG5cblx0XHRpZiAodGhpcy5pc0NvbXBsZXRlZCkge1xuXHRcdFx0dGhpcy5zZXRDb21wbGV0ZWQoKTtcblx0XHR9XG5cblx0XHR0aGlzLmZpbmlzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+XG5cdFx0XHR0aGlzLmhhbmRsZUZpbmlzaEJ1dHRvbkNsaWNrKCksXG5cdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgc2V0Q29tcGxldGVkKCkge1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG5cdH1cblxuXHRwcml2YXRlIHVuc2V0Q29tcGxldGVkKCkge1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGVkJyk7XG5cdH1cblxuXHRwcml2YXRlIHNob3dGaW5pc2hCdXR0b24oKSB7XG5cdFx0aWYgKCF0aGlzLmZpbmlzaEJ0bikgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgbm9uQ29tcGxldGVkU3RlcHMgPSB0aGlzLmdldFVuY29tcGxldGVkU3RlcHMoKTtcblxuXHRcdGlmIChub25Db21wbGV0ZWRTdGVwcy5sZW5ndGggPT09IDEpIHRoaXMuZmluaXNoQnRuLnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRlbHNlIHRoaXMuZmluaXNoQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZUZpbmlzaEJ1dHRvbkNsaWNrKCkge1xuXHRcdGNvbnN0IHVuY29tcGxldGVkU3RlcHMgPSB0aGlzLmdldFVuY29tcGxldGVkU3RlcHMoKTtcblx0XHRjb25zdCB1bmNvbXBsZXRlZE9yU2tpcFN0ZXBzID0gdGhpcy5nZXRVbmNvbXBsZXRlZFN0ZXBzKHRydWUpO1xuXHRcdGNvbnN0IHsgZWwgfSA9IHRoaXMuY29udGVudEl0ZW1zLmZpbmQoKHsgaXNGaW5hbCB9KSA9PiBpc0ZpbmFsKTtcblxuXHRcdGlmICh1bmNvbXBsZXRlZFN0ZXBzLmxlbmd0aClcblx0XHRcdHVuY29tcGxldGVkU3RlcHMuZm9yRWFjaCgoeyBpbmRleCB9KSA9PiB0aGlzLnNldENvbXBsZXRlSXRlbShpbmRleCkpO1xuXG5cdFx0dGhpcy5jdXJyZW50SW5kZXggPSB0aGlzLnRvdGFsU3RlcHM7XG5cblx0XHR0aGlzLnNldEN1cnJlbnROYXZJdGVtKCk7XG5cdFx0dGhpcy5oaWRlQWxsQ29udGVudEl0ZW1zKCk7XG5cblx0XHRjb25zdCBjdXJyZW50TmF2SXRlbSA9IHRoaXMubmF2SXRlbXMuZmluZChcblx0XHRcdCh7IGluZGV4IH0pID0+IGluZGV4ID09PSB0aGlzLmN1cnJlbnRJbmRleCxcblx0XHQpO1xuXHRcdGNvbnN0IGN1cnJlbnROYXZJdGVtRWwgPSBjdXJyZW50TmF2SXRlbSA/IGN1cnJlbnROYXZJdGVtLmVsIDogbnVsbDtcblxuXHRcdGN1cnJlbnROYXZJdGVtRWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cblx0XHRlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRpZiAodGhpcy5iYWNrQnRuKSB0aGlzLmJhY2tCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRpZiAodGhpcy5uZXh0QnRuKSB0aGlzLm5leHRCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRpZiAodGhpcy5za2lwQnRuKSB0aGlzLnNraXBCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRpZiAodGhpcy5jb21wbGV0ZVN0ZXBCdG4pIHRoaXMuY29tcGxldGVTdGVwQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0aWYgKHRoaXMuZmluaXNoQnRuKSB0aGlzLmZpbmlzaEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGlmICh0aGlzLnJlc2V0QnRuKSB0aGlzLnJlc2V0QnRuLnN0eWxlLmRpc3BsYXkgPSAnJztcblxuXHRcdGlmICh1bmNvbXBsZXRlZE9yU2tpcFN0ZXBzLmxlbmd0aCA8PSAxKSB7XG5cdFx0XHR0aGlzLmlzQ29tcGxldGVkID0gdHJ1ZTtcblx0XHRcdHRoaXMuc2V0Q29tcGxldGVkKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5maXJlRXZlbnQoJ2ZpbmlzaCcsIHRoaXMuY3VycmVudEluZGV4KTtcblx0XHRkaXNwYXRjaCgnZmluaXNoLmhzLnN0ZXBwZXInLCB0aGlzLmVsLCB0aGlzLmN1cnJlbnRJbmRleCk7XG5cdH1cblxuXHQvLyByZXNldFxuXHRwcml2YXRlIGJ1aWxkUmVzZXRCdXR0b24oKSB7XG5cdFx0aWYgKCF0aGlzLnJlc2V0QnRuKSByZXR1cm47XG5cblx0XHR0aGlzLnJlc2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cblx0XHRcdHRoaXMuaGFuZGxlUmVzZXRCdXR0b25DbGljaygpLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZVJlc2V0QnV0dG9uQ2xpY2soKSB7XG5cdFx0aWYgKHRoaXMuYmFja0J0bikgdGhpcy5iYWNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRpZiAodGhpcy5uZXh0QnRuKSB0aGlzLm5leHRCdG4uc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdGlmICh0aGlzLmNvbXBsZXRlU3RlcEJ0bikge1xuXHRcdFx0dGhpcy5jb21wbGV0ZVN0ZXBCdG4uc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdFx0dGhpcy5jb21wbGV0ZVN0ZXBCdG4uaW5uZXJUZXh0ID0gdGhpcy5jb21wbGV0ZVN0ZXBCdG5EZWZhdWx0VGV4dDtcblx0XHRcdHRoaXMuY29tcGxldGVTdGVwQnRuLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcblx0XHRcdHRoaXMuY29tcGxldGVTdGVwQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnJlc2V0QnRuKSB0aGlzLnJlc2V0QnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cblx0XHR0aGlzLm5hdkl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdGNvbnN0IHsgZWwgfSA9IGl0ZW07XG5cdFx0XHRpdGVtLmlzU2tpcCA9IGZhbHNlO1xuXHRcdFx0aXRlbS5pc0NvbXBsZXRlZCA9IGZhbHNlO1xuXG5cdFx0XHR0aGlzLnVuc2V0Q3VycmVudE5hdkl0ZW1BY3Rpb25zKGVsKTtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Y2Nlc3MnLCAnc2tpcHBlZCcpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5jb250ZW50SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3QgeyBlbCB9ID0gaXRlbTtcblx0XHRcdGl0ZW0uaXNTa2lwID0gZmFsc2U7XG5cdFx0XHRpdGVtLmlzQ29tcGxldGVkID0gZmFsc2U7XG5cblx0XHRcdHRoaXMudW5zZXRDdXJyZW50Q29udGVudEl0ZW1BY3Rpb25zKGVsKTtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Y2Nlc3MnLCAnc2tpcHBlZCcpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5jdXJyZW50SW5kZXggPSAxO1xuXG5cdFx0dGhpcy5zZXRDdXJyZW50TmF2SXRlbSgpO1xuXHRcdHRoaXMuc2V0Q3VycmVudENvbnRlbnRJdGVtKCk7XG5cdFx0dGhpcy5zaG93RmluaXNoQnV0dG9uKCk7XG5cdFx0dGhpcy5zaG93Q29tcGxldGVTdGVwQnV0dG9uKCk7XG5cdFx0dGhpcy5jaGVja0ZvclRoZUZpcnN0U3RlcCgpO1xuXG5cdFx0dGhpcy51bnNldENvbXBsZXRlZCgpO1xuXHRcdHRoaXMuaXNDb21wbGV0ZWQgPSBmYWxzZTtcblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdyZXNldCcsIHRoaXMuY3VycmVudEluZGV4KTtcblx0XHRkaXNwYXRjaCgncmVzZXQuaHMuc3RlcHBlcicsIHRoaXMuZWwsIHRoaXMuY3VycmVudEluZGV4KTtcblx0fVxuXG5cdC8vIFB1YmxpYyBtZXRob2RzXG5cdHB1YmxpYyBzZXRQcm9jZXNzZWROYXZJdGVtKG4/OiBudW1iZXIpIHtcblx0XHRjb25zdCB0YXJnZXROYXZJdGVtID0gdGhpcy5nZXROYXZJdGVtKG4pO1xuXG5cdFx0aWYgKCF0YXJnZXROYXZJdGVtKSByZXR1cm47XG5cblx0XHR0aGlzLnNldFByb2Nlc3NlZE5hdkl0ZW1BY3Rpb25zKHRhcmdldE5hdkl0ZW0pO1xuXHR9XG5cblx0cHVibGljIHVuc2V0UHJvY2Vzc2VkTmF2SXRlbShuPzogbnVtYmVyKSB7XG5cdFx0Y29uc3QgdGFyZ2V0TmF2SXRlbSA9IHRoaXMuZ2V0TmF2SXRlbShuKTtcblxuXHRcdGlmICghdGFyZ2V0TmF2SXRlbSkgcmV0dXJuO1xuXG5cdFx0dGhpcy51bnNldFByb2Nlc3NlZE5hdkl0ZW1BY3Rpb25zKHRhcmdldE5hdkl0ZW0pO1xuXHR9XG5cblx0cHVibGljIGdvVG9OZXh0KCkge1xuXHRcdGlmICh0aGlzLm1vZGUgPT09ICdsaW5lYXInKSB0aGlzLnNldENvbXBsZXRlSXRlbSgpO1xuXG5cdFx0dGhpcy5oYW5kbGVOZXh0QnV0dG9uQ2xpY2sodGhpcy5tb2RlICE9PSAnbGluZWFyJyk7XG5cblx0XHRpZiAodGhpcy5tb2RlID09PSAnbGluZWFyJyAmJiB0aGlzLmN1cnJlbnRJbmRleCA9PT0gdGhpcy50b3RhbFN0ZXBzKSB7XG5cdFx0XHRpZiAodGhpcy5uZXh0QnRuKSB0aGlzLm5leHRCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdGlmICh0aGlzLmNvbXBsZXRlU3RlcEJ0bikgdGhpcy5jb21wbGV0ZVN0ZXBCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZGlzYWJsZUJ1dHRvbnMoKSB7XG5cdFx0aWYgKHRoaXMuYmFja0J0bikgdGhpcy5zZXRUb0Rpc2FibGVkKHRoaXMuYmFja0J0bik7XG5cdFx0aWYgKHRoaXMubmV4dEJ0bikgdGhpcy5zZXRUb0Rpc2FibGVkKHRoaXMubmV4dEJ0bik7XG5cdH1cblxuXHRwdWJsaWMgZW5hYmxlQnV0dG9ucygpIHtcblx0XHRpZiAodGhpcy5iYWNrQnRuKSB0aGlzLnNldFRvTm9uRGlzYWJsZWQodGhpcy5iYWNrQnRuKTtcblx0XHRpZiAodGhpcy5uZXh0QnRuKSB0aGlzLnNldFRvTm9uRGlzYWJsZWQodGhpcy5uZXh0QnRuKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRFcnJvck5hdkl0ZW0obj86IG51bWJlcikge1xuXHRcdGNvbnN0IHRhcmdldE5hdkl0ZW0gPSB0aGlzLmdldE5hdkl0ZW0obik7XG5cblx0XHRpZiAoIXRhcmdldE5hdkl0ZW0pIHJldHVybjtcblxuXHRcdHRoaXMuc2V0RXJyb3JOYXZJdGVtQWN0aW9ucyh0YXJnZXROYXZJdGVtKTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2RzXG5cdHN0YXRpYyBnZXRJbnN0YW5jZSh0YXJnZXQ6IEhUTUxFbGVtZW50IHwgc3RyaW5nLCBpc0luc3RhbmNlPzogYm9vbGVhbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1N0ZXBwZXJDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50XG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzU3RlcHBlckNvbGxlY3Rpb24pIHdpbmRvdy4kaHNTdGVwcGVyQ29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy1zdGVwcGVyXTpub3QoLi0tcHJldmVudC1vbi1sb2FkLWluaXQpJylcblx0XHRcdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzU3RlcHBlckNvbGxlY3Rpb24uZmluZChcblx0XHRcdFx0XHRcdChlbEMpID0+IChlbEM/LmVsZW1lbnQ/LmVsIGFzIEhUTUxFbGVtZW50KSA9PT0gZWwsXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpXG5cdFx0XHRcdFx0bmV3IEhTU3RlcHBlcihlbCk7XG5cdFx0XHR9KTtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTU3RlcHBlcjogRnVuY3Rpb247XG5cdFx0JGhzU3RlcHBlckNvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU1N0ZXBwZXI+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTU3RlcHBlci5hdXRvSW5pdCgpO1xuXG5cdC8vIFVuY29tbWVudCBmb3IgZGVidWdcblx0Ly8gY29uc29sZS5sb2coJ1N0ZXBwZXIgY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzU3RlcHBlckNvbGxlY3Rpb24pO1xufSk7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHR3aW5kb3cuSFNTdGVwcGVyID0gSFNTdGVwcGVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU1N0ZXBwZXI7XG4iLCAiLypcbiAqIEhTU3Ryb25nUGFzc3dvcmRcbiAqIEB2ZXJzaW9uOiAyLjEuMFxuICogQGF1dGhvcjogSFRNTFN0cmVhbVxuICogQGxpY2Vuc2U6IExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9wcmVsaW5lLmNvL2RvY3MvbGljZW5zZS5odG1sKVxuICogQ29weXJpZ2h0IDIwMjMgSFRNTFN0cmVhbVxuICovXG5cbmltcG9ydCB7XG5cdGlzRW5vdWdoU3BhY2UsXG5cdGRpc3BhdGNoLFxuXHRodG1sVG9FbGVtZW50LFxuXHRjbGFzc1RvQ2xhc3NMaXN0LFxufSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmltcG9ydCB7IElTdHJvbmdQYXNzd29yZE9wdGlvbnMsIElTdHJvbmdQYXNzd29yZCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTU3Ryb25nUGFzc3dvcmRcblx0ZXh0ZW5kcyBIU0Jhc2VQbHVnaW48SVN0cm9uZ1Bhc3N3b3JkT3B0aW9ucz5cblx0aW1wbGVtZW50cyBJU3Ryb25nUGFzc3dvcmRcbntcblx0cHJpdmF0ZSByZWFkb25seSB0YXJnZXQ6IHN0cmluZyB8IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGhpbnRzOiBzdHJpbmcgfCBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgc3RyaXBDbGFzc2VzOiBzdHJpbmcgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IG1pbkxlbmd0aDogbnVtYmVyO1xuXHRwcml2YXRlIHJlYWRvbmx5IG1vZGU6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBwb3BvdmVyU3BhY2U6IG51bWJlcjtcblx0cHJpdmF0ZSByZWFkb25seSBjaGVja3NFeGNsdWRlOiBzdHJpbmdbXSB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgc3BlY2lhbENoYXJhY3RlcnNTZXQ6IHN0cmluZyB8IG51bGw7XG5cblx0cHVibGljIGlzT3BlbmVkOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgc3RyZW5ndGg6IG51bWJlciA9IDA7XG5cdHByaXZhdGUgcGFzc2VkUnVsZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cdHByaXZhdGUgd2Vha25lc3M6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBydWxlczogSFRNTEVsZW1lbnRbXSB8IG51bGw7XG5cdHByaXZhdGUgYXZhaWxhYmxlQ2hlY2tzOiBzdHJpbmdbXSB8IG51bGw7XG5cblx0Y29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogSVN0cm9uZ1Bhc3N3b3JkT3B0aW9ucykge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zKTtcblxuXHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtc3Ryb25nLXBhc3N3b3JkJyk7XG5cdFx0Y29uc3QgZGF0YU9wdGlvbnM6IElTdHJvbmdQYXNzd29yZE9wdGlvbnMgPSBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IHt9O1xuXHRcdGNvbnN0IGNvbmNhdE9wdGlvbnMgPSB7XG5cdFx0XHQuLi5kYXRhT3B0aW9ucyxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0fTtcblxuXHRcdHRoaXMudGFyZ2V0ID0gY29uY2F0T3B0aW9ucz8udGFyZ2V0XG5cdFx0XHQ/IHR5cGVvZiBjb25jYXRPcHRpb25zPy50YXJnZXQgPT09ICdzdHJpbmcnXG5cdFx0XHRcdD8gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uY2F0T3B0aW9ucy50YXJnZXQpIGFzIEhUTUxJbnB1dEVsZW1lbnQpXG5cdFx0XHRcdDogY29uY2F0T3B0aW9ucy50YXJnZXRcblx0XHRcdDogbnVsbDtcblx0XHR0aGlzLmhpbnRzID0gY29uY2F0T3B0aW9ucz8uaGludHNcblx0XHRcdD8gdHlwZW9mIGNvbmNhdE9wdGlvbnM/LmhpbnRzID09PSAnc3RyaW5nJ1xuXHRcdFx0XHQ/IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmNhdE9wdGlvbnMuaGludHMpIGFzIEhUTUxFbGVtZW50KVxuXHRcdFx0XHQ6IGNvbmNhdE9wdGlvbnMuaGludHNcblx0XHRcdDogbnVsbDtcblx0XHR0aGlzLnN0cmlwQ2xhc3NlcyA9IGNvbmNhdE9wdGlvbnM/LnN0cmlwQ2xhc3NlcyB8fCBudWxsO1xuXHRcdHRoaXMubWluTGVuZ3RoID0gY29uY2F0T3B0aW9ucz8ubWluTGVuZ3RoIHx8IDY7XG5cdFx0dGhpcy5tb2RlID0gY29uY2F0T3B0aW9ucz8ubW9kZSB8fCAnZGVmYXVsdCc7XG5cdFx0dGhpcy5wb3BvdmVyU3BhY2UgPSBjb25jYXRPcHRpb25zPy5wb3BvdmVyU3BhY2UgfHwgMTA7XG5cdFx0dGhpcy5jaGVja3NFeGNsdWRlID0gY29uY2F0T3B0aW9ucz8uY2hlY2tzRXhjbHVkZSB8fCBbXTtcblx0XHR0aGlzLmF2YWlsYWJsZUNoZWNrcyA9IFtcblx0XHRcdCdsb3dlcmNhc2UnLFxuXHRcdFx0J3VwcGVyY2FzZScsXG5cdFx0XHQnbnVtYmVycycsXG5cdFx0XHQnc3BlY2lhbC1jaGFyYWN0ZXJzJyxcblx0XHRcdCdtaW4tbGVuZ3RoJyxcblx0XHRdLmZpbHRlcigoZWwpID0+ICF0aGlzLmNoZWNrc0V4Y2x1ZGUuaW5jbHVkZXMoZWwpKTtcblx0XHR0aGlzLnNwZWNpYWxDaGFyYWN0ZXJzU2V0ID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/LnNwZWNpYWxDaGFyYWN0ZXJzU2V0IHx8XG5cdFx0XHQnIVwiIyQlJlxcJygpKissLS4vOjs8PT4/QFtcXFxcXFxcXFxcXFxdXl9ge3x9fic7XG5cblx0XHRpZiAodGhpcy50YXJnZXQpIHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCkge1xuXHRcdHRoaXMuY3JlYXRlQ29sbGVjdGlvbih3aW5kb3cuJGhzU3Ryb25nUGFzc3dvcmRDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdGlmICh0aGlzLmF2YWlsYWJsZUNoZWNrcy5sZW5ndGgpIHRoaXMuYnVpbGQoKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGQoKSB7XG5cdFx0dGhpcy5idWlsZFN0cmlwcygpO1xuXHRcdGlmICh0aGlzLmhpbnRzKSB0aGlzLmJ1aWxkSGludHMoKTtcblxuXHRcdHRoaXMuc2V0U3RyZW5ndGgoKHRoaXMudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcblxuXHRcdCh0aGlzLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0J2lucHV0Jyxcblx0XHRcdChldnQ6IElucHV0RXZlbnQpID0+IHtcblx0XHRcdFx0dGhpcy5zZXRTdHJlbmd0aCgoZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XG5cdFx0XHR9LFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkU3RyaXBzKCkge1xuXHRcdHRoaXMuZWwuaW5uZXJIVE1MID0gJyc7XG5cblx0XHRpZiAodGhpcy5zdHJpcENsYXNzZXMpIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hdmFpbGFibGVDaGVja3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgbmV3U3RyaXAgPSBodG1sVG9FbGVtZW50KCc8ZGl2PjwvZGl2PicpO1xuXHRcdFx0XHRjbGFzc1RvQ2xhc3NMaXN0KHRoaXMuc3RyaXBDbGFzc2VzLCBuZXdTdHJpcCk7XG5cblx0XHRcdFx0dGhpcy5lbC5hcHBlbmQobmV3U3RyaXApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYnVpbGRIaW50cygpIHtcblx0XHR0aGlzLndlYWtuZXNzID1cblx0XHRcdCh0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHQnW2RhdGEtaHMtc3Ryb25nLXBhc3N3b3JkLWhpbnRzLXdlYWtuZXNzLXRleHRdJyxcblx0XHRcdCkgfHwgbnVsbDtcblx0XHR0aGlzLnJ1bGVzID1cblx0XHRcdEFycmF5LmZyb20oXG5cdFx0XHRcdCh0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHRcdCdbZGF0YS1ocy1zdHJvbmctcGFzc3dvcmQtaGludHMtcnVsZS10ZXh0XScsXG5cdFx0XHRcdCksXG5cdFx0XHQpIHx8IG51bGw7XG5cblx0XHR0aGlzLnJ1bGVzLmZvckVhY2goKHJ1bGUpID0+IHtcblx0XHRcdGNvbnN0IHJ1bGVWYWx1ZSA9IHJ1bGUuZ2V0QXR0cmlidXRlKFxuXHRcdFx0XHQnZGF0YS1ocy1zdHJvbmctcGFzc3dvcmQtaGludHMtcnVsZS10ZXh0Jyxcblx0XHRcdCk7XG5cblx0XHRcdGlmICh0aGlzLmNoZWNrc0V4Y2x1ZGU/LmluY2x1ZGVzKHJ1bGVWYWx1ZSkpIHJ1bGUucmVtb3ZlKCk7XG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy53ZWFrbmVzcykgdGhpcy5idWlsZFdlYWtuZXNzKCk7XG5cdFx0aWYgKHRoaXMucnVsZXMpIHRoaXMuYnVpbGRSdWxlcygpO1xuXHRcdGlmICh0aGlzLm1vZGUgPT09ICdwb3BvdmVyJykge1xuXHRcdFx0KHRoaXMudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmlzT3BlbmVkID0gdHJ1ZTtcblx0XHRcdFx0KHRoaXMuaGludHMgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdFx0XHQodGhpcy5oaW50cyBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnYmxvY2snKTtcblxuXHRcdFx0XHR0aGlzLnJlY2FsY3VsYXRlRGlyZWN0aW9uKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0KHRoaXMudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuaXNPcGVuZWQgPSBmYWxzZTtcblx0XHRcdFx0KHRoaXMuaGludHMgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoXG5cdFx0XHRcdFx0J2Jsb2NrJyxcblx0XHRcdFx0XHQnYm90dG9tLWZ1bGwnLFxuXHRcdFx0XHRcdCd0b3AtZnVsbCcsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdCh0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHRcdFx0KHRoaXMuaGludHMgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpblRvcCA9ICcnO1xuXHRcdFx0XHQodGhpcy5oaW50cyBhcyBIVE1MRWxlbWVudCkuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkV2Vha25lc3MoKSB7XG5cdFx0dGhpcy5jaGVja1N0cmVuZ3RoKCh0aGlzLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XG5cdFx0dGhpcy5zZXRXZWFrbmVzc1RleHQoKTtcblxuXHRcdCh0aGlzLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0V2Vha25lc3NUZXh0KCkpLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGJ1aWxkUnVsZXMoKSB7XG5cdFx0dGhpcy5zZXRSdWxlc1RleHQoKTtcblxuXHRcdCh0aGlzLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0UnVsZXNUZXh0KCkpLFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIHNldFdlYWtuZXNzVGV4dCgpIHtcblx0XHRjb25zdCB3ZWFrbmVzc1RleHQgPSB0aGlzLndlYWtuZXNzLmdldEF0dHJpYnV0ZShcblx0XHRcdCdkYXRhLWhzLXN0cm9uZy1wYXNzd29yZC1oaW50cy13ZWFrbmVzcy10ZXh0Jyxcblx0XHQpO1xuXHRcdGNvbnN0IHdlYWtuZXNzVGV4dFRvSnNvbiA9IEpTT04ucGFyc2Uod2Vha25lc3NUZXh0IGFzIHN0cmluZyk7XG5cblx0XHR0aGlzLndlYWtuZXNzLnRleHRDb250ZW50ID0gd2Vha25lc3NUZXh0VG9Kc29uW3RoaXMuc3RyZW5ndGhdO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRSdWxlc1RleHQoKSB7XG5cdFx0dGhpcy5ydWxlcy5mb3JFYWNoKChydWxlKSA9PiB7XG5cdFx0XHRjb25zdCBydWxlVmFsdWUgPSBydWxlLmdldEF0dHJpYnV0ZShcblx0XHRcdFx0J2RhdGEtaHMtc3Ryb25nLXBhc3N3b3JkLWhpbnRzLXJ1bGUtdGV4dCcsXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLmNoZWNrSWZQYXNzZWQocnVsZSwgdGhpcy5wYXNzZWRSdWxlcy5oYXMocnVsZVZhbHVlKSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHRvZ2dsZVBvcG92ZXIoKSB7XG5cdFx0Y29uc3QgcG9wb3ZlciA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnBvcG92ZXInKTtcblxuXHRcdGlmIChwb3BvdmVyKSBwb3BvdmVyLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcblx0fVxuXG5cdHByaXZhdGUgY2hlY2tTdHJlbmd0aCh2YWw6IHN0cmluZyk6IHsgc3RyZW5ndGg6IG51bWJlcjsgcnVsZXM6IFNldDxzdHJpbmc+IH0ge1xuXHRcdGNvbnN0IHBhc3NlZFJ1bGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cdFx0Y29uc3QgcmVnZXhwcyA9IHtcblx0XHRcdGxvd2VyY2FzZTogL1thLXpdKy8sXG5cdFx0XHR1cHBlcmNhc2U6IC9bQS1aXSsvLFxuXHRcdFx0bnVtYmVyczogL1swLTldKy8sXG5cdFx0XHQnc3BlY2lhbC1jaGFyYWN0ZXJzJzogbmV3IFJlZ0V4cChgWyR7dGhpcy5zcGVjaWFsQ2hhcmFjdGVyc1NldH1dYCksXG5cdFx0fTtcblx0XHRsZXQgc3RyZW5ndGggPSAwO1xuXG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5hdmFpbGFibGVDaGVja3MuaW5jbHVkZXMoJ2xvd2VyY2FzZScpICYmXG5cdFx0XHR2YWwubWF0Y2gocmVnZXhwc1snbG93ZXJjYXNlJ10pXG5cdFx0KSB7XG5cdFx0XHRzdHJlbmd0aCArPSAxO1xuXHRcdFx0cGFzc2VkUnVsZXMuYWRkKCdsb3dlcmNhc2UnKTtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5hdmFpbGFibGVDaGVja3MuaW5jbHVkZXMoJ3VwcGVyY2FzZScpICYmXG5cdFx0XHR2YWwubWF0Y2gocmVnZXhwc1sndXBwZXJjYXNlJ10pXG5cdFx0KSB7XG5cdFx0XHRzdHJlbmd0aCArPSAxO1xuXHRcdFx0cGFzc2VkUnVsZXMuYWRkKCd1cHBlcmNhc2UnKTtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5hdmFpbGFibGVDaGVja3MuaW5jbHVkZXMoJ251bWJlcnMnKSAmJlxuXHRcdFx0dmFsLm1hdGNoKHJlZ2V4cHNbJ251bWJlcnMnXSlcblx0XHQpIHtcblx0XHRcdHN0cmVuZ3RoICs9IDE7XG5cdFx0XHRwYXNzZWRSdWxlcy5hZGQoJ251bWJlcnMnKTtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5hdmFpbGFibGVDaGVja3MuaW5jbHVkZXMoJ3NwZWNpYWwtY2hhcmFjdGVycycpICYmXG5cdFx0XHR2YWwubWF0Y2gocmVnZXhwc1snc3BlY2lhbC1jaGFyYWN0ZXJzJ10pXG5cdFx0KSB7XG5cdFx0XHRzdHJlbmd0aCArPSAxO1xuXHRcdFx0cGFzc2VkUnVsZXMuYWRkKCdzcGVjaWFsLWNoYXJhY3RlcnMnKTtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5hdmFpbGFibGVDaGVja3MuaW5jbHVkZXMoJ21pbi1sZW5ndGgnKSAmJlxuXHRcdFx0dmFsLmxlbmd0aCA+PSB0aGlzLm1pbkxlbmd0aFxuXHRcdCkge1xuXHRcdFx0c3RyZW5ndGggKz0gMTtcblx0XHRcdHBhc3NlZFJ1bGVzLmFkZCgnbWluLWxlbmd0aCcpO1xuXHRcdH1cblx0XHRpZiAoIXZhbC5sZW5ndGgpIHtcblx0XHRcdHN0cmVuZ3RoID0gMDtcblx0XHR9XG5cblx0XHRpZiAoc3RyZW5ndGggPT09IHRoaXMuYXZhaWxhYmxlQ2hlY2tzLmxlbmd0aClcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnYWNjZXB0ZWQnKTtcblx0XHRlbHNlIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWNjZXB0ZWQnKTtcblxuXHRcdHRoaXMuc3RyZW5ndGggPSBzdHJlbmd0aDtcblx0XHR0aGlzLnBhc3NlZFJ1bGVzID0gcGFzc2VkUnVsZXM7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RyZW5ndGg6IHRoaXMuc3RyZW5ndGgsXG5cdFx0XHRydWxlczogdGhpcy5wYXNzZWRSdWxlcyxcblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSBjaGVja0lmUGFzc2VkKGVsOiBIVE1MRWxlbWVudCwgaXNSdWxlUGFzc2VkID0gZmFsc2UpIHtcblx0XHRjb25zdCBjaGVjayA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNoZWNrXScpO1xuXHRcdGNvbnN0IHVuY2hlY2sgPSBlbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS11bmNoZWNrXScpO1xuXG5cdFx0aWYgKGlzUnVsZVBhc3NlZCkge1xuXHRcdFx0ZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0XHRjaGVjay5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0XHRcdHVuY2hlY2suY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdFx0Y2hlY2suY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cdFx0XHR1bmNoZWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2V0U3RyZW5ndGgodmFsOiBzdHJpbmcpIHtcblx0XHRjb25zdCB7IHN0cmVuZ3RoLCBydWxlcyB9ID0gdGhpcy5jaGVja1N0cmVuZ3RoKHZhbCk7XG5cdFx0Y29uc3QgcGF5bG9hZCA9IHtcblx0XHRcdHN0cmVuZ3RoLFxuXHRcdFx0cnVsZXMsXG5cdFx0fTtcblxuXHRcdHRoaXMuaGlkZVN0cmlwcyhzdHJlbmd0aCk7XG5cblx0XHR0aGlzLmZpcmVFdmVudCgnY2hhbmdlJywgcGF5bG9hZCk7XG5cdFx0ZGlzcGF0Y2goJ2NoYW5nZS5ocy5zdHJvbmdQYXNzd29yZCcsIHRoaXMuZWwsIHBheWxvYWQpO1xuXHR9XG5cblx0cHJpdmF0ZSBoaWRlU3RyaXBzKHF0eTogbnVtYmVyKSB7XG5cdFx0QXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKS5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQsIGk6IG51bWJlcikgPT4ge1xuXHRcdFx0aWYgKGkgPCBxdHkpIGVsLmNsYXNzTGlzdC5hZGQoJ3Bhc3NlZCcpO1xuXHRcdFx0ZWxzZSBlbC5jbGFzc0xpc3QucmVtb3ZlKCdwYXNzZWQnKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFB1YmxpYyBtZXRob2RzXG5cdHB1YmxpYyByZWNhbGN1bGF0ZURpcmVjdGlvbigpIHtcblx0XHRpZiAoXG5cdFx0XHRpc0Vub3VnaFNwYWNlKFxuXHRcdFx0XHR0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50LFxuXHRcdFx0XHR0aGlzLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50LFxuXHRcdFx0XHQnYm90dG9tJyxcblx0XHRcdFx0dGhpcy5wb3BvdmVyU3BhY2UsXG5cdFx0XHQpXG5cdFx0KSB7XG5cdFx0XHQodGhpcy5oaW50cyBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnYm90dG9tLWZ1bGwnKTtcblx0XHRcdCh0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuYWRkKCd0b3AtZnVsbCcpO1xuXHRcdFx0KHRoaXMuaGludHMgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcnO1xuXHRcdFx0KHRoaXMuaGludHMgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpblRvcCA9IGAke3RoaXMucG9wb3ZlclNwYWNlfXB4YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0KHRoaXMuaGludHMgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ3RvcC1mdWxsJyk7XG5cdFx0XHQodGhpcy5oaW50cyBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnYm90dG9tLWZ1bGwnKTtcblx0XHRcdCh0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblx0XHRcdCh0aGlzLmhpbnRzIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBgJHt0aGlzLnBvcG92ZXJTcGFjZX1weGA7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcpIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNTdHJvbmdQYXNzd29yZENvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGVsSW5Db2xsZWN0aW9uID8gZWxJbkNvbGxlY3Rpb24uZWxlbWVudCA6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzU3Ryb25nUGFzc3dvcmRDb2xsZWN0aW9uKVxuXHRcdFx0d2luZG93LiRoc1N0cm9uZ1Bhc3N3b3JkQ29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHQnW2RhdGEtaHMtc3Ryb25nLXBhc3N3b3JkXTpub3QoLi0tcHJldmVudC1vbi1sb2FkLWluaXQpJyxcblx0XHRcdClcblx0XHRcdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzU3Ryb25nUGFzc3dvcmRDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHRcdFx0XHQoZWxDKSA9PiAoZWxDPy5lbGVtZW50Py5lbCBhcyBIVE1MRWxlbWVudCkgPT09IGVsLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy1zdHJvbmctcGFzc3dvcmQnKTtcblx0XHRcdFx0XHRjb25zdCBvcHRpb25zOiBJU3Ryb25nUGFzc3dvcmRPcHRpb25zID0gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiB7fTtcblxuXHRcdFx0XHRcdG5ldyBIU1N0cm9uZ1Bhc3N3b3JkKGVsLCBvcHRpb25zKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRIU1N0cm9uZ1Bhc3N3b3JkOiBGdW5jdGlvbjtcblx0XHQkaHNTdHJvbmdQYXNzd29yZENvbGxlY3Rpb246IElDb2xsZWN0aW9uSXRlbTxIU1N0cm9uZ1Bhc3N3b3JkPltdO1xuXHR9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXHRIU1N0cm9uZ1Bhc3N3b3JkLmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnU3Ryb25nIHBhc3N3b3JkIGNvbGxlY3Rpb246Jywgd2luZG93LiRoc1N0cm9uZ1Bhc3N3b3JkQ29sbGVjdGlvbik7XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuXHRpZiAoIXdpbmRvdy4kaHNTdHJvbmdQYXNzd29yZENvbGxlY3Rpb24pIHJldHVybiBmYWxzZTtcblxuXHRjb25zdCB0YXJnZXQgPSB3aW5kb3cuJGhzU3Ryb25nUGFzc3dvcmRDb2xsZWN0aW9uLmZpbmQoXG5cdFx0KGVsKSA9PiBlbC5lbGVtZW50LmlzT3BlbmVkLFxuXHQpO1xuXG5cdGlmICh0YXJnZXQpIHRhcmdldC5lbGVtZW50LnJlY2FsY3VsYXRlRGlyZWN0aW9uKCk7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdpbmRvdy5IU1N0cm9uZ1Bhc3N3b3JkID0gSFNTdHJvbmdQYXNzd29yZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSFNTdHJvbmdQYXNzd29yZDtcbiIsICIvKlxuICogSFNUYWJzXG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSVRhYnMgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgSFNCYXNlUGx1Z2luIGZyb20gJy4uL2Jhc2UtcGx1Z2luJztcbmltcG9ydCB7IElDb2xsZWN0aW9uSXRlbSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgeyBUQUJTX0FDQ0VTU0lCSUxJVFlfS0VZX1NFVCB9IGZyb20gJy4uLy4uL2NvbnN0YW50cyc7XG5cbmNsYXNzIEhTVGFicyBleHRlbmRzIEhTQmFzZVBsdWdpbjx7fT4gaW1wbGVtZW50cyBJVGFicyB7XG5cdHB1YmxpYyB0b2dnbGVzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgZXh0cmFUb2dnbGVJZDogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBleHRyYVRvZ2dsZTogSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsO1xuXHRwcml2YXRlIGN1cnJlbnQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBjdXJyZW50Q29udGVudElkOiBzdHJpbmcgfCBudWxsO1xuXHRwdWJsaWMgY3VycmVudENvbnRlbnQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSBwcmV2OiBIVE1MRWxlbWVudCB8IG51bGw7XG5cdHByaXZhdGUgcHJldkNvbnRlbnRJZDogc3RyaW5nIHwgbnVsbDtcblx0cHJpdmF0ZSBwcmV2Q29udGVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IHt9LCBldmVudHM/OiB7fSkge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zLCBldmVudHMpO1xuXG5cdFx0dGhpcy50b2dnbGVzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocy10YWJdJyk7XG5cdFx0dGhpcy5leHRyYVRvZ2dsZUlkID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ2hzLWRhdGEtdGFiLXNlbGVjdCcpO1xuXHRcdHRoaXMuZXh0cmFUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZXh0cmFUb2dnbGVJZCk7XG5cdFx0dGhpcy5jdXJyZW50ID0gQXJyYXkuZnJvbSh0aGlzLnRvZ2dsZXMpLmZpbmQoKGVsKSA9PlxuXHRcdFx0ZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSxcblx0XHQpO1xuXHRcdHRoaXMuY3VycmVudENvbnRlbnRJZCA9IHRoaXMuY3VycmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtdGFiJyk7XG5cdFx0dGhpcy5jdXJyZW50Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jdXJyZW50Q29udGVudElkKTtcblx0XHR0aGlzLnByZXYgPSBudWxsO1xuXHRcdHRoaXMucHJldkNvbnRlbnRJZCA9IG51bGw7XG5cdFx0dGhpcy5wcmV2Q29udGVudCA9IG51bGw7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpIHtcblx0XHR0aGlzLmNyZWF0ZUNvbGxlY3Rpb24od2luZG93LiRoc1RhYnNDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdHRoaXMudG9nZ2xlcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9wZW4oZWwpKTtcblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLmV4dHJhVG9nZ2xlKSB7XG5cdFx0XHR0aGlzLmV4dHJhVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldnQpID0+IHRoaXMuY2hhbmdlKGV2dCkpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgb3BlbihlbDogSFRNTEVsZW1lbnQpIHtcblx0XHR0aGlzLnByZXYgPSB0aGlzLmN1cnJlbnQ7XG5cdFx0dGhpcy5wcmV2Q29udGVudElkID0gdGhpcy5jdXJyZW50Q29udGVudElkO1xuXHRcdHRoaXMucHJldkNvbnRlbnQgPSB0aGlzLmN1cnJlbnRDb250ZW50O1xuXG5cdFx0dGhpcy5jdXJyZW50ID0gZWw7XG5cdFx0dGhpcy5jdXJyZW50Q29udGVudElkID0gdGhpcy5jdXJyZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1ocy10YWInKTtcblx0XHR0aGlzLmN1cnJlbnRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmN1cnJlbnRDb250ZW50SWQpO1xuXG5cdFx0dGhpcy5wcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdHRoaXMucHJldkNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cblx0XHR0aGlzLmN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0dGhpcy5jdXJyZW50Q29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdjaGFuZ2UnLCB7XG5cdFx0XHRlbCxcblx0XHRcdHByZXY6IHRoaXMucHJldkNvbnRlbnRJZCxcblx0XHRcdGN1cnJlbnQ6IHRoaXMuY3VycmVudENvbnRlbnRJZCxcblx0XHR9KTtcblx0XHRkaXNwYXRjaCgnY2hhbmdlLmhzLnRhYicsIGVsLCB7XG5cdFx0XHRlbCxcblx0XHRcdHByZXY6IHRoaXMucHJldkNvbnRlbnRJZCxcblx0XHRcdGN1cnJlbnQ6IHRoaXMuY3VycmVudENvbnRlbnRJZCxcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgY2hhbmdlKGV2dDogRXZlbnQpIHtcblx0XHRjb25zdCB0b2dnbGU6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdGBbZGF0YS1ocy10YWI9XCIkeyhldnQudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZX1cIl1gLFxuXHRcdCk7XG5cblx0XHRpZiAodG9nZ2xlKSB0b2dnbGUuY2xpY2soKTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2RzXG5cdHN0YXRpYyBnZXRJbnN0YW5jZSh0YXJnZXQ6IEhUTUxFbGVtZW50IHwgc3RyaW5nLCBpc0luc3RhbmNlPzogYm9vbGVhbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1RhYnNDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50XG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzVGFic0NvbGxlY3Rpb24pIHdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHQnW3JvbGU9XCJ0YWJsaXN0XCJdOm5vdChzZWxlY3QpOm5vdCguLS1wcmV2ZW50LW9uLWxvYWQtaW5pdCknLFxuXHRcdFx0KVxuXHRcdFx0LmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0IXdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNUYWJzKGVsKTtcblx0XHRcdH0pO1xuXG5cdFx0aWYgKHdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbilcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiBIU1RhYnMuYWNjZXNzaWJpbGl0eShldnQpKTtcblx0fVxuXG5cdHN0YXRpYyBvcGVuKHRhcmdldDogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbi5maW5kKChlbCkgPT5cblx0XHRcdEFycmF5LmZyb20oZWwuZWxlbWVudC50b2dnbGVzKS5pbmNsdWRlcyhcblx0XHRcdFx0dHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQsXG5cdFx0XHQpLFxuXHRcdCk7XG5cdFx0Y29uc3QgdGFyZ2V0SW5Db2xsZWN0aW9uID0gQXJyYXkuZnJvbShlbEluQ29sbGVjdGlvbi5lbGVtZW50LnRvZ2dsZXMpLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAodGFyZ2V0SW5Db2xsZWN0aW9uICYmICF0YXJnZXRJbkNvbGxlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSlcblx0XHRcdGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQub3Blbih0YXJnZXRJbkNvbGxlY3Rpb24pO1xuXHR9XG5cblx0Ly8gQWNjZXNzaWJpbGl0eSBtZXRob2RzXG5cdHN0YXRpYyBhY2Nlc3NpYmlsaXR5KGV2dDogS2V5Ym9hcmRFdmVudCkge1xuXHRcdGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLXRhYl06Zm9jdXMnKTtcblxuXHRcdGlmIChcblx0XHRcdHRhcmdldCAmJlxuXHRcdFx0VEFCU19BQ0NFU1NJQklMSVRZX0tFWV9TRVQuaW5jbHVkZXMoZXZ0LmNvZGUpICYmXG5cdFx0XHQhZXZ0Lm1ldGFLZXlcblx0XHQpIHtcblx0XHRcdGNvbnN0IGlzVmVydGljYWwgPSB0YXJnZXRcblx0XHRcdFx0LmNsb3Nlc3QoJ1tyb2xlPVwidGFibGlzdFwiXScpXG5cdFx0XHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtdGFicy12ZXJ0aWNhbCcpO1xuXG5cdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0c3dpdGNoIChldnQuY29kZSkge1xuXHRcdFx0XHRjYXNlIGlzVmVydGljYWwgPT09ICd0cnVlJyA/ICdBcnJvd1VwJyA6ICdBcnJvd0xlZnQnOlxuXHRcdFx0XHRcdHRoaXMub25BcnJvdygpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIGlzVmVydGljYWwgPT09ICd0cnVlJyA/ICdBcnJvd0Rvd24nIDogJ0Fycm93UmlnaHQnOlxuXHRcdFx0XHRcdHRoaXMub25BcnJvdyhmYWxzZSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0hvbWUnOlxuXHRcdFx0XHRcdHRoaXMub25TdGFydEVuZCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdFbmQnOlxuXHRcdFx0XHRcdHRoaXMub25TdGFydEVuZChmYWxzZSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uQXJyb3coaXNPcHBvc2l0ZSA9IHRydWUpIHtcblx0XHRjb25zdCB0YXJnZXQgPSBkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLXRhYl06Zm9jdXMnKVxuXHRcdFx0LmNsb3Nlc3QoJ1tyb2xlPVwidGFibGlzdFwiXScpO1xuXHRcdGNvbnN0IHRhcmdldEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSB0YXJnZXQsXG5cdFx0KTtcblxuXHRcdGlmICh0YXJnZXRJbkNvbGxlY3Rpb24pIHtcblx0XHRcdGNvbnN0IHRvZ2dsZXMgPSBpc09wcG9zaXRlXG5cdFx0XHRcdD8gQXJyYXkuZnJvbSh0YXJnZXRJbkNvbGxlY3Rpb24uZWxlbWVudC50b2dnbGVzKS5yZXZlcnNlKClcblx0XHRcdFx0OiBBcnJheS5mcm9tKHRhcmdldEluQ29sbGVjdGlvbi5lbGVtZW50LnRvZ2dsZXMpO1xuXHRcdFx0Y29uc3QgZm9jdXNlZCA9IHRvZ2dsZXMuZmluZCgoZWwpID0+IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsKTtcblx0XHRcdGxldCBmb2N1c2VkSW5kID0gdG9nZ2xlcy5maW5kSW5kZXgoKGVsOiBhbnkpID0+IGVsID09PSBmb2N1c2VkKTtcblx0XHRcdGZvY3VzZWRJbmQgPSBmb2N1c2VkSW5kICsgMSA8IHRvZ2dsZXMubGVuZ3RoID8gZm9jdXNlZEluZCArIDEgOiAwO1xuXG5cdFx0XHR0b2dnbGVzW2ZvY3VzZWRJbmRdLmZvY3VzKCk7XG5cdFx0XHR0b2dnbGVzW2ZvY3VzZWRJbmRdLmNsaWNrKCk7XG5cdFx0fVxuXHR9XG5cblx0c3RhdGljIG9uU3RhcnRFbmQoaXNPcHBvc2l0ZSA9IHRydWUpIHtcblx0XHRjb25zdCB0YXJnZXQgPSBkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhzLXRhYl06Zm9jdXMnKVxuXHRcdFx0LmNsb3Nlc3QoJ1tyb2xlPVwidGFibGlzdFwiXScpO1xuXHRcdGNvbnN0IHRhcmdldEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PiBlbC5lbGVtZW50LmVsID09PSB0YXJnZXQsXG5cdFx0KTtcblxuXHRcdGlmICh0YXJnZXRJbkNvbGxlY3Rpb24pIHtcblx0XHRcdGNvbnN0IHRvZ2dsZXMgPSBpc09wcG9zaXRlXG5cdFx0XHRcdD8gQXJyYXkuZnJvbSh0YXJnZXRJbkNvbGxlY3Rpb24uZWxlbWVudC50b2dnbGVzKVxuXHRcdFx0XHQ6IEFycmF5LmZyb20odGFyZ2V0SW5Db2xsZWN0aW9uLmVsZW1lbnQudG9nZ2xlcykucmV2ZXJzZSgpO1xuXG5cdFx0XHRpZiAodG9nZ2xlcy5sZW5ndGgpIHtcblx0XHRcdFx0dG9nZ2xlc1swXS5mb2N1cygpO1xuXHRcdFx0XHR0b2dnbGVzWzBdLmNsaWNrKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXHRzdGF0aWMgb24oZXZ0OiBzdHJpbmcsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNiOiBGdW5jdGlvbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1RhYnNDb2xsZWN0aW9uLmZpbmQoKGVsKSA9PlxuXHRcdFx0QXJyYXkuZnJvbShlbC5lbGVtZW50LnRvZ2dsZXMpLmluY2x1ZGVzKFxuXHRcdFx0XHR0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCxcblx0XHRcdCksXG5cdFx0KTtcblxuXHRcdGlmIChlbEluQ29sbGVjdGlvbikgZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5ldmVudHNbZXZ0XSA9IGNiO1xuXHR9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcblx0aW50ZXJmYWNlIFdpbmRvdyB7XG5cdFx0SFNUYWJzOiBGdW5jdGlvbjtcblx0XHQkaHNUYWJzQ29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTVGFicz5bXTtcblx0fVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcblx0SFNUYWJzLmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnVGFicyBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNUYWJzQ29sbGVjdGlvbik7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdpbmRvdy5IU1RhYnMgPSBIU1RhYnM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTVGFicztcbiIsICIvKlxuICogSFNUaGVtZVN3aXRjaFxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cbmltcG9ydCB7IElUaGVtZVN3aXRjaE9wdGlvbnMsIElUaGVtZVN3aXRjaCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmltcG9ydCBIU0Jhc2VQbHVnaW4gZnJvbSAnLi4vYmFzZS1wbHVnaW4nO1xuaW1wb3J0IHsgSUNvbGxlY3Rpb25JdGVtIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5cbmNsYXNzIEhTVGhlbWVTd2l0Y2hcblx0ZXh0ZW5kcyBIU0Jhc2VQbHVnaW48SVRoZW1lU3dpdGNoT3B0aW9ucz5cblx0aW1wbGVtZW50cyBJVGhlbWVTd2l0Y2hcbntcblx0cHVibGljIHRoZW1lOiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgdGhlbWVTZXQ6IHN0cmluZ1tdO1xuXG5cdGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IElUaGVtZVN3aXRjaE9wdGlvbnMpIHtcblx0XHRzdXBlcihlbCwgb3B0aW9ucyk7XG5cblx0XHRjb25zdCBkYXRhID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhzLXRoZW1lLXN3aXRjaCcpO1xuXHRcdGNvbnN0IGRhdGFPcHRpb25zOiBJVGhlbWVTd2l0Y2hPcHRpb25zID0gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiB7fTtcblx0XHRjb25zdCBjb25jYXRPcHRpb25zID0ge1xuXHRcdFx0Li4uZGF0YU9wdGlvbnMsXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdH07XG5cblx0XHR0aGlzLnRoZW1lID1cblx0XHRcdGNvbmNhdE9wdGlvbnM/LnRoZW1lIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoc190aGVtZScpIHx8ICdkZWZhdWx0Jztcblx0XHR0aGlzLnRoZW1lU2V0ID0gWydsaWdodCcsICdkYXJrJywgJ2RlZmF1bHQnXTtcblxuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCkge1xuXHRcdHRoaXMuY3JlYXRlQ29sbGVjdGlvbih3aW5kb3cuJGhzVGhlbWVTd2l0Y2hDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdGlmICh0aGlzLnRoZW1lICE9PSAnZGVmYXVsdCcpIHRoaXMuc2V0QXBwZWFyYW5jZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXRSZXNldFN0eWxlcygpIHtcblx0XHRjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cblx0XHRzdHlsZS5pbm5lclRleHQgPSBgKnt0cmFuc2l0aW9uOiB1bnNldCAhaW1wb3J0YW50O31gO1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZSgnZGF0YS1ocy1hcHBlYXJhbmNlLW9ubG9hZC1zdHlsZXMnLCAnJyk7XG5cblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcblxuXHRcdHJldHVybiBzdHlsZTtcblx0fVxuXG5cdHByaXZhdGUgYWRkU3lzdGVtVGhlbWVPYnNlcnZlcigpIHtcblx0XHR3aW5kb3dcblx0XHRcdC5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJylcblx0XHRcdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoeyBtYXRjaGVzIH0pID0+IHtcblx0XHRcdFx0aWYgKG1hdGNoZXMpIHRoaXMuc2V0QXBwZWFyYW5jZSgnZGFyaycsIGZhbHNlKTtcblx0XHRcdFx0ZWxzZSB0aGlzLnNldEFwcGVhcmFuY2UoJ2RlZmF1bHQnLCBmYWxzZSk7XG5cdFx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVtb3ZlU3lzdGVtVGhlbWVPYnNlcnZlcigpIHtcblx0XHR3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLnJlbW92ZUV2ZW50TGlzdGVuZXI7XG5cdH1cblxuXHQvLyBQdWJsaWMgbWV0aG9kc1xuXHRwdWJsaWMgc2V0QXBwZWFyYW5jZShcblx0XHR0aGVtZSA9IHRoaXMudGhlbWUsXG5cdFx0aXNTYXZlVG9Mb2NhbFN0b3JhZ2UgPSB0cnVlLFxuXHRcdGlzU2V0RGlzcGF0Y2hFdmVudCA9IHRydWUsXG5cdCkge1xuXHRcdGNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG5cdFx0Y29uc3QgcmVzZXRTdHlsZXMgPSB0aGlzLnNldFJlc2V0U3R5bGVzKCk7XG5cblx0XHRpZiAoaXNTYXZlVG9Mb2NhbFN0b3JhZ2UpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoc190aGVtZScsIHRoZW1lKTtcblx0XHRpZiAodGhlbWUgPT09ICdhdXRvJylcblx0XHRcdHRoZW1lID0gd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzXG5cdFx0XHRcdD8gJ2RhcmsnXG5cdFx0XHRcdDogJ2RlZmF1bHQnO1xuXG5cdFx0aHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdsaWdodCcsICdkYXJrJywgJ2RlZmF1bHQnLCAnYXV0bycpO1xuXHRcdGh0bWwuY2xhc3NMaXN0LmFkZCh0aGVtZSk7XG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHJlc2V0U3R5bGVzLnJlbW92ZSgpKTtcblxuXHRcdGlmIChpc1NldERpc3BhdGNoRXZlbnQpXG5cdFx0XHR3aW5kb3cuZGlzcGF0Y2hFdmVudChcblx0XHRcdFx0bmV3IEN1c3RvbUV2ZW50KCdvbi1ocy1hcHBlYXJhbmNlLWNoYW5nZScsIHsgZGV0YWlsOiB0aGVtZSB9KSxcblx0XHRcdCk7XG5cdH1cblxuXHQvLyBTdGF0aWMgbWV0aG9kc1xuXHRzdGF0aWMgZ2V0SW5zdGFuY2UodGFyZ2V0OiBIVE1MRWxlbWVudCB8IHN0cmluZykge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1RoZW1lU3dpdGNoQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gZWxJbkNvbGxlY3Rpb24gPyBlbEluQ29sbGVjdGlvbi5lbGVtZW50IDogbnVsbDtcblx0fVxuXG5cdHN0YXRpYyBhdXRvSW5pdCgpIHtcblx0XHRpZiAoIXdpbmRvdy4kaHNUaGVtZVN3aXRjaENvbGxlY3Rpb24pIHdpbmRvdy4kaHNUaGVtZVN3aXRjaENvbGxlY3Rpb24gPSBbXTtcblxuXHRcdGNvbnN0IHRvZ2dsZU9ic2VydmVTeXN0ZW1UaGVtZSA9IChlbDogSFNUaGVtZVN3aXRjaCkgPT4ge1xuXHRcdFx0aWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoc190aGVtZScpID09PSAnYXV0bycpXG5cdFx0XHRcdGVsLmFkZFN5c3RlbVRoZW1lT2JzZXJ2ZXIoKTtcblx0XHRcdGVsc2UgZWwucmVtb3ZlU3lzdGVtVGhlbWVPYnNlcnZlcigpO1xuXHRcdH07XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLXRoZW1lLXN3aXRjaF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc1RoZW1lU3dpdGNoQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnN0IHN3aXRjaFRoZW1lID0gbmV3IEhTVGhlbWVTd2l0Y2goZWwpO1xuXHRcdFx0XHRcdChzd2l0Y2hUaGVtZS5lbCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkID1cblx0XHRcdFx0XHRcdHN3aXRjaFRoZW1lLnRoZW1lID09PSAnZGFyayc7XG5cblx0XHRcdFx0XHR0b2dnbGVPYnNlcnZlU3lzdGVtVGhlbWUoc3dpdGNoVGhlbWUpO1xuXG5cdFx0XHRcdFx0c3dpdGNoVGhlbWUuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2dCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgdGhlbWUgPSAoZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkXG5cdFx0XHRcdFx0XHRcdD8gJ2RhcmsnXG5cdFx0XHRcdFx0XHRcdDogJ2RlZmF1bHQnO1xuXHRcdFx0XHRcdFx0c3dpdGNoVGhlbWUuc2V0QXBwZWFyYW5jZSh0aGVtZSk7XG5cblx0XHRcdFx0XHRcdHRvZ2dsZU9ic2VydmVTeXN0ZW1UaGVtZShzd2l0Y2hUaGVtZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHQnW2RhdGEtaHMtdGhlbWUtY2xpY2stdmFsdWVdOm5vdCguLS1wcmV2ZW50LW9uLWxvYWQtaW5pdCknLFxuXHRcdFx0KVxuXHRcdFx0LmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0aGVtZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy10aGVtZS1jbGljay12YWx1ZScpO1xuXHRcdFx0XHRjb25zdCBzd2l0Y2hUaGVtZSA9IG5ldyBIU1RoZW1lU3dpdGNoKGVsKTtcblxuXHRcdFx0XHR0b2dnbGVPYnNlcnZlU3lzdGVtVGhlbWUoc3dpdGNoVGhlbWUpO1xuXG5cdFx0XHRcdHN3aXRjaFRoZW1lLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdHN3aXRjaFRoZW1lLnNldEFwcGVhcmFuY2UodGhlbWUpO1xuXG5cdFx0XHRcdFx0dG9nZ2xlT2JzZXJ2ZVN5c3RlbVRoZW1lKHN3aXRjaFRoZW1lKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTVGhlbWVTd2l0Y2g6IEZ1bmN0aW9uO1xuXHRcdCRoc1RoZW1lU3dpdGNoQ29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTVGhlbWVTd2l0Y2g+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTVGhlbWVTd2l0Y2guYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdUaGVtZSBzd2l0Y2ggY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzVGhlbWVTd2l0Y2hDb2xsZWN0aW9uKTtcbn0pO1xuXG5pZiAod2luZG93LiRoc1RoZW1lU3dpdGNoQ29sbGVjdGlvbikge1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHQnb24taHMtYXBwZWFyYW5jZS1jaGFuZ2UnLFxuXHRcdChldnQ6IEV2ZW50ICYgeyBkZXRhaWw6IHN0cmluZyB9KSA9PiB7XG5cdFx0XHR3aW5kb3cuJGhzVGhlbWVTd2l0Y2hDb2xsZWN0aW9uLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdChlbC5lbGVtZW50LmVsIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQgPSBldnQuZGV0YWlsID09PSAnZGFyayc7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHQpO1xufVxuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTVGhlbWVTd2l0Y2ggPSBIU1RoZW1lU3dpdGNoO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU1RoZW1lU3dpdGNoO1xuIiwgIi8qXG4gKiBIU1RvZ2dsZUNvdW50XG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBJVG9nZ2xlQ291bnRPcHRpb25zLCBJVG9nZ2xlQ291bnQgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgSFNCYXNlUGx1Z2luIGZyb20gJy4uL2Jhc2UtcGx1Z2luJztcbmltcG9ydCB7IElDb2xsZWN0aW9uSXRlbSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMnO1xuXG5jbGFzcyBIU1RvZ2dsZUNvdW50XG5cdGV4dGVuZHMgSFNCYXNlUGx1Z2luPElUb2dnbGVDb3VudE9wdGlvbnM+XG5cdGltcGxlbWVudHMgSVRvZ2dsZUNvdW50XG57XG5cdHByaXZhdGUgcmVhZG9ubHkgdGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0cHJpdmF0ZSByZWFkb25seSBtaW46IG51bWJlciB8IG51bGw7XG5cdHByaXZhdGUgcmVhZG9ubHkgbWF4OiBudW1iZXIgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGR1cmF0aW9uOiBudW1iZXIgfCBudWxsO1xuXHRwcml2YXRlIGlzQ2hlY2tlZDogYm9vbGVhbjtcblxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBJVG9nZ2xlQ291bnRPcHRpb25zKSB7XG5cdFx0c3VwZXIoZWwsIG9wdGlvbnMpO1xuXG5cdFx0Y29uc3QgZGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1ocy10b2dnbGUtY291bnQnKTtcblx0XHRjb25zdCBkYXRhT3B0aW9uczogSVRvZ2dsZUNvdW50T3B0aW9ucyA9IGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XG5cdFx0Y29uc3QgY29uY2F0T3B0aW9ucyA9IHtcblx0XHRcdC4uLmRhdGFPcHRpb25zLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHR9O1xuXG5cdFx0dGhpcy50YXJnZXQgPSBjb25jYXRPcHRpb25zPy50YXJnZXRcblx0XHRcdD8gdHlwZW9mIGNvbmNhdE9wdGlvbnM/LnRhcmdldCA9PT0gJ3N0cmluZydcblx0XHRcdFx0PyAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25jYXRPcHRpb25zLnRhcmdldCkgYXMgSFRNTElucHV0RWxlbWVudClcblx0XHRcdFx0OiBjb25jYXRPcHRpb25zLnRhcmdldFxuXHRcdFx0OiBudWxsO1xuXHRcdHRoaXMubWluID0gY29uY2F0T3B0aW9ucz8ubWluIHx8IDA7XG5cdFx0dGhpcy5tYXggPSBjb25jYXRPcHRpb25zPy5tYXggfHwgMDtcblx0XHR0aGlzLmR1cmF0aW9uID0gY29uY2F0T3B0aW9ucz8uZHVyYXRpb24gfHwgNzAwO1xuXG5cdFx0dGhpcy5pc0NoZWNrZWQgPSAodGhpcy50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCB8fCBmYWxzZTtcblxuXHRcdGlmICh0aGlzLnRhcmdldCkgdGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNUb2dnbGVDb3VudENvbGxlY3Rpb24sIHRoaXMpO1xuXG5cdFx0aWYgKHRoaXMuaXNDaGVja2VkKSB0aGlzLmVsLmlubmVyVGV4dCA9IFN0cmluZyh0aGlzLm1heCk7XG5cblx0XHR0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmlzQ2hlY2tlZCA9ICF0aGlzLmlzQ2hlY2tlZDtcblxuXHRcdFx0dGhpcy50b2dnbGUoKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgdG9nZ2xlKCkge1xuXHRcdGlmICh0aGlzLmlzQ2hlY2tlZCkgdGhpcy5jb3VudFVwKCk7XG5cdFx0ZWxzZSB0aGlzLmNvdW50RG93bigpO1xuXHR9XG5cblx0cHJpdmF0ZSBhbmltYXRlKGZyb206IG51bWJlciwgdG86IG51bWJlcikge1xuXHRcdGxldCBzdGFydFRpbWVzdGFtcCA9IDA7XG5cblx0XHRjb25zdCBzdGVwID0gKHRpbWVzdGFtcDogbnVtYmVyKSA9PiB7XG5cdFx0XHRpZiAoIXN0YXJ0VGltZXN0YW1wKSBzdGFydFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcblx0XHRcdGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oXG5cdFx0XHRcdCh0aW1lc3RhbXAgLSBzdGFydFRpbWVzdGFtcCkgLyB0aGlzLmR1cmF0aW9uLFxuXHRcdFx0XHQxLFxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5lbC5pbm5lclRleHQgPSBTdHJpbmcoTWF0aC5mbG9vcihwcm9ncmVzcyAqICh0byAtIGZyb20pICsgZnJvbSkpO1xuXG5cdFx0XHRpZiAocHJvZ3Jlc3MgPCAxKSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuXHRcdH07XG5cblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuXHR9XG5cblx0Ly8gUHVibGljIG1ldGhvZHNcblx0cHVibGljIGNvdW50VXAoKSB7XG5cdFx0dGhpcy5hbmltYXRlKHRoaXMubWluLCB0aGlzLm1heCk7XG5cdH1cblxuXHRwdWJsaWMgY291bnREb3duKCkge1xuXHRcdHRoaXMuYW5pbWF0ZSh0aGlzLm1heCwgdGhpcy5taW4pO1xuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2U/OiBib29sZWFuKSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzVG9nZ2xlQ291bnRDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50XG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzVG9nZ2xlQ291bnRDb2xsZWN0aW9uKSB3aW5kb3cuJGhzVG9nZ2xlQ291bnRDb2xsZWN0aW9uID0gW107XG5cblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhzLXRvZ2dsZS1jb3VudF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhd2luZG93LiRoc1RvZ2dsZUNvdW50Q29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdFx0KGVsQykgPT4gKGVsQz8uZWxlbWVudD8uZWwgYXMgSFRNTEVsZW1lbnQpID09PSBlbCxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRuZXcgSFNUb2dnbGVDb3VudChlbCk7XG5cdFx0XHR9KTtcblx0fVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTVG9nZ2xlQ291bnQ6IEZ1bmN0aW9uO1xuXHRcdCRoc1RvZ2dsZUNvdW50Q29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTVG9nZ2xlQ291bnQ+W107XG5cdH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdEhTVG9nZ2xlQ291bnQuYXV0b0luaXQoKTtcblxuXHQvLyBVbmNvbW1lbnQgZm9yIGRlYnVnXG5cdC8vIGNvbnNvbGUubG9nKCdUb2dnbGUgY291bnQgY29sbGVjdGlvbjonLCB3aW5kb3cuJGhzVG9nZ2xlQ291bnRDb2xsZWN0aW9uKTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTVG9nZ2xlQ291bnQgPSBIU1RvZ2dsZUNvdW50O1xufVxuXG5leHBvcnQgZGVmYXVsdCBIU1RvZ2dsZUNvdW50O1xuIiwgIi8qXG4gKiBIU1RvZ2dsZVBhc3N3b3JkXG4gKiBAdmVyc2lvbjogMi4xLjBcbiAqIEBhdXRob3I6IEhUTUxTdHJlYW1cbiAqIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vcHJlbGluZS5jby9kb2NzL2xpY2Vuc2UuaHRtbClcbiAqIENvcHlyaWdodCAyMDIzIEhUTUxTdHJlYW1cbiAqL1xuXG5pbXBvcnQgeyBpc0Zvcm1FbGVtZW50LCBkaXNwYXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuaW1wb3J0IHsgSVRvZ2dsZVBhc3N3b3JkT3B0aW9ucywgSVRvZ2dsZVBhc3N3b3JkIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5pbXBvcnQgeyBJQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcblxuY2xhc3MgSFNUb2dnbGVQYXNzd29yZFxuXHRleHRlbmRzIEhTQmFzZVBsdWdpbjxJVG9nZ2xlUGFzc3dvcmRPcHRpb25zPlxuXHRpbXBsZW1lbnRzIElUb2dnbGVQYXNzd29yZFxue1xuXHRwcml2YXRlIHJlYWRvbmx5IHRhcmdldDpcblx0XHR8IHN0cmluZ1xuXHRcdHwgc3RyaW5nW11cblx0XHR8IEhUTUxJbnB1dEVsZW1lbnRcblx0XHR8IEhUTUxJbnB1dEVsZW1lbnRbXVxuXHRcdHwgbnVsbDtcblx0cHJpdmF0ZSBpc1Nob3duOiBib29sZWFuO1xuXHRwcml2YXRlIGlzTXVsdGlwbGU6IGJvb2xlYW47XG5cdHByaXZhdGUgZXZlbnRUeXBlOiBzdHJpbmc7XG5cblx0Y29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogSVRvZ2dsZVBhc3N3b3JkT3B0aW9ucykge1xuXHRcdHN1cGVyKGVsLCBvcHRpb25zKTtcblxuXHRcdGNvbnN0IGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHMtdG9nZ2xlLXBhc3N3b3JkJyk7XG5cdFx0Y29uc3QgZGF0YU9wdGlvbnM6IElUb2dnbGVQYXNzd29yZE9wdGlvbnMgPSBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IHt9O1xuXHRcdGNvbnN0IGNvbmNhdE9wdGlvbnMgPSB7XG5cdFx0XHQuLi5kYXRhT3B0aW9ucyxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0fTtcblx0XHRjb25zdCB0YXJnZXRzOiBIVE1MSW5wdXRFbGVtZW50W10gPSBbXTtcblx0XHRpZiAoY29uY2F0T3B0aW9ucz8udGFyZ2V0ICYmIHR5cGVvZiBjb25jYXRPcHRpb25zPy50YXJnZXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRjb25zdCBpZHMgPSBjb25jYXRPcHRpb25zPy50YXJnZXQuc3BsaXQoJywnKTtcblx0XHRcdGlkcy5mb3JFYWNoKChpZCkgPT4ge1xuXHRcdFx0XHR0YXJnZXRzLnB1c2goZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCkgYXMgSFRNTElucHV0RWxlbWVudCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0Y29uY2F0T3B0aW9ucz8udGFyZ2V0ICYmXG5cdFx0XHR0eXBlb2YgY29uY2F0T3B0aW9ucz8udGFyZ2V0ID09PSAnb2JqZWN0J1xuXHRcdCkge1xuXHRcdFx0KGNvbmNhdE9wdGlvbnMudGFyZ2V0IGFzIHN0cmluZ1tdKS5mb3JFYWNoKChlbCkgPT5cblx0XHRcdFx0dGFyZ2V0cy5wdXNoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpKSxcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdChjb25jYXRPcHRpb25zLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50W10pLmZvckVhY2goKGVsKSA9PlxuXHRcdFx0XHR0YXJnZXRzLnB1c2goZWwpLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHR0aGlzLnRhcmdldCA9IHRhcmdldHM7XG5cdFx0dGhpcy5pc1Nob3duID0gdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKVxuXHRcdFx0PyAodGhpcy5lbCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkXG5cdFx0XHQ6IGZhbHNlO1xuXHRcdHRoaXMuZXZlbnRUeXBlID0gaXNGb3JtRWxlbWVudCh0aGlzLmVsKSA/ICdjaGFuZ2UnIDogJ2NsaWNrJztcblx0XHR0aGlzLmlzTXVsdGlwbGUgPVxuXHRcdFx0dGhpcy50YXJnZXQubGVuZ3RoID4gMSAmJlxuXHRcdFx0ISF0aGlzLmVsLmNsb3Nlc3QoJ1tkYXRhLWhzLXRvZ2dsZS1wYXNzd29yZC1ncm91cF0nKTtcblxuXHRcdGlmICh0aGlzLnRhcmdldCkgdGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKSB7XG5cdFx0dGhpcy5jcmVhdGVDb2xsZWN0aW9uKHdpbmRvdy4kaHNUb2dnbGVQYXNzd29yZENvbGxlY3Rpb24sIHRoaXMpO1xuXG5cdFx0aWYgKCF0aGlzLmlzU2hvd24pIHtcblx0XHRcdHRoaXMuaGlkZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNob3coKTtcblx0XHR9XG5cblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmlzU2hvd24pIHtcblx0XHRcdFx0dGhpcy5oaWRlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNob3coKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5maXJlRXZlbnQoJ3RvZ2dsZScsIHRoaXMudGFyZ2V0KTtcblx0XHRcdGRpc3BhdGNoKCd0b2dnbGUuaHMudG9nZ2xlLXNlbGVjdCcsIHRoaXMuZWwsIHRoaXMudGFyZ2V0KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0TXVsdGlwbGVUb2dnbGVzKCk6IEhTVG9nZ2xlUGFzc3dvcmRbXSB7XG5cdFx0Y29uc3QgZ3JvdXAgPSB0aGlzLmVsLmNsb3Nlc3QoJ1tkYXRhLWhzLXRvZ2dsZS1wYXNzd29yZC1ncm91cF0nKTtcblx0XHRjb25zdCB0b2dnbGVzID0gZ3JvdXAucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHMtdG9nZ2xlLXBhc3N3b3JkXScpO1xuXHRcdGNvbnN0IHRvZ2dsZXNJbkNvbGxlY3Rpb246IEhTVG9nZ2xlUGFzc3dvcmRbXSA9IFtdO1xuXG5cdFx0dG9nZ2xlcy5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdHRvZ2dsZXNJbkNvbGxlY3Rpb24ucHVzaChcblx0XHRcdFx0SFNUb2dnbGVQYXNzd29yZC5nZXRJbnN0YW5jZShlbCkgYXMgSFNUb2dnbGVQYXNzd29yZCxcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gdG9nZ2xlc0luQ29sbGVjdGlvbjtcblx0fVxuXG5cdC8vIFB1YmxpYyBtZXRob2RzXG5cdHB1YmxpYyBzaG93KCkge1xuXHRcdGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcblx0XHRcdGNvbnN0IHRvZ2dsZXMgPSB0aGlzLmdldE11bHRpcGxlVG9nZ2xlcygpO1xuXG5cdFx0XHR0b2dnbGVzLmZvckVhY2goKGVsOiBIU1RvZ2dsZVBhc3N3b3JkKSA9PlxuXHRcdFx0XHRlbCA/IChlbC5pc1Nob3duID0gdHJ1ZSkgOiBmYWxzZSxcblx0XHRcdCk7XG5cblx0XHRcdHRoaXMuZWxcblx0XHRcdFx0LmNsb3Nlc3QoJ1tkYXRhLWhzLXRvZ2dsZS1wYXNzd29yZC1ncm91cF0nKVxuXHRcdFx0XHQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuaXNTaG93biA9IHRydWU7XG5cblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0fVxuXHRcdCh0aGlzLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50W10pLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHQoZWwgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSA9ICd0ZXh0Jztcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBoaWRlKCkge1xuXHRcdGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcblx0XHRcdGNvbnN0IHRvZ2dsZXMgPSB0aGlzLmdldE11bHRpcGxlVG9nZ2xlcygpO1xuXG5cdFx0XHR0b2dnbGVzLmZvckVhY2goKGVsOiBIU1RvZ2dsZVBhc3N3b3JkKSA9PlxuXHRcdFx0XHRlbCA/IChlbC5pc1Nob3duID0gZmFsc2UpIDogZmFsc2UsXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLmVsXG5cdFx0XHRcdC5jbG9zZXN0KCdbZGF0YS1ocy10b2dnbGUtcGFzc3dvcmQtZ3JvdXBdJylcblx0XHRcdFx0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmlzU2hvd24gPSBmYWxzZTtcblxuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHR9XG5cdFx0KHRoaXMudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnRbXSkuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdChlbCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlID0gJ3Bhc3N3b3JkJztcblx0XHR9KTtcblx0fVxuXG5cdC8vIFN0YXRpYyBtZXRob2RzXG5cdHN0YXRpYyBnZXRJbnN0YW5jZSh0YXJnZXQ6IEhUTUxFbGVtZW50IHwgc3RyaW5nLCBpc0luc3RhbmNlPzogYm9vbGVhbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1RvZ2dsZVBhc3N3b3JkQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gZWxJbkNvbGxlY3Rpb25cblx0XHRcdD8gaXNJbnN0YW5jZVxuXHRcdFx0XHQ/IGVsSW5Db2xsZWN0aW9uXG5cdFx0XHRcdDogZWxJbkNvbGxlY3Rpb24uZWxlbWVudFxuXHRcdFx0OiBudWxsO1xuXHR9XG5cblx0c3RhdGljIGF1dG9Jbml0KCkge1xuXHRcdGlmICghd2luZG93LiRoc1RvZ2dsZVBhc3N3b3JkQ29sbGVjdGlvbilcblx0XHRcdHdpbmRvdy4kaHNUb2dnbGVQYXNzd29yZENvbGxlY3Rpb24gPSBbXTtcblxuXHRcdGRvY3VtZW50XG5cdFx0XHQucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdFx0J1tkYXRhLWhzLXRvZ2dsZS1wYXNzd29yZF06bm90KC4tLXByZXZlbnQtb24tbG9hZC1pbml0KScsXG5cdFx0XHQpXG5cdFx0XHQuZm9yRWFjaCgoZWw6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCF3aW5kb3cuJGhzVG9nZ2xlUGFzc3dvcmRDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHRcdFx0XHQoZWxDKSA9PiAoZWxDPy5lbGVtZW50Py5lbCBhcyBIVE1MRWxlbWVudCkgPT09IGVsLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0KVxuXHRcdFx0XHRcdG5ldyBIU1RvZ2dsZVBhc3N3b3JkKGVsKTtcblx0XHRcdH0pO1xuXHR9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcblx0aW50ZXJmYWNlIFdpbmRvdyB7XG5cdFx0SFNUb2dnbGVQYXNzd29yZDogRnVuY3Rpb247XG5cdFx0JGhzVG9nZ2xlUGFzc3dvcmRDb2xsZWN0aW9uOiBJQ29sbGVjdGlvbkl0ZW08SFNUb2dnbGVQYXNzd29yZD5bXTtcblx0fVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcblx0SFNUb2dnbGVQYXNzd29yZC5hdXRvSW5pdCgpO1xuXG5cdC8vIFVuY29tbWVudCBmb3IgZGVidWdcblx0Ly8gY29uc29sZS5sb2coJ1RvZ2dsZSBwYXNzd29yZCBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNUb2dnbGVQYXNzd29yZENvbGxlY3Rpb24pO1xufSk7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHR3aW5kb3cuSFNUb2dnbGVQYXNzd29yZCA9IEhTVG9nZ2xlUGFzc3dvcmQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTVG9nZ2xlUGFzc3dvcmQ7XG4iLCAiLypcbiAqIEhTVG9vbHRpcFxuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlUG9wcGVyLCBQb3NpdGlvbmluZ1N0cmF0ZWd5LCBJbnN0YW5jZSB9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcbmltcG9ydCB7IGdldENsYXNzUHJvcGVydHksIGRpc3BhdGNoLCBhZnRlclRyYW5zaXRpb24gfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmltcG9ydCB7IElUb29sdGlwIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IEhTQmFzZVBsdWdpbiBmcm9tICcuLi9iYXNlLXBsdWdpbic7XG5pbXBvcnQgeyBJQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcblxuaW1wb3J0IHsgUE9TSVRJT05TIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJztcblxuY2xhc3MgSFNUb29sdGlwIGV4dGVuZHMgSFNCYXNlUGx1Z2luPHt9PiBpbXBsZW1lbnRzIElUb29sdGlwIHtcblx0cHJpdmF0ZSByZWFkb25seSB0b2dnbGU6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cHVibGljIGNvbnRlbnQ6IEhUTUxFbGVtZW50IHwgbnVsbDtcblx0cmVhZG9ubHkgZXZlbnRNb2RlOiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgcHJldmVudFBvcHBlcjogc3RyaW5nO1xuXHRwcml2YXRlIHBvcHBlckluc3RhbmNlOiBJbnN0YW5jZTtcblx0cHJpdmF0ZSByZWFkb25seSBwbGFjZW1lbnQ6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBzdHJhdGVneTogUG9zaXRpb25pbmdTdHJhdGVneTtcblxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiB7fSwgZXZlbnRzPzoge30pIHtcblx0XHRzdXBlcihlbCwgb3B0aW9ucywgZXZlbnRzKTtcblxuXHRcdGlmICh0aGlzLmVsKSB7XG5cdFx0XHR0aGlzLnRvZ2dsZSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmhzLXRvb2x0aXAtdG9nZ2xlJykgfHwgdGhpcy5lbDtcblx0XHRcdHRoaXMuY29udGVudCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmhzLXRvb2x0aXAtY29udGVudCcpO1xuXHRcdFx0dGhpcy5ldmVudE1vZGUgPSBnZXRDbGFzc1Byb3BlcnR5KHRoaXMuZWwsICctLXRyaWdnZXInKSB8fCAnaG92ZXInO1xuXHRcdFx0dGhpcy5wcmV2ZW50UG9wcGVyID0gZ2V0Q2xhc3NQcm9wZXJ0eShcblx0XHRcdFx0dGhpcy5lbCxcblx0XHRcdFx0Jy0tcHJldmVudC1wb3BwZXInLFxuXHRcdFx0XHQnZmFsc2UnLFxuXHRcdFx0KTtcblx0XHRcdHRoaXMucGxhY2VtZW50ID0gZ2V0Q2xhc3NQcm9wZXJ0eSh0aGlzLmVsLCAnLS1wbGFjZW1lbnQnKTtcblx0XHRcdHRoaXMuc3RyYXRlZ3kgPSBnZXRDbGFzc1Byb3BlcnR5KFxuXHRcdFx0XHR0aGlzLmVsLFxuXHRcdFx0XHQnLS1zdHJhdGVneScsXG5cdFx0XHQpIGFzIFBvc2l0aW9uaW5nU3RyYXRlZ3k7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuZWwgJiYgdGhpcy50b2dnbGUgJiYgdGhpcy5jb250ZW50KSB0aGlzLmluaXQoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpIHtcblx0XHR0aGlzLmNyZWF0ZUNvbGxlY3Rpb24od2luZG93LiRoc1Rvb2x0aXBDb2xsZWN0aW9uLCB0aGlzKTtcblxuXHRcdGlmICh0aGlzLmV2ZW50TW9kZSA9PT0gJ2NsaWNrJykge1xuXHRcdFx0dGhpcy50b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsaWNrKCkpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5ldmVudE1vZGUgPT09ICdmb2N1cycpIHtcblx0XHRcdHRoaXMudG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5mb2N1cygpKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuZXZlbnRNb2RlID09PSAnaG92ZXInKSB7XG5cdFx0XHR0aGlzLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gdGhpcy5lbnRlcigpKTtcblx0XHRcdHRoaXMudG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB0aGlzLmxlYXZlKCkpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnByZXZlbnRQb3BwZXIgPT09ICdmYWxzZScpIHRoaXMuYnVpbGRQb3BwZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgZW50ZXIoKSB7XG5cdFx0dGhpcy5zaG93KCk7XG5cdH1cblxuXHRwcml2YXRlIGxlYXZlKCkge1xuXHRcdHRoaXMuaGlkZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBjbGljaygpIHtcblx0XHRpZiAodGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0dGhpcy5zaG93KCk7XG5cblx0XHRjb25zdCBoYW5kbGUgPSAoKSA9PiB7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0dGhpcy5oaWRlKCk7XG5cblx0XHRcdFx0dGhpcy50b2dnbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGUsIHRydWUpO1xuXHRcdFx0XHR0aGlzLnRvZ2dsZS5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgaGFuZGxlLCB0cnVlKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHR0aGlzLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZSwgdHJ1ZSk7XG5cdFx0dGhpcy50b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGhhbmRsZSwgdHJ1ZSk7XG5cdH1cblxuXHRwcml2YXRlIGZvY3VzKCkge1xuXHRcdHRoaXMuc2hvdygpO1xuXG5cdFx0Y29uc3QgaGFuZGxlID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5oaWRlKCk7XG5cblx0XHRcdHRoaXMudG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGUsIHRydWUpO1xuXHRcdH07XG5cblx0XHR0aGlzLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgaGFuZGxlLCB0cnVlKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRQb3BwZXIoKSB7XG5cdFx0dGhpcy5wb3BwZXJJbnN0YW5jZSA9IGNyZWF0ZVBvcHBlcih0aGlzLnRvZ2dsZSwgdGhpcy5jb250ZW50LCB7XG5cdFx0XHRwbGFjZW1lbnQ6IFBPU0lUSU9OU1t0aGlzLnBsYWNlbWVudF0gfHwgJ3RvcCcsXG5cdFx0XHRzdHJhdGVneTogdGhpcy5zdHJhdGVneSB8fCAnZml4ZWQnLFxuXHRcdFx0bW9kaWZpZXJzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiAnb2Zmc2V0Jyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHRvZmZzZXQ6IFswLCA1XSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9KTtcblx0fVxuXG5cdC8vIFB1YmxpYyBtZXRob2RzXG5cdHB1YmxpYyBzaG93KCkge1xuXHRcdHRoaXMuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblxuXHRcdGlmICh0aGlzLnByZXZlbnRQb3BwZXIgPT09ICdmYWxzZScpIHtcblx0XHRcdHRoaXMucG9wcGVySW5zdGFuY2Uuc2V0T3B0aW9ucygob3B0aW9ucykgPT4gKHtcblx0XHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdFx0bW9kaWZpZXJzOiBbXG5cdFx0XHRcdFx0Li4ub3B0aW9ucy5tb2RpZmllcnMsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogJ2V2ZW50TGlzdGVuZXJzJyxcblx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XSxcblx0XHRcdH0pKTtcblxuXHRcdFx0dGhpcy5wb3BwZXJJbnN0YW5jZS51cGRhdGUoKTtcblx0XHR9XG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXG5cdFx0XHR0aGlzLmZpcmVFdmVudCgnc2hvdycsIHRoaXMuZWwpO1xuXHRcdFx0ZGlzcGF0Y2goJ3Nob3cuaHMudG9vbHRpcCcsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGhpZGUoKSB7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG5cblx0XHRpZiAodGhpcy5wcmV2ZW50UG9wcGVyID09PSAnZmFsc2UnKSB7XG5cdFx0XHR0aGlzLnBvcHBlckluc3RhbmNlLnNldE9wdGlvbnMoKG9wdGlvbnMpID0+ICh7XG5cdFx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRcdG1vZGlmaWVyczogW1xuXHRcdFx0XHRcdC4uLm9wdGlvbnMubW9kaWZpZXJzLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6ICdldmVudExpc3RlbmVycycsXG5cdFx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRdLFxuXHRcdFx0fSkpO1xuXHRcdH1cblxuXHRcdHRoaXMuZmlyZUV2ZW50KCdoaWRlJywgdGhpcy5lbCk7XG5cdFx0ZGlzcGF0Y2goJ2hpZGUuaHMudG9vbHRpcCcsIHRoaXMuZWwsIHRoaXMuZWwpO1xuXG5cdFx0YWZ0ZXJUcmFuc2l0aW9uKHRoaXMuY29udGVudCwgKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0dGhpcy5jb250ZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gU3RhdGljIG1ldGhvZHNcblx0c3RhdGljIGdldEluc3RhbmNlKHRhcmdldDogSFRNTEVsZW1lbnQgfCBzdHJpbmcsIGlzSW5zdGFuY2UgPSBmYWxzZSkge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1Rvb2x0aXBDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdHJldHVybiBlbEluQ29sbGVjdGlvblxuXHRcdFx0PyBpc0luc3RhbmNlXG5cdFx0XHRcdD8gZWxJbkNvbGxlY3Rpb25cblx0XHRcdFx0OiBlbEluQ29sbGVjdGlvbi5lbGVtZW50LmVsXG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRzdGF0aWMgYXV0b0luaXQoKSB7XG5cdFx0aWYgKCF3aW5kb3cuJGhzVG9vbHRpcENvbGxlY3Rpb24pIHdpbmRvdy4kaHNUb29sdGlwQ29sbGVjdGlvbiA9IFtdO1xuXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhzLXRvb2x0aXAnKS5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdGlmIChcblx0XHRcdFx0IXdpbmRvdy4kaHNUb29sdGlwQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0XHRcdChlbEMpID0+IChlbEM/LmVsZW1lbnQ/LmVsIGFzIEhUTUxFbGVtZW50KSA9PT0gZWwsXG5cdFx0XHRcdClcblx0XHRcdClcblx0XHRcdFx0bmV3IEhTVG9vbHRpcChlbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRzdGF0aWMgc2hvdyh0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgZWxJbkNvbGxlY3Rpb24gPSB3aW5kb3cuJGhzVG9vbHRpcENvbGxlY3Rpb24uZmluZChcblx0XHRcdChlbCkgPT5cblx0XHRcdFx0ZWwuZWxlbWVudC5lbCA9PT1cblx0XHRcdFx0KHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0KSxcblx0XHQpO1xuXG5cdFx0aWYgKGVsSW5Db2xsZWN0aW9uKSB7XG5cdFx0XHRzd2l0Y2ggKGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuZXZlbnRNb2RlKSB7XG5cdFx0XHRcdGNhc2UgJ2NsaWNrJzpcblx0XHRcdFx0XHRlbEluQ29sbGVjdGlvbi5lbGVtZW50LmNsaWNrKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ2ZvY3VzJzpcblx0XHRcdFx0XHRlbEluQ29sbGVjdGlvbi5lbGVtZW50LmZvY3VzKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0ZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5lbnRlcigpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBoaWRlKHRhcmdldDogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBlbEluQ29sbGVjdGlvbiA9IHdpbmRvdy4kaHNUb29sdGlwQ29sbGVjdGlvbi5maW5kKFxuXHRcdFx0KGVsKSA9PlxuXHRcdFx0XHRlbC5lbGVtZW50LmVsID09PVxuXHRcdFx0XHQodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQpLFxuXHRcdCk7XG5cblx0XHRpZiAoZWxJbkNvbGxlY3Rpb24pIGVsSW5Db2xsZWN0aW9uLmVsZW1lbnQuaGlkZSgpO1xuXHR9XG5cblx0Ly8gQmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXHRzdGF0aWMgb24oZXZ0OiBzdHJpbmcsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNiOiBGdW5jdGlvbikge1xuXHRcdGNvbnN0IGVsSW5Db2xsZWN0aW9uID0gd2luZG93LiRoc1Rvb2x0aXBDb2xsZWN0aW9uLmZpbmQoXG5cdFx0XHQoZWwpID0+XG5cdFx0XHRcdGVsLmVsZW1lbnQuZWwgPT09XG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldCksXG5cdFx0KTtcblxuXHRcdGlmIChlbEluQ29sbGVjdGlvbikgZWxJbkNvbGxlY3Rpb24uZWxlbWVudC5ldmVudHNbZXZ0XSA9IGNiO1xuXHR9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcblx0aW50ZXJmYWNlIFdpbmRvdyB7XG5cdFx0SFNUb29sdGlwOiBGdW5jdGlvbjtcblx0XHQkaHNUb29sdGlwQ29sbGVjdGlvbjogSUNvbGxlY3Rpb25JdGVtPEhTVG9vbHRpcD5bXTtcblx0fVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcblx0SFNUb29sdGlwLmF1dG9Jbml0KCk7XG5cblx0Ly8gVW5jb21tZW50IGZvciBkZWJ1Z1xuXHQvLyBjb25zb2xlLmxvZygnVG9vbHRpcCBjb2xsZWN0aW9uOicsIHdpbmRvdy4kaHNUb29sdGlwQ29sbGVjdGlvbik7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdpbmRvdy5IU1Rvb2x0aXAgPSBIU1Rvb2x0aXA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhTVG9vbHRpcDtcbiIsICJpbXBvcnQgeyBJU3BhQ29sbGVjdGlvbkl0ZW0gfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgSFNDb3B5TWFya3VwIGZyb20gJy4uL3BsdWdpbnMvY29weS1tYXJrdXAnO1xuaW1wb3J0IEhTQWNjb3JkaW9uIGZyb20gJy4uL3BsdWdpbnMvYWNjb3JkaW9uJztcbmltcG9ydCBIU0Nhcm91c2VsIGZyb20gJy4uL3BsdWdpbnMvY2Fyb3VzZWwnO1xuaW1wb3J0IEhTQ29sbGFwc2UgZnJvbSAnLi4vcGx1Z2lucy9jb2xsYXBzZSc7XG5pbXBvcnQgSFNDb21ib0JveCBmcm9tICcuLi9wbHVnaW5zL2NvbWJvYm94JztcbmltcG9ydCBIU0Ryb3Bkb3duIGZyb20gJy4uL3BsdWdpbnMvZHJvcGRvd24nO1xuaW1wb3J0IEhTSW5wdXROdW1iZXIgZnJvbSAnLi4vcGx1Z2lucy9pbnB1dC1udW1iZXInO1xuaW1wb3J0IEhTT3ZlcmxheSBmcm9tICcuLi9wbHVnaW5zL292ZXJsYXknO1xuaW1wb3J0IEhTUGluSW5wdXQgZnJvbSAnLi4vcGx1Z2lucy9waW4taW5wdXQnO1xuaW1wb3J0IEhTUmVtb3ZlRWxlbWVudCBmcm9tICcuLi9wbHVnaW5zL3JlbW92ZS1lbGVtZW50JztcbmltcG9ydCBIU1Njcm9sbHNweSBmcm9tICcuLi9wbHVnaW5zL3Njcm9sbHNweSc7XG5pbXBvcnQgSFNTZWxlY3QgZnJvbSAnLi4vcGx1Z2lucy9zZWxlY3QnO1xuaW1wb3J0IEhTU3RlcHBlciBmcm9tICcuLi9wbHVnaW5zL3N0ZXBwZXInO1xuaW1wb3J0IEhTU3Ryb25nUGFzc3dvcmQgZnJvbSAnLi4vcGx1Z2lucy9zdHJvbmctcGFzc3dvcmQnO1xuaW1wb3J0IEhTVGFicyBmcm9tICcuLi9wbHVnaW5zL3RhYnMnO1xuaW1wb3J0IEhTVG9nZ2xlQ291bnQgZnJvbSAnLi4vcGx1Z2lucy90b2dnbGUtY291bnQnO1xuaW1wb3J0IEhTVG9nZ2xlUGFzc3dvcmQgZnJvbSAnLi4vcGx1Z2lucy90b2dnbGUtcGFzc3dvcmQnO1xuaW1wb3J0IEhTVG9vbHRpcCBmcm9tICcuLi9wbHVnaW5zL3Rvb2x0aXAnO1xuXG5leHBvcnQgY29uc3QgQ09MTEVDVElPTlM6IElTcGFDb2xsZWN0aW9uSXRlbVtdID0gW1xuXHR7IGtleTogJ2NvcHktbWFya3VwJywgZm46IEhTQ29weU1hcmt1cCB9LFxuXHR7IGtleTogJ2FjY29yZGlvbicsIGZuOiBIU0FjY29yZGlvbiB9LFxuXHR7IGtleTogJ2Nhcm91c2VsJywgZm46IEhTQ2Fyb3VzZWwgfSxcblx0eyBrZXk6ICdjb2xsYXBzZScsIGZuOiBIU0NvbGxhcHNlIH0sXG5cdHsga2V5OiAnY29tYm9ib3gnLCBmbjogSFNDb21ib0JveCB9LFxuXHR7IGtleTogJ2Ryb3Bkb3duJywgZm46IEhTRHJvcGRvd24gfSxcblx0eyBrZXk6ICdpbnB1dC1udW1iZXInLCBmbjogSFNJbnB1dE51bWJlciB9LFxuXHR7IGtleTogJ292ZXJsYXknLCBmbjogSFNPdmVybGF5IH0sXG5cdHsga2V5OiAncGluLWlucHV0JywgZm46IEhTUGluSW5wdXQgfSxcblx0eyBrZXk6ICdyZW1vdmUtZWxlbWVudCcsIGZuOiBIU1JlbW92ZUVsZW1lbnQgfSxcblx0eyBrZXk6ICdzY3JvbGxzcHknLCBmbjogSFNTY3JvbGxzcHkgfSxcblx0eyBrZXk6ICdzZWxlY3QnLCBmbjogSFNTZWxlY3QgfSxcblx0eyBrZXk6ICdzdGVwcGVyJywgZm46IEhTU3RlcHBlciB9LFxuXHR7IGtleTogJ3N0cm9uZy1wYXNzd29yZCcsIGZuOiBIU1N0cm9uZ1Bhc3N3b3JkIH0sXG5cdHsga2V5OiAndGFicycsIGZuOiBIU1RhYnMgfSxcblx0eyBrZXk6ICd0b2dnbGUtY291bnQnLCBmbjogSFNUb2dnbGVDb3VudCB9LFxuXHR7IGtleTogJ3RvZ2dsZS1wYXNzd29yZCcsIGZuOiBIU1RvZ2dsZVBhc3N3b3JkIH0sXG5cdHsga2V5OiAndG9vbHRpcCcsIGZuOiBIU1Rvb2x0aXAgfSxcbl07XG4iLCAiLypcbiAqIEhTU3RhdGljTWV0aG9kc1xuICogQHZlcnNpb246IDIuMS4wXG4gKiBAYXV0aG9yOiBIVE1MU3RyZWFtXG4gKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL3ByZWxpbmUuY28vZG9jcy9saWNlbnNlLmh0bWwpXG4gKiBDb3B5cmlnaHQgMjAyMyBIVE1MU3RyZWFtXG4gKi9cblxuaW1wb3J0IHsgZ2V0Q2xhc3NQcm9wZXJ0eSwgYWZ0ZXJUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgQ09MTEVDVElPTlMgfSBmcm9tICcuLi9zcGEnO1xuaW1wb3J0IHsgSVN0YXRpY01ldGhvZHMgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG5cdGludGVyZmFjZSBXaW5kb3cge1xuXHRcdEhTU3RhdGljTWV0aG9kczogSVN0YXRpY01ldGhvZHM7XG5cdH1cbn1cblxuY29uc3QgSFNTdGF0aWNNZXRob2RzOiBJU3RhdGljTWV0aG9kcyA9IHtcblx0Z2V0Q2xhc3NQcm9wZXJ0eSxcblx0YWZ0ZXJUcmFuc2l0aW9uLFxuXHRhdXRvSW5pdChjb2xsZWN0aW9uOiBzdHJpbmcgfCBzdHJpbmdbXSA9ICdhbGwnKSB7XG5cdFx0aWYgKGNvbGxlY3Rpb24gPT09ICdhbGwnKSB7XG5cdFx0XHRDT0xMRUNUSU9OUy5mb3JFYWNoKCh7IGZuIH0pID0+IHtcblx0XHRcdFx0Zm4/LmF1dG9Jbml0KCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Q09MTEVDVElPTlMuZm9yRWFjaCgoeyBrZXksIGZuIH0pID0+IHtcblx0XHRcdFx0aWYgKGNvbGxlY3Rpb24uaW5jbHVkZXMoa2V5KSkgZm4/LmF1dG9Jbml0KCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG59O1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0d2luZG93LkhTU3RhdGljTWV0aG9kcyA9IEhTU3RhdGljTWV0aG9kcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgSFNTdGF0aWNNZXRob2RzO1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQU1BLE9BQUMsU0FBVUEsU0FBUUMsV0FBVTtBQUMzQjtBQUdBLFNBQUMsV0FBWTtBQUNYLGNBQUksV0FBVztBQUNmLGNBQUksVUFBVSxDQUFDLE1BQU0sT0FBTyxVQUFVLEdBQUc7QUFDekMsbUJBQVMsSUFBSSxHQUFHLElBQUksUUFBUSxVQUFVLENBQUNELFFBQU8sdUJBQXVCLEVBQUUsR0FBRztBQUN4RSxZQUFBQSxRQUFPLHdCQUNMQSxRQUFPLFFBQVEsQ0FBQyxJQUFJLHVCQUF1QjtBQUM3QyxZQUFBQSxRQUFPLHVCQUNMQSxRQUFPLFFBQVEsQ0FBQyxJQUFJLHNCQUFzQixLQUMxQ0EsUUFBTyxRQUFRLENBQUMsSUFBSSw2QkFBNkI7QUFBQSxVQUNyRDtBQUNBLGNBQUksQ0FBQ0EsUUFBTztBQUNWLFlBQUFBLFFBQU8sd0JBQXdCLFNBQVUsVUFBVSxTQUFTO0FBQzFELGtCQUFJLFlBQVcsb0JBQUksS0FBSyxHQUFFLFFBQVE7QUFDbEMsa0JBQUksYUFBYSxLQUFLLElBQUksR0FBRyxNQUFNLFdBQVcsU0FBUztBQUN2RCxrQkFBSSxLQUFL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QUFJLE9BQU87IiwKICAibmFtZXMiOiBbIndpbmRvdyIsICJkb2N1bWVudCIsICJ0b3BiYXIiLCAiQ3VzdG9tRXZlbnQiLCAiY2xvc3VyZSIsICJvZmZzZXQiLCAibGl2ZVNvY2tldCIsICJjbG9zdXJlIiwgImxvY2FsU3RvcmFnZSIsICJoYXNoIiwgImh0bWwiLCAiZGVib3VuY2UiLCAiaHRtbCIsICJzdGFydCIsICJlbmQiLCAiZWwiLCAiaXRlbXMiLCAidG9wIiwgImJvdHRvbSIsICJuYW1lIiwgInN0eWxlIiwgImdldENvbXB1dGVkU3R5bGUiLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJ3aW5kb3ciLCAibWluIiwgIm1heCIsICJ0b1BhZGRpbmdPYmplY3QiLCAicG9wcGVyT2Zmc2V0cyIsICJ0b3AiLCAiYm90dG9tIiwgIm1pbiIsICJtYXgiLCAib2Zmc2V0IiwgImVmZmVjdCIsICJwb3BwZXIiLCAidG9wIiwgImdldENvbXB1dGVkU3R5bGUiLCAiYm90dG9tIiwgImVmZmVjdCIsICJ3aW5kb3ciLCAiaGFzaCIsICJzY3JvbGxUb3AiLCAiaHRtbCIsICJodG1sIiwgImdldENvbXB1dGVkU3R5bGUiLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJjbGlwcGluZ1BhcmVudHMiLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJyZWZlcmVuY2UiLCAidG9wIiwgImJvdHRvbSIsICJwb3BwZXJPZmZzZXRzIiwgIm9mZnNldCIsICJib3R0b20iLCAidG9wIiwgInBsYWNlbWVudHMiLCAicGxhY2VtZW50IiwgInBsYWNlbWVudHMiLCAicGxhY2VtZW50IiwgInRvcCIsICJib3R0b20iLCAiX2xvb3AiLCAiX2kiLCAiY2hlY2tzIiwgInRvcCIsICJib3R0b20iLCAib2Zmc2V0IiwgInRvcCIsICJwb3BwZXJPZmZzZXRzIiwgInRvcCIsICJib3R0b20iLCAib2Zmc2V0IiwgIm1pbiIsICJtYXgiLCAiZGVib3VuY2UiLCAiZm4iLCAibWVyZ2VkIiwgImRlZmF1bHRNb2RpZmllcnMiLCAiY3JlYXRlUG9wcGVyIiwgInJlZmVyZW5jZSIsICJwb3BwZXIiLCAib3B0aW9ucyIsICJmbiIsICJkZWJvdW5jZSIsICJzdGF0ZSIsICJlZmZlY3QiLCAibm9vcEZuIiwgImZsaXAiLCAib2Zmc2V0IiwgInRlbXBsYXRlIiwgImVsIiwgImVsIiwgImh0bWwiLCAiZWwiLCAiZm4iLCAidG9wYmFyIl0KfQo=
